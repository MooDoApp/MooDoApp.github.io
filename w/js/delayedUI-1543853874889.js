(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{429:function(e,t,a){"use strict";var n=a(0),o=a(4),i=a(2),r=a.n(i),s=a(13),l=a(5),c=a(3),u=a(52),d=a(8);function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,f(t).apply(this,arguments))}var a,i,m;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,s["a"]),a=t,(i=[{key:"close",value:function(e){c.a.isMobile&&l.a.closeKeyboard(),this.props.onClose&&this.props.onClose(),o.default.menus.closeModal(this.props.modalID,e)}},{key:"onCloseButton",value:function(e){this.props.onCloseButton?this.props.onCloseButton():this.close()}},{key:"onEscapeKey",value:function(){this.props.noCancel||this.close()}},{key:"render",value:function(){var e,t,a,o=this.props,i=this.getChildByKey("sidebar"),s=this.getChildByKey("content"),l=this.getChildByKey("buttons"),m=c.a.isMobile,p={maxHeight:!c.a.isMobile&&o.height?"85%":null},h=n.default.classNames("fancyModal c-bg-app popup c-shadow-popup",o.className,{"flexbox flexvert":c.a.isMobile},{small:o.small},{hasSidebar:!!i},{hasTitle:m&&!!o.title},{hasButtons:!!l}),f=n.default.classNames("fancyModalWrapper",{"small flexbox":o.small}),g=n.default.classNames("fancyModalContent c-border c-background f1",s.props.className),y=c.a.isMobile?n.default.topBarHeight:36,v=r.a.createElement(o.scrollable?u.a:"div",{className:g},s.props.children||s);if(c.a.isMobile)return o.confirmIcon?e=r.a.createElement(d.a,{className:"fancyModalMobileConfirm",icon:o.confirmIcon,iconSize:20,width:y,height:y,onClick:o.onConfirm}):o.confirmText&&(e=r.a.createElement(d.a,{className:"fancyModalMobileConfirm",width:o.topButtonWidth,fontSize:14,height:y,onClick:o.onConfirm},o.confirmText)),!1!==o.closeButton&&(t=n.default.isString(o.closeButton)?r.a.createElement(d.a,{className:"fancyModalClose",width:o.topButtonWidth,fontSize:14,height:y,onClick:this.onCloseButton},o.closeButton):r.a.createElement(d.a,{className:"fancyModalClose",icon:"icon-close",iconSize:20,width:y,height:y,onClick:this.onCloseButton})),r.a.createElement("span",{className:f},r.a.createElement("div",{className:h,style:p,id:o.id},r.a.createElement("div",{className:"flexbox"},t,r.a.createElement("div",{className:"fancyModalTitle f1"},o.title),e),v));if(o.small||(p.width=o.width,p.height=o.height,p.minWidth=o.minWidth),i){var E={width:o.sidebarWidth||180};a=r.a.createElement("div",{className:"fancyModalSidebar",style:E},i.props.children)}return r.a.createElement("span",{className:f},!o.noBackdrop&&r.a.createElement("div",{className:"fancyModalBackdrop",onClick:!1!==o.backdropClose?this.close.bind(this,!1):void 0}),r.a.createElement("div",{className:h,style:p,id:o.id},m&&!1!==o.closeButton&&r.a.createElement(d.a,{className:"fancyModalClose",icon:"icon-close",iconSize:20,width:y,height:y,onClick:this.onCloseButton,tooltip:"Close"}),m&&o.title&&r.a.createElement("div",{className:"fancyModalTitle"},o.title),r.a.createElement("div",{className:"fancyModalInside flexbox flex1"},a,r.a.createElement("div",{className:"fancyModalContentArea c-border-light c-background flexbox flexvert f1"},v,l&&r.a.createElement("div",{className:n.default.classNames("fancyModalButtons c-background")},l)))))}}])&&p(a.prototype,i),m&&p(a,m),t}();t.a=y},430:function(e,t,a){"use strict";var n=a(0),o=a(2),i=a.n(o),r=a(13);function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var a,o,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["a"]),a=t,(o=[{key:"render",value:function(){var e=n.default.classNames("fancyTable c-border-heavy",this.props.className);return i.a.createElement("div",{className:e,id:this.props.id},this.props.children)}}])&&l(a.prototype,o),s&&l(a,s),t}();t.a=m},431:function(e,t,a){"use strict";var n=a(0),o=a(2),i=a.n(o),r=a(65),s=a(13);function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var a,n,o=function(e,t){var a=0;if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;n=r[o],t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var i=0,r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++){if(i++>5e3&&__infLoop&&__infLoop(i))throw new RangeError;a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}}return o}function d(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,p(t).apply(this,arguments))}var a,o,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,s["a"]),a=t,(o=[{key:"render",value:function(){var e=this.props,t=e.header,a=(e.clickable,e.subtext,u(e,["header","clickable","subtext"])),o=n.default.classNames("fancyListItem",{"header c-foreground-very-faded":e.header},{clickable:!e.header&&!1!==e.clickable},{"selected c-background c-border-light":e.selected},{subtext:e.subtext},e.className);return!1!==e.ripple&&!t&&!1!==e.clickable?i.a.createElement(r.a,c({},a,{className:o}),e.children):i.a.createElement("div",c({},a,{className:o}),this.props.children)}}])&&d(a.prototype,o),l&&d(a,l),t}();t.a=f},432:function(e,t,a){"use strict";var n=a(0),o=a(1),i=a(4),r=a(2),s=a.n(r),l=a(13),c=a(16),u=a(8),d=a(44),m=l.b.createClass({displayName:"ReactInviteSection",componentDisplay:o.a.ComponentDisplay.Desktop,getState:function(){var e=i.default.billingManager;return{validBilling:e._hasValidBillingData,premiumStatus:e._premiumStatus,inviteEmailSuccess:e.inviteEmailSuccess,inviteEmailError:e.inviteEmailError,inviteCodeError:e.inviteCodeError}},onTapInviteUrl:function(e){var t=e.target;t!==document.activeElement&&(c.default.selectElement(t),e.preventDefault(),n.default.sendEvent("Billing","TapInviteUrl"))},inviteEmails:function(){for(var e=0,t=this.refs.inviteEmails.getTokens(),a=[],n=0;n<t.length;n++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;a.push(t[n].email)}i.default.billingManager.sendInviteEmail(a)},render:function(){var e=i.default.billingManager,t=this.state;return s.a.createElement("span",{className:"new-modal-group"},s.a.createElement("div",{className:"new-modal-title"},s.a.createElement("div",{className:"title"},"Share Moo.do with your friends"),s.a.createElement("div",{className:"subtext center"},"Thank you for spreading the ",s.a.createElement("i",{className:"icon-heart red"}))),s.a.createElement("div",{className:"new-modal-center"},s.a.createElement("div",null,s.a.createElement("div",{className:"subtitle"},"Social"),s.a.createElement("span",{className:"shareIcons"},s.a.createElement(u.a,{iconSize:22,icon:"icon-twitter",tooltip:"@MooDoApp",onClick:e.shareTwitter.bind(e)}),s.a.createElement(u.a,{iconSize:22,marginLeft:16,marginRight:16,icon:"icon-facebook",tooltip:"@MooDoApp",onClick:e.shareFacebook.bind(e)}),s.a.createElement(u.a,{iconSize:22,icon:"icon-google-plus",tooltip:"@MooDoApp",onClick:e.shareGoogle.bind(e)})),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"subtitle"},"Share Link"),s.a.createElement("div",{className:"subtext"},e.getSelectText()),s.a.createElement(d.a,{display:"inline-block",width:280,height:36,value:e.getInviteUrl(),onMouseDown:this.onTapInviteUrl,readonly:!0}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"subtitle"},"Share by email"),s.a.createElement("div",{className:"subtext"},"Separate multiple email addresses with commas."),s.a.createElement(d.a,{ref:"inviteEmails",width:350,buttonWidth:70,height:36,autocompleteMode:"email",placeholder:"Add friends' email addresses",buttonText:"SEND",onButtonClick:this.inviteEmails}),(t.inviteEmailSuccess||t.inviteEmailError)&&s.a.createElement("div",{id:"inviteEmailMessage",className:n.default.classNames({success:t.inviteEmailSuccess},{error:t.inviteEmailError})},t.inviteEmailSuccess||t.inviteEmailError))))}});t.a=m},433:function(e,t,a){"use strict";var n=a(0),o=a(1),i=a(2),r=a.n(i);function s(){return(s=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var l=a(13).b.createClass({displayName:"FancySelect",componentDisplay:o.a.ComponentDisplay.Everywhere,getValue:function(){return this.refs.select.value},setValue:function(e){this.refs.select.value=e},render:function(){var e=this.props,t=n.default.classNames(e.className,"fancySelect c-background c-border");return r.a.createElement("select",s({},e,{className:t,ref:"select"}),e.children)}});t.a=l},434:function(e,t,a){"use strict";var n=a(0),o=a(2),i=a.n(o),r=a(13),s=a(30);function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,d(t).apply(this,arguments))}var a,o,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["a"]),a=t,(o=[{key:"init",value:function(){this.createObservables({isFocused:this.props.focused||!1})}},{key:"onMount",value:function(){var e=this,t=this.refs.input;this.props.value&&(t.value=this.props.value),this.props.focused&&requestAnimationFrame(function(){t&&(t.focus(),void 0!==e.props.selectionStart&&(t.selectionStart=e.props.selectionStart),void 0!==e.props.selectionEnd&&(t.selectionEnd=e.props.selectionEnd),t.scrollTop=0)})}},{key:"onUnmount",value:function(){this.isFocused.get()&&this.onBlur()}},{key:"focus",value:function(){this.refs.input.focus()}},{key:"blur",value:function(){this.refs.input.blur()}},{key:"getValue",value:function(){return this.refs.input.value}},{key:"setValue",value:function(e){this.refs.input.value=e}},{key:"getSelectionStart",value:function(){return this.refs.input.selectionStart}},{key:"getSelectionEnd",value:function(){return this.refs.input.selectionEnd}},{key:"onFocus",value:function(e){n.default.vmMain.activeInput.set(this),this.isFocused.set(!0),this.props.onEscape&&(this.__hotkeyEscape=s.a.pushStackEscape(this.handleEscapeKey)),this.props.onFocus&&this.props.onFocus(e)}},{key:"onBlur",value:function(e){n.default.vmMain.activeInput.set(null),this.isFocused.set(!1),this.__hotkeyEscape&&(s.a.popStack(this.__hotkeyEscape),this.__hotkeyEscape=void 0),this.props.onBlur&&this.props.onBlur(e)}},{key:"onKeyPress",value:function(e){this.props.onKeyPress&&this.props.onKeyPress(e)}},{key:"handleEscapeKey",value:function(){this.props.onEscape&&this.props.onEscape()}},{key:"render",value:function(){var e=this.props,t=n.default.classNames("fancyTextarea c-background c-foreground",e.className),a=!!e.spellCheck||null,o={fontSize:e.fontSize,height:e.height||150,margin:void 0!==e.margin?e.margin:"16px 0",overflow:e.height<=34&&"hidden"};return i.a.createElement("textarea",{className:t,style:o,ref:"input",readOnly:!!e.isReadOnly,spellCheck:a,onClick:e.onClick,onChange:e.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:e.onKeyDown,onKeyPress:e.onKeyPress,placeholder:e.placeholder,tabIndex:e.tabIndex})}}])&&c(a.prototype,o),l&&c(a,l),t}();t.a=p},435:function(e,t,a){"use strict";var n=a(0),o=a(1),i=a(4),r=a(2),s=a.n(r),l=a(13).b.createClass({displayName:"ReactContact",componentDisplay:o.a.ComponentDisplay.Everywhere,onClickNumber:function(e,t){i.default.menus.closeContextMenu(),n.default.openUrl(e.link,t,!0)},onClickEmail:function(e,t){var a=n.default.vmMain.getDefaultEmailPlugin();if(a.isActive()){i.default.menus.closeContextMenu();var o={to:[{text:"",email:e.address}]};i.default.menus.openComposeEmail(a,void 0,void 0,o)}else n.default.openUrl(e.link,t,!0)},render:function(){var e=this,t=this.props.contact;return s.a.createElement("div",{className:"contactPreview"},s.a.createElement("div",{className:"contactName c-border"},t.text),t.phoneNumbers&&t.phoneNumbers.map(function(t){return s.a.createElement("div",{className:"contactRow contactPhone",key:t.number},s.a.createElement("i",{className:"contactButton icon-phone c-foreground-super-faded"}),s.a.createElement("span",{className:"contactNumber link",onClick:e.onClickNumber.bind(e,t)},t.number),s.a.createElement("span",{className:"phoneType c-foreground-faded"},t.type))}),t.emails&&t.emails.map(function(t){return s.a.createElement("div",{className:"contactRow contactEmail",key:t.address},s.a.createElement("i",{className:"icon-mail_outline contactButton c-foreground-super-faded"}),s.a.createElement("span",{className:"contactEmail link",onClick:e.onClickEmail.bind(e,t)},t.address))}))}});t.a=l},436:function(e,t,a){"use strict";var n=a(1),o=a(4),i=a(3),r=a(2),s=a.n(r),l=a(13),c=a(5),u=a(6),d=a(261),m=l.b.createClass({displayName:"ReactNoteEditor",componentDisplay:n.a.ComponentDisplay.Everywhere,init:function(){var e=this.props,t=e.item.hasNote()&&e.item.getNote(),a=t?t.getParsedText():void 0;this.createObservables({hasValue:!!a})},onUnmount:function(){clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=void 0,this._saveNote(),i.a.isMobile&&c.a.closeKeyboard()},getValue:function(){return this.refs.noteText.getValue()},_saveNote:function(){u.e.beginAction(),o.default.PaneUpdateBatcher.beginUpdateItems();var e=this.props.item,t=e.hasNote()&&e.getNote(),a=this.refs.noteText.getValue();!t&&a&&(t=e.createNote()),t&&(a!==t.getRawText()&&t.setText(a,n.a.ChangeType.Local),a||e.setNote(void 0,n.a.ChangeType.Local)),o.default.PaneUpdateBatcher.commitUpdateItems(),u.e.endAction()},onChange:function(){var e=this.refs.noteText.getValue().length>0;e!==this.hasValue.get()&&(this.hasValue.set(e),e&&this.props.onValueSet&&requestAnimationFrame(this.props.onValueSet)),clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=setTimeout(this._saveNote,8e3)},render:function(){var e=this.props,t=o.default.DisplaySettings.fontSize(),a=e.item.hasNote()&&e.item.getNote(),n=a?a.getParsedText():void 0,i=a?void 0:"Add note",r=this.state.hasValue?e.heightValue:e.heightEmpty,l=!e.item.canHaveNote();return s.a.createElement(d.a,{ref:"noteText",className:e.className,value:n,placeholder:i,focused:e.focused,onChange:this.onChange,onKeyDown:e.onKeyDown,onKeyPress:e.onKeyPress,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,fontSize:t,margin:0,height:r,tabIndex:e.tabIndex,richText:!!e.richText&&!!e.goFullscreen,goFullscreen:e.richText&&e.goFullscreen,onClickClose:e.onClickClose,isReadOnly:l})}});t.a=m},437:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(3),i=a(1),r=a(4),s=a(2),l=a.n(s),c=a(58),u=a.n(c),d=a(13),m=a(35),p=a(77),h=a(435),f=0,g=1,y=2,v=4,E=8,b=["now","soon","later","someday"],C=["today","tomorrow"],k=["next"],w=["mon","tue","wed","thu","fri","sat","sun"],S=["january","february","march","april","may","june","july","august","september","october","november","december"],x=["every"],M=["first","other","last"],D=[0,1,2,3,4,5,6],P=(b.concat(x).concat(C).concat(M).concat(k).concat(w).concat(S),d.b.createClass({displayName:"ReactAutocompleteDates",componentDisplay:i.a.ComponentDisplay.Everywhere,init:function(){this.text="",this.createObservables({nextDateWord:f})},isInMode:function(e){return 0===e?0===this.state.nextDateWord:n.default.isFlagSet(this.state.nextDateWord,e)},getShortMonth:function(e){return Date.CultureInfo.abbreviatedMonthNames[e]},getLongMonth:function(e){return Date.CultureInfo.monthNames[e]},getShortDay:function(e){return Date.CultureInfo.abbreviatedDayNames[e]},getLongDay:function(e){return Date.CultureInfo.dayNames[e]},getMonthList:function(){var e=0,t=(new Date).getMonth()-1;t<0&&(t=12+t);for(var a=t+1+5,n=[],o=t;o<a;++o){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var i=o%12;n.push(i)}return n},nextWordOptions:function(e){var t=e.toLowerCase().split(" "),a=t[t.length-1];if(""===a&&(a=t[t.length-2]),b.indexOf(a)>=0)return f;if(x.indexOf(a)>=0)return g|E;if(M.indexOf(a)>=0)return g;if(C.indexOf(a)>=0)return v;if(k.indexOf(a)>=0)return g;if(w.indexOf(a)>=0)return v;if(S.indexOf(a)>=0)return y;var n=parseInt(a,10);return isNaN(n)?a.indexOf(":")>=0?v:f:v},onMouseDown:function(e){n.default.preventAndStop(e)},onTapDate:function(e){var t=e.target;if("SPAN"===t.nodeName){var a=t.getAttribute("data-text")||t.textContent.trim(),o=this.nextWordOptions(a),i=o===f;this.nextDateWord.set(o),this.text+=a,n.default.findParentID(t,"autocompleteHours",2)||n.default.findParentID(t,"autocompleteMinutes",2)||(this.text+=" "),this.props.setText(this.text),i&&this.props.onSelected()}},render:function(){var e=this,t=(this.state.nextDateWord,""===this.text);return l.a.createElement("div",{id:"autocompleteDates",className:"f1",onMouseDown:this.onMouseDown,onClick:this.onTapDate},(this.isInMode(f)||this.isInMode(g))&&l.a.createElement("div",{id:"autocompleteDate"},!this.isInMode(E)&&l.a.createElement("div",{className:n.default.classNames({disabled:!t})},l.a.createElement("span",null,"today"),l.a.createElement("span",null,"tomorrow"),l.a.createElement("span",null,"next"),l.a.createElement("span",null,"every")),this.isInMode(E)&&l.a.createElement("div",null,l.a.createElement("span",null,"first"),l.a.createElement("span",null,"other"),l.a.createElement("span",null,"last")),l.a.createElement("div",{id:"datePickerDays"},D.map(function(t){var a=e.getLongDay(t);return l.a.createElement("span",{key:a},e.getShortDay(t))})),l.a.createElement("div",{className:n.default.classNames({disabled:!t})},e.getMonthList().map(function(t){var a=e.getLongMonth(t);return l.a.createElement("span",{key:a,"data-text":a},e.getShortMonth(t))}))),this.isInMode(y)&&l.a.createElement("div",{id:"autocompleteDay"},l.a.createElement("div",{className:"flexcolumn"},l.a.createElement("div",{className:"autocompleteDays"},Array.apply(0,Array(31)).map(function(e,t){return l.a.createElement("span",{key:t},t+1)})))),this.isInMode(v)&&l.a.createElement("div",{id:"autocompleteTime"},l.a.createElement("div",{className:"flexcolumn"},l.a.createElement("div",{id:"autocompleteHours"},Array.apply(0,Array(12)).map(function(e,t){return l.a.createElement("span",{key:t},t+1)}))),l.a.createElement("div",{className:"flexcolumn"},l.a.createElement("div",{id:"autocompleteMinutes"},l.a.createElement("span",null,":15"),l.a.createElement("span",null,":30"),l.a.createElement("span",null,":45"))),l.a.createElement("div",{className:"flexcolumn"},l.a.createElement("div",{id:"autocompleteAMPM"},l.a.createElement("span",null,"am"),l.a.createElement("span",null,"pm")))))}})),N=a(8),I=a(44),_=a(52),T=a(48),O=a(29),A=d.b.createClass({displayName:"ReactAutocomplete",componentDisplay:i.a.ComponentDisplay.Everywhere,init:function(){var e=this.props;this.createObservables({selectedIndex:e.elementInput||e.fromPane||e.onlyMatches?0:-1,expanded:!1})},onMount:function(){if(this.hasOwnInput()){var e=this.props,t=this.refs.input;t&&(t.focus(),t.updateAutocomplete(e.item||e.items&&e.items[0]))}document.addEventListener("keydown",this.onInputKeyDown,!0)},componentWillReceiveProps:function(e){this.props.matches!==e.matches&&this.updateState(e)},onUnmount:function(){document.removeEventListener("keydown",this.onInputKeyDown,!0)},onBeforeChanged:function(e,t){var a=this.refs;if(e.matches!==t.matches&&!e.hasSpecialMatches){this.expanded.set(!1,!1),e.expanded=!1;var n=!a.input||!this.props.allowCustom&&a.input.getValue()&&this.state.matches.length>0?0:-1;this.selectedIndex.set(n,!1),e.selectedIndex=n}},onAfterChanged:function(e,t){e.matches.length>t.matches.length&&setTimeout(function(){this.refs.contextMenu&&this.refs.contextMenu.updateState()}.bind(this),0)},getState:function(e){var t=this.getSpecialMatches();return{matches:e.matches||t||m.a.matches,hasSpecialMatches:!!t,kbsize:o.a.kbsize,owner:m.a.owner}},updateTextFromIndex:function(){if(this.hasOwnInput()){var e=this.refs.input,t=this.selectedIndex.get(),a="";if(t>=0){var n=this.state.matches[t];a=this.getInsertText(n)}e.setValue(a),e.selectEnd()}},onInputKeyDown:function(e){var t=this.state,a=this.props;if(a.allowCustom&&e.keyCode===i.a.KeyCode.Enter)this.onSelected(),n.default.preventDefault(e),n.default.stopPropagation(e);else if(t.matches.length>0){var o=this.selectedIndex.get();if(t.matches.length>1&&(e.keyCode===i.a.KeyCode.DownArrow||e.keyCode===i.a.KeyCode.UpArrow)){if(e.keyCode===i.a.KeyCode.UpArrow?--o<(a.allowCustom?-1:0)&&(o=t.matches.length-1):e.keyCode===i.a.KeyCode.DownArrow&&++o>t.matches.length-1&&(o=a.allowCustom?-1:0),o!==this.selectedIndex.get()&&(this.selectedIndex.set(o),this.updateTextFromIndex(),o>=0)){var r=this.refs["item_"+this.selectedIndex.get()];try{n.default.PAssert(1713,r,"Item must exist in autocomplete to be scrolled to")}catch(l){self.reportError(l)}if(r){var s=u.a.findDOMNode(r);n.default.scrollIntoView(s,i.a.ScrollDuration.Default)}}n.default.preventDefault(e)}else e.keyCode===i.a.KeyCode.RightArrow?this.expanded.set(o):e.keyCode===i.a.KeyCode.Enter&&o>=0&&(this.onSelected(),n.default.preventDefault(e),n.default.stopPropagation(e))}},onEscapeKey:function(){this.hide(!0)},hide:function(e){m.a.hide()},onMouseOver:function(e){this.selectedIndex.set(e)},onClick:function(e){this.selectedIndex.set(e),this.updateTextFromIndex(),this.onSelected()},onButtonClick:function(){this.onSelected()},hasOwnInput:function(){return o.a.isMobile||!this.props.elementInput&&!this.props.fromPane&&!this.props.onlyMatches},onSelected:function(){var e,t,a=this.props,n=this.state,o={owner:n.owner,index:a.indexInPane};if(a.allowCustom)(a.allowEmpty||this.refs.input.getValue())&&(t={text:this.refs.input.getValue()});else{var i=this.selectedIndex.get();t=this.state.matches[i]}t&&("contact"===t.type&&"email"===this.props.mode?(e=m.a.insertMatch(""),o.token=t):"item"===t.type?(e=m.a.insertMatch(""),o.item=t.item):e=m.a.insertMatch(this.getInsertText(t)),e&&(o.value=e.text,o.offset=e.offset),a.onSelected?a.onSelected(o):n.owner&&n.owner.onAutocompleteSelected&&n.owner.onAutocompleteSelected(o),this.hide())},getInsertText:function(e){return"email"===this.props.mode?e.text+" <"+e.email+">":"snooze"===e.type?e.insertText:e.text},insertHighlight:function(e){var t=[],a=m.a.getText(),n=e.toUpperCase().indexOf(a.toUpperCase());return n>=0&&a.length>0?(n>0&&t.push(e.substr(0,n)),t.push(l.a.createElement("span",{key:"match",className:"ac-match c-bg-autocomplete-highlight"},e.substr(n,a.length))),e.length>n+a.length&&t.push(e.substr(n+a.length))):t=e,t},onClickExpand:function(e,t){this.expanded.set(e),t.stopPropagation()},onClickExpandedInput:function(e){e.stopPropagation()},onSelectedAddChild:function(){var e=this.props,t=this.state,a=t.expanded,n=t.matches[a];if(e.onSelected){var o={item:n.item,subItemText:this.refs.inputAdd.getValue()};e.onSelected(o)}},getSpecialMatches:function(){if("snooze"===this.props.mode){var e=new Date,t=e.getHours(),a=e.getDay(),o=e.clone().clearTime().addHours(Math.min(t+3,23+59/60)),s=e.clone().clearTime();t<18?s.addHours(19):s.addHours(Math.min(t+2,23+59/60));var l=e.clone().clearTime();a<6?l.addDays(6-e.getDay()).addHours(9):6===a?l.addDays(1).addHours(9):l.addHours(Math.min(t+3,23+59/60));var c=e.clone().clearTime();a>0?c.addDays(8-e.getDay()).addHours(9):c.addDays(1).addHours(9);var u=e.clone().clearTime().addDays(1).addHours(9),d=e.clone().clearTime().addDays(1).addHours(19);return[{type:"snooze",icon:"icon-access_time",iconColor:"#f30",text:"Later Today",insertText:"Today "+o.toString(r.default.International.getFormat(i.a.DFormat.ShortTime)),date:o,showDay:!1},{type:"snooze",icon:"icon-access_time",iconColor:"#fa0",text:"Tonight",insertText:"Today "+s.toString(r.default.International.getFormat(i.a.DFormat.ShortTime)),date:s,showDay:!1},{type:"snooze",icon:"icon-access_time",iconColor:"#fd0",text:"Tomorrow Morning",insertText:"Tomorrow "+u.toString(r.default.International.getFormat(i.a.DFormat.ShortTime)),date:u,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:"#2a6",text:"Tomorrow Night",insertText:"Tomorrow "+d.toString(r.default.International.getFormat(i.a.DFormat.ShortTime)),date:d,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:n.default.colorBlue,text:"This Weekend",insertText:l.toString(r.default.International.getFormat(i.a.DFormat.NoPadShortDayTime)),date:l,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:"#b0d",text:"Next Week",insertText:c.toString(r.default.International.getFormat(i.a.DFormat.NoPadShortDayTime)),date:c,showDay:!0}]}},onCloseButton:function(){r.default.menus.closeContextMenu()},setText:function(e){this.refs.input.setValue(e)},onAutocompleteDateChange:function(e){this.setText(e),this.refs.input.selectEnd()},renderSpecialAutocomplete:function(){if(o.a.isMobile&&"date"===this.props.mode)return l.a.createElement(P,{setText:this.onAutocompleteDateChange,onSelected:this.onSelected})},renderRightContent:function(){var e=this.state;if(e.matches.length>0&&e.selectedIndex>=0){var t,a=e.matches[e.selectedIndex];if("contact"===a.type&&(t=l.a.createElement(h.a,{contact:a})),t)return l.a.createElement("div",{className:"newAutocompleteRightContent c-border"},t)}},renderObject:function(e,t){var a;switch(e.type){case"contact":if(e.text&&e.email){a=this.insertHighlight(e.text);var o=this.insertHighlight(" <"+e.email+">");return l.a.createElement("span",null,l.a.createElement("span",{className:"contact c-contact"},a),o)}if(e.email)return e.email;if(e.text)return a=this.insertHighlight(e.text),l.a.createElement("span",{className:"contact c-contact"},a);break;case"tag":return a=this.insertHighlight(e.text),l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"tag c-tag"},a),l.a.createElement("span",{className:"number c-foreground-faded"},e.count));case"date":return a=this.insertHighlight(e.text),l.a.createElement("span",{className:"date c-date"},a);case"snooze":var r=(e.showDay?e.date.toString("dddd")+" ":"")+e.date.toString("h:mm tt");return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"snoozeDate"},e.text),l.a.createElement("span",{className:"snoozeDetail"},r));case"item":var s=e.item,c=n.default.parentTextForItem(s),u=t===this.state.expanded,d=n.default.classNames("autocompleteItem flexbox",{hasParent:!!c},{itemExpanded:u}),m=this.props.mode===i.a.AutocompleteMode.Move;return l.a.createElement("div",{className:d},l.a.createElement("div",{className:"autocompleteItemInside f1"},c&&l.a.createElement("div",{className:"parentPath c-foreground-very-faded"},c),l.a.createElement(p.a,{key:s.id,item:s}),m&&u&&l.a.createElement(I.a,{ref:"inputAdd",placeholder:"Add subitem",buttonText:"MOVE TO CHILD",focused:!0,onButtonClick:this.onSelectedAddChild,onClick:this.onClickExpandedInput})),m&&l.a.createElement(N.a,{icon:u?"icon-angle-down":"icon-angle-right",className:"autocompleteExpand",width:46,height:46,onClick:this.onClickExpand.bind(this,t),tooltip:"Add sub-item"}));case i.a.AutocompleteMode.GmailLabel:return a=this.insertHighlight(e.text),l.a.createElement("span",null,a);default:try{n.default.PAssert(1714,!1,"Invalid insert text",e.type)}catch(h){self.reportError(h)}}},render:function(){for(var e=0,t=this.state,a=this.props,i=[],r=0;r<t.matches.length;r++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var s=t.matches[r],c=n.default.classNames("c-border-light autocomplete_"+s.type,{selected:r===t.selectedIndex});i.push(l.a.createElement(O.a,{key:r,ref:"item_"+r,icon:s.icon,iconColor:s.iconColor,className:c,onMouseOver:this.onMouseOver.bind(this,r),canClose:!1,noMouseUp:!0,onClick:this.onClick.bind(this,r)},this.renderObject(s,r)))}var u,d=a.text,m=a.buttonText;this.hasOwnInput()&&(u=!!a.allowEmpty||(a.allowCustom?void 0:t.selectedIndex>=0));var p,h,f=n.default.classNames("newAutocomplete flexbox",a.className,{contextMenuMobile:o.a.isMobile},{flexvert:this.hasOwnInput()},{hasOwnInput:this.hasOwnInput()},{expanded:!1!==t.expanded}),g=o.a.isMobile&&o.a.windowHeight()-t.kbsize,y=o.a.isMobile?{}:{minWidth:260,maxWidth:320};if(o.a.isMobile&&"full"===a.position)p=l.a.createElement("div",{className:"newAutocompleteTopBar flexbox c-border"},l.a.createElement(N.a,{className:"fancyModalClose",icon:"icon-close",iconSize:20,width:n.default.topBarHeight,height:n.default.topBarHeight,onClick:this.onCloseButton}),l.a.createElement(I.a,{ref:"input",display:"block",className:"f1",height:n.default.topBarHeight,placeholder:a.text,autocompleteMode:a.mode,padding:{left:16,right:16},border:!1})),h=this.renderSpecialAutocomplete();else if(!o.a.isMobile&&this.hasOwnInput()){var v=a.item||a.items&&a.items[0];p=l.a.createElement("div",{className:"newAutocompleteTopBar flexbox c-border-heavy"},l.a.createElement(I.a,{ref:"input",display:"block",className:"f1",placeholder:d,autocompleteMode:a.mode,padding:{left:16,right:16},tokens:a.tokens,onTokenRemoved:a.onTokenRemoved,border:!1,buttonText:m,onEscape:this.onEscape,buttonEnabled:u,onButtonClick:this.onButtonClick,autocompleteItem:v}))}var E=l.a.createElement(_.a,{className:"autocompleteMatches f1",style:y},i);return a.onlyMatches?E:l.a.createElement(T.a,{className:f,id:a.id,element:a.elementDisplay,maxWidth:"none",height:g,positionOffset:a.positionOffset,position:a.position,useElementPosition:!o.a.isMobile||"email"===a.mode,overflowHeight:"shrink",ref:"contextMenu"},p,h,!h&&E,!o.a.isMobile&&this.renderRightContent())}});t.default=A},438:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(3),r=a(2),s=a.n(r),l=a(13),c=a(429),u=a(8),d=a(95),m=l.b.createClass({displayName:"ReactModalLightbox",componentDisplay:o.a.ComponentDisplay.Desktop,init:function(){this.createObservables({isLoaded:!1,error:!1})},onLoaded:function(){this.isLoaded.set(!0)},onError:function(){this.isLoaded.set(!0,!1),this.error.set("Could not load image")},openExternal:function(){this.props.buttonAction?this.props.buttonAction():n.default.openUrl(this.props.src),this.close()},close:function(){this.refs.modal.close()},render:function(){var e=this.props,t=this.state,a=e.src,r={maxWidth:Math.min(.95*i.a.windowWidth(),900),maxHeight:Math.min(.95*i.a.windowHeight()-30,900),visibility:!t.isLoaded&&"hidden"},l=n.default.classNames({loaded:t.isLoaded});return s.a.createElement(c.a,{id:"modalLightbox",className:l,closeButton:!1,scrollable:!1,modalID:o.a.Modals.Lightbox,ref:"modal"},s.a.createElement("div",{key:"content"},!t.isLoaded&&s.a.createElement(d.a,{center:!0}),!t.error&&s.a.createElement("img",{src:a,style:r,onLoad:this.onLoaded,onError:this.onError,onClick:this.close,ref:"image"}),t.error&&s.a.createElement("div",{className:"lightboxText"},t.error),t.isLoaded&&s.a.createElement(u.a,{id:"lightboxOpen",className:"c-border-heavy",primary:!0,height:30,onClick:this.openExternal},e.buttonText||(i.a.app?"Open in browser":"Open in new tab"))))}});t.default=m},439:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),i=a(13),r=a(30),s=a(1),l=a(8),c=a(44),u=a(429);function d(){return(d=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var m=i.b.createClass({displayName:"ReactModalPrompt",componentDisplay:s.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[r.a.create(s.a.KeyCode.Enter,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickYes)]},onClickYes:function(){this.refs.modal.close(this.refs.input.getValue())},onClickNo:function(){this.refs.modal.close(!1)},render:function(){return o.a.createElement(u.a,d({},this.props,{id:"modalPrompt",title:this.props.text,small:!0,scrollable:!1,modalID:s.a.Modals.Prompt,ref:"modal"}),o.a.createElement("div",{key:"content"},o.a.createElement(c.a,{focused:!0,ref:"input"})),o.a.createElement("div",{key:"buttons"},o.a.createElement(l.a,{primary:!0,width:100,onClick:this.onClickYes},"OK"),o.a.createElement(l.a,{width:100,onClick:this.onClickNo},"NO")))}});t.default=m},440:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(4),i=a(2),r=a.n(i),s=a(13),l=a(103),c=a(429);function u(){return(u=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var d=s.b.createClass({displayName:"ReactModalEmailReply",componentDisplay:n.a.ComponentDisplay.Everywhere,onMount:function(){var e=this.props,t=this.refs.compose;setTimeout(function(){e.responseMode===n.a.EmailResponseMode.Forward?t.focusTo():t.focusBody()},250)},onUnmount:function(){o.default.EmailPreview.setMessageResponseMode(this.props.inReplyToMessage.id,n.a.EmailResponseMode.None)},onClickSend:function(){this.refs.compose.send(),this.refs.modal.close()},onComposeClose:function(){var e=this.refs.modal;e&&e.close()},onCloseButton:function(){this.refs.compose.discard()},_getModalTitle:function(e){var t;return e===n.a.EmailResponseMode.Reply?t="Reply":e===n.a.EmailResponseMode.ReplyAll?t="Reply All":e===n.a.EmailResponseMode.Forward?t="Forward":e===n.a.EmailResponseMode.Other&&(t="Compose"),t},render:function(){var e=this.props,t=e.responseMode,a=this._getModalTitle(t);return r.a.createElement(c.a,u({},e,{id:"modalEmailReply",title:a,modalID:n.a.Modals.EmailReply,ref:"modal",confirmIcon:"icon-send",onConfirm:this.onClickSend,onCloseButton:this.onCloseButton}),r.a.createElement(l.a,{key:"content",threadAttach:e.threadAttach,message:e.message,ref:"compose",onClose:this.onComposeClose,responseMode:this.state.responseMode}))}});t.default=d},441:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),i=a(13),r=a(30),s=a(1),l=a(8),c=a(429),u=i.b.createClass({displayName:"ReactModalAlert",componentDisplay:s.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[r.a.create(s.a.KeyCode.Enter,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickButton)]},onClickButton:function(){this.refs.modal.close()},render:function(){var e=this.props.actionText||"OKAY";return o.a.createElement(c.a,{id:"modalAlert",closeButton:!1,small:!0,backdropClose:!1,scrollable:!1,modalID:s.a.Modals.Alert,ref:"modal"},o.a.createElement("div",{key:"content",dangerouslySetInnerHTML:{__html:this.props.text}}),o.a.createElement("div",{key:"buttons"},o.a.createElement(l.a,{primary:!0,onClick:this.onClickButton},e)))}});t.default=u},442:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(0),i=a(4),r=a(2),s=a.n(r),l=a(13),c=a(8),u=a(95),d=a(429),m=null,p=1,h=2,f=3,g=4,y=5,v=6,E=null,b=1,C=2,k=3,w=4,S=5,x=6,M=7,D=8,P=9,N=["2m4b","gjgm","pmjw","5pm2"];var I=l.b.createClass({displayName:"ReactModalBilling",componentDisplay:n.a.ComponentDisplay.Desktop,init:function(){this._braintreeRequested=!1,this._braintreeLoaded=!1,this._clientTokenRequested=!1,this._clientTokenLoaded=!1,this._clientToken=void 0,this._btClient=void 0,this._btIntegration=void 0,this._isMethodUpdate=this.props.isUpdate,this.createObservables({isSubmitting:!1,isLoading:!0,billingFailureCode:m,signupFailureCode:E,signupErrorMessage:void 0}),this._ensureBraintreeLib(),this._ensureClientToken()},onUnmount:function(){this._btIntegration&&(this._btIntegration.teardown(),this._btIntegration=void 0)},_handlePaymentMethodUpdate:function(e){this._isMethodUpdate?e&&e.nonce?this._processUpdateNonce(void 0,e.nonce):this._processUpdateNonce({error:!0},void 0):e&&e.nonce?this._processPaymentNonce(void 0,e.nonce):this._processPaymentNonce({error:!0},void 0)},_notifyDependencyLoaded:function(){this._braintreeLoaded&&this._clientTokenLoaded&&(this._btClient=new braintree.api.Client({clientToken:this._clientToken}),braintree.setup(this._clientToken,"dropin",{container:"braintreeDropin",onPaymentMethodReceived:this._handlePaymentMethodUpdate,onError:function(e){o.default.reportError(e)},onReady:function(e){this.isLoading.set(!1),this._btIntegration=e}.bind(this)}))},_notifyDependencyLoadError:function(e){this.billingFailureCode.set(e),o.default.reportError(new Error("Client hit error in billing: "+e)),i.default.billingManager.setLastSignupError(e),o.default.sendEvent("Billing","SignupError_"+e)},_ensureBraintreeLib:function(){this._braintreeRequested||(window.braintree?(this._braintreeLoaded=!0,this._notifyDependencyLoaded()):(this._braintreeRequested=!0,o.default.addScriptHack("https://js.braintreegateway.com/v2/braintree.js","braintreeScript",function(){window.braintree?(this._braintreeLoaded=!0,this._notifyDependencyLoaded()):(this._braintreeRequested=!1,this._notifyDependencyLoadError(p))}.bind(this),function(){this._braintreeRequested=!1,this._notifyDependencyLoadError(h)}.bind(this))))},_ensureClientToken:function(){var e=i.default.billingManager.getBillingIdentifier();e?this._clientTokenRequested||(this._clientTokenRequested=!0,o.default.XHR_PrivateAPI({type:"POST",path:"/billing/getToken",data:{email:e},requireAuth:!0,autoRetry:!0,maxRetries:1,cb:function(e){if(200===e.status){this._clientTokenLoaded=!0;try{var t=JSON.parse(e.responseText).data;t&&t.token?(this._clientToken=t.token,this._notifyDependencyLoaded()):this._notifyDependencyLoadError(f)}catch(a){o.default.reportError(a),this._notifyDependencyLoadError(g)}}else this._clientTokenRequested=!1,this._notifyDependencyLoadError(y)}.bind(this)})):this._notifyDependencyLoadError(v)},_setPaymentResponse:function(e){switch(e.code){case n.a.PrivateAPIErrorCodes.UnauthorizedUser:this.signupFailureCode.set(w),this.signupErrorMessage.set(void 0);break;case n.a.PrivateAPIErrorCodes.InvalidParameter:this.signupFailureCode.set(S),this.signupErrorMessage.set(void 0);break;case n.a.PrivateAPIErrorCodes.MissingParameter:this.signupFailureCode.set(x),this.signupErrorMessage.set(void 0);break;case n.a.PrivateAPIErrorCodes.BraintreePaypalBlock:this.signupFailureCode.set(D),this.signupErrorMessage.set(e.data);break;case n.a.PrivateAPIErrorCodes.BraintreeInvalidCCN:this.signupFailureCode.set(P),this.signupErrorMessage.set(e.data);break;case n.a.PrivateAPIErrorCodes.BraintreeUnknown:this.signupFailureCode.set(M),this.signupErrorMessage.set(e.data);break;default:this.signupFailureCode.set(k),this.signupErrorMessage.set(void 0)}},_processUpdateNonce:function(e,t){o.default.sendEvent("Billing","PremiumUpdate"),!e&&t&&(this.isSubmitting.get()||(this.isSubmitting.set(!0),o.default.XHR_PrivateAPI({type:"POST",path:"/billing/updateMethod",data:{nonce:t},requireAuth:!0,cb:function(e){if(this.isSubmitting.set(!1),200===e.status)i.default.menus.isModalOpen(this.id)&&this.onClickClose(),i.default.menus.alert({text:"Your payment information has been updated.",actionText:"OKAY"}),o.default.sendEvent("Billing","PremiumUpdateSUCCESS");else{if(e.response)try{var t=JSON.parse(e.response);this._setPaymentResponse(t)}catch(a){o.default.reportError(a),this.signupFailureCode.set(k),this.signupErrorMessage.set(void 0)}else this.signupFailureCode.set(k),this.signupErrorMessage.set(void 0);o.default.sendEvent("Billing","PremiumUpdateFAILURE")}}.bind(this)})))},_processPaymentNonce:function(e,t){if(o.default.sendEvent("Billing","PremiumSignup"),!e&&t){this.signupFailureCode.set(E),this.signupErrorMessage.set(void 0);var a=N[i.default.billingManager.getBillingPeriod()];try{o.default.PAssert(1712,a,"Must have selected a valid plan to signup")}catch(r){self.reportError(r)}a?this.isSubmitting.get()||(this.isSubmitting.set(!0),o.default.XHR_PrivateAPI({type:"POST",path:"/billing/signup",data:{email:i.default.billingManager.getBillingIdentifier(),nonce:t,planID:a},requireAuth:!0,cb:function(e){if(this.isSubmitting.set(!1),200===e.status){i.default.billingManager.setPremiumStatus(n.a.PremiumStatus.Active),i.default.menus.isModalOpen(this.id)&&this.onClickClose(),i.default.menus.alert({text:"Thank you for signing up for <b>Moo.do</b> premium!",actionText:"OKAY"}),o.default.sendEvent("Billing","PremiumSignupSUCCESS");var t=o.default.parseInt(i.default.billingManager.getPlanPrice(N.indexOf(a)));o.default.reportAdConversion(n.a.ConversionID.Purchase,t)}else{if(e.response)try{var r=JSON.parse(e.response);this._setPaymentResponse(r)}catch(s){o.default.reportError(s),this.signupFailureCode.set(k),this.signupErrorMessage.set(void 0)}else this.signupFailureCode.set(k),this.signupErrorMessage.set(void 0);o.default.sendEvent("Billing","PremiumSignupFAILURE")}}.bind(this)})):(this.signupFailureCode.set(C),this.signupErrorMessage.set(void 0),o.default.sendEvent("Billing","PremiumSignupFAILURE"))}else this.signupFailureCode.set(b),this.signupErrorMessage.set(void 0),o.default.sendEvent("Billing","PremiumSignupFAILURE")},onClickSubmit:function(){this.refs.form.submit()},onClickClose:function(){this.refs.modal.close()},render:function(){var e=this.state,t=e.billingFailureCode||e.signupFailureCode?200:400,a=o.default.classNames("billingSubmit loading20 right",{loading:e.isSubmitting},{disabled:e.isLoading}),i=e.signupErrorMessage?e.signupErrorMessage:"There was an error processing your payment. We will follow up with you shortly.";return s.a.createElement(d.a,{id:"modalBilling",title:"Enter Billing Info",width:400,height:t,backdropClose:!1,scrollable:!1,modalID:n.a.Modals.Billing,ref:"modal"},s.a.createElement("div",{key:"content"},!e.billingFailureCode&&!e.signupFailureCode&&s.a.createElement("form",{id:"billingForm",method:"post",action:"javascript:void(0);",ref:"form"},s.a.createElement("div",{id:"braintreeDropin"}),e.isLoading&&s.a.createElement(u.a,{center:!0},"Loading billing system..."),!e.billingFailureCode&&s.a.createElement("div",{className:a},s.a.createElement("input",{type:"submit",className:"new-modal-button mat-button-raised mat-button-blue",value:"SUBMIT"}))),e.signupFailureCode&&s.a.createElement("div",{id:"billingSignupError"},i),e.billingFailureCode&&s.a.createElement("div",{id:"billingError"},"There was an error loading our payment system. Please contact support@moo.do with code "+e.billingFailureCode+" or try again in a few minutes.")),s.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},e.billingFailureCode&&s.a.createElement(c.a,{primary:!0,onClick:this.onClickClose},"OK")))}});t.default=I},443:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),i=a(13),r=a(30),s=a(1),l=a(8),c=a(429);function u(){return(u=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var d=i.b.createClass({displayName:"ReactModalConfirm",componentDisplay:s.a.ComponentDisplay.Everywhere,getHotkeys:function(){return[r.a.create(s.a.KeyCode.Escape,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickNo),r.a.create(s.a.KeyCode.N,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickNo),r.a.create(s.a.KeyCode.Enter,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickYes),r.a.create(s.a.KeyCode.Y,!0,s.a.Primary.Either,s.a.Shift.Either,this.onClickYes)]},onClickYes:function(){this.refs.modal.close(!0)},onClickNo:function(){this.refs.modal.close(!1)},render:function(){return o.a.createElement(c.a,u({},this.props,{id:"modalConfirm",small:!0,backdropClose:!1,scrollable:!1,closeButton:!1,modalID:s.a.Modals.Confirm,ref:"modal"}),o.a.createElement("div",{key:"content"},this.props.text),o.a.createElement("div",{key:"buttons"},o.a.createElement(l.a,{primary:!0,width:100,onClick:this.onClickYes},"YES"),o.a.createElement(l.a,{width:100,onClick:this.onClickNo},"NO")))}});t.default=d},444:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(2),i=a.n(o),r=a(13),s=a(8),l=a(429);function c(){return(c=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var u=r.b.createClass({displayName:"ReactModalOptions",componentDisplay:n.a.ComponentDisplay.Everywhere,onClickOption:function(e){this.refs.modal.close(e)},render:function(){return i.a.createElement(l.a,c({},this.props,{id:"modalOptions",title:"Please Choose",small:!0,backdropClose:!1,scrollable:!1,modalID:n.a.Modals.Options,ref:"modal"}),i.a.createElement("div",{key:"content"},this.props.text),i.a.createElement("div",{key:"buttons"},this.props.options.map(function(e,t){return i.a.createElement(s.a,{key:t,raised:!0,width:120,margin:"0 8px",onClick:this.onClickOption.bind(this,e)},e)}.bind(this)),i.a.createElement(s.a,{cancel:!0,raised:!0,width:100,margin:"0 8px",onClick:this.onClickOption},"Cancel")))}});t.default=u},445:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(12),r=a(3),s=a(2),l=a(13),c=a(16),u=a(8),d=a(431),m=a(57),p=a(429);function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,y(t).apply(this,arguments))}var a,h,E;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,l["a"]),a=t,(h=[{key:"init",value:function(){this.createObservables({exportArchived:!1,includeNotes:!0,includePrefixes:!0,dataType:"json",exportedContent:""})}},{key:"onMount",value:function(){this.exportData()}},{key:"exportData",value:function(){var e=this,t=i.a.getDefaultDocument(),a=this.state,n=a.exportArchived,o=a.includeNotes;a.includePrefixes;"html"===this.dataType.get()||"text"===this.dataType.get()||"json"===this.dataType.get()&&t.toJSON({exportArchived:n,includeNotes:o}).then(function(t){e.exportedContent.set(t)})}},{key:"setDataType",value:function(e){this.dataType.set(e),this.exportData()}},{key:"onChangeArchiveItems",value:function(e){this.exportArchived=e,this.exportData()}},{key:"onChangeIncludePrefixes",value:function(e){this.includePrefixes=e,this.exportData()}},{key:"onChangeIncludeNotes",value:function(e){this.includeNotes=e,this.exportData()}},{key:"onTapOpen",value:function(){open("url").document.write(this.exportedContent.get())}},{key:"onTapSelect",value:function(){var e=c.default.createSelectionRange();e.selectNodeContents(this.refs.exportedContent),c.default.setSelectionRange(e)}},{key:"onTapSaveExport",value:function(){var e="";"html"===this.dataType.get()?e="html":"text"===this.dataType.get()?e="txt":"json"===this.dataType.get()&&(e="json");try{n.default.saveFile(this.state.exportedContent,"moodo."+e)}catch(t){n.default.reportError(t)}}},{key:"onKeyDown",value:function(e){var t=r.a.getKeyCode(e);(r.a.mac&&e.metaKey||!r.a.mac&&e.ctrlKey)&&t===o.a.KeyCode.A&&this.onTapSelect(),e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this.state.dataType,t=n.default.classNames("exportedContent",e),a=this.state.exportedContent;return s.createElement(p.a,{id:"modalExport",title:"Export Data",width:860,height:900,sidebarWidth:180,modalID:o.a.Modals.ExportData},s.createElement("div",{key:"sidebar"},s.createElement(d.a,{header:!0},"Data Type"),s.createElement(d.a,{selected:"html"===e,onClick:this.setDataType.bind(this,"html")},"HTML"),s.createElement(d.a,{selected:"text"===e,onClick:this.setDataType.bind(this,"text")},"Plain Text"),s.createElement(d.a,{selected:"json"===e,onClick:this.setDataType.bind(this,"json")},"Moo.do Backup"),s.createElement(d.a,{header:!0},"Options"),s.createElement(d.a,null,s.createElement(m.a,{checked:this.state.includePrefixes,onChange:this.onChangeIncludePrefixes},"Include Prefixes")),s.createElement(d.a,null,s.createElement(m.a,{checked:this.state.includeNotes,onChange:this.onChangeIncludeNotes},"Include Notes")),s.createElement(d.a,null,s.createElement(m.a,{checked:this.state.exportArchived,onChange:this.onChangeArchiveItems},"Archived Items")),s.createElement(d.a,{header:!0},"Export"),!r.a.app&&s.createElement(u.a,{onClick:this.onTapOpen},"OPEN IN TAB"),s.createElement(u.a,{onClick:this.onTapSelect},"SELECT"),s.createElement(u.a,{onClick:this.onTapSaveExport},"SAVE")),s.createElement("div",{key:"content"},s.createElement("div",{className:t,onKeyDown:this.onKeyDown,contentEditable:!0,dangerouslySetInnerHTML:{__html:a},ref:"exportedContent"})))}}])&&f(a.prototype,h),E&&f(a,E),t}();t.default=E},446:function(e,t,a){"use strict";a.r(t);var n,o=a(0),i=a(1),r=a(4),s=a(2),l=a.n(s),c=a(13),u=a(429),d=a(431),m=a(8),p=a(44);function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,y(t).apply(this,arguments))}var s,h,E;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,c["a"]),s=t,(h=[{key:"init",value:function(){var e=this,t=this.props.importer;Promise.all([a.e(0),a.e(3)]).then(a.bind(null,479)).then(function(t){n=t.default,e.importer=new n,e.dimportLoaded.set(!0)}),"GTasks"===t&&(t="Google Tasks"),this.createObservables({isImporting:!1,preloadDisable:0,currentImporter:t||"Moo.do Backup",importMessage:"",dimportLoaded:!1})}},{key:"getImporterFromName",value:function(e){var t;switch(e){case"Wunderlist":t=this.importer.wunderlist;break;case"Workflowy":t=this.importer.workflowy;break;case"OPML":t=this.importer.opml;break;case"Moo.do Backup":t=this.importer.json;break;case"Text":t=this.importer.text;break;case"GTasks":case"Google Tasks":t=this.importer.gtasks;break;case"Trello":t=this.importer.trello;break;case"Todoist":t=this.importer.todoist;break;case"Toodledo":t=this.importer.toodledo;break;default:try{o.default.PAssert(1703,!1,"Must add valid importer: ",e)}catch(a){self.reportError(a)}}return t}},{key:"selectImporter",value:function(e){var t=this,a=this.getImporterFromName(e);this.currentImporter.set(e),this.importMessage.set(""),this.isImporting.set(!1),a&&a.preload&&!a.isLoaded&&(this.preloadDisable.set(this.preloadDisable.get()+1),this.importMessage.set("Loading Trello login..."),a.preload(function(){t.preloadDisable.set(t.preloadDisable.get()-1);var e=t.getImporterFromName(t.currentImporter.get());0===t.preloadDisable.get()&&e&&e.preload&&t.importMessage.set("")},function(e){t.preloadDisable.set(t.preloadDisable.get()-1),t.importMessage.set("Error loading Trello. Please try again.")}))}},{key:"onImportError",value:function(e,t){!1!==e?(e&&o.default.isString(e)||(t||(t=e),e="Moo.do encountered an error importing your data. The developers have been notified with details of the error."),o.default.reportError(t||e,e),this.importMessage.set(e)):this.importMessage.set(""),this.isImporting.set(!1)}},{key:"runImport",value:function(e,t,a){var n=this;if(!(this.isImporting.get()||this.preloadDisable.get()>0)){var s=this.getImporterFromName(e);if(s){o.default.sendEvent("Menu","Import"+e),this.isImporting.set(!0),this.importMessage.set("Importing...");try{setTimeout(function(){s.login(t,a,function(){s.import(function(t){s.save(t,function(){n.isImporting.set(!1),n.importMessage.set(""),r.default.menus.alert({text:"Your data has been imported successfully!",actionText:"OK",callback:function(){r.default.menus.closeModal(i.a.Modals.ImportData)}}),o.default.sendEvent("ImportSuccess",e)},n.onImportError)},n.onImportError)},n.onImportError)},0)}catch(l){this.onImportError("There was an issue importing your data. Please try again later.",l)}}}}},{key:"onTapSelect",value:function(e){this.selectImporter(e)}},{key:"whichArea",value:function(){switch(this.state.currentImporter){case"Wunderlist":return"OAuthArea";case"Workflowy":return"LoginArea";case"OPML":case"Moo.do Backup":return"UploadArea";case"Google Tasks":case"GTasks":case"Trello":case"Todoist":case"Toodledo":return"OAuthArea";default:try{o.default.PAssert(1704,!1,"Must add valid importer")}catch(e){self.reportError(e)}}return!1}},{key:"onClickImport",value:function(){if(!this.isImporting.get()){var e=this.refs.email&&this.refs.email.getValue(),t=this.refs.password&&this.refs.password.getValue();this.runImport(this.state.currentImporter,e,t)}}},{key:"renderListItem",value:function(e){return l.a.createElement(d.a,{selected:this.state.currentImporter===e,onClick:this.onTapSelect.bind(this,e)},e)}},{key:"renderContent",value:function(){var e,t=this.state,a=this.state.currentImporter,n=this.whichArea();return"LoginArea"===n?e=l.a.createElement("div",null,l.a.createElement("div",{className:"importTitle"},"Import data from ",a),l.a.createElement(p.a,{floatingText:"Email",display:"block",ref:"email"}),l.a.createElement(p.a,{type:"password",floatingText:"Password",display:"block",ref:"password"}),l.a.createElement("br",null)):"UploadArea"===n?e=l.a.createElement("div",{id:"importUploadArea"},l.a.createElement("div",{className:"importTitle"},"Upload ",a," file"),l.a.createElement("div",null,"Select a","OPML"===a?"n":""," ",a," file to upload"),l.a.createElement("form",{name:"importFileUpload"},l.a.createElement("input",{id:"importFileUploadButton",type:"file",required:!0,name:"importFile"}))):"OAuthArea"===n&&(e=l.a.createElement("div",null,l.a.createElement("div",{className:"importTitle"},"Import data from ",a),l.a.createElement("div",null,"Click to login to your account"))),l.a.createElement("div",{className:"importInside"},e,l.a.createElement(m.a,{primary:!0,enabled:t.dimportLoaded&&0===t.preloadDisable&&!t.isImporting,onClick:this.onClickImport},"IMPORT"),l.a.createElement("div",{className:"importMessage"},t.importMessage))}},{key:"render",value:function(){return l.a.createElement(u.a,{id:"modalImport",title:"Import Data",width:600,height:400,sidebarWidth:160,modalID:i.a.Modals.ImportData},l.a.createElement("div",{key:"sidebar"},l.a.createElement(d.a,{header:!0},"Import from app"),this.renderListItem("Wunderlist"),this.renderListItem("Google Tasks"),this.renderListItem("Workflowy"),this.renderListItem("Trello"),this.renderListItem("Todoist"),l.a.createElement(d.a,{header:!0},"Import from data"),this.renderListItem("Moo.do Backup"),this.renderListItem("OPML")),l.a.createElement("div",{key:"content"},this.renderContent()))}}])&&f(s.prototype,h),E&&f(s,E),t}();t.default=E},447:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(3),s=a(2),l=a.n(s),c=a(13),u=a(83),d=a(429),m=a(431),p=a(57),h=a(78);function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,v(t).apply(this,arguments))}var a,s,f;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,c["a"]),a=t,(s=[{key:"init",value:function(){var e=this;this.createObservables({backups:void 0,selectedBackup:void 0,showRaw:!1,showCompleted:!1,backupData:void 0,previewText:""}),navigator.onLine?u.a.getBackups(function(t){e.backups.set(t)}):this.previewText.set("You must be online to view your revision history. Please go online and try again.")}},{key:"onKeyDown",value:function(e){r.a.getKeyCode(e);(r.a.mac&&e.metaKey||!r.a.mac&&e.ctrlKey)&&o.a.KeyCode.A}},{key:"onClickBackup",value:function(e){var t=this;this.previewText.set("Loading..."),this.selectedBackup.set(e),u.a.downloadBackup(e.id,function(e){var a=i.default.settings.getEncryptionKey(o.a.EncryptionKeys.UserPassword)||o.a.EncryptionKeys.Global;Promise.all(e.items.map(function(e){return i.default.crypto.decryptText(a,e.t,e.id).then(function(t){return e.t=t,e})})).then(function(a){var n=h.a.transformItems(a),o=e.doc;t.backupData.set({raw:e,rootItem:n[o.root]})})})}},{key:"onChangeShowRaw",value:function(e){this.showRaw.set(e)}},{key:"onChangeShowCompleted",value:function(e){this.showCompleted.set(e)}},{key:"renderItems",value:function(e,t){var a=this;if(this.state.showCompleted||!(e.flags&o.a.VMLIFlag.Complete)){var i=t?"":"<li>".concat(n.default.escape(e.text),"</li>");return e.items&&(i+="<ul>",e.items.forEach(function(e){return i+=a.renderItems(e,!1)}),i+="</ul>"),i}return""}},{key:"renderBackup",value:function(){var e=this.state.backupData;return this.state.showRaw?JSON.stringify(e.raw,null,2):"<ul>".concat(this.renderItems(e.rootItem,!0),"</ul>")}},{key:"renderBackups",value:function(e){var t=this,a=this.state;return l.a.createElement(l.a.Fragment,null,e.map(function(e){return l.a.createElement(l.a.Fragment,{key:e.id},l.a.createElement(m.a,{header:!0},e.text),e.backups.map(function(e){var n=new Date(e.createdDate);return l.a.createElement(m.a,{key:e.id,className:"backupItem c-border",onClick:t.onClickBackup.bind(t,e),selected:e===a.selectedBackup},n.toString("MMMM d, hh:mm tt"))}))}))}},{key:"render",value:function(){var e=this.state,t=n.default.classNames("flexbox flexvert",{loading:this.state.isLoading}),a=e.backupData?this.renderBackup():e.previewText;return l.a.createElement(d.a,{id:"modalBackups",title:"Backups",width:1e3,height:900,sidebarWidth:200,modalID:o.a.Modals.Backups},l.a.createElement("div",{key:"sidebar"},!e.backups&&l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a,{header:!0},"Backups"),l.a.createElement(m.a,null,"Loading...")),e.backups&&this.renderBackups(e.backups)),l.a.createElement("div",{key:"content",className:t},l.a.createElement("div",{className:"exportHeader"},l.a.createElement(p.a,{checked:e.showRaw,onChange:this.onChangeShowRaw},"Show raw"),l.a.createElement(p.a,{checked:e.showCompleted,onChange:this.onChangeShowCompleted},"Show completed")),l.a.createElement("div",{className:"exportedContent f1 scrollable c-border",onKeyDown:this.onKeyDown,contentEditable:!0,dangerouslySetInnerHTML:{__html:a},ref:"exportedContent"})))}}])&&g(a.prototype,s),f&&g(a,f),t}();t.default=b},448:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(4),i=a(2),r=a.n(i),s=a(13),l=a(8),c=a(434),u=a(429);function d(){return(d=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var m=s.b.createClass({displayName:"ReactModalReportProblem",componentDisplay:n.a.ComponentDisplay.Desktop,onMount:function(){this.refs.textarea.focus()},sendReport:function(e){var t=this.props;o.default.EmailPreview.reportMessage(t.accountID,t.threadID,t.msgID,this.refs.textarea.getValue(),e),this.refs.modal.close()},onClickSend:function(){this.sendReport(!0)},onClickCancel:function(){this.sendReport(!1)},render:function(){return r.a.createElement(u.a,d({},this.props,{id:"modalReportProblem",title:"Report Problem",scrollable:!1,modalID:n.a.Modals.ReportProblem,ref:"modal"}),r.a.createElement("div",{key:"content"},r.a.createElement("div",{className:"fancyModalText"},"Please describe the display problem."),r.a.createElement(c.a,{ref:"textarea"}),r.a.createElement("div",{className:"fancyModalText"},"This will send the content of your email to the developers to fix display errors.")),r.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},r.a.createElement(l.a,{width:100,onClick:this.onClickCancel},"CANCEL"),r.a.createElement(l.a,{primary:!0,width:100,onClick:this.onClickSend},"SEND")))}});t.default=m},449:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),i=a(13),r=a(1),s=a(8),l=a(434),c=a(429);function u(){return(u=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var d=i.b.createClass({displayName:"ReactModalDeleteAccount",componentDisplay:r.a.ComponentDisplay.Desktop,onMount:function(){this.refs.textarea.focus()},onClickCancel:function(){this.refs.modal.close(!1)},onClickDelete:function(){this.refs.modal.close(!0)},render:function(){return o.a.createElement(c.a,u({},this.props,{id:"modalDeleteAccount",title:"Please Confirm",scrollable:!1,modalID:r.a.Modals.DeleteAccount,ref:"modal"}),o.a.createElement("div",{key:"content"},o.a.createElement("div",{className:"fancyModalText"},"It would be very helpful if you could describe how Moo.do could be more useful to you. Your feedback will help us improve Moo.do for you and others. Thanks!"),o.a.createElement(l.a,{ref:"textarea"})),o.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},o.a.createElement(s.a,{width:100,onClick:this.onClickCancel},"CANCEL"),o.a.createElement(s.a,{primary:!0,width:100,onClick:this.onClickDelete},"DELETE")))}});t.default=d},450:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(2),s=a.n(r),l=a(13),c=a(8),u=a(430),d=a(429);function m(){return(m=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var p=l.b.createClass({displayName:"ReactModalInvoices",componentDisplay:o.a.ComponentDisplay.Desktop,onTransactionClick:function(e){var t=n.default.clone(e);t.company=i.default.settings.invoiceCompany.get(),t.address=i.default.settings.invoiceAddress.get();var a=window.btoa(JSON.stringify(t));n.default.openUrl(window.location.protocol+"//"+window.location.host+"/invoice#d="+a)},render:function(){return s.a.createElement(d.a,m({},this.props,{id:"modalInvoices",title:"Account Invoices",scrollable:!1,modalID:o.a.Modals.Invoices,ref:"modal"}),s.a.createElement("div",{key:"content"},this.props.transactions.length>0&&s.a.createElement(u.a,{className:"transactionsTable"},s.a.createElement("div",{key:"header"},s.a.createElement("div",null,"Transaction Date"),s.a.createElement("div",null,"Amount"),s.a.createElement("div",null)),this.props.transactions.map(function(e,t){var a=new Date(e.date).toString(i.default.International.getFormat(o.a.DFormat.LongStrDate));return s.a.createElement("div",{key:e.id},s.a.createElement("div",null,a),s.a.createElement("div",null,e.amount),s.a.createElement(c.a,{onClick:this.onTransactionClick.bind(this,e),height:"auto"},"View"))}.bind(this)),";"),0===this.props.transactions.length&&s.a.createElement("div",null,"There are not transactions available for this account.")))}});t.default=p},451:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),i=a(1),r=a(4),s=a(18),l=a(13),c=a(44),u=a(8),d=a(429),m=a(430),p=a(433),h=a(52),f=a(47),g=a(83);function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,b(t).apply(this,arguments))}var a,n,y;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,l["a"]),a=t,(n=[{key:"init",value:function(){this.createObservables({page:0,error:!1,pendingChanges:[],defaultAcl:i.a.DocumentAccessRoles.Write})}},{key:"getState",value:function(){var e=r.default.settings.encryptionKeys,t=this.props.doc;return{acl:this.props.doc.acl,encryptionKeys:e,hasDocPassword:e.get()&&!!e.get()[t.id]}}},{key:"onClickShare",value:function(e,t){var a=this,n=this.refs.invite,o=n.getTokens().map(function(e){return e.email});if(this.error.set(""),o&&o.length>0)return this.props.doc.shareWithUser(o,this.state.defaultAcl).then(function(e){t(),e.error&&a.error.set(e.error)}),n.clearValue(),n.clearTokens(),!0}},{key:"onChangeSelectRole",value:function(e,t){var a=+t.target.value;this.props.doc.shareWithUser([e.email],a)}},{key:"onChangeDefaultRole",value:function(e){this.defaultAcl.set(+e.target.value)}},{key:"onClickRemovePermission",value:function(e,t,a){var n=this;return this.props.doc.shareWithUser([e.email],null).then(function(e){a(),e.error&&n.error.set(e.error)}),!0}},{key:"onClickCancel",value:function(){r.default.menus.closeModal(i.a.Modals.ShareDoc)}},{key:"onClickSkip",value:function(e,t){if(r.default.settings.hasUserPassword()){var a=this.props.doc;return f.a.updateDocumentEncryption(a,null).then(function(){t()}),!0}this.page.set(1)}},{key:"onClickEncrypt",value:function(e,t){var a=this.props.doc,n=this.refs.pass1.getValue(),o=this.refs.pass2.getValue(),i=a.id;if(n===o)return g.a.backupLocal(),r.default.crypto.addKey({name:i,password:n,sentinelSalt:a.id}).then(function(e){f.a.updateDocumentEncryption(a,e).then(function(){t()})}),!0;this.error.set("Passwords do not match")}},{key:"renderSelect",value:function(e,t){return o.a.createElement(p.a,{value:e,onChange:t,style:{height:28,marginTop:6,marginRight:8}},o.a.createElement("option",{value:i.a.DocumentAccessRoles.Admin},"Admin"),o.a.createElement("option",{value:i.a.DocumentAccessRoles.Write},"Write"))}},{key:"renderPageEncryption",value:function(){var e={marginTop:8,width:240};return o.a.createElement("div",null,o.a.createElement("div",{className:"font-big4 bold"},"Make this document extra secure?"),o.a.createElement("div",{className:"modal-subtitle font-small1 c-foreground-light",style:{marginTop:16}},"This document will be encrypted using this password for an extra level of security. You will need to give this password to anyone you share the document with. For your security, Moo.do cannot recover your password, so keep your password safe!"),o.a.createElement("div",{className:"flexbox flex-center"},o.a.createElement("div",{style:{marginTop:16}},o.a.createElement(c.a,{type:"password",placeholder:"Password",ref:"pass1",style:e}),o.a.createElement(c.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:e}))),o.a.createElement("div",{className:"flexbox flex-center"},o.a.createElement("div",{style:{marginTop:20}},o.a.createElement(u.a,{raised:!0,onClick:this.onClickSkip},"SKIP"),o.a.createElement(u.a,{primary:!0,raised:!0,style:{marginLeft:24},onClick:this.onClickEncrypt},"ENCRYPT"))))}},{key:"renderPageShare",value:function(){var e=this,t=this.props.doc,a=this.state,n=Object.keys(a.acl).filter(function(e){return e!==s.a.getUid()}).map(function(e){return{uid:e,name:a.acl[e].t,email:a.acl[e].e,role:a.acl[e].r}});return o.a.createElement(h.a,{style:{height:"100%"}},o.a.createElement(m.a,null,o.a.createElement("div",{className:"fancyTableHeader font-big4 bold",style:{marginBottom:8}},"Share ",t.text.get()),n.map(function(a){var n=a.name?"".concat(a.name," <").concat(a.email,">"):a.email;return o.a.createElement("div",{key:a.uid,className:"flexbox"},o.a.createElement("div",{className:"f1"},n),e.renderSelect(a.role,e.onChangeSelectRole.bind(e,a)),t.isAdmin()&&o.a.createElement(u.a,{icon:"icon-close",width:40,height:40,onClick:e.onClickRemovePermission.bind(e,a)}))})),t.isAdmin()&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"flexbox",style:{marginTop:24}},o.a.createElement(c.a,{id:"inputShareInvite",className:"f1",placeholder:"Enter an mail address",autocompleteMode:"email",ref:"invite",style:{marginRight:8}}),this.renderSelect(this.state.defaultAcl,this.onChangeDefaultRole)),o.a.createElement(u.a,{primary:!0,raised:!0,onClick:this.onClickShare,style:{marginTop:16}},"INVITE")),a.error&&o.a.createElement("div",{className:"error"},a.error),!t.isAdmin()&&o.a.createElement("div",{className:"modal-group"},o.a.createElement("div",{className:"shareNotOwned gd"},"Only the creator of this file can share it with others. Please contact the creator to share it with others."),o.a.createElement(u.a,{id:"shareOkay",raised:!0,onClick:this.onClickCancel},"OKAY")))}},{key:"render",value:function(){var e=this.props,t=this.state;e.doc;return o.a.createElement(d.a,{id:"shareDoc",modalID:i.a.Modals.ShareDoc,ref:"modal",title:"Share File",width:500,height:320},o.a.createElement("div",{key:"content"},t.hasDocPassword||1===t.page?this.renderPageShare():this.renderPageEncryption()))}}])&&v(a.prototype,n),y&&v(a,y),t}();t.default=k},452:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),i=a(1),r=a(0),s=a(4),l=a(3),c=a(13),u=a(17),d=a(8),m=a(434),p=a(429);function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,y(t).apply(this,arguments))}var a,n,h;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,c["a"]),a=t,(n=[{key:"onClickUV",value:function(e){r.default.openUrl("https://feedback.moo.do/",e),r.default.sendEvent("Menu","FeedbackUserVoice")}},{key:"onClickTwitter",value:function(e){r.default.openUrl("https://www.twitter.com/MooDoApp",e),r.default.sendEvent("Menu","FeedbackTwitter")}},{key:"onClickFacebook",value:function(e){r.default.openUrl("https://www.facebook.com/MooDoApp",e),r.default.sendEvent("Menu","FeedbackFacebook")}},{key:"onClickGooglePlus",value:function(e){r.default.openUrl("https://www.google.com/+MooDoApp",e),r.default.sendEvent("Menu","FeedbackGoogle")}},{key:"onClickCancel",value:function(e){s.default.menus.closeModal(i.a.Modals.ReportBug)}},{key:"onClickSend",value:function(e){var t=this.refs.description.getValue();if(t&&t.length>2){s.default.sendFeedback("Moo.do Feedback",t),s.default.menus.closeModal(i.a.Modals.ReportBug),s.default.toasts.pushMessage({text:"Thanks for taking the time to send us feedback!"}),r.default.sendEvent("Menu","SendFeedback"),l.a.isMobile&&u.a.reset()}}},{key:"render",value:function(){var e={paddingBottom:l.a.getKBSize()};return o.a.createElement(p.a,{id:"reportBug",modalID:i.a.Modals.ReportBug,ref:"modal",title:"Contact Support",width:450,height:500},o.a.createElement("div",{key:"content"},o.a.createElement("div",{className:"c-foreground-light"},"If you're requesting a feature, it's often easier to vote it up (or add it) on our UserVoice page."),o.a.createElement("div",{className:"center"},o.a.createElement(d.a,{className:"mc",primary:!0,onClick:this.onClickUV},"Open UserVoice")),o.a.createElement("br",null),o.a.createElement("div",{className:"c-foreground-light"},"Or talk to us on your favorite social network."),o.a.createElement("div",{className:"feedbackIcons marginCenter flexbox flex-center",style:{width:150}},o.a.createElement(d.a,{width:50,height:50,icon:"icon-twitter",tooltip:"@MooDoApp",onClick:this.onClickTwitter}),o.a.createElement(d.a,{width:50,height:50,marginLeft:16,icon:"icon-facebook",tooltip:"MooDoApp",onClick:this.onClickFacebook}),o.a.createElement(d.a,{width:50,height:50,marginLeft:16,icon:"icon-google-plus",tooltip:"+MooDoApp",onClick:this.onClickGooglePlus})),o.a.createElement("div",{className:"mat-subheader c-foreground-light"},"Or send us a message directly."),o.a.createElement(m.a,{focused:!0,id:"bugDescription",height:200,ref:"description",margin:0})),o.a.createElement("div",{key:"buttons",style:e},o.a.createElement(d.a,{raised:!0,onClick:this.onClickCancel},"CANCEL"),o.a.createElement(d.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSend},"SEND")))}}])&&f(a.prototype,n),h&&f(a,h),t}();t.default=E},453:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(4),i=a(2),r=a.n(i),s=a(13),l=a(8),c=a(44),u=a(429);function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function p(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function h(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,f(t).apply(this,arguments))}var a,i,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,s["a"]),a=t,(i=[{key:"init",value:function(){this.createObservables({errorText:""})}},{key:"onMount",value:function(){this.refs.code.focus()}},{key:"onClickConfirm",value:function(){var e=this,t=this.refs.code.getValue();this.props.onSelect(t).then(function(){o.default.menus.closeModal(n.a.Modals.EnterCode)}).catch(function(t){e.errorText.set(t)})}},{key:"onClickCancel",value:function(){!1!==this.props.noCancel&&o.default.menus.closeModal(n.a.Modals.EnterCode)}},{key:"render",value:function(){var e=this.props,t=e.text,a=e.noCancel,o=e.isPassword;return r.a.createElement(u.a,m({},this.props,{id:"modalEnterCode",closeButton:!1,width:360,scrollable:!1,modalID:n.a.Modals.EnterCode,backdropClose:!1,ref:"modal"}),r.a.createElement("div",{key:"content"},r.a.createElement("div",{className:"mb16 c-foreground"},t),r.a.createElement(c.a,{ref:"code",type:o&&"password",onEnter:this.onClickConfirm}),r.a.createElement("div",{className:"red"},this.state.errorText),r.a.createElement("div",{style:{marginTop:24,textAlign:"right"}},!a&&r.a.createElement(l.a,{width:100,onClick:this.onClickCancel},"CANCEL"),r.a.createElement(l.a,{primary:!0,width:100,onClick:this.onClickConfirm},"CONFIRM"))))}}])&&p(a.prototype,i),d&&p(a,d),t}();t.default=y},454:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(23),s=a(2),l=a.n(s),c=a(13),u=a(429),d=a(8),m=a(57),p=a(52);function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function g(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,v(t).apply(this,arguments))}var a,s,h;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,c["a"]),a=t,(s=[{key:"init",value:function(){}},{key:"getState",value:function(){var e=this.props.importer;return{waitingText:e.waitingText,documents:e.documentsObs}}},{key:"close",value:function(){r.a.createDefaultState(),i.default.menus.closeModal(o.a.Modals.ImportMoodo)}},{key:"sortCmpDocs",value:function(e,t){return t.date.getTime()-e.date.getTime()}},{key:"onClickCancel",value:function(){this.close()}},{key:"onClickImport",value:function(e,t){var a=this,n=Object.keys(this.refs).filter(function(e){return e.startsWith("checkbox_")&&a.refs[e].getValue()}).map(function(e){return a.refs[e].props.itemID});return this.props.importer.importWithDocuments(n),this.close(),!0}},{key:"render",value:function(){var e=this.state,t=e.waitingText,a=e.documents,r=!t&&n.default.objectValues(a);return r&&r.sort(this.sortCmpDocs),l.a.createElement(u.a,f({},this.props,{id:"modalImport",title:"Import Data",width:400,height:600,modalID:o.a.Modals.ImportMoodo,ref:"modal"}),l.a.createElement("div",{key:"content"},l.a.createElement("div",{className:"flexbox flexvert",style:{height:"100%"}},l.a.createElement("div",{className:"setupTitle"},"Import Moo.do Documents"),l.a.createElement(p.a,{className:"importMoodoWrapper f1"},t&&l.a.createElement("div",{className:"c-foreground-light"},t),!t&&r.map(function(e){var t=e.id;return l.a.createElement(m.a,{key:t,itemID:t,ref:"checkbox_"+t,style:{marginBottom:24}},l.a.createElement("div",{className:"mooDocText bold"},e.text),l.a.createElement("div",{className:"mooDocDate c-foreground-faded"},e.date.toString(i.default.International.getFormat(o.a.DFormat.MonthDayYearLong))))})),l.a.createElement("div",{style:{marginTop:32,textAlign:"right"}},l.a.createElement(d.a,{raised:!0,onClick:this.onClickCancel},"CANCEL"),l.a.createElement(d.a,{raised:!0,primary:!0,marginLeft:16,enabled:!t,onClick:this.onClickImport},"IMPORT")))))}}])&&g(a.prototype,s),h&&g(a,h),t}();t.default=b},455:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(2),i=a.n(o),r=a(13),s=a(5),l=a(48),c=a(29),u=r.b.createClass({displayName:"ReactContextMenuOverviewOptions",componentDisplay:n.a.ComponentDisplay.Desktop,onClickScroll:function(){var e=this.props;e.pane.overview.scrollItemIntoView(e.item)},onClickAddSubproject:function(){var e=this.props;e.pane.zoomIn(e.item),e.pane.addProject()},onClickZoom:function(){this.props.item.canZoom()&&(s.a.setFocusedPane(this.props.pane),this.props.pane.zoomIn(this.props.item))},render:function(){this.props.pane;return i.a.createElement(l.a,{key:"contextMenuGmailSort",id:"contextMenuGmailSort",element:this.props.element},i.a.createElement(c.a,{icon:"icon-unfold_less",onClick:this.onClickScroll},"Scroll to item in pane"),i.a.createElement(c.a,{icon:"icon-add",onClick:this.onClickAddSubproject},"Add subproject"),i.a.createElement(c.a,{icon:"icon-zoom-in",onClick:this.onClickZoom},"Zoom In"))}});t.default=u},456:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(2),i=a.n(o),r=a(13),s=a(48),l=a(29),c=a(62),u=r.b.createClass({displayName:"ReactContextMenuGmailSort",componentDisplay:n.a.ComponentDisplay.Desktop,setViewMode:function(e){this.props.onSelected(e)},render:function(){this.props.pane;return i.a.createElement(s.a,{key:"contextMenuGmailSort",id:"contextMenuGmailSort",element:this.props.element},i.a.createElement(c.a,null,"Sort by"),i.a.createElement(l.a,{icon:"icon-access_time",onClick:this.setViewMode.bind(this,n.a.GmailViewMode.Date)},n.a.GmailViewMode.Date),i.a.createElement(l.a,{icon:"icon-exclamation",onClick:this.setViewMode.bind(this,n.a.GmailViewMode.Priority)},n.a.GmailViewMode.Priority))}});t.default=u},457:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(2),s=a(13),l=a(35),c=a(45),u=a(102),d=a(437),m=a(262),p=a(8),h=a(48),f=a(62);function g(e){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function v(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return!t||"object"!==g(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,b(t).apply(this,arguments))}var a,g,k;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,s["a"]),a=t,(g=[{key:"getState",value:function(){var e=0,t=this.props.pane,a=t.search,n={closedHelps:i.default.settings.closedHelps,hasFilter:!1,matches:l.a.matches,showHelp:i.default.settings.shouldShowHelp("searchHelp"),viewState:t.viewState,viewMode:t.getViewMode(),sortModeBlocks:t.supportsSortBlocks()&&t.getSortModeBlocks(),sortModeItems:t.supportsSortItems()&&t.getSortModeItems()};t.isViewDates()&&(n.calendars=c.a.GCalendarsAvailable,n.displayCalendars=t.displayCalendars,n.displayLocalItems=t.displayLocalItems);for(var o=0;o<a.filters.length;o++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var r=a.filters[o];n[r.name]=r.value,n[r.name+"Enabled"]=r.enabled,0!==r.value.get()&&(n.hasFilter=!0)}return n}},{key:"onMount",value:function(){this.listenTo(this.props.pane.search.onChanged)}},{key:"onUnmount",value:function(){l.a.onClosed()}},{key:"onSettingChanged",value:function(){this.updateState()}},{key:"onClickSelectCalendars",value:function(e){i.default.menus.openContextMenu({componentName:"ReactContextMenuCalendars",element:e.target,pane:this.props.pane})}},{key:"saveScrollOfTop",value:function(){this.props.pane.getInfiniteList().saveScrollOfTop(!0)}},{key:"onToggleButton",value:function(e){this.saveScrollOfTop(),this.props.pane.search.toggleFilter(e)}},{key:"setPriority",value:function(e){this.saveScrollOfTop();var t=this.props.pane.search;t.getFilterValue("priority")===e&&(e=0),t.setFilter("priority",e)}},{key:"onClickCloseHelp",value:function(){i.default.settings.closeHelp("searchHelp")}},{key:"onClickShowHelp",value:function(){i.default.settings.uncloseHelp("searchHelp")}},{key:"renderSearchButton",value:function(e){var t=this.props.pane;return r.createElement(u.a,{key:e.name,filter:e,filterValue:e.value.get(),search:t.search,hasBorder:!0})}},{key:"renderSearchPriority",value:function(){var e=this.props.pane.search.filter_priority.value.get(),t=n.default.classNames("searchPriorities",{hasSelected:!!e}),a=n.default.classNames("searchPriority searchP0",{selected:e===o.a.VMLIFlag.P0}),i=n.default.classNames("searchPriority searchP1",{selected:e===o.a.VMLIFlag.P1}),s=n.default.classNames("searchPriority searchP2",{selected:e===o.a.VMLIFlag.P2});return r.createElement("span",{key:"priority",className:t},r.createElement("span",{className:a,"data-tooltip":"Show only high priority",onClick:this.setPriority.bind(this,o.a.VMLIFlag.P0)}),r.createElement("span",{className:i,"data-tooltip":"Show medium priority and higher",onClick:this.setPriority.bind(this,o.a.VMLIFlag.P1)}),r.createElement("span",{className:s,"data-tooltip":"Show low priority and higher",onClick:this.setPriority.bind(this,o.a.VMLIFlag.P2)}))}},{key:"render",value:function(){for(var e=0,t=this.props,a=this.props.pane,i=this.state,s=a.search,l=[],c=[],u=0;u<s.filters.length;u++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var g=s.filters[u];g.enabled.get()&&(g.isOption?c.push(this.renderSearchButton(g)):g.icon?l.push(this.renderSearchButton(g)):"priority"===g.name&&l.push(this.renderSearchPriority()))}if(a.isViewDates()){var v=a.isCalFilterActive(),E=n.default.classNames("buttonCalendars",{selected:v});c.push(r.createElement(p.a,{key:"calendars",height:o.a.SearchHeight,className:E,onClick:this.onClickSelectCalendars,padding:8,tooltip:"Select calendars to display in this pane"},"Calendars"))}return r.createElement(h.a,y({},t,{key:"contextMenuSearch"+a.id,id:"contextMenuSearch",maxHeight:400,element:t.element}),i.matches.length>0&&r.createElement(d.default,{onlyMatches:!0,matches:i.matches}),0===i.matches.length&&r.createElement(r.Fragment,null,r.createElement("div",{className:"flexbox"},!1!==t.showFilters&&r.createElement(m.a,{pane:a}),r.createElement("div",{className:"f1"}),!i.showHelp&&r.createElement(p.a,{className:"searchHelpButton",icon:"icon-question",iconSize:12,width:32,height:32,onClick:this.onClickShowHelp})),i.showHelp&&r.createElement(r.Fragment,null,!1!==t.showFilters&&r.createElement("hr",null),r.createElement("div",{className:"rel"},r.createElement(f.a,null,"Hints"),r.createElement(p.a,{className:"searchHintsClose",icon:"icon-close",iconSize:12,width:28,height:28,onClick:this.onClickCloseHelp}),r.createElement("div",{className:"searchHints c-foreground-light"},r.createElement("div",null,r.createElement("span",null,r.createElement("b",null,"-word")),"hide items including word"),r.createElement("div",null,r.createElement("span",null,"a ",r.createElement("b",null,"or")," b"),"show items matching a or b"),r.createElement("div",null,r.createElement("span",null,r.createElement("b",null,"#tag")),"show items with #tag"),r.createElement("div",null,r.createElement("span",null,r.createElement("b",null,"+name")),"show items with +name"),r.createElement("div",null,r.createElement("span",null,"date:",r.createElement("b",null,"<date>")),"show items on date"),r.createElement("div",null,r.createElement("span",null,"before:",r.createElement("b",null,"<date>")),"show items before date"),r.createElement("div",null,r.createElement("span",null,"after:",r.createElement("b",null,"<date>")),"show items after date"),r.createElement("div",null,r.createElement("span",null,"date:overdue"),"show overdue items"),r.createElement("div",null,r.createElement("span",null,r.createElement("b",null,o.a.PrefixItemAutocomplete+"item")),"zoom into item"))))))}}])&&v(a.prototype,g),k&&v(a,k),t}();t.default=k},458:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(2),s=a.n(r),l=a(13),c=a(30),u=a(23),d=a(8),m=a(48),p=a(62),h=a(44);function f(){return(f=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var a,n,o=function(e,t){var a=0;if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;n=r[o],t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var i=0,r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++){if(i++>5e3&&__infLoop&&__infLoop(i))throw new RangeError;a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}}return o}var y=l.b.createClass({displayName:"ReactContextMenuNameBoard",componentDisplay:o.a.ComponentDisplay.Desktop,getHotkeys:function(){return[c.a.create(o.a.KeyCode.Escape,!0,o.a.Primary.Either,o.a.Shift.Either,this.onClickCancel),c.a.create(o.a.KeyCode.Enter,!0,o.a.Primary.Either,o.a.Shift.Either,this.onClickSave)]},onClickSave:function(){var e=this.refs.input.getValue();!this.props.board?i.default.menus.closeContextMenu("ReactContextMenuNameBoard",e):u.a.renameBoard(this.props.board,e)?(n.default.tooltip.hideTip(),i.default.menus.closeContextMenu("ReactContextMenuNameBoard"),this.updateState()):n.default.tooltip.displayTip({text:"Please give this board a unique name.",element:this.refs.menu})},onClickCancel:function(){i.default.menus.closeContextMenu("ReactContextMenuNameBoard",!1)},render:function(){var e=this.props,t=e.board,a=g(e,["board"]),n=(t?"Rename":"Name new")+" board";return s.a.createElement(m.a,f({},a,{key:"contextMenuEditBoard",id:"contextMenuEditBoard",width:400}),s.a.createElement(p.a,{padding:0,border:!1},n),s.a.createElement(h.a,{value:t?this.props.board.name:"",focused:!0,ref:"input"}),s.a.createElement("div",{className:"fancyModalButtons center"},s.a.createElement(d.a,{primary:!0,width:100,onClick:this.onClickSave},"SAVE"),s.a.createElement(d.a,{width:100,onClick:this.onClickCancel},"CANCEL")))}});t.default=y},459:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(4),i=a(2),r=a.n(i),s=a(13),l=a(48),c=a(29),u=a(62);function d(){return(d=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var m=s.b.createClass({displayName:"ReactContextMenuSelectGmailAccount",componentDisplay:n.a.ComponentDisplay.Everywhere,addPane:function(e){this.props.onSelected(e)},render:function(){var e=this,t=this.props,a=o.default.pluginManager.getPluginGmail(),n=a.getSyncAccounts();return r.a.createElement(l.a,d({},t,{key:"contextMenuTitle",id:"contextMenuTitle",maxHeight:400}),t.showHeader&&r.a.createElement(u.a,{topHeader:!0},"Open Gmail Account"),n.map(function(t){var n=a.getDefaultDisplayItem(t);return r.a.createElement(c.a,{key:t,onClick:e.addPane.bind(e,n)},t)}))}});t.default=m},460:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(2),s=a.n(r),l=a(13),c=a(5),u=a(48),d=a(29),m=l.b.createClass({displayName:"ReactContextMenuAddItem",componentDisplay:o.a.ComponentDisplay.Desktop,onClickPrefix:function(e){n.default.vmMain.applyPrefixToSelection(e,this.props.item),this.selectEnd()},onClickHR:function(){this.props.item.setText(o.a.TextMDHR,o.a.ChangeType.Local),this.selectEnd()},onClickFile:function(e,t){var a=this.props,n=this.refs.menu.state,o=n.left,r=n.top;i.default.menus.openContextMenu({componentName:"ReactContextMenuDropZone",element:t.target,pane:a.pane,item:a.item,image:e,pos:{left:o,top:r},paneObject:a.paneObject})},selectEnd:function(){var e=this.props.item,t=e.getParsedText();c.a.selectItem(e,t.length)},render:function(){return s.a.createElement(u.a,{key:"contextMenuAddItem",id:"contextMenuAddItem",element:this.props.element,ref:"menu"},s.a.createElement(d.a,{icon:"icon-project",hotkey:o.a.Prefix.Header+" Space",iconSize:18,onClick:this.onClickPrefix.bind(this,o.a.Prefix.Header)},"Project"),s.a.createElement(d.a,{icon:"icon-check",hotkey:o.a.Prefix.Task+" Space",onClick:this.onClickPrefix.bind(this,o.a.Prefix.Task)},"Task"),s.a.createElement(d.a,{icon:"icon-bullet",hotkey:o.a.Prefix.Bullet+" Space",iconSize:24,onClick:this.onClickPrefix.bind(this,o.a.Prefix.Bullet)},"Bullet"),s.a.createElement(d.a,{icon:"icon-numlist",hotkey:o.a.Prefix.NumList+" Space",iconSize:14,onClick:this.onClickPrefix.bind(this,o.a.Prefix.NumList)},"Numbered List"),s.a.createElement(d.a,{icon:"icon-drive-file",iconSize:14,onClick:this.onClickFile.bind(this,!1)},"File"),s.a.createElement(d.a,{icon:"icon-image",iconSize:13,onClick:this.onClickFile.bind(this,!0)},"Image"),s.a.createElement(d.a,{icon:"icon-hr",hotkey:o.a.TextMDHR,iconSize:14,onClick:this.onClickHR},"Horizontal Line"))}});t.default=m},461:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(4),i=a(2),r=a.n(i),s=a(13),l=a(6),c=a(8),u=a(57),d=a(48),m=a(62),p=a(29),h=s.b.createClass({displayName:"ReactContextMenuCalendars",componentDisplay:n.a.ComponentDisplay.Desktop,init:function(){this.createObservables({anyCalendarsSync:this.computeAnyCalendarsSync()}),l.e.miscAction({type:l.c.Misc,misc:l.a.OpenCalendarsMenu})},getState:function(){var e=this.props.pane;return{displayCalendars:e.displayCalendars,displayLocalItems:e.displayLocalItems}},getSyncCalendars:function(){return o.default.pluginManager.getPluginGCalendar().getImportCalendarList()},computeAnyCalendarsSync:function(){for(var e=0,t=this.props.pane.displayCalendars.get(),a=this.getSyncCalendars(),n=0,o=0;o<a.length;o++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;!1!==t[a[o].id]&&n++}return n>0},onChangeDisplayCalendar:function(e,t){this.props.pane.setDisplayCalendar(e,t),this.anyCalendarsSync.set(this.computeAnyCalendarsSync())},onChangeDisplayLocal:function(e){this.props.pane.setDisplayLocal(e)},onChangeAllCalendars:function(e){for(var t=0,a=this.props.pane,n=this.getSyncCalendars(),o=this.state.displayCalendars,i=0;i<n.length;i++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var r=n[i];o[r.id]!==e&&a.setDisplayCalendar(r,e)}},onClickAdd:function(){o.default.menus.closeContextMenu(),o.default.menus.openSettings(n.a.SettingsSections.GoogleCalendar)},render:function(){var e=this.state,t=this.props,a=o.default.pluginManager.getPluginGCalendar(),n=this.getSyncCalendars(),i=e.displayCalendars;return r.a.createElement(d.a,{key:"contextMenuSelectCalendars",id:"contextMenuSelectCalendars",element:t.element},r.a.createElement(p.a,null,r.a.createElement(u.a,{checked:e.displayLocalItems,onChange:this.onChangeDisplayLocal},"Display local events")),r.a.createElement(m.a,null,r.a.createElement(u.a,{checked:e.anyCalendarsSync,onChange:this.onChangeAllCalendars,size:14},"Google Calendars")),n&&n.map(function(e){var t=a.getCalendarBackgroundColor(e.id);return r.a.createElement(p.a,{key:e.id},r.a.createElement(u.a,{checked:!1!==i[e.id],checkedColor:t,onChange:this.onChangeDisplayCalendar.bind(this,e)},e.summary||e.id))}.bind(this)),(!n||0===n.length)&&r.a.createElement("div",{className:"center",style:{marginTop:8}},r.a.createElement(c.a,{raised:!0,primary:!0,onClick:this.onClickAdd},"ADD CALENDARS")))}});t.default=h},462:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(4),i=a(2),r=a.n(i),s=a(13),l=a(30),c=a(44),u=a(48),d=a(8);function m(){return(m=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var p=s.b.createClass({displayName:"ReactContextMenuInsertLink",componentDisplay:n.a.ComponentDisplay.Everywhere,init:function(){var e=this.props.text,t=n.a.Regexp.MDLink,a=new RegExp(/\S{2,}\.[^0-9.\s]{2,}\S*$/);t.lastIndex=0;var o=t.exec(e);o?(this.text=o[2],this.link=o[3]):null===a.exec(e)?this.text=e:this.link=e},getHotkeys:function(){return[l.a.create(n.a.KeyCode.Enter,!0,n.a.Primary.Either,n.a.Shift.Either,this.onClick),l.a.create(n.a.KeyCode.Escape,!0,n.a.Primary.Either,n.a.Shift.Either,this.close)]},onMount:function(){var e;(e=this.link||!this.text?this.refs.text:this.refs.link).focus(),e.selectAll()},close:function(){o.default.menus.closeContextMenu("ReactContextMenuInsertLink")},onClickRemove:function(){var e=this.refs.text.getValue();this.props.onInsertLink({text:e,url:""})},onClick:function(){var e=this.refs.text.getValue(),t=this.refs.link.getValue();(e||t)&&o.default.menus.isContextMenuOpen("ReactContextMenuInsertLink")&&(this.close(),t&&!t.startsWith("http")&&(t="http://"+t),this.props.onInsertLink({text:e,url:t}))},render:function(){return r.a.createElement(u.a,m({},this.props,{key:"contextMenuInsertLink",id:"contextMenuInsertLink"}),r.a.createElement("div",{className:"flexbox"},r.a.createElement("span",null,"Text"),r.a.createElement(c.a,{className:"f1",ref:"text",height:28,width:260,value:this.text||this.link,onEnter:this.onClick,onEscape:this.close})),r.a.createElement("div",{className:"flexbox"},r.a.createElement("span",null,"Link"),r.a.createElement(c.a,{className:"f1",ref:"link",height:28,width:260,value:this.link,onEnter:this.onClick,onEscape:this.close})),r.a.createElement("div",{className:"flexbox",style:{marginTop:16}},this.link&&r.a.createElement(d.a,{cancel:!0,height:32,onClick:this.onClickRemove},"REMOVE"),r.a.createElement("div",{className:"f1"}),r.a.createElement(d.a,{primary:!0,height:32,onClick:this.onClick},"INSERT")))}});t.default=p},463:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(4),i=a(2),r=a.n(i),s=a(13),l=a(435),c=a(48),u=s.b.createClass({displayName:"ReactContextMenuContactDetails",componentDisplay:n.a.ComponentDisplay.Everywhere,onClose:function(){o.default.menus.closeContextMenu("ReactContextMenuContactDetails")},render:function(){return r.a.createElement(c.a,{key:"contextMenuContactDetails",id:"contextMenuContactDetails",element:this.props.element,position:this.props.position},r.a.createElement(l.a,{contact:this.props.contact,onClose:this.onClose}))}});t.default=u},464:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(2),s=a.n(r),l=a(13),c=a(5),u=a(3),d=a(14),m=a(436),p=a(48);function h(){return(h=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var f=l.b.createClass({displayName:"ReactNotePopup",componentDisplay:o.a.ComponentDisplay.Everywhere,init:function(){this.createObservables({isFullscreen:!1})},getState:function(){return{maxWidth:this.props.pane.getWidth()-20}},onMount:function(){u.a.isMobile||d.a.listen("windowResize",this.onResize)},onResize:function(){this.updateState(),setTimeout(function(){this.refs.menu.updateState()}.bind(this),300)},onUnmount:function(){var e=this.props.item;u.a.isMobile||d.a.unlisten("windowResize",this.onResize),c.a.selectIndex(this.props.index-1,e.getParsedText().length),u.a.isMobile&&n.default.keyboardToolbar.show(o.a.KeyboardToolbarMode.Item)},onKeyPress:function(e){u.a.getKeyCode(e)!==o.a.KeyCode.Enter||!e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||(i.default.menus.closeContextMenu(),e.preventDefault(),e.stopPropagation())},onClickClose:function(){i.default.menus.closeContextMenu()},onGoFullscreen:function(e){console.log(e),this.isFullscreen.set(e)},render:function(){var e=this.props,t=this.state,a=this.state.maxWidth,n=u.a.isMobile&&e.bottom,o={overflow:t.isFullscreen?"visible":void 0};return s.a.createElement(p.a,h({},this.props,{key:e.note.id+"_Note",id:"contextMenuNote",width:600,maxWidth:a,bottom:n,style:o,ref:"menu"}),s.a.createElement(m.a,{ref:"noteText",item:e.item,focused:!0,onKeyPress:this.onKeyPress,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,richText:!0,goFullscreen:this.onGoFullscreen,onClickClose:this.onClickClose}))}});t.default=f},465:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(3),s=a(6),l=a(2),c=a.n(l),u=a(13),d=a(35),m=a(59),p=a(14),h=a(5),f=a(77),g=a(8),y=a(48),v=a(29);function E(){return(E=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var b=u.b.createClass({displayName:"ReactContextMenuDropBucket",componentDisplay:o.a.ComponentDisplay.Everywhere,init:function(){this.createObservables({draggingItem:void 0})},onMount:function(){p.a.listen("droppedItem",this.onItemDropped)},onUnmount:function(){p.a.unlisten("droppedItem",this.onItemDropped)},getState:function(){return{items:n.default.vmMain.dropBucket.getItems(),isDragging:i.default.DragDrop.isVisible}},createEvent:function(e,t){var a=n.default.findChild(t.target,"item")||n.default.findParent(t.target,"item",5);return{fromDropBucket:!0,startSrc:a,target:a,clientX:t.clientX,clientY:t.clientY,eventX:t.eventX||t.clientX,eventY:t.eventY||t.clientY,pageX:t.pageX,pageY:t.pageY,preventDefault:n.default.emptyFn,stopPropagation:n.default.emptyFn,stopImmediatePropagation:n.default.emptyFn,pane:e.pane}},onMouseDown:function(e,t){if(e.item&&r.a.isMobile){var a=this.createEvent(e,t);i.default.DragDrop.startDragItem=e.item,e.item.dragStart(a),e.item.dragMove(a)}},onClickItem:function(e,t){if(!n.default.hasClass(t.target,"fancyButton")&&!r.a.isMobile){var a={mode:o.a.AutocompleteMode.Move,text:"Select item to move to",buttonText:"MOVE",elementDisplay:t.target,onSelected:function(t){s.e.beginAction();var a=e.item.clone(t.item,o.a.ChangeType.Local);t.item.insertItem(a,0),e.item.parent().removeChild(e.item,o.a.ChangeType.Local),n.default.vmMain.dropBucket.removeTextEntry(e.id),0===this.state.items.length&&i.default.menus.closeContextMenu(),s.e.endAction()}.bind(this)};d.a.showPopup(a)}},onMouseMove:function(e,t){if(e.item&&r.a.isMobile){var a=this.createEvent(e,t);h.a.onMouseMoveDocument(a),e.item.onMove(a),this.draggingItem.set(e.item)}},onMouseUp:function(e,t){if(e.item&&r.a.isMobile){var a=this.createEvent(e,t);e.item.onEnd(a),this.draggingItem.set(void 0),0===this.state.items.length&&i.default.menus.closeContextMenu()}},onCloseButton:function(e,t){e.item&&n.default.vmMain.dropBucket.hasItemEntry(e.item)&&n.default.vmMain.dropBucket.removeItemEntry(e.item),n.default.vmMain.dropBucket.hasTextEntry(e.id)&&n.default.vmMain.dropBucket.consumeTextEntry(e.id),t.stopPropagation()},onItemDropped:function(e){n.default.vmMain.dropBucket.hasItemEntry(e)&&n.default.vmMain.dropBucket.removeItemEntry(e),n.default.vmMain.dropBucket.hasTextEntry(e.id)&&n.default.vmMain.dropBucket.removeTextEntry(e.id)},_renderBucketItem:function(e,t){return e.item?c.a.createElement(f.a,{item:e.item,allowDrag:!0}):c.a.createElement(m.a,null,e.text)},render:function(){for(var e=0,t=this.props,a=this.state,o=[],i=0;i<a.items.length;i++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var s=a.items[i],l=s.item,u=s.id,d={width:"100%",overflow:"hidden"},p=n.default.classNames({dragging:a.draggingItem===l});r.a.isMobile||(d.maxWidth="335px"),o.push(c.a.createElement(v.a,{key:u,className:p,onClick:this.onClickItem.bind(this,s),clickCloses:!1,hasButtons:!0,hoverEffects:!0},c.a.createElement(m.a,{style:d,onMouseDown:this.onMouseDown.bind(this,s),onMouseMove:this.onMouseMove.bind(this,s),onMouseUp:this.onMouseUp.bind(this,s)},this._renderBucketItem(s,i)),c.a.createElement(g.a,{icon:"icon-close",width:"48px",iconSize:20,onClick:this.onCloseButton.bind(this,s)})))}return c.a.createElement(y.a,E({},t,{key:"contextMenuDropBucket",id:"contextMenuDropBucket",supportArrows:!0}),o)}});t.default=b},466:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(2),r=a.n(i),s=a(13),l=a(4),c=a(48),u=s.b.createClass({displayName:"ReactContextMenuEmailDetails",componentDisplay:o.a.ComponentDisplay.Desktop,_generateParticipantTextExpanded:function(e){return e.text?r.a.createElement("span",null,r.a.createElement("b",null,e.text)," <"+e.email+">"):e.email},renderLabels:function(){for(var e=0,t=n.default.vmMain.getDefaultEmailPlugin(),a=this.props.accountID,o=this.props.message.labelIds,i=[],s=0;s<o.length;s++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var l=t._getLabelByID(a,o[s]);i.push(r.a.createElement("div",{key:s},l.getName()))}return this.renderLine("labels",i)},renderParticipants:function(e){var t=this.props.message[e].map(function(e,t){return r.a.createElement("div",{key:t},this._generateParticipantTextExpanded(e))}.bind(this));return this.renderLine(e,t)},renderLine:function(e,t){return r.a.createElement("div",{className:"emailDetailsLine flexbox"},r.a.createElement("div",null,e+":"),r.a.createElement("span",{className:"f1"},t))},render:function(){var e=this.props.message,t=e.date,a=t.toString(l.default.International.getFormat(o.a.DFormat.DayMonthDateYear))+" at "+t.toString(l.default.International.getFormat(o.a.DFormat.ShortTime));return r.a.createElement(c.a,{key:"contextMenuEmailDetails",id:"contextMenuEmailDetails",element:this.props.element},this.renderLine("from",this._generateParticipantTextExpanded(e.from)),e.to&&this.renderParticipants("to"),e.cc&&this.renderParticipants("cc"),e.bcc&&this.renderParticipants("bcc"),this.renderLine("date",a),this.renderLine("subject",e.subject),e.labelIds&&this.renderLabels())}});t.default=u},467:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(3),i=a(1),r=a(4),s=a(2),l=a.n(s),c=a(13),u=a(42),d=a(5),m=a(40),p=a(8),h=a(48),f=a(62),g=a(29),y=a(25),v=a(36),E=c.b.createClass({displayName:"ReactContextMenuItem",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){var e=this,t=this.props,a=!1;this.mod=o.a.secModKey,this.priMod=o.a.priModKey,this.items=[],t.pane.applyToSelection(function(n){t.item===n&&(a=!0),e.item||(e.item=n),e.hasSelection=!0,e.items.push(n)}),a||(this.item=void 0,this.hasSelection=!1),this.item||(this.item=t.item,this.items=[this.item],this.hasSelection=!1);try{n.default.PAssert(1741,this.item,"Must have a valid item")}catch(i){self.reportError(i)}},onClickComplete:function(){this.hasSelection?n.default.focusedPane.applyFnToSelection("setComplete",{toggle:"isComplete",value2:i.a.ChangeType.Local}):this.item.setComplete(!this.item.isComplete(),i.a.ChangeType.Local)},onClickStar:function(){this.hasSelection?n.default.focusedPane.applyFnToSelection("setStarred",{toggle:"isStarred",value2:i.a.ChangeType.Local}):this.item.setStarred(!this.item.isStarred(),i.a.ChangeType.Local)},onClickPriority:function(e){this.hasSelection?this.props.pane.applyPriorityToSelection(e):this.item.setPriority(e,i.a.ChangeType.Local),r.default.menus.closeContextMenu()},onClickIndent:function(e){d.a.fireKeyEvent(void 0,{normCode:i.a.KeyCode.Tab,shiftKey:e})},onClickMove:function(){this.props.pane.autocompleteMove()},onClickCreateTask:function(){this.props.pane.autocompleteCreateTask()},onClickNote:function(){d.a.editNote(this.item)},onClickCollapse:function(){this.item.toggleCollapsed(this.props.pane)},onClickZoom:function(){this.item.canZoom()&&(d.a.setFocusedPane(this.props.pane),this.props.pane.zoomIn(this.item))},onClickZoomNewPane:function(){var e=this.props.pane;if(this.item.canZoom()){var t=r.default.PaneManager.getPaneIndex(e)+1,a=e.getSaveInfo();a.item=this.item,a.document=e.getDocument(),delete a.id;var n=u.a.createPane(i.a.PaneMode.Task,a);return r.default.PaneManager.addPaneAtIndex(n,t),d.a.setFocusedPane(n),n.onAdded(),!1}},onClickGoto:function(){n.default.scrollToAndHighlightItem(this.item,this.props.pane)},onClickArchive:function(){var e=this.props.pane;e.isWriteable&&(this.hasSelection?e.archiveSelected(!0):this.props.item.archiveSelf(i.a.ChangeType.Local))},onClickUnarchive:function(){n.default.focusedPane.runUnarchive(this.item)},onClickDelete:function(){var e=this.item,t=this.props.pane;if(e.isNote()){var a=d.a.getStartIndex(),n=e.parent();e.parent().setNote(void 0,i.a.ChangeType.Local),d.a.selectIndex(a-1,n.getParsedText().length)}else if(t.isWriteable)if(t.isViewDates()&&!e.hasAttachmentType(i.a.PluginType.Calendar)&&e.hasChildren()){r.default.menus.options("The item you are deleting has children.",["Remove Date","Delete All"],function(t){if("Remove Date"===t){var a=e.getParsedText().replace(e.getItemDateString(),"");e.setText(a,i.a.ChangeType.Local)}else"Delete All"===t&&e.deleteSelf(i.a.ChangeType.Local)})}else this.hasSelection?(v.a.saveDeleteSelection(),t.deleteSelected()):(e.hasAttachmentType(i.a.PluginType.Calendar)&&this.onClickDeleteCalendar(),this.props.item.deleteSelf(i.a.ChangeType.Local))},onClickAddCalendar:function(){var e=n.default.vmMain.getDefaultCalendarPlugin(),t=this.item;e&&(e.createEventForItem(t),t.itemChanged.notify())},onClickDeleteCalendar:function(){for(var e=0,t=this.props.pane,a=0,o=function(e,n){a--,n?0===a&&t.updateItems():r.default.toasts.pushMessage({text:"There was an error removing the event from your Google Calendar.",action:i.a.MessageAction.Okay})},s=0;s<this.items.length;s++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var l=this.items[s];if(l.hasAttachmentType(i.a.PluginType.Calendar)){var c=l.getAttachmentByPlugin(i.a.PluginID.GCalendar);try{n.default.PAssert(1742,c,"Must be able to get a valid attachment")}catch(m){self.reportError(m)}try{n.default.PAssert(1743,this.item,"Must have a valid item")}catch(m){self.reportError(m)}var u=c.getPlugin();u.hasWritePermissionForAttach(c)?(a++,d.a.reset(),u.deleteCalendarEventForItem(l,c,n.default.newEmptyFn(),n.default.newEmptyFn(),o)):r.default.toasts.pushMessage(i.a.MessageID.ReadOnlyCalendar)}}},onClickReply:function(){this.hasSelection?this.props.pane.replySelected():this.props.pane.openEmailByItem(this.item,i.a.EmailResponseMode.Reply)},onClickReplyAll:function(){this.hasSelection?this.props.pane.replyAllSelected():this.props.pane.openEmailByItem(this.item,i.a.EmailResponseMode.ReplyAll)},onClickForward:function(){this.hasSelection?this.props.pane.forwardSelected():this.props.pane.openEmailByItem(this.item,i.a.EmailResponseMode.Forward)},onClickRead:function(){var e=this.item,t=e.getAttachmentByType(i.a.PluginType.Email),a=t.getPlugin(),n=a.isItemUnread(e);this.hasSelection?this.props.pane.markReadSelected(n):n?a.performAction(i.a.PluginAction.Gmail.MarkRead,!1,t):a.performAction(i.a.PluginAction.Gmail.MarkUnread,!1,t)},onClickStarGmail:function(){if(this.hasSelection)this.props.pane.toggleStarSelected();else{var e=this.item.getAttachmentByType(i.a.PluginType.Email),t=e.getPlugin();t.isItemStarred(this.item)?t.performAction(i.a.PluginAction.Gmail.Unstar,!1,e):t.performAction(i.a.PluginAction.Gmail.Star,!1,e)}},onClickSnooze:function(){this.props.pane.autocompleteSnooze()},onClickLabel:function(){this.props.pane.autocompleteLabel()},onClickSchedule:function(){this.props.pane.autocompleteSchedule()},onClickArchiveGmail:function(){var e=this.item,t=e.getAttachmentByType(i.a.PluginType.Email),a=t.getPlugin(),n=a.isItemArchived(e);"PaneGmail"===this.props.pane.type&&this.hasSelection?this.props.pane.archiveSelected(!n):n?a.performAction(i.a.PluginAction.Gmail.Unarchive,!1,t):a.performAction(i.a.PluginAction.Gmail.Archive,!1,t)},onClickDeleteGmail:function(){var e=this.item,t=e.getAttachmentByType(i.a.PluginType.Email).getPlugin(),a=t.isItemFullTrashed(e);this.hasSelection?this.props.pane.deleteSelected(t.isGmailItem,!a):t.isGmailItem(e)&&(this.onClickDeleteCalendar(),e.deleteSelf(i.a.ChangeType.Local))},onClickPrefix:function(e){n.default.vmMain.applyPrefixToSelection(e,!this.hasSelection&&this.item)},onClickShowMDImageText:function(e){this.props.pane.search.clearStickyMatches();var t=this.item.getRawText(),a=e.substr(1);t=t.replace(e,a),this.item.setText(t,i.a.ChangeType.Local)},onClickShowDriveImageText:function(e){this.props.pane.search.clearStickyMatches();var t=this.item.getAttachmentByPlugin(i.a.PluginID.Drive);t.getPlugin().setShowInline(t,e),m.a.itemTextChanged(this.item)},onClickMakeLinkImage:function(e){var t=0;this.props.pane.search.clearStickyMatches();var a,n,o=this.item.getRawText();for(i.a.Regexp.MDLink.lastIndex=0;null!==(a=i.a.Regexp.MDLink.exec(o));){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;a[3]===e&&(e=a[0],n="!["+a[2]+"]("+a[3]+(a[4]?a[4]:"")+")")}n||(n=e.startsWith("[")?"!"+e:"!["+e+"]("+e+")"),o=o.replace(e,n),this.item.setText(o,i.a.ChangeType.Local)},onViewInDrive:function(){var e=this.item,t=e.getAttachmentByPlugin(i.a.PluginID.Drive);t.getPlugin().openAttach(t,e,this.props.pane)},renderMenuItemMDImage:function(e){var t=e.getAttribute("data-original-text");return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{onClick:this.onClickShowMDImageText.bind(this,t)},"Show as text"),l.a.createElement("hr",null))},renderMenuLinkImage:function(e){var t=e.getAttribute("data-original-text")||e.getAttribute("data-href")||e.textContent;return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{onClick:this.onClickMakeLinkImage.bind(this,t)},"Show as image"),l.a.createElement("hr",null))},renderMenuDate:function(){return l.a.createElement("span",null,l.a.createElement(g.a,{icon:"icon-calendar",hotkey:{name:"AddToCalendar"},onClick:this.onClickAddCalendar},"Add to Google Calendar"))},renderMenuNote:function(){return l.a.createElement("span",null,l.a.createElement(g.a,{icon:"icon-edit",hotkey:{name:"EditNote"},onClick:this.onClickNote},"Edit"),l.a.createElement(g.a,{icon:"icon-delete",onClick:this.onClickDelete},"Delete"))},renderMenuDefault:function(){var e,t=this.props.pane,a=this.item,o=(this.mod,this.priMod),r=t.isViewCalendar(),s=!r,c=t.supportIndent&&!a.isNote()&&0!==a.getIndex()&&!t.search.isFlatSearchResult(a),u=t.supportIndent&&!a.isNote()&&a.parent()!==n.default.focusedItem&&!(t.search.isFlatSearchResult(a)||t.search.isFlatSearchResult(a.parent()));if(n.default.vmMain.getDefaultCalendarPlugin()&&a.getDate())if(a.hasAttachmentType(i.a.PluginType.Calendar)){var d=a.getAttachmentByType(i.a.PluginType.Calendar);e=l.a.createElement(g.a,{icon:"icon-delete",disabled:!d.getPlugin().hasWritePermissionForAttach(d),onClick:this.onClickDeleteCalendar},"Remove from Google Calendar")}else e=l.a.createElement(g.a,{icon:"icon-calendar",hotkey:s&&{name:"AddToCalendar"},onClick:this.onClickAddCalendar},"Add to Google Calendar");return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{icon:"icon-check",hotkey:s&&{name:"Complete"},onClick:this.onClickComplete},a.isComplete()?"Uncomplete":"Complete"),l.a.createElement(g.a,{icon:"icon-zoom-in",hotkey:s&&{name:"ZoomIn"},onClick:this.onClickZoom},"Zoom In"),l.a.createElement(g.a,{icon:"icon-star",hotkey:s&&{name:"Star"},onClick:this.onClickStar},a.isStarred()?"Unstar":"Star"),l.a.createElement(f.a,{hotkey:s&&o+" + #"},"Priority"),l.a.createElement("div",{className:"horizontalMenu"},l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityNone",width:24,height:24,tooltipHotkey:s&&{name:"PriorityNone"},onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.None)}),l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityLow",width:24,height:24,tooltipHotkey:s&&{name:"Priority1"},onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.P2)}),l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityMed",width:24,height:24,tooltipHotkey:s&&{name:"Priority2"},onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.P1)}),l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityHigh",width:24,height:24,tooltipHotkey:s&&{name:"Priority3"},onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.P0)})),l.a.createElement(f.a,null,"Item Type"),l.a.createElement("div",{className:"horizontalMenu"},l.a.createElement(p.a,{className:"c-border-heavy",iconSize:14,width:24,height:24,tooltip:"None",onClick:this.onClickPrefix.bind(this,null)}),l.a.createElement(p.a,{className:"c-border-heavy",icon:"icon-project",iconSize:18,width:24,height:24,tooltip:"Project",onClick:this.onClickPrefix.bind(this,i.a.Prefix.Header)}),l.a.createElement(p.a,{className:"c-border-heavy",icon:"icon-check",iconSize:15,width:24,height:24,tooltip:"Task",onClick:this.onClickPrefix.bind(this,i.a.Prefix.Task)}),l.a.createElement(p.a,{className:"c-border-heavy",icon:"icon-bullet",iconSize:22,width:24,height:24,tooltip:"Bullet",onClick:this.onClickPrefix.bind(this,i.a.Prefix.Bullet)}),l.a.createElement(p.a,{className:"c-border-heavy",icon:"icon-numlist",iconSize:13,width:24,height:24,tooltip:"Numbered List",onClick:this.onClickPrefix.bind(this,i.a.Prefix.NumList)})),e&&l.a.createElement("hr",null),e,l.a.createElement("hr",null),c&&l.a.createElement(g.a,{icon:"icon-format_indent_increase",hotkey:{name:"Indent"},onClick:this.onClickIndent.bind(this,!1)},"Indent"),u&&l.a.createElement(g.a,{icon:"icon-format_indent_decrease",hotkey:{name:"Unindent"},onClick:this.onClickIndent.bind(this,!0)},"Unindent"),!r&&l.a.createElement(g.a,{icon:"icon-align-left",hotkey:{name:"MoveAutocomplete"},onClick:this.onClickMove},"Move"),l.a.createElement("hr",null),!r&&l.a.createElement(g.a,{icon:"icon-sticky-note-o",hotkey:{name:"EditNote"},onClick:this.onClickNote},"Add Note"),l.a.createElement(g.a,{icon:"icon-zoom-in-plus",onClick:this.onClickZoomNewPane},"Open in New Pane"),l.a.createElement(g.a,{icon:"icon-keyboard-tab",hotkey:{name:"Goto"},onClick:this.onClickGoto},"Go to in all panes"),l.a.createElement("hr",null),l.a.createElement(g.a,{icon:"icon-task",onClick:this.onClickArchive},"Archive Item"),l.a.createElement(g.a,{icon:"icon-delete",hotkey:{name:"DeleteItem"},onClick:this.onClickDelete},"Delete"))},renderMenuArchived:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{icon:"icon-task",onClick:this.onClickUnarchive},"Unarchive"),l.a.createElement(g.a,{icon:"icon-delete",onClick:this.onClickDelete},"Delete"))},renderMenuDrive:function(){var e=this.props.pane,t=this.item,a=t.isCollapsed(e,!1),n=e.supportCollapsing&&(t.isHeader()||t.hasChildren()),o=t.isHeader()||t.hasChildren(),r=t.getAttachmentByPlugin(i.a.PluginID.Drive),s=r.getPlugin().isImage(r),c=r.getField("showInline");return l.a.createElement(l.a.Fragment,null,!e.plugin&&s&&l.a.createElement(g.a,{onClick:this.onClickShowDriveImageText.bind(this,!c)},"Show as "+(c?"text":"image")),e.plugin&&l.a.createElement(g.a,{disabled:!n,icon:a?"icon-add":"icon-minus",hotkey:{name:"Collapse"},onClick:this.onClickCollapse},a?"Expand":"Collapse"),e.plugin&&l.a.createElement(g.a,{disabled:!o,icon:"icon-zoom-in",hotkey:{name:"ZoomIn"},onClick:this.onClickZoom},"Zoom In"),l.a.createElement(g.a,{onClick:this.onViewInDrive},"View in Drive"),!e.plugin&&l.a.createElement("hr",null))},renderMenuGCalendar:function(e){return e.getPlugin().hasWritePermissionForAttach(e)?l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{icon:"icon-check",onClick:this.onClickComplete},e.getField("isComplete")?"Uncomplete":"Complete"),l.a.createElement(g.a,{icon:"icon-task",onClick:this.onClickArchive},e.getField("isArchived")?"Unarchive":"Archive"),l.a.createElement("hr",null),l.a.createElement(g.a,{className:"mat-subheader"},"Priority"),l.a.createElement("div",{id:"contextMenuPriority",className:"horizontalMenu"},l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityNone",onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.None)}),l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityLow",onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.P2)}),l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityMed",onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.P1)}),l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityHigh",onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.P0)})),l.a.createElement("hr",null),l.a.createElement(g.a,{icon:"icon-delete",onClick:this.onClickDeleteCalendar},"Remove from Google Calendar")):l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{icon:"icon-warning"},"Read-Only Event"))},renderMenuGmail:function(e){var t=this.item,a=this.mod,n="PaneGmail"===this.props.pane.type,o=e.getPlugin(),r=o.isItemUnread(t),s=o.isItemStarred(t),c=o.isItemArchived(t),u=o.isItemFullTrashed(t),d=y.a.isAuthorizedForScopes(e.getField("accountID"),[i.a.GScope.GmailModify]),m=l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{icon:"icon-reply",hotkey:n&&{name:"Reply",group:"Email"},onClick:this.onClickReply},"Reply"),l.a.createElement(g.a,{icon:"icon-reply-all",hotkey:n&&{name:"ReplyAll",group:"Email"},onClick:this.onClickReplyAll},"Reply All"),l.a.createElement(g.a,{icon:"icon-forward",hotkey:n&&{name:"Forward",group:"Email"},onClick:this.onClickForward},"Forward"),l.a.createElement("hr",null));return l.a.createElement(l.a.Fragment,null,m,n&&l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,{icon:r?"icon-drafts":"icon-unread",iconSize:14,hotkey:r?"":{name:"MarkUnread",group:"Email"},onClick:this.onClickRead},r?"Mark as read":"Mark as unread"),l.a.createElement(g.a,{icon:"icon-star",hotkey:{name:"Star",group:n?"Email":"Pane"},onClick:this.onClickStarGmail},s?"Unstar":"Star"),l.a.createElement("hr",null),l.a.createElement(g.a,{className:"mat-subheader",hotkey:a+" + #"},"Priority"),l.a.createElement("div",{id:"contextMenuPriority",className:"horizontalMenu"},l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityNone",onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.None)}),l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityLow",onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.P2)}),l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityMed",onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.P1)}),l.a.createElement(p.a,{className:"c-border-heavy",id:"itemPriorityHigh",onClick:this.onClickPriority.bind(this,i.a.VMLIFlag.P0)})),l.a.createElement("hr",null),l.a.createElement(g.a,{disabled:!d,icon:"icon-access_time",hotkey:{name:"Snooze",group:"Email"},onClick:this.onClickSnooze},"Snooze"),l.a.createElement(g.a,{icon:"icon-tag",hotkey:{name:"Label",group:"Email"},onClick:this.onClickLabel},"Label"),l.a.createElement(g.a,{icon:"icon-check",hotkey:{name:"Task",group:"Email"},onClick:this.onClickCreateTask},"Create Task"),l.a.createElement(g.a,{icon:"icon-align-left",hotkey:{name:"Move",group:"Email"},onClick:this.onClickMove},"Add to Outline"),l.a.createElement(g.a,{icon:"icon-calendar",hotkey:{name:"Schedule",group:"Email"},onClick:this.onClickSchedule},"Add To Calendar"),l.a.createElement("hr",null),l.a.createElement(g.a,{disabled:u,icon:"icon-task",hotkey:{name:"Archive",group:"Email"},onClick:this.onClickArchiveGmail},c?"Unarchive":"Archive"),l.a.createElement(g.a,{disabled:u,icon:"icon-delete",hotkey:{name:"Delete",group:"Email"},onClick:this.onClickDeleteGmail},u?"Undelete":"Delete")))},render:function(){var e,t,a=this.props,o=a.pane,r=this.item,s=a.element,c=n.default.getPluginForElement(s);if(c){var u=c.getAttribute("plugin");if(r.hasPluginAttachment(u))switch(u){case i.a.PluginID.Drive:t=this.renderMenuDrive();break;case i.a.PluginID.GCalendar:t=this.renderMenuGCalendar(r.getAttachmentByPlugin(u));break;case i.a.PluginID.Gmail:t=this.renderMenuGmail(r.getAttachmentByPlugin(u))}o.plugin||(e=t,t=void 0)}else if(n.default.hasClass(s,"linkImage"))e=this.renderMenuLinkImage(s);else if(n.default.hasClass(s,"mdImage"))e=this.renderMenuItemMDImage(s);else if(n.default.hasClass(s,"driveImage"))e=this.renderMenuDrive();else if(n.default.hasClass(s,"date")){n.default.vmMain.getDefaultCalendarPlugin()&&(t=r.hasAttachmentType(i.a.PluginType.Calendar)?this.renderMenuGCalendar(r.getAttachmentByPlugin(i.a.PluginID.GCalendar)):this.renderMenuDate())}else r.isNote()&&(t=this.renderMenuNote());if(!t){var d=o.getContextMenuMode(r);switch(d){case i.a.ContextMenuMode.Default:t=this.renderMenuDefault();break;case i.a.ContextMenuMode.Archived:t=this.renderMenuArchived();break;case i.a.ContextMenuMode.Gmail:t=this.renderMenuGmail(r.getAttachmentByPlugin(i.a.PluginID.Gmail));break;default:try{n.default.PAssert(1744,!1,"Unknown context menu mdoe: "+d)}catch(m){self.reportError(m)}}}return l.a.createElement(h.a,{id:"contextMenuItem",element:a.element,supportArrows:!0,pos:a.pos,noBackdrop:a.noBackdrop},e,t)}});t.default=E},468:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(3),r=a(4),s=a(12),l=a(2),c=a.n(l),u=a(13),d=a(83),m=a(48),p=a(29),h=a(8),f=a(63),g=a(25);function y(e){return(y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){return(v=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function E(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,C(t).apply(this,arguments))}var a,l,y;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,u["a"]),a=t,(l=[{key:"init",value:function(){var e=this;this.createObservables({syncTimes:{},isBackingUp:!1});var t=r.default.pluginManager.getPlugin(o.a.PluginID.Gmail);t.isEnabled()&&t.getAllLastSyncTimes(function(t){e.syncTimes.set(t)}),this.listenTo(g.a.onAccountsUpdated)}},{key:"getState",value:function(){n.default.vmMain;var e=s.a.onlineStatus.get(),t={onlineStatus:s.a.onlineStatus,lastSync:r.default.settings.lastSync,lastSyncText:this.getLastSyncText(),lastBackup:r.default.settings.lastBackup,lastBackupText:this.getLastBackupText(),isOnline:e!==o.a.OnlineStatus.Offline,isConnected:e===o.a.OnlineStatus.Online,supportsOffline:!!window.applicationCache,nearQuota:i.a.isNearStorageQuota,hasUnsavedData:!1,cacheRatioWarning:parseFloat(r.default.pluginManager.getCacheSizeRatio())<.6,backupFrequency:r.default.settings.backupFrequency,isBackupEnabled:r.default.settings.isBackupEnabled()};return t.hasWarning=t.overQuota||t.nearQuota||t.hasUnsavedData||t.cacheRatioWarning||!t.supportsOffline,t}},{key:"getLastSyncText",value:function(){var e=r.default.settings.lastSync.get();return e>0?new Date(e).toString(r.default.International.getFormat(o.a.DFormat.LongDayTime)):"Not synced"}},{key:"getLastBackupText",value:function(){var e,t=r.default.settings.lastBackup.get();if(this.isBackingUp.get())e="Backing up...";else if(t>0){var a=new Date(t);e=f.a.toHumanText(a)}else e="Not backed up";return e}},{key:"_handleQuotaOverClick",value:function(){r.default.toasts.pushMessage({text:"Your computer's offline storage quota has been exceeded. Please try freeing space on your device. Offline access will not work.",action:o.a.MessageAction.Okay})}},{key:"_handleQuotaNearClick",value:function(){r.default.toasts.pushMessage({text:"Your computer's offline storage quota is almost exceeded. Please try freeing space on your device, running out will cause offline access to not work.",action:o.a.MessageAction.Okay})}},{key:"_handleUnsavedClick",value:function(){r.default.toasts.pushMessage({text:"Your local changes have been unable to be persisted to disk and have not been saved remotely. You must reconnect to the internet to save them. Free up disk space to prevent this happening.",action:o.a.MessageAction.Okay})}},{key:"_handleRatioClick",value:function(){r.default.toasts.pushMessage({text:"Due to low disk space your cache size was restricted. View your General Settings to reset your cache size.",action:o.a.MessageAction.OpenGeneralSettings})}},{key:"_handleBlockClick",value:function(){}},{key:"_handleCookiesClick",value:function(){}},{key:"onClickBackup",value:function(){var e=this;this.isBackingUp.set(!0),d.a.backupLocal(),d.a.backup(function(){return e.isBackingUp.set(!1)})}},{key:"onClickEnableBackups",value:function(){d.a.enable()}},{key:"_handleIconWarningClick",value:function(e){r.default.pluginManager.verifyAuthorization(e,!0)}},{key:"componentDidUpdate",value:function(){this.refs.menu.updateState()}},{key:"_renderAccounts",value:function(){var e,t,a,n,i=this.state,s=[];for(var l in i.syncTimes)if(i.syncTimes.hasOwnProperty(l)){var u=i.syncTimes[l];if(e=void 0,t=void 0,a=void 0,n=u?l+": "+u.toString(r.default.International.getFormat(o.a.DFormat.ShortDayTime)):l+": Not synced",g.a.isLoaded){var d=g.a.getError(l);if(d)e="icon-warning",t=d,a=this._handleIconWarningClick.bind(this,l);else r.default.pluginManager.getPlugin(o.a.PluginID.Gmail).verifyAuthorization(l)||(e="icon-warning",t="Missing authorization",a=this._handleIconWarningClick.bind(this,l))}s.push(c.a.createElement(p.a,{key:l,icon:e,iconTooltip:t,onClickIcon:a},n))}return s.length>0&&c.a.createElement("div",null,c.a.createElement("hr",null),c.a.createElement(p.a,{className:"onlineStatusHeader"},"Email accounts"),s)}},{key:"render",value:function(){var e=this.state,t=this._renderAccounts();return c.a.createElement(m.a,v({},this.props,{ref:"menu",key:"contextMenuOnlineStatus",id:"contextMenuOnlineStatus",element:this.props.element}),c.a.createElement(p.a,{className:"onlineStatusHeader"},"Last Sync"),c.a.createElement(p.a,null,e.lastSyncText),c.a.createElement("hr",null),e.isBackupEnabled&&c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,{className:"onlineStatusHeader",height:36},"Last Backup",c.a.createElement(h.a,{primary:!0,onClick:this.onClickBackup},"Backup now")),c.a.createElement(p.a,null,e.lastBackupText)),!e.isBackupEnabled&&c.a.createElement(p.a,{className:"onlineStatusHeader",height:36},"Backup",c.a.createElement(h.a,{primary:!0,onClick:this.onClickEnableBackups},"Enable backups")),e.hasWarning&&c.a.createElement("div",null,c.a.createElement("hr",null),c.a.createElement(p.a,{className:"onlineStatusHeader"},"Warnings"),!e.supportsOffline&&c.a.createElement(p.a,{clickCloses:!1,tooltip:"Learn More"},"Your browser does not support offline access"),e.overQuota&&c.a.createElement(p.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleQuotaOverClick},"Disk quota exceeded"),e.nearQuota&&c.a.createElement(p.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleQuotaNearClick},"Nearly out of disk space"),e.hasUnsavedData&&c.a.createElement(p.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleUnsavedClick},"Unsaved changes will be lost"),e.cacheRatioWarning&&c.a.createElement(p.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleRatioClick},"Your data is not efficiently being cached"),e.undoRedoDisabled&&c.a.createElement(p.a,null,"You cannot undo/redo while offline")),t)}}])&&E(a.prototype,l),y&&E(a,y),t}();t.default=w},469:function(e,t,a){"use strict";a.r(t);var n=a(4),o=a(2),i=a(13),r=a(273),s=a(48);function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var a,n,o=function(e,t){var a=0;if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;n=r[o],t.indexOf(n)>=0||(i[n]=e[n])}return i}(e,t);if(Object.getOwnPropertySymbols){var i=0,r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++){if(i++>5e3&&__infLoop&&__infLoop(i))throw new RangeError;a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}}return o}function d(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,p(t).apply(this,arguments))}var a,l,f;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i["a"]),a=t,(l=[{key:"onEnterPaneName",value:function(){n.default.menus.isContextMenuOpen(this.props.componentName)&&n.default.menus.closeContextMenu(this.props.componentName)}},{key:"render",value:function(){var e=this.props,t=e.pane,a=e.subset,n=(e.onSelected,u(e,["pane","subset","onSelected"]));return o.createElement(s.a,c({},n,{id:"contextMenuPanes",ref:"menu",key:"contextMenuAdd",supportArrows:!0}),o.createElement(r.a,{pane:t,subset:a,onEnterPaneName:this.onEnterPaneName}))}}])&&d(a.prototype,l),f&&d(a,f),t}();t.default=f},470:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(4),i=a(2),r=a.n(i),s=a(13),l=a(45),c=a(48),u=a(8);function d(){return(d=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var m=s.b.createClass({displayName:"ReactContextMenuAuthorize",componentDisplay:n.a.ComponentDisplay.Everywhere,onClickEnable:function(){l.a.refresh(),l.a.enableOfflineFeatures(!1,this.onEnable)},onEnable:function(e){e&&o.default.menus.closeContextMenu()},render:function(){return r.a.createElement(c.a,d({},this.props,{key:"contextMenuAuthorize",id:"contextMenuAuthorize"}),r.a.createElement("div",null,this.props.message),r.a.createElement("div",{className:"center"},r.a.createElement(u.a,{primary:!0,raised:!0,onClick:this.onClickEnable},"AUTHORIZE")))}});t.default=m},471:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(2),r=a.n(i),s=a(13),l=a(14),c=a(48),u=a(29);function d(){return(d=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var m=s.b.createClass({displayName:"ReactContextMenuHelp",componentDisplay:o.a.ComponentDisplay.Desktop,onMount:function(){l.a.fireEvent("helpOpened",[])},onClickVideo:function(){var e="https://www.youtube.com/watch?v="+o.a.IntroVideoID;n.default.openUrl(e)},onClickGetStarted:function(){var e=n.default.createPath("help/basics");n.default.openUrl(e)},onClickGTDEmail:function(){var e=n.default.createPath("help/email");n.default.openUrl(e)},onClickAdvancedHelp:function(){n.default.intro.toggle(o.a.HelpMode.Normal)},onClickHotkeys:function(){n.default.intro.toggle(o.a.HelpMode.Hotkeys)},render:function(){return r.a.createElement(c.a,d({},this.props,{key:"contextMenuHelp",id:"contextMenuHelp"}),r.a.createElement(u.a,{className:"helpVideoLink",onClick:this.onClickVideo},r.a.createElement("i",{className:"icon-youtube-play"}),r.a.createElement("div",null,"Introduction Video")),r.a.createElement("hr",null),r.a.createElement(u.a,{onClick:this.onClickGetStarted},"How to get started"),r.a.createElement(u.a,{onClick:this.onClickGTDEmail},"How to GTD your email"),r.a.createElement("hr",null),r.a.createElement(u.a,{onClick:this.onClickAdvancedHelp},"Advanced Help"),r.a.createElement(u.a,{onClick:this.onClickHotkeys},"Hotkeys"))}});t.default=m},472:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(2),i=a.n(o),r=a(13),s=a(432),l=a(48);function c(){return(c=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var u=r.b.createClass({displayName:"ReactContextMenuShare",componentDisplay:n.a.ComponentDisplay.Desktop,render:function(){return i.a.createElement(l.a,c({},this.props,{key:"contextMenuHeart",id:"contextMenuHeart",element:this.props.element}),i.a.createElement(s.a,{shouldShowInvitedBy:!1}))}});t.default=u},473:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(18),s=a(3),l=a(104),c=a(2),u=a.n(c),d=a(13),m=a(6),p=a(432),h=a(48),f=a(29),g=a(25);function y(){return(y=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var v=d.b.createClass({displayName:"ReactContextMenuOptions",componentDisplay:o.a.ComponentDisplay.Desktop,init:function(){g.a.ensureGapi()},onClickSettings:function(){i.default.menus.openSettings()},onClickDisplaySettings:function(){i.default.menus.openDisplaySettings()},onClickImport:function(){m.e.miscAction({type:m.c.Misc,misc:m.a.OpenImport}),i.default.menus.openModal(o.a.Modals.ImportData)},onClickExport:function(){m.e.miscAction({type:m.c.Misc,misc:m.a.OpenExport}),i.default.menus.openModal(o.a.Modals.ExportData)},onClickRevision:function(){i.default.menus.openModal(o.a.Modals.Backups)},onClickFeedback:function(){i.default.menus.openModal(o.a.Modals.ReportBug)},onClickBlog:function(){n.default.openUrl("/blog/")},onClickLogout:function(){n.default.vmSetup.logoutClicked()},onClickShare:function(){i.default.menus.openContextMenu({componentName:"ReactContextMenuShare",element:this.props.element})},onClickDownloadApp:function(){n.default.openUrl(s.a.getAppDownloadURL())},onClickTrial:function(){i.default.menus.openSettings(o.a.SettingsSections.Account)},onClickHelp:function(){i.default.menus.openContextMenu({componentName:"ReactContextMenuHelp",element:this.props.element})},onClickImportMoodo:function(e,t){(new l.a).authAndOpenModal()},renderContextMenuHeart:function(e){return u.a.createElement(h.a,{key:"contextMenuHeart",id:"contextMenuHeart",element:e.element},u.a.createElement(p.a,{shouldShowInvitedBy:!1}))},render:function(){var e=i.default.billingManager,t=r.a.getAccountName(),a=e.isTrialState()&&!i.default.settings.trialOverHidden.get(),l=e.isTrialOver(),c=e.daysLeftInTrial.get(),d=+o.a.__jsVersion;return u.a.createElement(h.a,y({},this.props,{key:"contextMenuOptions",id:"contextMenuOptions",supportArrows:!0}),u.a.createElement(f.a,{onClick:this.onClickSettings},"Settings"),u.a.createElement(f.a,{onClick:this.onClickDisplaySettings},"Display Settings"),u.a.createElement("hr",null),u.a.createElement(f.a,{onClick:this.onClickHelp},"Help"),u.a.createElement("hr",null),u.a.createElement(f.a,{onClick:this.onClickImport},"Import Data"),u.a.createElement(f.a,{onClick:this.onClickExport},"Export Data"),u.a.createElement(f.a,{onClick:this.onClickRevision},"Revision History"),u.a.createElement("hr",null),u.a.createElement(f.a,{onClick:this.onClickFeedback},"Contact Support"),u.a.createElement(f.a,{onClick:this.onClickBlog},"Moo.do Blog"),u.a.createElement(f.a,{onClick:this.onClickShare},"Share Moo.do"),s.a.canDownloadNativeApp()&&u.a.createElement(f.a,{onClick:this.onClickDownloadApp},"Get "+s.a.getPlatformName()+" app"),u.a.createElement(f.a,{onClick:this.onClickImportMoodo},"Import old Moo.do"),u.a.createElement("hr",null),a&&u.a.createElement(f.a,{className:l?"error":"",onClick:this.onClickTrial},l?"Trial over":"Trial: "+c+" days"),u.a.createElement(f.a,{onClick:this.onClickLogout},"Logout"),u.a.createElement(f.a,{className:"username",faded:!0},t),u.a.createElement(f.a,{className:"useremail",faded:!0},n.default.getUserIdentifier()),u.a.createElement("hr",null),u.a.createElement(f.a,{className:"versionInfo",customLayout:!0,faded:!0},s.a.isBeta&&u.a.createElement("div",null,"Beta"),u.a.createElement("div",null,"Version: ",d),u.a.createElement("div",null,new Date(d).toString(i.default.International.getFormat(o.a.DFormat.ShortDayTime)))))}});t.default=v},474:function(e,t,a){"use strict";a.r(t);var n,o=a(0),i=a(1),r=a(4),s=a(2),l=a.n(s),c=a(13),u=a(42),d=a(5),m=a(8),p=a(48),h=a(29),f=a(62);function g(){return(g=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var v,E=i.a.TaskViewMode,b=(y(n={},i.a.PaneMode.Gmail,"E"),y(n,i.a.PaneMode.Drive,"F"),y(n,i.a.PaneMode.Archived,"R"),y(n,0,"L"),y(n,1,"G"),y(n,2,"A"),y(n,3,"C"),n);v=[{Outline:"O",List_Flat:"F"},{Groups_Project:"P",Groups_Tag:"T",Groups_Contact:"C",Groups_Priority:"R"},{Agenda_Today:"T",Agenda_Week:"W",Agenda_All:"A"},{Calendar_Day:"D",Calendar_Custom:"C",Calendar_Week:"W",Calendar_Month:"M"}];var C=c.b.createClass({displayName:"ReactContextMenuAddPane",componentDisplay:i.a.ComponentDisplay.Desktop,init:function(){this.numAtIndex=[],this.availablePanes=u.a.getAvailablePanes(!!this.props.subset),this.isArrowing=!0,this.createObservables({selectedGroupIndex:0})},getState:function(){return{activePaneTypes:u.a.activePaneTypes,numInactivePanes:u.a.numInactivePanes,selectedGroup:this.selectedGroup?this.selectedGroup.get():-1}},onMount:function(){this.selectedGroup=this.refs.menu.selectedIndex,d.a.reset()},onKeyPress:function(e,t){var a,n,o=this.selectedGroup.get(),r=o>=0&&o<=3?v[o]:b;for(var s in r)if(r.hasOwnProperty(s)&&i.a.KeyCode[r[s]]===e){a=s;break}if(this.isArrowing=!0,a&&(isNaN(+a)?E[a]&&(n=E[a],a=i.a.PaneMode.Task):a=+a,!isNaN(a)||n||this.isPaneTypeOk(a)))return t.preventDefault(),t.stopPropagation(),this.onSelected(a,n),isNaN(a);var l=this.selectedGroupIndex.get();e===i.a.KeyCode.LeftArrow&&l>0?(l--,this.selectedGroupIndex.set(l)):e===i.a.KeyCode.RightArrow&&l<this.numAtIndex[this.selectedGroup.get()]-1&&(l++,this.selectedGroupIndex.set(l))},onEnterKey:function(){var e=this.state,t=this.availablePanes[e.selectedGroup],a=t.viewModes?t.viewModes[e.selectedGroupIndex]:t;this.onSelected(a.type,a.viewMode)},isPaneTypeOk:function(){return!this.props.subset},onClickEnableMorePanes:function(){r.default.menus.openSettings(i.a.SettingsSections.Plugins)},onSelected:function(e,t){isNaN(e)?(this.props.onSelected(e,t),r.default.menus.isContextMenuOpen("ReactContextMenuAddPane")&&r.default.menus.closeContextMenu("ReactContextMenuAddPane")):(this.selectedGroup.set(e),this.selectedGroupIndex.set(0))},onSelectedIndexChanged:function(e){if(this.__isMounted){this.isMouseOnButton||(this.isArrowing=!0);var t=this.numAtIndex[e]-1;this.selectedGroupIndex.get()>t?this.selectedGroupIndex.set(t):this.updateState()}},onMouseEnterButton:function(e,t,a){this.isMouseOnButton=!0,this.isArrowing=!1,this.selectedGroup.set(-1),this.selectedGroupIndex.set(t),this.selectedGroupNum=a,this.isMouseOnButton=!1},renderPaneType:function(e,t){var a=this.state,n=this.selectedGroup?a.selectedGroup:-1,i=isNaN(n)||n<0||n>3;if(e.enableMore)return l.a.createElement(h.a,{key:"enableMore",className:"hasBorder c-border",onClick:this.onClickEnableMorePanes},"Enable more panes");if(e.viewModes){var r=0,s=o.default.classNames("hasHorButtons",{"hasBorder c-border":e.border},{selectedHotkey:t===n}),c=[],u=e.viewModes.length,d=o.default.classNames({"c-popup-item selected":t===n});this.numAtIndex[t]=u;for(var p=0;p<u;p++){if(r++>5e3&&__infLoop&&__infLoop(r))throw new RangeError;var g=e.viewModes[p],y=o.default.classNames("c-popup-item",{selected:t===n&&p===a.selectedGroupIndex});c.push(l.a.createElement(m.a,{key:g.text,className:y,padding:0,iconSize:15,color:"c-foreground",onMouseEnter:this.onMouseEnterButton.bind(this,t,p,u),onMouseUp:this.onSelected.bind(this,g.type,g.viewMode,void 0)},this.isArrowing&&t===n?l.a.createElement("div",{className:"viewHotkey bold"},v[t][g.viewMode]):l.a.createElement("div",{className:"viewIcon c-foreground-faded "+g.icon}),g.text))}return l.a.createElement(h.a,{className:s,key:e.text,customLayout:!0,onMouseEnter:this.onMouseEnterButton.bind(this,t,void 0,u),clickCloses:!1,hoverEffects:!1},l.a.createElement(f.a,{hotkeyCentered:!0,className:d,hotkey:i&&b[t]},e.text),l.a.createElement("div",{className:"horButtons  flexbox"},c))}var E=e.viewMode,C=o.default.classNames({"hasBorder c-border":e.border},{selected:this.props.subset&&E&&this.state.viewMode===E});return l.a.createElement(h.a,{key:e.text,className:C,icon:e.icon,height:32,hotkey:i&&(b[E]||b[e.type]),hotkeyCentered:!0,onClick:this.onSelected.bind(this,e.type,e.viewMode,null),clickCloses:!1,onMouseEnter:this.onMouseEnterButton.bind(this,void 0,void 0),id:"addPane_"+(E||e.type)},e.text)},render:function(){var e=this.props;return l.a.createElement(p.a,g({},e,{id:"contextMenuPanes",ref:"menu",key:"contextMenuAdd",className:"addPaneTypes",supportArrows:!0,onKeyPress:this.onKeyPress,onEnterKey:this.onEnterKey,onSelectedIndexChanged:this.onSelectedIndexChanged}),this.availablePanes.map(this.renderPaneType))}});t.default=C},475:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(4),i=a(2),r=a.n(i),s=a(13),l=a(48),c=a(8);function u(){return(u=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var d=s.b.createClass({displayName:"ReactContextMenuUpsell",componentDisplay:n.a.ComponentDisplay.Desktop,onClickUpsell:function(){var e=!o.default.billingManager.isTrialOver();o.default.menus.closeContextMenu(),e?o.default.billingManager.startTrial():o.default.menus.openSettings(n.a.SettingsSections.Account)},render:function(){var e=this.props,t=!o.default.billingManager.isTrialOver();return r.a.createElement(l.a,u({},e,{id:"contextMenuBoardsUpsell"}),r.a.createElement("div",null,r.a.createElement("div",null,e.premiumMessage),r.a.createElement("br",null),t&&r.a.createElement("div",null,"Start your "+n.a.TrialDuration+" day free trial to enable "+e.enableMessage+"."),!t&&r.a.createElement("div",null,"Go Premium to enable "+e.enableMessage+".")),r.a.createElement("br",null),r.a.createElement("div",{className:"center"},r.a.createElement(c.a,{primary:!0,raised:!0,onClick:this.onClickUpsell},t?"Start Trial":"Go Premium")))}});t.default=d},476:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(2),s=a.n(r),l=a(13),c=a(6),u=a(48),d=a(44),m=a(5),p=l.b.createClass({displayName:"ReactContextMenuDropZone",componentDisplay:o.a.ComponentDisplay.Desktop,init:function(){var e=i.default.pluginManager.getPlugin(o.a.PluginID.Drive);this.createObservables({isHovered:!1,isDriveEnabled:e.isEnabled()})},doUpload:function(e){for(var t=0,a=i.default.pluginManager.getPluginDrive(),n=0;n<e.length;n++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;a.handleDropFile(e[n],this.props.pane,void 0,this.onUploadComplete.bind(this,0===n))}this.refs.menu.close()},onUploadComplete:function(e,t){c.e.beginAction();var a=this.props,n=a.item,i=a.itemParent,r=a.pane,s=isNaN(a.insertIndex)?a.paneObject.index+1:a.insertIndex;if(e&&n)n.setText(t,o.a.ChangeType.Local);else{var l=i||n.parent(),u=r.createVMLI({text:t},{parent:l,changeType:o.a.ChangeType.AllLocal});l.insertItem(u,s)}return c.e.endAction(),n},onChangeFile:function(e){return e.target.files&&e.target.files.length>0&&this.doUpload(e.target.files),!1},onDragEnter:function(){this.isHovered.set(!0)},onDragLeave:function(){this.isHovered.set(!1)},onDrop:function(e){var t=e.dataTransfer;t.files&&t.files.length>0&&this.doUpload(t.files)},onClickEnableDrive:function(){this.refs.menu.close(),i.default.menus.openSettings(o.a.SettingsSections.Plugins)},onClick:function(){this.refs.picker.click()},onClickAddUrl:function(){this.refs.menu.close();var e=this.props,t=this.refs.inputUrl.getValue();if(e.pane.setIgnoreRestoreScroll(),this.props.item)m.a.selectIndex(this.props.paneObject.index,0,0),this.props.item.onInsertLink({url:t},i.default.settings.showImagesInline.get());else{c.e.beginAction();var a=e.itemParent,n=e.pane.createVMLI({text:i.default.settings.getDefaultItemText()},{parent:a,changeType:o.a.ChangeType.AllLocal});a.insertItem(n,e.insertIndex),m.a.selectIndex(e.insertIndex,n.getParsedText().length),n.onInsertLink({url:t},i.default.settings.showImagesInline.get()),c.e.endAction()}},render:function(){var e=this.props,t=this.state,a=this.state.isHovered,o=e.image,i=n.default.classNames("uploadDropZone",{"hovered c-bg-light":a}),r=o?"image":"file";return s.a.createElement(u.a,{key:"contextMenuDropZone",id:"contextMenuDropZone",name:"ReactContextMenuDropZone",element:e.element,pos:e.pos,ref:"menu"},o&&s.a.createElement(d.a,{focused:!0,placeholder:"Enter an image address",height:32,buttonText:"ADD",onButtonClick:this.onClickAddUrl,ref:"inputUrl"}),o&&s.a.createElement("div",{className:"dropOr center c-foreground-faded"},"or"),t.isDriveEnabled&&s.a.createElement("div",{className:i,onClick:this.onClick,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop},(a?"Drop file(s)":"Drag files here or click")+" to add "+r+".",s.a.createElement("input",{type:"file",ref:"picker",className:"hidden",multiple:!0,onChange:this.onChangeFile})),!t.isDriveEnabled&&s.a.createElement("div",{className:i,onClick:this.onClickEnableDrive},"Enable the Google Drive plugin to upload files"))}});t.default=p},477:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(2),s=a(13),l=a(428),c=(a(426),a(44)),u=a(48),d=a(63),m=a(8),p=a(50);function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function g(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=Object(l.c)(l.a),C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,v(t).apply(this,arguments))}var a,h,C;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,s["a"]),a=t,(h=[{key:"init",value:function(){for(var e=0,t=[],a=0;a<24;a++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var n=a%12===0?"12":a>12?a-12:a,i=a>=12?"pm":"am";t.push(n+":00 "+i),t.push(n+":30 "+i)}if(this.times=t,this.createObservables({selectedDate:{start:void 0,end:void 0},selectedTimes:[],text:void 0}),this.updateText(),this.textOffset=this.props.textOffset,void 0===this.textOffset){var r=this.props.item.getRawText(),s=r.indexOf(o.a.CharDate);this.textOffset=s>=0?s:r.length}}},{key:"onMount",value:function(){this.updateDateTime()}},{key:"setMooDate",value:function(e){var t=this.props.item,a=this.textOffset,n=t.getRawText();if(t.setMooDate(e,o.a.ChangeType.Local),e&&void 0!==a&&n.indexOf(o.a.CharDate)<0){var i=a,r="";n[a-1]===o.a.PrefixDate?i--:" "!==n[i]&&(r=" "),n=n.substr(0,i)+r+o.a.CharDate+" "+n.substr(a),t.setText(n,o.a.ChangeType.Local)}}},{key:"getMooDate",value:function(){return this.props.item.getMooDate()}},{key:"onInputChange",value:function(e){var t=d.a.parseText(e);this.setMooDate(t),this.updateDateTime(),this.text.set(e)}},{key:"onClickClearDate",value:function(){this.onInputChange("")}},{key:"updateDateTime",value:function(){var e=this.getMooDate();if(e){var t=e.getTime();if(t){var a=0;t=Math.round(t/36e4);for(var n=2*Math.floor(t/10)+(t%10>0?1:0),i=e.getDuration()/(30*o.a.MSPerMinute)||2,r=[],s=n;s<n+i;s++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;r.push(s)}this.selectedTimes.set(r),this.refs.times.scrollTop=28*(n-3)}if(e.isRange()){var l=e.getStart(),c=e.getEnd();l||(l=new Date),c||(c=new Date(l).addMonths(3)),this.selectedDate.set({start:l,end:c})}else this.selectedDate.set(e.generateDates(10))}else this.selectedDate.set(void 0)}},{key:"onMouseDownTime",value:function(e){this._mouseDownOnTime=e,this.selectedTimes.set([e]);var t=this.getMooDate();t||(t=p.a.now(),this.setMooDate(t)),t.setHours(e/2),this.updateText(),document.addEventListener("mouseup",this.onMouseUpTime)}},{key:"onMouseMoveTime",value:function(e){if(void 0!==this._mouseDownOnTime){var t,a,n=0,i=this.selectedTimes.get();e<=this._mouseDownOnTime?(t=e,a=this._mouseDownOnTime):(t=this._mouseDownOnTime,a=e),i=[];for(var r=t;r<=a;r++){if(n++>5e3&&__infLoop&&__infLoop(n))throw new RangeError;i.push(r)}this.duration=i.length>0?30*i.length*o.a.MSPerMinute:void 0,this.getMooDate().setDuration(this.duration),this.updateText(),this.selectedTimes.set(i)}}},{key:"onMouseUpTime",value:function(){this.setMooDate(this.getMooDate()),this._mouseDownOnTime=void 0,document.removeEventListener("mouseup",this.onMouseUpTime)}},{key:"onSelectDate",value:function(e){this.selectedDate.set(e),this.setMooDate(e.start&&e.end?p.a.fromRange(e.start,e.end,(this.state.selectedTimes[0]||0)/2,this.duration):void 0),this.updateText()}},{key:"onInputEnter",value:function(){i.default.menus.closeContextMenu("ReactContextMenuDate")}},{key:"updateText",value:function(){var e=this.getMooDate();this.text.set(e?e.toText():"")}},{key:"render",value:function(){var e=this,t=this.state,a=this.times.map(function(a,o){var i=t.selectedTimes.indexOf(o)>=0,s=n.default.classNames({"c-popup-item":!i},{selected:i});return r.createElement("div",{key:a,className:s,onMouseDown:e.onMouseDownTime.bind(e,o),onMouseMove:e.onMouseMoveTime.bind(e,o)},a)});return r.createElement(u.a,f({},this.props,{id:"contextMenuDate",width:352,maxHeight:240}),r.createElement("div",{className:"flexbox"},r.createElement(c.a,{className:"f1",placeholder:"Type or select a date",onChange:this.onInputChange,onEnter:this.onInputEnter,value:t.text,focused:!0,border:!1}),r.createElement(m.a,{height:40,onClick:this.onClickClearDate},"Clear")),r.createElement("div",{className:"calendarContainer flexbox c-border-heavy",style:{width:352,height:200}},r.createElement(l.b,{Component:b,autoFocus:!1,width:252,height:200,rowHeight:36,selected:t.selectedDate,onSelect:this.onSelectDate,displayOptions:{showHeader:!1,showOverlay:!1}}),r.createElement("div",{className:"times c-border-heavy scrollable f1",ref:"times"},a)))}}])&&g(a.prototype,h),C&&g(a,C),t}();t.default=C},478:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a(13),i=a(8),r=a(44),s=a(48);function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,d(t).apply(this,arguments))}var a,l,p;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o["a"]),a=t,(l=[{key:"init",value:function(){}},{key:"onClickSavePassword",value:function(){this.refs.pass1.getValue(),this.refs.pass2.getValue()}},{key:"render",value:function(){var e=this.props,t={marginTop:8,width:240};return n.createElement(s.a,{key:"contextMenuDocumentPassword",id:"contextMenuDocumentPassword",className:"padded",element:e.element},n.createElement("div",{className:"bold"},"Enter a password"),n.createElement("div",null,n.createElement(r.a,{type:"password",placeholder:"Password",ref:"pass1",style:t,onEnter:this.onClickSavePassword}),n.createElement(r.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:t,onEnter:this.onClickSavePassword})),n.createElement("div",{style:{marginTop:8}},n.createElement(i.a,{raised:!0,primary:!0,onClick:this.onClickSavePassword},"Save")))}}])&&c(a.prototype,l),p&&c(a,p),t}();t.default=p},480:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(3),s=a(2),l=a.n(s),c=a(13),u=a(45),d=a(432),m=a(57),p=a(8),h=c.b.createClass({displayName:"ReactModalSettingsGeneral",componentDisplay:o.a.ComponentDisplay.Desktop,init:function(){var e=this;this.createObservables({isStoragePersisted:!1,usage:NaN,quota:NaN}),r.a.isStoragePersisted(function(t){e.isStoragePersisted.set(t)}),r.a.estimateAvailableStorage(function(t){e.usage.set(t.usage),e.quota.set(t.quota)},function(){})},onCacheRatioClick:function(){this.getCacheRatio()<.98&&(i.default.settings.cacheSizeRatio.set(1),n.default.sendEvent("CacheRatio","Changed",1),i.default.toasts.pushMessage({text:"Success!",action:o.a.MessageAction.Okay}))},onSettingChanged:function(e,t){e===i.default.settings.showFormattingToolbar&&(t=t?1:-1),e.set(t)},parseFn:function(e){return parseFloat(e.toFixed(2))},getCacheRatio:function(){return this.parseFn(i.default.pluginManager.getCacheSizeRatio())},onPersistClick:function(e){!this.state.isStoragePersisted&&e&&r.a.requestStoragePersistence(function(){this.isStoragePersisted.set(!0)}.bind(this),function(){this.isStoragePersisted.set(!1)}.bind(this))},onChangeDefaultItemPrefix:function(){i.default.settings.defaultItemPrefix.set(this.refs.selectItemPrefix.value)},renderCheckbox:function(e,t){var a=e===i.default.settings.showFormattingToolbar?i.default.settings.showFormattingToolbar.get()>=0:e.get();return l.a.createElement(m.a,{checked:a,onChange:this.onSettingChanged.bind(this,e)},t)},render:function(){var e=this.getCacheRatio()<.98,t=!r.a.app&&r.a.supportsPersistedStorage(),a=r.a.supportsEstimatedStorage(),n=i.default.settings.defaultItemPrefix.get(),s=(i.default.settings.showFormattingToolbar.get(),+(this.usage.get()/1024/1024).toFixed(2)),c=+(this.quota.get()/1024/1024).toFixed(2);return l.a.createElement("div",{key:"content"},l.a.createElement("div",{className:"modal-row"},l.a.createElement("div",{className:"settingsName bold ib"},"Default item type:"),l.a.createElement("select",{defaultValue:n,ref:"selectItemPrefix",onChange:this.onChangeDefaultItemPrefix},l.a.createElement("option",{value:""},"None"),l.a.createElement("option",{value:o.a.Prefix.Task},"Task"),l.a.createElement("option",{value:o.a.Prefix.Bullet},"Bullet")),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"The default prefix for all new items. If you prefer the bulleted look of an Outliner, choose Bullet. If you prefer a checklist, choose Task. If you prefer the flat look of a document, choose None.")),l.a.createElement("div",{className:"modal-row"},this.renderCheckbox(i.default.settings.showMarkdown,"Show Markdown formatting"),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Show the raw Markdown formatting characters in selected items")),l.a.createElement("div",{className:"modal-row"},this.renderCheckbox(i.default.settings.openEvernoteApp,"Open Evernote links in Evernote app"),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"If not enabled, Evernote links will open the Evernote website")),l.a.createElement("div",{className:"modal-row"},this.renderCheckbox(i.default.settings.selectFullItems,"Select full items"),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Expand selection to cover the full items when selecting multiple items")),l.a.createElement("div",{className:"modal-row"},this.renderCheckbox(i.default.settings.showFormattingToolbar,"Enable Formatting Toolbar"),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Show a toolbar with formatting hotkeys when text is selected")),l.a.createElement("div",{className:"modal-row"},this.renderCheckbox(i.default.settings.showImagesInline,"Show Images Inline"),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Show images inline by default when inserting a link to an image, dragging a file from the Drive pane, or uploading an image from your computer. If disabled, it will show a link to the image.")),l.a.createElement("hr",null),t&&l.a.createElement("div",{className:"modal-row"},l.a.createElement(m.a,{checked:this.state.isStoragePersisted,onChange:this.onPersistClick,canChange:!this.state.isStoragePersisted},"Enable Persistent Storage"),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Allow Moo.do to store your data offline without potential for the browser to delete it. This can help Moo.do's performance if your disk is low on free-space.")),e&&l.a.createElement("div",{className:"modal-row"},l.a.createElement(p.a,{raised:!0,onClick:this.onCacheRatioClick},"Reset Cache Ratio"),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"If you have run out of disk space in the past, we may not be efficiently caching your data. If you have resolved any disk space issues, click this button to efficiently cache your data again.")),a&&l.a.createElement("div",{className:"modal-row"},l.a.createElement("div",{className:"modal-row-title"},"Estimated disk usage"),l.a.createElement("div",{className:"modal-subtext"},l.a.createElement("b",null,"Usage: "),Math.round(s)," MB / ",l.a.createElement("b",null,"Quota: "),Math.round(c)," MB")))}}),f=c.b.createClass({displayName:"ReactModalSettingsPlugins",componentDisplay:o.a.ComponentDisplay.Desktop,init:function(){this.pluginsEnabled={},this.pluginOptions={},u.a.refresh()},onMount:function(){this.checkTiers()},getState:function(){for(var e=0,t={isSaveEnabled:u.a.isSaveEnabled,premiumStatus:i.default.billingManager._premiumStatus},a=u.a.pluginsAvailable,n=0;n<a.length;++n){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var o=a[n];this.pluginsEnabled[o]=t[o+"Enabled"]=u.a.getPluginEnabledObservable(o);var r=u.a.getPluginOptions(o);for(var s in r)if(r.hasOwnProperty(s)){var l=o+"_"+s;this.pluginOptions[l]=t[l]=r[s]}}return t},openSection:function(e){this.props.openSection(e)},onChangeFree:function(e){this.refs[o.a.PluginID.Contacts].setValue(e),this.refs[o.a.PluginID.Gmail].setValue(e),this.onChangeFeature()},onChangePremium:function(e){this.refs[o.a.PluginID.GCalendar].setValue(e),this.refs[o.a.PluginID.Drive].setValue(e),this.refs.DriveShared.setValue(e),this.onChangeFeature()},checkTier:function(e,t){for(var a=0,n=0,o=0;o<t.length;o++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;this.refs[t[o]].getValue()?n++:n--}n===t.length&&e.setValue(!0),n===-t.length&&e.setValue(!1)},checkTiers:function(){this.checkTier(this.refs.free,[o.a.PluginID.Contacts,o.a.PluginID.Gmail]),this.checkTier(this.refs.premium,[o.a.PluginID.GCalendar,o.a.PluginID.Drive,"DriveShared"])},onChangeFeature:function(){u.a.isSaveEnabled.set(!0),this.checkTiers()},onClickFixError:function(){u.a.enableOfflineFeatures(!0,function(){u.a.refresh(),this.updateState()}.bind(this))},onClickCancel:function(e){for(var t in this.refs)if(this.refs.hasOwnProperty(t)){var a=this.refs[t];a.checked&&a.resetValue()}this.checkTiers()},onClickSave:function(e,t){var a=this,n=!0,r=[o.a.PluginID.Contacts,o.a.PluginID.GCalendar,o.a.PluginID.Gmail,o.a.PluginID.Drive].map(function(e){var t=!!a.refs[e].getValue(),r=i.default.pluginManager.getPlugin(e),s={id:e,enable:t};return t&&(r&&!r.isAvailable()&&(n=!1),e===o.a.PluginID.Drive&&(s.shared=!!a.refs.DriveShared.getValue())),s});if(!n){if(i.default.billingManager.isTrialOver())return this.openSection(o.a.SettingsSections.Account),!1;i.default.billingManager.startTrial()}var s=!1;return u.a.setEnabledPlugins(r,function(e){s=!0,t(),e&&u.a.isSaveEnabled.set(!1)}),!s},renderPluginOptionCheckbox:function(e,t,a,n){return l.a.createElement(m.a,{className:"subcheckbox",ref:t,initialChecked:!!this.state[e+"_"+a],onChange:this.onChangeFeature},n)},renderPluginCheckbox:function(e,t,a){return l.a.createElement(m.a,{ref:e,initialChecked:!!this.state[e+"Enabled"],onChange:this.onChangeFeature},a,t)},render:function(){var e=i.default.billingManager,t=this.state,a=e.hasPremiumFeatures(),n=e.isTrialOver(),r=t.hasError;return l.a.createElement("div",{key:"content",className:"new-modal-group"},l.a.createElement("div",{className:"new-modal-title"},l.a.createElement("div",{className:"title"},"Integrate with your other services"),l.a.createElement("div",{className:"subtext center c-foreground-light"},"Use ",l.a.createElement("b",null,"Moo.do")," to organize everything in one place")),l.a.createElement("div",{className:"setupFeatures featureCheckboxes"},r&&l.a.createElement("div",{className:"new-modal-row new-modal-row-1c settingError"},l.a.createElement("div",{className:"bold"},"Error detected"),l.a.createElement("div",{className:"errorSubtext"},"There is an error with your authentication. Click here to fix it."),l.a.createElement("div",{className:"center"},l.a.createElement(p.a,{raised:!0,onClick:this.onClickFixError},"FIX ERROR"))),l.a.createElement("div",{className:"featureTier c-border"},l.a.createElement("div",{className:"tierTitleWrapper"},l.a.createElement(m.a,{ref:"free",className:"tierTitle c-background",initialChecked:!1,onChange:this.onChangeFree},"Free Plugins")),l.a.createElement("div",{className:"flexbox"},l.a.createElement("div",{className:"setupFeatureHalf"},this.renderPluginCheckbox(o.a.PluginID.Contacts,"Google Contacts",l.a.createElement("i",{className:"icon-group"}))),l.a.createElement("div",{className:"setupFeatureHalf"},this.renderPluginCheckbox(o.a.PluginID.Gmail,"Gmail",l.a.createElement("img",{src:"/img/plugin-gmail.png"}))))),l.a.createElement("div",{className:"featureTier c-border"},l.a.createElement("div",{className:"tierTitleWrapper"},l.a.createElement(m.a,{ref:"premium",className:"tierTitle c-background",initialChecked:!1,onChange:this.onChangePremium},"Premium Plugins")),!a&&n&&l.a.createElement("div",{className:"featureTierDesc c-foreground-light"},"Your free trial of Premium has ended. Please signup to continue using premium features or contact support@moo.do to extend."),!a&&!n&&l.a.createElement("div",{className:"featureTierDesc c-foreground-light"},"Enabling Premium features will start a free "+o.a.TrialDuration+" day trial of Moo.do Premium."),l.a.createElement("div",{className:"flexbox"},l.a.createElement("div",{className:"setupFeature setupFeatureHalf"},this.renderPluginCheckbox(o.a.PluginID.GCalendar,"Google Calendar",l.a.createElement("img",{src:"/img/plugin-gcal.png"}))),l.a.createElement("div",{className:"setupFeature setupFeatureHalf"},this.renderPluginCheckbox(o.a.PluginID.Drive,"Google Drive",l.a.createElement("img",{src:"/img/plugin-gdrive.png"})),this.renderPluginOptionCheckbox(o.a.PluginID.Drive,"DriveShared",o.a.PluginSettingsID.Drive.WriteAccess,"Share files with collaborators")))),l.a.createElement("div",{className:"setupSubtext"},l.a.createElement("b",null,"Moo.do")," connects with your Google services to integrate everything together. ",l.a.createElement("b",null,"Moo.do")," data is stored in your personal Google Drive account and is never sent to any other server. Nobody can access any of your data. See our ",l.a.createElement("span",{className:"link"},"Privacy Policy")," for more details."),l.a.createElement("div",{className:"setupButtons center"},l.a.createElement(p.a,{raised:!0,primary:!0,onClick:this.onClickSave,enabled:t.isSaveEnabled},"SAVE"),l.a.createElement(p.a,{raised:!0,marginLeft:24,onClick:this.onClickCancel,enabled:t.isSaveEnabled},"RESET"))))}}),g=a(18),y=a(44),v=c.b.createClass({displayName:"ReactModalSettingsAccounts",componentDisplay:o.a.ComponentDisplay.Desktop,getState:function(){var e=i.default.billingManager;return{validBilling:e._hasValidBillingData,premiumStatus:e._premiumStatus,daysLeftInTrial:e.daysLeftInTrial,trialOverHidden:i.default.settings.trialOverHidden.get(),monthlyInvoice:i.default.settings.monthlyInvoice.get(),invoiceEmail:i.default.settings.invoiceEmail.get(),invoiceCompany:i.default.settings.invoiceCompany.get(),invoiceAddress:i.default.settings.invoiceAddress.get(),isUnsubscribed:i.default.settings.isUnsubscribed.get()}},onClickDismissTrial:function(){i.default.settings.trialOverHidden.set(!0),this.updateState()},onUnsubscribedChanged:function(e){var t=i.default.settings.isUnsubscribed.get();i.default.settings.isUnsubscribed.set(e),e?n.default.XHR_PrivateAPI({type:"POST",path:"/feedback/unsubscribe",data:{email:n.default.vmMain.getUserEmail()},requireAuth:!0,cb:function(a){a.status!==o.a.HTTPStatusCode.Success?(i.default.settings.isUnsubscribed.set(t),i.default.toasts.pushMessage({text:"There was an error updating your subscription status. Please retry or contact support@moo.do.",actionText:"RETRY",timeout:8e3,action:function(){this.onUnsubscribedChanged(e)}.bind(this)})):i.default.toasts.pushMessage({text:"You have successfully unsubscribed from further emails.",actionText:"OKAY",timeout:2e3})}.bind(this)}):n.default.XHR_PrivateAPI({type:"POST",path:"/feedback/subscribe",data:{email:n.default.vmMain.getUserEmail()},requireAuth:!0,cb:function(a){a.status!==o.a.HTTPStatusCode.Success?(i.default.settings.isUnsubscribed.set(t),i.default.toasts.pushMessage({text:"There was an error updating your subscription status. Please retry or contact support@moo.do.",actionText:"RETRY",timeout:8e3,action:function(){this.onUnsubscribedChanged(e)}.bind(this)})):i.default.toasts.pushMessage({text:"Success!",actionText:"OKAY",timeout:2e3})}.bind(this)})},onInvoiceEnabledChanged:function(e){this._onInvoiceChanged(e,i.default.settings.invoiceEmail.get(),i.default.settings.invoiceCompany.get(),i.default.settings.invoiceAddress.get())},onInvoiceEmailChanged:function(e){clearTimeout(this._invoiceEmailTimeout),this._invoiceEmailTimeout=setTimeout(function(){this._onInvoiceChanged(i.default.settings.monthlyInvoice.get(),e,i.default.settings.invoiceCompany.get(),i.default.settings.invoiceAddress.get()),this._invoiceEmailTimeout=void 0}.bind(this),3e3)},onInvoiceCompanyChanged:function(e){clearTimeout(this._invoiceCompanyTimeout),this._invoiceCompanyTimeout=setTimeout(function(){this._onInvoiceChanged(i.default.settings.monthlyInvoice.get(),i.default.settings.invoiceEmail.get(),e,i.default.settings.invoiceAddress.get()),this._invoiceCompanyTimeout=void 0}.bind(this),3e3)},onInvoiceAddressChanged:function(e){clearTimeout(this._invoiceAddressTimeout),this._invoiceAddressTimeout=setTimeout(function(){this._onInvoiceChanged(i.default.settings.monthlyInvoice.get(),i.default.settings.invoiceEmail.get(),i.default.settings.invoiceCompany.get(),e),this._invoiceAddressTimeout=void 0}.bind(this),3e3)},_onInvoiceChanged:function(e,t,a,r){var s=i.default.settings.monthlyInvoice.get(),l=i.default.settings.invoiceEmail.get(),c=i.default.settings.invoiceCompany.get(),u=i.default.settings.invoiceAddress.get();i.default.settings.monthlyInvoice.set(e),i.default.settings.invoiceEmail.set(t),i.default.settings.invoiceCompany.set(a),i.default.settings.invoiceAddress.set(r),n.default.sendEvent("InvoiceChanged",e);var d=e?1:0;n.default.XHR_PrivateAPI({type:"POST",path:"/billing/invoice",data:{isEnabled:d,invoiceEmail:t,invoiceCompany:a,invoiceAddress:r},requireAuth:!0,cb:function(n){n.status!==o.a.HTTPStatusCode.Success?(i.default.settings.monthlyInvoice.set(s),i.default.settings.invoiceEmail.set(l),i.default.settings.invoiceCompany.set(c),i.default.settings.invoiceAddress.set(u),i.default.toasts.pushMessage({text:"There was an error updating your invoice status on the server. Please retry in a minute.",actionText:"RETRY",timeout:8e3,action:function(){this._onInvoiceChanged(e,t,a,r)}.bind(this)})):i.default.toasts.pushMessage({text:"Your invoice information was successfully updated.",actionText:"OKAY",timeout:2e3}),this.updateState()}.bind(this)})},render:function(){var e=i.default.billingManager,t=this.state,a=g.a.getAccountName(),n=g.a.getDefaultAccountID(),r=e.getMonthlyPrice(),s=e.getYearlyPrice();return l.a.createElement("div",{key:"content",className:"new-modal-group"},e.isTrialOver()&&!t.trialOverHidden&&l.a.createElement("div",{className:"new-modal-row-1c"},l.a.createElement("div",{className:"new-modal-row trialEnd"},l.a.createElement("div",null,"Your trial has ended. Please sign up to continue using Premium features."),l.a.createElement("div",{className:"center",style:{marginTop:16}},l.a.createElement(p.a,{raised:!0,onClick:this.onClickDismissTrial},"DISMISS"))),l.a.createElement("hr",null)),l.a.createElement("div",{className:"new-modal-title"},l.a.createElement("div",{className:"title"},a&&"Hi "+a),t.validBilling&&e.isTrialState()&&l.a.createElement("div",{className:"subtext center"},"We hope your trial of Premium is going well."),t.validBilling&&e.hasPremium()&&l.a.createElement("div",{className:"subtext center"},"We are very happy to have you as a Premium Member."),t.validBilling&&!e.hasPremium()&&!e.isTrialState()&&l.a.createElement("div",{className:"subtext center"},"We hope Moo.do is helping you be productive.")),l.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},l.a.createElement("div",{className:"left-header"},"ACCOUNT STATUS"),l.a.createElement("div",{className:"right-content"},l.a.createElement("div",{className:"new-modal-subrow"},l.a.createElement("div",null,l.a.createElement("div",{className:"subtitle"},"Account email"),l.a.createElement("div",{className:"subtext"},n)),l.a.createElement("div",null,l.a.createElement("div",{className:"subtitle"},"Member since"),l.a.createElement("div",{className:"subtext"},e.getJoinDate().toString(i.default.International.getFormat(o.a.DFormat.LongStrDate)))),e.isTrialState()&&!e.isTrialOver()&&l.a.createElement("div",null,l.a.createElement("div",{className:"subtitle"},"Days left in trial"),l.a.createElement("div",{className:"subtext"},t.daysLeftInTrial)),e.hasPremium()&&l.a.createElement("div",null,l.a.createElement("div",{className:"subtitle"},"Premium since"),l.a.createElement("div",{className:"subtext"},e.getPremiumStartDate().toString(i.default.International.getFormat(o.a.DFormat.LongStrDate)))),!!e.canceledUserHasPremiumAccess()&&l.a.createElement("div",null,l.a.createElement("div",{className:"subtitle"},"Premium end"),l.a.createElement("div",{className:"subtext"},e.getPremiumEndDate().toString(i.default.International.getFormat(o.a.DFormat.LongStrDate)))),e.hasPremium()&&e.hasSubscription()&&l.a.createElement("div",null,l.a.createElement("div",{className:"subtitle"},"Next billing cycle"),l.a.createElement("div",{className:"subtext"},e.getNextBillingDate().toString(i.default.International.getFormat(o.a.DFormat.LongStrDate))))))),l.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},l.a.createElement("div",{className:"left-header"},"MANAGE ACCOUNT"),l.a.createElement("div",{className:"right-content"},l.a.createElement("div",{className:"new-modal-subrow"},!e.hasPremium()&&l.a.createElement("div",null,l.a.createElement(p.a,{raised:!0,onClick:e.onTapDeleteAccount.bind(e)},"DELETE ACCOUNT")),e.hasPremium()&&e.hasSubscription()&&l.a.createElement("div",null,l.a.createElement(p.a,{raised:!0,onClick:e.onTapUpdatePaymentMethod.bind(e)},"UPDATE PAYMENT METHOD")),e.hasPremium()&&l.a.createElement("div",null,l.a.createElement(p.a,{raised:!0,onClick:e.onTapCancelSubscription.bind(e)},"CANCEL PREMIUM")),l.a.createElement("div",null,l.a.createElement(m.a,{checked:i.default.settings.isUnsubscribed.get(),onChange:this.onUnsubscribedChanged},"Unsubscribe from emails"))))),e.hasPremium()&&e.hasSubscription()&&l.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},l.a.createElement("div",{className:"left-header"},"INVOICES"),l.a.createElement("div",{className:"right-content"},l.a.createElement("div",{className:"new-modal-subrow"},l.a.createElement("div",null,l.a.createElement(m.a,{checked:i.default.settings.monthlyInvoice.get(),onChange:this.onInvoiceEnabledChanged},"Receive Billing Invoice")),t.monthlyInvoice&&l.a.createElement(y.a,{height:50,floatingText:"Invoice Email",display:"block",ref:"invoiceEmail",value:t.invoiceEmail,onChange:this.onInvoiceEmailChanged}),t.monthlyInvoice&&l.a.createElement(y.a,{height:50,floatingText:"Name",display:"block",ref:"invoiceCompany",value:t.invoiceCompany,onChange:this.onInvoiceCompanyChanged}),t.monthlyInvoice&&l.a.createElement(y.a,{height:50,floatingText:"Address",display:"block",ref:"invoiceAddress",value:t.invoiceAddress,onChange:this.onInvoiceAddressChanged}),l.a.createElement("div",null,l.a.createElement(p.a,{raised:!0,onClick:e.onTapViewInvoices.bind(this)},"VIEW INVOICES"))))),!e.hasPremium()&&l.a.createElement("span",{id:"accountSettingsPremium"},l.a.createElement("hr",null),l.a.createElement("div",{className:"new-modal-title"},l.a.createElement("div",{className:"title"},"Moo.do Premium"),l.a.createElement("div",{className:"subtext center"},"Integrate more of your services together and unlock advanced organization and customization features."),l.a.createElement("div",{className:"center",style:{marginTop:24}},l.a.createElement(p.a,{fontSize:14,raised:!0,primary:!0,onClick:e.onTapSignupMonth.bind(e)},"$"+r+" / month"),l.a.createElement(p.a,{fontSize:14,raised:!0,primary:!0,marginLeft:16,onClick:e.onTapSignupYear.bind(e)},"$"+s+" / year"),l.a.createElement(p.a,{fontSize:14,raised:!0,primary:!0,marginLeft:16,onClick:e.onTapCodeSignup.bind(e)},"Enter Code"))),l.a.createElement("div",{id:"premiumFeatures"},l.a.createElement("div",{className:"flexbox c-border"},l.a.createElement("div",{className:"premiumImg premiumShadow"},l.a.createElement("img",{src:"/img/about/CalendarPane.gif"})),l.a.createElement("div",{className:"premiumDesc"},l.a.createElement("div",{className:"premiumTitle"},"Calendar Pane"),l.a.createElement("div",{className:"premiumText"},"Day, Week, and Month views for managing your calendar."))),l.a.createElement("div",{className:"flexbox c-border"},l.a.createElement("div",{className:"premiumImg premiumShadow"},l.a.createElement("img",{src:"/img/about/DrivePane.png"})),l.a.createElement("div",{className:"premiumDesc"},l.a.createElement("div",{className:"premiumTitle"},"Google Drive Pane"),l.a.createElement("div",{className:"premiumText"},"Attach documents to your tasks. Dragging a file from your computer into Moo.do automatically uploads it to Drive."))),l.a.createElement("div",{className:"flexbox c-border"},l.a.createElement("div",{className:"premiumImg premiumShadow"},l.a.createElement("img",{src:"/img/about/GCalSettings.jpg"})),l.a.createElement("div",{className:"premiumDesc"},l.a.createElement("div",{className:"premiumTitle"},"Google Calendar Sync"),l.a.createElement("div",{className:"premiumText"},"Two way sync: Manage your Google Calendar in Moo.do and/or sync your Moo.do events with your Google Calendar."))),l.a.createElement("div",{className:"flexbox c-border"},l.a.createElement("div",{className:"premiumImg premiumShadow"},l.a.createElement("img",{src:"/blog/img/update-workspaces.png"})),l.a.createElement("div",{className:"premiumDesc"},l.a.createElement("div",{className:"premiumTitle"},"Boards"),l.a.createElement("div",{className:"premiumText"},"Save sets of panes to easily switch between workflows."))),l.a.createElement("div",{className:"flexbox c-border"},l.a.createElement("div",{className:"premiumImg premiumShadow"},l.a.createElement("img",{src:"/img/about/DisplaySettings-Small.jpg"})),l.a.createElement("div",{className:"premiumDesc"},l.a.createElement("div",{className:"premiumTitle"},"Advanced Display Settings"),l.a.createElement("div",{className:"premiumText"},"Customize Moo.do's look and feel to your liking."))),l.a.createElement("div",{className:"flexbox c-border"},l.a.createElement("div",{className:"premiumImg"},l.a.createElement("img",{src:"/img/about/GmailCache.jpg"})),l.a.createElement("div",{className:"premiumDesc"},l.a.createElement("div",{className:"premiumTitle"},"Gmail Sync Time"),l.a.createElement("div",{className:"premiumText"},"Cache emails for access while offline and quicker load time.")))),l.a.createElement("table",{id:"pricingTable"},l.a.createElement("tbody",null,l.a.createElement("tr",{className:"c-border c-bg-faded"},l.a.createElement("td",null),l.a.createElement("td",null,"Free"),l.a.createElement("td",null,"Premium")),l.a.createElement("tr",{className:"empty"},l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",{className:"header price"},l.a.createElement("td",null,"Price"),l.a.createElement("td",null,"$0"),l.a.createElement("td",null,l.a.createElement("div",null,"$"+r+" / month"),l.a.createElement("div",null,"$"+s+" / year"))),l.a.createElement("tr",{className:"header"},l.a.createElement("td",null,"Core Features"),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null,"Unlimited items"),l.a.createElement("td",{className:"icon-check"}),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",null,l.a.createElement("td",null,"Powerful search"),l.a.createElement("td",{className:"icon-check"}),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",null,l.a.createElement("td",null,"Realtime collaboration"),l.a.createElement("td",{className:"icon-check"}),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",null,l.a.createElement("td",null,"Multiple Boards"),l.a.createElement("td",null),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",null,l.a.createElement("td",null,"Day, Week, Month views"),l.a.createElement("td",null),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",{className:"empty"},l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",{className:"header"},l.a.createElement("td",null,"Plugins"),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("i",{className:"icon-group"}),"Google Contacts"),l.a.createElement("td",{className:"icon-check"}),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("img",{src:"/img/plugin-mailbird.png"}),"Mailbird"),l.a.createElement("td",{className:"icon-check"}),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("img",{src:"/img/plugin-gdrive.png"}),"Google Drive"),l.a.createElement("td",null),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",{className:"empty"},l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",{className:"header"},l.a.createElement("td",null,l.a.createElement("img",{src:"/img/plugin-gmail.png"}),"Gmail"),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null,"Standard email features"),l.a.createElement("td",{className:"icon-check"}),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",null,l.a.createElement("td",null,"Offline sync"),l.a.createElement("td",null,"2 days"),l.a.createElement("td",null,"30 days")),l.a.createElement("tr",{className:"empty"},l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",{className:"header"},l.a.createElement("td",null,l.a.createElement("img",{src:"/img/plugin-gcal.png"}),"Google Calendar"),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null,"Sync Moo.do tasks"),l.a.createElement("td",null),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",null,l.a.createElement("td",null,"Manage Calendar in Moo.do"),l.a.createElement("td",null),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",{className:"empty"},l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",{className:"header"},l.a.createElement("td",null,"Customization"),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null,"Display settings presets"),l.a.createElement("td",{className:"icon-check"}),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",null,l.a.createElement("td",null,"Advanced display settings"),l.a.createElement("td",null),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",{className:"empty"},l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",{className:"header"},l.a.createElement("td",null,"We love you",l.a.createElement("i",{className:"icon-heart"})),l.a.createElement("td",null),l.a.createElement("td",null)),l.a.createElement("tr",null,l.a.createElement("td",null,"Early access to new features"),l.a.createElement("td",null),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",null,l.a.createElement("td",null,"Premium support"),l.a.createElement("td",null),l.a.createElement("td",{className:"icon-check"})),l.a.createElement("tr",{className:"empty"},l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null))))))}}),E=a(95),b=c.b.createClass({displayName:"ReactModalSettingsEarly",componentDisplay:o.a.ComponentDisplay.Desktop,init:function(){this.createObservables({isSendingFeedback:!1})},openSection:function(e){this.props.openSection(e)},onClickDiscard:function(){this.refs.feedback.value="",this.refs.feedback.focus()},onClickSend:function(e,t){var a=this,o=this.refs.feedback.value;if(o&&o.length>2){this.isSendingFeedback.set(!0);return i.default.sendFeedback("Moo.do Feedback",o).then(function(){a.refs.feedback.value="",a.isSendingFeedback.set(!1),t&&n.default.isFunction(t)&&t()}),!0}},render:function(){i.default.billingManager,this.props;var e=this.state;return l.a.createElement("div",{key:"content",className:"new-modal-group"},l.a.createElement("div",{className:"new-modal-title"},l.a.createElement("div",{className:"title"},"Send Feedback"),l.a.createElement("div",{className:"subtext middle"},"Send the developers bug reports, feedback, or suggestions. Your feedback is very helpful in planning what to do next.")),l.a.createElement("div",{className:"earlyAccessFeedback"},l.a.createElement("textarea",{className:"feedbackTextArea c-background c-foreground",ref:"feedback",style:{marginBottom:16,color:e.isSendingFeedback?"#aaa":null}}),e.isSendingFeedback&&l.a.createElement(E.a,{top:100}),l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(p.a,{raised:!0,onClick:this.onClickDiscard},"DISCARD"),l.a.createElement(p.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSend},"SEND"))))}}),C=a(25),k=a(430);function w(e){return(w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function x(e,t){return!t||"object"!==w(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),x(this,M(t).apply(this,arguments))}var a,r,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,c["a"]),a=t,(r=[{key:"init",value:function(){this.createObservables({addingAccount:!1,errorMessage:"",linkingAccount:void 0}),u.a.refresh(),this.listenTo(C.a.onAccountsUpdated)}},{key:"getState",value:function(){var e=Object.keys(C.a.authTokens),t=g.a.getDefaultAccountID(),a={accounts:C.a.authTokens,accountsList:e};return e.includes(t)&&(e.remove(t),e.splice(0,0,t)),a}},{key:"addAccount",value:function(e){var t=this;if(!this.state.accounts[e]){var a=g.a.getDefaultAccountID(),n=this.state.accounts[a];this.linkingAccount.set(e),C.a.authAccount(e,n.scopes,function(a){t.linkingAccount.set(void 0),setTimeout(function(){t.enableAccountSync(e,!0)},0)})}}},{key:"enableAccountSync",value:function(e,t){var a=i.default.pluginManager.getPluginGmail();t?a.addSyncAccount(e,function(e){u.a.refresh()}):a.removeSyncAccount(e,function(e){u.a.refresh()})}},{key:"onClickAddAccount",value:function(){var e=this;this.errorMessage.set(""),this.addingAccount.set(!0),setTimeout(function(){e.refs.addAccount.focus()},0)}},{key:"onClickAddButton",value:function(){this.errorMessage.set("");var e=this.refs.addAccount.getValue();this.addAccount(e),this.addingAccount.set(!1)}},{key:"onClickFixEmail",value:function(e){}},{key:"onClickRemoveEmail",value:function(e){this.enableAccountSync(e,!1),C.a.removeAccount(e)}},{key:"renderAccount",value:function(e){i.default.pluginManager.getPlugin(o.a.PluginID.Gmail).isEnabled(),this.state.accountsList.indexOf(e);var t=g.a.getDefaultAccountID()===e,a=this.state.linkingAccount===e,r=n.default.classNames("accountRow c-border flexbox",{linking:a});return l.a.createElement("div",{key:"row"+e,className:r},l.a.createElement("div",{className:"f1"},a?"":e),!t&&!a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{icon:"icon-close",iconSize:20,width:50,height:50,onClick:this.onClickRemoveEmail.bind(this,e)}),!1),a&&l.a.createElement(E.a,{inline:!0},"Adding account..."))}},{key:"render",value:function(){var e=this.state.accountsList,t=l.a.createElement(k.a,{className:"gmailAccountTable"},l.a.createElement("div",{key:"header",className:"flexbox"},l.a.createElement("div",{className:"f1"},"Account"),l.a.createElement("div",null,"Enabled")),e.map(this.renderAccount));return l.a.createElement("div",{key:"content",className:"new-modal-group"},l.a.createElement("div",{className:"new-modal-title"},l.a.createElement("div",{className:"title"},"Email Accounts"),l.a.createElement("div",{className:"subtext center"},"Manage email from multiple Gmail accounts")),t,this.state.addingAccount&&l.a.createElement("div",{key:"footer"},l.a.createElement(y.a,{ref:"addAccount",floatingText:"Account Email",padding:{left:24,right:24},height:50,buttonText:"ADD",onButtonClick:this.onClickAddButton})),this.state.errorMessage&&l.a.createElement("div",{key:"errorMessage",style:{textAlign:"center"}},this.state.errorMessage),!this.state.addingAccount&&l.a.createElement("div",{key:"footer"},l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(p.a,{height:50,onClick:this.onClickAddAccount},"ADD ACCOUNT"))))}}])&&S(a.prototype,r),s&&S(a,s),t}(),N=a(132),I=c.b.createClass({displayName:"ReactModalSettingsGCal",componentDisplay:o.a.ComponentDisplay.Desktop,init:function(){this.hadCalendarSyncUpdated=!1,this.createObservables({addingCalendar:!1}),u.a.refresh()},openSection:function(e){this.props.openSection(e)},onMount:function(){},onUnmount:function(){if(this.hadCalendarSyncUpdated){var e=i.default.pluginManager.getPlugin(o.a.PluginID.GCalendar);e.isActive()&&e.forceRemoteEventSync()}},getState:function(){var e={premiumStatus:i.default.billingManager._premiumStatus,GCalendarsAvailable:u.a.GCalendarsAvailable,GCalendarSyncErrors:u.a.GCalendarSyncErrors,GCalendarAddFailure:u.a.GCalendarAddFailure,GCalendarListFailure:u.a.GCalendarListFailure,GCalendarListLoading:u.a.GCalendarListLoading},t=u.a.getPluginOptions(o.a.PluginID.GCalendar);for(var a in t){if(t.hasOwnProperty(a))e[o.a.PluginID.GCalendar+"_"+a]=t[a]}return e},toggleCalendarImport:function(e){var t=o.a.PluginSettingsID.GCalendar.ImportCalendars,a=(this.state[o.a.PluginID.GCalendar+"_"+t]||[]).slice(0),i=this.isExportCalendar(e);i&&this.disableCalendarExport(e);var r=a.indexOfWithProperty("id",e.id);if(r>=0)a.removeAt(r);else{try{n.default.PAssert(1812,!i,"Export calendar state must be matching with import calendar state")}catch(s){self.reportError(s)}try{n.default.PAssert(1813,e.accountID,"Calendar should have an accountID")}catch(s){self.reportError(s)}a.push({id:e.id,summary:e.summary,accessRole:e.accessRole,accountID:e.accountID})}u.a.setPluginOption(o.a.PluginID.GCalendar,t,a,!1),this.hadCalendarSyncUpdated=!0},enableCalendarExport:function(e){u.a.setPluginOption(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.WriteAccess,!0,!0,function(t){t&&(u.a.setPluginOption(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.ExportCalendar,e.id,!1),this.hadCalendarSyncUpdated=!0,this.isImportCalendar(e)||this.toggleCalendarImport(e))}.bind(this))},disableCalendarExport:function(e){u.a.setPluginOption(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.WriteAccess,!1,!1,function(e){e&&u.a.setPluginOption(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.ExportCalendar,null,!1)})},toggleCalendarExport:function(e){this.isExportCalendar(e)?this.disableCalendarExport(e):this.enableCalendarExport(e)},onAddCalendarClick:function(){u.a.setPluginOption(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.WriteAccess,!0,!1,function(e){e?(this.addingCalendar.set(!0),setTimeout(function(){this.refs.addCalendar.focus()}.bind(this),0)):i.default.toasts.pushMessage({text:"Moo.do needs write access to create a new calendar.",actionText:"OKAY"})}.bind(this))},onAddButtonClick:function(){var e=this.refs.addCalendar.getValue();u.a.addCalendar(e),this.addingCalendar.set(!1)},isImportCalendar:function(e){var t=!1;if(this.state.GCalendar_importCalendars)for(var a=0,o=0;o<this.state.GCalendar_importCalendars.length;++o){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var i=this.state.GCalendar_importCalendars[o];if(n.default.isObject(i)||(i={id:i}),i.id===e.id){t=!0;break}}return t},isExportCalendar:function(e){var t=!1;return this.state.GCalendar_exportCalendar&&(t=this.state.GCalendar_exportCalendar===e.id),t},onDisplayOverdueChange:function(e){i.default.pluginManager.setSetting(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.DisplayOverdueInAgenda,e)},onSyncNewEventsChange:function(e){i.default.pluginManager.setSetting(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.SyncNewEvents,e)},onSyncDraggedEventsChange:function(e){i.default.pluginManager.setSetting(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.SyncDraggedEvents,e)},onCreateLocalChange:function(e){i.default.pluginManager.setSetting(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.CreateLocalEvents,e)},updateCalendarEvents:function(){var e=i.default.pluginManager.getPlugin(o.a.PluginID.GCalendar);try{n.default.PAssert(1814,e,"GCalendar plugin does not exist. HOW?")}catch(t){self.reportError(t)}e&&e.runCalendarSync()},onChangeWeeksPast:function(e){i.default.pluginManager.setSetting(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.WeeksPast,e),clearTimeout(this.timeoutUpdateCalendarEvents),this.timeoutUpdateCalendarEvents=setTimeout(this.updateCalendarEvents,5e3)},onChangeWeeksFuture:function(e){i.default.pluginManager.setSetting(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.WeeksFuture,e),clearTimeout(this.timeoutUpdateCalendarEvents),this.timeoutUpdateCalendarEvents=setTimeout(this.updateCalendarEvents,5e3)},comparatorCalendar:function(e,t){var a=e.accountID&&t.accountID?e.accountID.localeCompare(t.accountID):0;if(0===a)return e.summary.localeCompare(t.summary);var o=n.default.getUserIdentifier();return e.accountID===o&&(a=-1),t.accountID===o&&(a=1),a},renderTableRows:function(){var e,t=this,a=this.state,r=a.GCalendarsAvailable,s=a.GCalendarSyncErrors,c=i.default.pluginManager.getPlugin(o.a.PluginID.GCalendar),u=!c.getSetting(o.a.PluginSettingsID.GCalendar.WriteAccess)&&this.state.GCalendar_exportCalendar,d=!1,p=[];return r.length>0&&c.getAccounts().length>0&&(r.sort(this.comparatorCalendar),d=!0),r.forEach(function(a){d&&a.accountID!==e&&(e=a.accountID,p.push(l.a.createElement("div",{className:"calendarAccount bold c-blue",key:"account_"+e},"Account: "+e)));var i=t.isImportCalendar(a),r=t.isExportCalendar(a),h="owner"===a.accessRole||"writer"===a.accessRole,f=n.default.classNames("calendarSettingsName",{import:i},{export:r});if(s){var g=s.indexOfWithProperty("id",a.id),y=null,v=null;if(g>=0){var E=s[g];E.result===o.a.SyncResult.FailureNoRead?y=!0:E.result===o.a.SyncResult.FailureNoRead&&(v=!0)}}var b=c.getCalendarBackgroundColor(a.id);p.push(l.a.createElement("div",{key:a.id},l.a.createElement("div",{className:f},a.summary||a.id),l.a.createElement(m.a,{checked:i,error:y,checkedColor:b,onChange:t.toggleCalendarImport.bind(t,a)}),h?l.a.createElement(m.a,{checked:r,enabled:h,checkedColor:b,error:y||v||r&&u,radio:!0,onChange:t.toggleCalendarExport.bind(t,a)}):l.a.createElement("div",null)))}),p},renderCalendarSettings:function(){var e,t,a,n,r=this.state,s=0,c=r.GCalendarSyncErrors,d=!1;if(c)for(var h=0,f=0;f<c.length;f++){if(h++>5e3&&__infLoop&&__infLoop(h))throw new RangeError;var g=c[f].result;g===o.a.SyncResult.FailureOAuth?d=!0:g!==o.a.SyncResult.FailureNoRead&&g!==o.a.SyncResult.FailureNoWrite||s++}var v=i.default.pluginManager.getPlugin(o.a.PluginID.GCalendar),b=v.getSetting(o.a.PluginSettingsID.GCalendar.WriteAccess),C=v.getSetting(o.a.PluginSettingsID.GCalendar.WeeksPast),w=v.getSetting(o.a.PluginSettingsID.GCalendar.WeeksFuture),S=v.getSetting(o.a.PluginSettingsID.GCalendar.DisplayOverdueInAgenda),x=v.getSetting(o.a.PluginSettingsID.GCalendar.SyncNewEvents),M=v.getSetting(o.a.PluginSettingsID.GCalendar.SyncDraggedEvents),D=v.getSetting(o.a.PluginSettingsID.GCalendar.CreateLocalEvents);return!b&&this.state.GCalendar_exportCalendar&&!0,i.default.billingManager.hasPremiumFeatures()?d&&0===r.GCalendarsAvailable.length?n=l.a.createElement("div",{className:"center"},l.a.createElement("div",{className:"error"},"We encountered a sync error. Please allow access to your calendar."),l.a.createElement("br",null),l.a.createElement(p.a,{raised:!0,primary:!0,onClick:u.a.enablePlugin.bind(u.a,o.a.PluginID.GCalendar)},"ALLOW")):r.GCalendarListFailure?n=l.a.createElement("div",{className:"center"},l.a.createElement("div",{className:"error"},"There was an error syncing your calendar list. Please try again."),l.a.createElement("br",null),l.a.createElement(p.a,{raised:!0,primary:!0,onClick:u.a.updateCalendarList.bind(u.a)},"RETRY")):r.GCalendarListLoading?n=l.a.createElement(E.a,null,"Loading Google Calendars..."):(s>0&&(n=l.a.createElement("div",{className:"center"},l.a.createElement("div",{style:{maxWidth:600,lineHeight:1.5,marginBottom:16},className:"error"},"There was an error reading or saving to your calendars. Please check your Google Calendar settings. The affected calendars are marked with a ",l.a.createElement(m.a,{checked:!0,error:!0,style:{marginLeft:5,marginRight:5}})," below."))),e=l.a.createElement(k.a,{className:"calendarSettingsTable new-modal-row"},l.a.createElement("div",{key:"header",className:"fancyTableHeader"},l.a.createElement("div",null,"Calendar Name"),l.a.createElement("div",null,"Sync"),l.a.createElement("div",null,"Default")),this.renderTableRows(),r.GCalendarAddFailure&&l.a.createElement("div",{key:"footerError"},l.a.createElement("div",{style:{textAlign:"center"}},"There was an error creating your new calendar. Please try again.")),r.addingCalendar&&l.a.createElement("div",{key:"footer"},l.a.createElement(y.a,{ref:"addCalendar",floatingText:"New calendar name",padding:{left:24,right:24},height:50,buttonText:"ADD",onButtonClick:this.onAddButtonClick})),!r.addingCalendar&&l.a.createElement("div",{key:"footer"},l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(p.a,{height:"auto",onClick:this.onAddCalendarClick},"ADD NEW CALENDAR"))))):n=l.a.createElement("div",{className:"center"},l.a.createElement("div",{className:"error"},"You must have an active Premium subscription or Trial to use Google Calendar."),l.a.createElement("br",null),l.a.createElement(p.a,{raised:!0,primary:!0,onClick:this.openSection.bind(this,o.a.SettingsSections.Account)},"ABOUT PREMIUM")),t=l.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},l.a.createElement("span",{style:{display:"inline-block",width:140}},"Weeks in the past"),l.a.createElement(N.a,{value:C,minValue:0,maxValue:-o.a.CalendarMinSyncWeeks,onChange:this.onChangeWeeksPast}),l.a.createElement("span",{style:{display:"inline-block",marginLeft:32,width:140}},"Weeks in the future"),l.a.createElement(N.a,{value:w,minValue:0,maxValue:o.a.CalendarMaxSyncWeeks,onChange:this.onChangeWeeksFuture})),a=l.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},l.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},l.a.createElement(m.a,{ref:"displayoverdue",checked:S,onChange:this.onDisplayOverdueChange},"Display overdue events in agenda"),l.a.createElement("div",{className:"subtext"},"In the Agenda view of the Calendar Pane, display events from Google Calendar that happened in the past.")),l.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},l.a.createElement(m.a,{ref:"syncDraggedEvents",checked:M,onChange:this.onSyncDraggedEventsChange},"Sync dragged events"),l.a.createElement("div",{className:"subtext"},"Sync events with Google Calendar when dragging onto the Calendar pane.")),l.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},l.a.createElement(m.a,{ref:"syncNewEvents",checked:x,onChange:this.onSyncNewEventsChange},"Sync new events created in add item popup by default"),l.a.createElement("div",{className:"subtext"},"When adding events in the New Item popup, Create Task in the Gmail pane, or in the Day, Week, and Month views in the Calendar Pane, the option to sync the event with Google Calendar will be checked by default.")),l.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},l.a.createElement(m.a,{ref:"createLocalEvents",checked:D,onChange:this.onCreateLocalChange},"Create a local item for new calendar events by default"),l.a.createElement("div",{className:"subtext"},"When adding events in the New Item popup, Create Task in the Gmail pane, or in the Day, Week, and Month views in the Calendar Pane, a new local task will be created for Google Calendar events."))),l.a.createElement("div",{className:"calendarSettings"},n,e,t,a)},render:function(){return l.a.createElement("div",{className:"new-modal-group"},l.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},l.a.createElement("div",{className:"subtext"},"By default we are not able to modify your calendar or calendar events. Adding a 'Save To' calendar to below will sync your local changes to your Google Calendar."),this.renderCalendarSettings()))}}),_=a(37),T=c.b.createClass({displayName:"ReactModalSettingsContacts",componentDisplay:o.a.ComponentDisplay.Desktop,getState:function(){return{contacts:_.a._contacts}},render:function(){var e=this.state;return l.a.createElement("div",{className:"settingPluginOptions"},l.a.createElement("div",{className:"subtext"},l.a.createElement("span",null,"We will not send emails or otherwise communicate with your contacts unless you ask us to."),l.a.createElement("span",null," If you need instant access to contacts you just added you can sync them by pressing the button below, otherwise your contacts will appear automatically after a few hours.")),l.a.createElement("div",{className:"center"},l.a.createElement(p.a,{id:"refreshContacts",raised:!0,primary:!0,onClick:u.a.onTapRefreshContacts.bind(u.a)},"REFRESH CONTACTS"),l.a.createElement("div",{id:"numContacts"},e.contacts.length+" contacts loaded")))}}),O=c.b.createClass({displayName:"ReactModalSettingsGmail",componentDisplay:o.a.ComponentDisplay.Desktop,init:function(){this.hadGmailSyncUpdated=!1},onUnmount:function(){if(this.hadGmailSyncUpdated){var e=i.default.pluginManager.getPluginGmail();e.isActive()&&e._forceThreadSync()}},getState:function(){return{GmailNumSyncd:u.a.GmailNumSyncd,GmailNumTotal:u.a.GmailNumTotal,GmailCacheSize:u.a.GmailCacheSize,GmailSyncAccounts:u.a.GmailSyncAccounts}},onSyncTimeChanged:function(e){i.default.pluginManager.setSetting(o.a.PluginID.Gmail,o.a.PluginSettingsID.Gmail.SyncTime,e),this.hadGmailSyncUpdated=!0},onScheduleChange:function(e){i.default.pluginManager.setSetting(o.a.PluginID.Gmail,o.a.PluginSettingsID.Gmail.ArchiveOnSchedule,e)},onOrganizeChange:function(e){i.default.pluginManager.setSetting(o.a.PluginID.Gmail,o.a.PluginSettingsID.Gmail.ArchiveOnOrganize,e)},onSignatureChange:function(e){i.default.pluginManager.setSetting(o.a.PluginID.Gmail,o.a.PluginSettingsID.Gmail.InsertSignatureAboveReplies,e)},onClickSetupAccounts:function(){this.props.openSection(o.a.SettingsSections.Linked)},render:function(){var e=i.default.pluginManager.getPlugin(o.a.PluginID.Gmail),t=e.getSetting(o.a.PluginSettingsID.Gmail.SyncTime),a=e.getSetting(o.a.PluginSettingsID.Gmail.ArchiveOnSchedule),n=e.getSetting(o.a.PluginSettingsID.Gmail.ArchiveOnOrganize),r=e.getSetting(o.a.PluginSettingsID.Gmail.InsertSignatureAboveReplies),s=i.default.billingManager.hasPremium()?o.a.MaxGmailSyncTime.Premium:o.a.MaxGmailSyncTime.Free;return l.a.createElement("div",{className:"new-modal-group gmailSettings"},l.a.createElement("div",{className:"new-modal-row new-modal-row-1c center"},l.a.createElement(p.a,{raised:!0,onClick:this.onClickSetupAccounts},"SETUP ACCOUNTS")),l.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},l.a.createElement("span",{style:{width:140}},"Offline sync days\xa0\xa0"),l.a.createElement(N.a,{value:t,minValue:0,maxValue:s,onChange:this.onSyncTimeChanged}),l.a.createElement("div",{className:"subtext"},"The number of days in the past that your email will be saved for offline access.")),l.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},l.a.createElement(m.a,{ref:"archiveOnSchedule",checked:a,onChange:this.onScheduleChange},"Archive emails when scheduled"),l.a.createElement("div",{className:"subtext"},"If enabled, when you use the 'Schedule' feature to put an email on your calendar it will be archived.")),l.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},l.a.createElement(m.a,{ref:"archiveOnOrganize",checked:n,onChange:this.onOrganizeChange},"Archive emails when organized"),l.a.createElement("div",{className:"subtext"},"If enabled, when you drag an email to your outline it will be archived and marked as Moo.do/Handled.")),l.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},l.a.createElement(m.a,{ref:"insertSignatureAboveReplies",checked:r,onChange:this.onSignatureChange},"Insert signature before quoted text in replies"),l.a.createElement("div",{className:"subtext"},"If enabled, your signature will be inserted above the quoted text in replies and will remove the '--' line that precedes it.")))}}),A=a(138),L=a(105),R=["overdue","starred","important","#next","#soon","#later","#someday"],F=c.b.createClass({displayName:"ReactModalSettingsAgenda",componentDisplay:o.a.ComponentDisplay.Desktop,init:function(){for(var e=0,t=0,a=0,n=i.default.timeline.agendaSort.get(),o=[],r=Object.keys(n).map(function(e){return{key:e,value:n[e]}}),s=0;s<15;s++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;r.push(s)}for(r.sort(this.sortComparator),s=0;s<R.length;s++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var l=R[s];r.indexOfWithProperty("key",l)<0&&o.push({key:l,value:0})}var c=A.a.getAll();for(s=0;s<c.length;s++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var u="#"+c[s].text;r.indexOfWithProperty("key",u)<0&&o.push({key:u,value:0})}o.sort(this.sortComparatorNonSort),this.createObservables({sortArray:r,nonSortArray:o,selected:{array:"sort",index:0}})},sortComparatorNonSort:function(e,t){var a=e.key[0],n=t.key[0];return"#"===a&&"#"!==n?1:"#"===n&&"#"!==a?-1:e.key.localeCompare(t.key)},sortComparator:function(e,t){return(isNaN(e)?e.value:100*e)-(isNaN(t)?t.value:100*t)},moveChild:function(e,t,a,n){var o=this.state,i=a&&a!==this.refs.sortList?"nonSort":"sort",r=n&&n!==this.refs.nonSortList?"sort":"nonSort",s=o[i+"Array"],l=o[r+"Array"],c=s===l,u="sort"===i?o.nonSortArray:o.sortArray,d=s[e];c?s.splice(e,1):d.isDragging=!0;var m=u.indexOfWithProperty("key",d.key);m>=0&&u.splice(m,1),l.splice(t,0,d),this[i+"Array"].set(s,!1),this[r+"Array"].set(l,!0)},onDragOut:function(e,t){var a=t&&t!==this.refs.sortList?"nonSort":"sort",n=this.state[a+"Array"],o="sort"===a?this.nonSortArray:this.sortArray,i=n[e],r=o.indexOfWithProperty("key",i.key);r>=0&&o.splice(r,1)},onDragEnd:function(e,t,a){var n=e.props.owner,o=e.props.index,i=n&&n!==this.refs.sortList?"nonSort":"sort",r=this.state[i+"Array"][o];if(r.isDragging=!1,t){var s=e.props.owner;(s&&s!==this.refs.nonSortList?this.sortArray:this.nonSortArray).splice(e.props.index,1)}this.sortArray.indexOf(r)<0&&this.nonSortArray.indexOf(r)<0&&this.nonSortArray.push(r),this.sortArray.notify(),a&&this.saveAfterTimeout()},saveAfterTimeout:function(){this._saveTimeout&&clearTimeout(this._saveTimeout),this._saveTimeout=setTimeout(this.saveToSettings,200)},saveToSettings:function(){for(var e,t=0,a=this.state.sortArray,n={},o=-1,r=0;r<a.length;r++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var s=a[r];if(isNaN(s)){var l=100*o,c=e&&e>l?e+1:l+1;n[s.key]=c,e=c}else o=s}i.default.timeline.saveAgendaSort(n)},getDragTargetfromElement:function(e){var t=n.default.findParent(e,"fancySortableList"),a=this.refs;return t===a.sortList.getElement()?a.sortList:t===a.nonSortList.getElement()?a.nonSortList:void 0},onClickMoveToOtherList:function(){var e=this.state.selected,t=e.array,a=e.index,n="sort"===t?"nonSort":"sort",o=this.state[t+"Array"][a];isNaN(o)&&(this[t+"Array"].splice(a,1),this[n+"Array"].splice(0,0,o)),this.saveAfterTimeout()},onClickListItem:function(e,t){this.selected.set({array:e,index:t})},renderListItem:function(e,t,a,o){var i=this.state,r=this.onClickListItem.bind(this,o,t);if(isNaN(e)){var s=e.key.capitalize(),c=n.default.classNames(a,{"tag c-tag":s.startsWith("#")},{"selected c-popup-item":i.selected.array===o&&i.selected.index===t});return l.a.createElement("div",{key:s,className:c,onClick:r,"data-isdragging":e.isDragging},s)}return l.a.createElement("div",{key:e,className:a+" date c-date","data-nodrag":!0},l.a.createElement("span",{className:"icon-calendar"}),l.a.createElement("span",null,"Today"+(e>0?" + "+e+" days":"")))},render:function(){var e,t=0,a=0,o=this.state,i=o.sortArray,r=o.nonSortArray,s=[],c=[],u=o.selected.array,d=n.default.classNames("agendaSortSettingsItem c-background"),m=n.default.classNames({"icon-arrow_forward":"sort"===u},{"icon-arrow_back":"nonSort"===u});for(e=0;e<i.length;e++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;s.push(this.renderListItem(i[e],e,d,"sort"))}for(e=0;e<r.length;e++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;c.push(this.renderListItem(r[e],e,d,"nonSort"))}return l.a.createElement("div",{className:"agendaSortListsContainer modal-row flexbox flexvert",style:{height:"100%"}},l.a.createElement("div",{className:"modal-row-title"},"Change agenda sort"),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Customize the sort order of the Agenda. Drag and drop tags and blocks to arrange them relative to dates."),l.a.createElement("div",{className:"modal-row agendaSortLists flexbox f1"},l.a.createElement("div",{className:"agendaSortListWrapper flexbox flexvert f1"},l.a.createElement("div",{className:"bold"},"Order on Agenda"),l.a.createElement(L.a,{className:"agendaSortList f1 c-border-light",moveChild:this.moveChild,onDragEnd:this.onDragEnd,onDragOut:this.onDragOut,ref:"sortList",getDragTargetfromElement:this.getDragTargetfromElement,classDragging:"c-foreground-very-faded"},s)),l.a.createElement("div",{className:"flexbox flexvert height100"},l.a.createElement(p.a,{raised:!0,round:!1,icon:m,onClick:this.onClickMoveToOtherList})),l.a.createElement("div",{className:"agendaSortListWrapper flexbox flexvert f1"},l.a.createElement("div",{className:"bold"},"Not on Agenda"),l.a.createElement(L.a,{className:"agendaSortList agendaSortList f1 c-border-light",moveChild:this.moveChild,onDragEnd:this.onDragEnd,onDragOut:this.onDragOut,ref:"nonSortList",getDragTargetfromElement:this.getDragTargetfromElement,classDragging:"c-foreground-very-faded"},c))))}}),B=c.b.createClass({displayName:"ReactModalSettingsDates",componentDisplay:o.a.ComponentDisplay.Desktop,init:function(){},onChangeDateFormat:function(){var e=this.refs.selectDateFormat.value;i.default.settings.dateFormat.set(e)},onChangeDayWeekStart:function(){i.default.settings.dayWeekStart.set(+this.refs.selectDayWeekStart.value)},onNotificationsChanged:function(e){var t=this;i.default.settings.disableNotifications.set(!e),e?r.a.usesHTML5Notifications()?r.a.hasNotificationPermission()||Notification.requestPermission(function(e){"granted"===e?i.default.timeline.updateNotifications():(i.default.settings.disableNotifications.set(!0),t.refs.notifications.setValue(!1),i.default.toasts.pushMessage({text:"To enable notifications in the future, you must first give permission in your browser.",action:o.a.MessageAction.OpenURL,actionText:"LEARN MORE",data:{url:"https://support.google.com/chrome/answer/6148059"}}))}):i.default.timeline.updateNotifications():i.default.timeline.clearNotifications()},onDelayChanged:function(e){i.default.settings.notificationDelay.set(e),n.default.sendEvent("NotificationDelay","Changed",e)},onCustomDaysChanged:function(e){i.default.settings.calendarCustomDays.set(e)},render:function(){var e=i.default.International.getCurrentDateFormat(),t=i.default.settings.dayWeekStart.get(),a=i.default.settings.calendarCustomDays.get(),n=i.default.settings.notificationDelay.get(),s=!i.default.settings.disableNotifications.get()&&r.a.hasNotificationPermission();return l.a.createElement("div",{key:"content"},l.a.createElement("div",{className:"modal-row"},l.a.createElement("div",{className:"settingsName ib bold"},"Date Format:"),l.a.createElement("select",{defaultValue:e,ref:"selectDateFormat",onChange:this.onChangeDateFormat},l.a.createElement("option",{value:o.a.DateFormat.MDY},"M/D/Y"),l.a.createElement("option",{value:o.a.DateFormat.DMY},"D/M/Y"),l.a.createElement("option",{value:o.a.DateFormat.DMYDot},"D.M.Y"),l.a.createElement("option",{value:o.a.DateFormat.YMD},"Y/M/D"),l.a.createElement("option",{value:o.a.DateFormat.YMDDot},"Y.M.D"))),l.a.createElement("div",{className:"modal-row"},l.a.createElement("div",{className:"settingsName ib bold"},"Start week on:"),l.a.createElement("select",{defaultValue:t,ref:"selectDayWeekStart",onChange:this.onChangeDayWeekStart},l.a.createElement("option",{value:0},"Sunday"),l.a.createElement("option",{value:1},"Monday"))),l.a.createElement("div",{className:"modal-row"},l.a.createElement("div",{className:"settingsName ib bold"},"Number of days in custom calendar view (Premium):"),l.a.createElement(N.a,{value:a,minValue:1,maxValue:14,readonly:!i.default.billingManager.hasPremiumFeatures(),onChange:this.onCustomDaysChanged})),r.a.supportsNotifications()&&l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",null),l.a.createElement("div",{className:"modal-row"},l.a.createElement(m.a,{ref:"notifications",checked:s,onChange:this.onNotificationsChanged},"Enable notifications"),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Display native notifications for items that use a specific @date and time in their text. These are only displayed for the currently open document on this device.")),l.a.createElement("div",{className:"modal-row"},l.a.createElement("span",{className:"settingsName ib bold"},"Notification Time"),l.a.createElement(N.a,{value:n,minValue:0,maxValue:120,interval:5,onChange:this.onDelayChanged}),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Time in minutes before event to display a notification about the event."))))}}),G=a(83),j=a(433),U=a(63);function H(e){return(H="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function W(e,t){return!t||"object"!==H(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),W(this,K(t).apply(this,arguments))}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,c["a"]),a=t,(n=[{key:"init",value:function(){this.createObservables({backupText:""})}},{key:"getState",value:function(){return{backupFrequency:i.default.settings.backupFrequency,lastBackup:i.default.settings.lastBackup,lastBackupText:this.getLastBackupText(),encryptBackup:i.default.settings.encryptBackup}}},{key:"getLastBackupText",value:function(){var e,t=i.default.settings.lastBackup.get();if(t>0){var a=new Date(t);e=U.a.toHumanText(a)}else e="Not backed up";return e}},{key:"onToggleEnable",value:function(){var e,t=this,a=i.default.settings.backupFrequency;if(this.state.backupFrequency>0)e=0,a.set(e);else{var n=function(){e=o.a.DefaultBackupFrequency,t.refs.selectTimeframe.setValue("Hours"),a.set(e)};G.a.isDriveBackupAuthorized()?n():G.a.authorize(function(e){e&&n()})}}},{key:"onToggleEncrypt",value:function(){i.default.settings.encryptBackup.set(i.default.settings.encryptBackup.get())}},{key:"onChangeFrequency",value:function(){var e=this.refs.frequency.getValue(),t=this.refs.selectTimeframe.getValue(),a="Days"===t&&o.a.MSPerDay||"Hours"===t&&o.a.MSPerHour||"Minutes"===t&&o.a.MSPerMinute;i.default.settings.backupFrequency.set(e*a)}},{key:"onClickBackupNow",value:function(){var e=this;this.backupText.set("Backing up..."),G.a.backupLocal(),G.a.backup(function(){e.backupText.set("Backup complete")})}},{key:"onClickBackupList",value:function(){i.default.menus.closeModal(o.a.Modals.Settings),i.default.menus.openModal(o.a.Modals.Backups)}},{key:"render",value:function(){var e=this.state,t=this.state.backupFrequency||0,a="Hours";return t>=o.a.MSPerDay?(a="Days",t/=o.a.MSPerDay):t>=o.a.MSPerHour?(a="Hours",t/=o.a.MSPerHour):t>=0&&(a="Minutes",t/=o.a.MSPerMinute),t=Math.floor(t),l.a.createElement("div",{key:"content"},l.a.createElement("div",{className:"modal-row"},l.a.createElement(m.a,{checked:t>0,onChange:this.onToggleEnable},"Enable automatic backups"),l.a.createElement("div",{className:"modal-subtext c-foreground-faded"},'Automatically backup all data into the "Moo.do Backups" folder in your Google Drive. Backups will run on the following frequency, only if there are any new changes to back up.'),l.a.createElement(m.a,{className:"block mt16",checked:e.encryptBackup,onChange:this.onToggleEncrypt},"Encrypt backups")),l.a.createElement("div",{className:"modal-row"},l.a.createElement("div",{className:"settingsName ib bold"},"Every:"),l.a.createElement(N.a,{value:t,ref:"frequency",minValue:0,maxValue:60,interval:1,onChange:this.onChangeFrequency}),l.a.createElement(j.a,{defaultValue:a,style:{marginLeft:16,height:32},ref:"selectTimeframe",onChange:this.onChangeFrequency},l.a.createElement("option",{value:"Minutes"},"Minutes"),l.a.createElement("option",{value:"Hours"},"Hours"),l.a.createElement("option",{value:"Days"},"Days"))),l.a.createElement("div",{className:"modal-row"},"Last backup: "+e.lastBackupText),l.a.createElement("div",{className:"modal-row"},l.a.createElement(p.a,{raised:!0,onClick:this.onClickBackupNow},"BACKUP NOW"),e.backupText&&l.a.createElement("div",{className:"modal-subtext"},e.backupText)),l.a.createElement("div",{className:"modal-row"},l.a.createElement(p.a,{raised:!0,onClick:this.onClickBackupList},"SEE BACKUP HISTORY")))}}])&&V(a.prototype,n),r&&V(a,r),t}(),q=a(47);function Z(e){return(Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Q(e,t){return!t||"object"!==Z(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,J(t).apply(this,arguments))}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,c["a"]),a=t,(n=[{key:"init",value:function(){this.createObservables({error:""})}},{key:"getState",value:function(){var e=i.default.settings.encryptionKeys;return{encryptionKeys:e,hasUserPassword:e.get()&&!!e.get()[o.a.EncryptionKeys.UserPassword]}}},{key:"onClickSave",value:function(e,t){var a=this.refs.pass1.getValue(),n=this.refs.pass2.getValue(),r=o.a.EncryptionKeys.UserPassword;if(a===n)return G.a.backupLocal(),i.default.crypto.addKey({name:r,password:a,sentinelSalt:g.a.getUid()}).then(function(e){q.a.updateUserEncryption(e).then(function(){t()})}),!0;this.error.set("Passwords do not match")}},{key:"onClickContact",value:function(){i.default.menus.openModal(o.a.Modals.ReportBug)}},{key:"render",value:function(){var e=this.state,t={marginTop:8,width:240};return s.createElement("div",{key:"content"},s.createElement("div",{className:"modal-row"},e.hasUserPassword?s.createElement(s.Fragment,null,s.createElement("div",null,s.createElement("div",{className:"settingsName ib bold"},"Your data is encrypted with your password"),s.createElement("div",{className:"modal-subtext c-foreground-faded"},"A feature to change the encryption password is coming soon but isn't ready yet. If you need this, please contact support to let us know it's important."),s.createElement("div",{style:{marginTop:16}},s.createElement(p.a,{raised:!0,onClick:this.onClickContact},"Contact support")))):s.createElement(s.Fragment,null,s.createElement("div",null,s.createElement("div",{className:"settingsName ib bold"},"Encrypt data with a password"),s.createElement("div",{className:"modal-subtext c-foreground-faded"},"Your data is encrypted client-side before sending it to the database. Enter your own password for the encryption to make it even more secure.")),s.createElement("div",{style:{marginTop:16}},s.createElement(y.a,{type:"password",placeholder:"Password",ref:"pass1",style:t,onButtonClick:this.onClickSave}),s.createElement(y.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:t,onButtonClick:this.onClickSave})),s.createElement("div",{className:"modal-warning flexbox c-warning"},s.createElement("i",{className:"icon-warning"}),s.createElement("div",null,"For your security, Moo.do cannot recover your password, so keep your password safe!")),e.error&&s.createElement("div",{className:"error"},e.error),s.createElement("div",{style:{marginTop:8}},s.createElement(p.a,{raised:!0,primary:!0,onClick:this.onClickSave},"Save")))))}}])&&X(a.prototype,n),r&&X(a,r),t}(),te=a(12);function ae(e){return(ae="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oe(e,t){return!t||"object"!==ae(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,ie(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,c["a"]),a=t,(n=[{key:"init",value:function(){}},{key:"getState",value:function(){}},{key:"onClickClearLocal",value:function(){te.a.__clearLocalData()}},{key:"onClickClearAll",value:function(){te.a.__clearAllData()}},{key:"render",value:function(){return s.createElement("div",{key:"content"},s.createElement("div",{className:"modal-row"},s.createElement("div",{style:{marginTop:8}},s.createElement(p.a,{raised:!0,onClick:this.onClickClearLocal},"Clear Local Data"))),s.createElement("div",{className:"modal-row"},s.createElement("div",{style:{marginTop:8}},s.createElement(p.a,{raised:!0,onClick:this.onClickClearAll},"Clear All Data"))))}}])&&ne(a.prototype,n),o&&ne(a,o),t}(),le=a(429),ce=a(431),ue=c.b.createClass({displayName:"ReactModalSettings",componentDisplay:o.a.ComponentDisplay.Desktop,init:function(){this.createObservables({sectionOpened:this.props.section||o.a.SettingsSections.General}),u.a.refresh(),u.a.getPluginEnabledObservable(o.a.PluginID.GCalendar).listen(this.onToggleGCal)},getState:function(){for(var e=0,t={},a=u.a.pluginsAvailable,n=0;n<a.length;++n){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var o=a[n];t[o+"Enabled"]=u.a.getPluginEnabledObservable(o)}return t},onToggleGCal:function(e){e&&setTimeout(function(){this.openSection(o.a.SettingsSections.GoogleCalendar)}.bind(this),0)},openSection:function(e){var t=!u.a.isSaveEnabled.get();t||i.default.menus.confirm("You have unsaved changes. Are you sure you want to cancel your changes?",function(t){t&&(u.a.isSaveEnabled.set(!1),this.openSection(e))}.bind(this)),t&&this.sectionOpened.set(e)},showEarlyAndAccount:function(){return!n.default.isDemoMode()||!1},_checkLinkedAccountErrors:function(){for(var e=0,t=i.default.pluginManager.getPluginGmail().getSyncAccounts(),a=0;a<t.length;++a){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;t[a]}return!1},_checkSectionError:function(e){var t=!1;switch(e){case o.a.SettingsSections.Linked:t=this._checkLinkedAccountErrors()}return t},renderListItem:function(e,t){var a=this._checkSectionError(e),n=l.a.createElement("span",null,e);return a&&(n=l.a.createElement("span",null,l.a.createElement("span",null,n),l.a.createElement("span",{className:"error icon-warning"}))),l.a.createElement(ce.a,{className:t&&!a?"indented":null,selected:this.state.sectionOpened===e,onClick:this.openSection.bind(this,e)},n)},renderPluginListItem:function(e,t){var a=i.default.pluginManager.getPlugin(e),n=a&&a.hasSettingsError(),o=l.a.createElement("span",null,t);return n&&(o=l.a.createElement("span",null,o,l.a.createElement("span",{className:"error icon-warning"}))),l.a.createElement(ce.a,{selected:this.state.sectionOpened===t,onClick:this.openSection.bind(this,t)},o)},isPluginEnabled:function(e){return this.state[e+"Enabled"]},render:function(){i.default.billingManager;var e,t,a=this.state.sectionOpened;switch(a){case o.a.SettingsSections.General:t=h;break;case o.a.SettingsSections.Plugins:t=f;break;case o.a.SettingsSections.Invite:t=d.a;break;case o.a.SettingsSections.EarlyAccess:t=b;break;case o.a.SettingsSections.Account:t=v;break;case o.a.SettingsSections.Linked:t=P;break;case o.a.SettingsSections.GoogleCalendar:t=I;break;case o.a.SettingsSections.Contacts:t=T;break;case o.a.SettingsSections.Gmail:t=O;break;case o.a.SettingsSections.Agenda:t=F;break;case o.a.SettingsSections.Dates:t=B;break;case o.a.SettingsSections.Backups:t=Y;break;case o.a.SettingsSections.Security:t=ee;break;case o.a.SettingsSections.Debug:t=se;break;default:try{n.default.PAssert(1702,!1,"Unknown settings sections requested: ",a)}catch(s){self.reportError(s)}}e=l.a.createElement(t,{key:"content",openSection:this.openSection});var r="Settings - "+this.sectionOpened.get();return l.a.createElement(le.a,{id:"modalSettings",title:r,width:800,height:900,sidebarWidth:180,modalID:o.a.Modals.Settings,scrollable:!0},l.a.createElement("div",{key:"sidebar"},l.a.createElement(ce.a,{header:!0},"SETTINGS"),this.renderListItem(o.a.SettingsSections.General),this.renderListItem(o.a.SettingsSections.Dates),this.renderListItem(o.a.SettingsSections.Agenda),this.renderListItem(o.a.SettingsSections.Backups),this.showEarlyAndAccount()&&this.renderListItem(o.a.SettingsSections.Account),this.renderListItem(o.a.SettingsSections.Security),l.a.createElement(ce.a,{header:!0},"PLUGINS"),this.renderListItem(o.a.SettingsSections.Plugins),this.isPluginEnabled(o.a.PluginID.GCalendar)&&this.renderPluginListItem(o.a.PluginID.GCalendar,o.a.SettingsSections.GoogleCalendar),this.isPluginEnabled(o.a.PluginID.Contacts)&&this.renderPluginListItem(o.a.PluginID.Contacts,o.a.SettingsSections.Contacts),this.isPluginEnabled(o.a.PluginID.Gmail)&&this.renderPluginListItem(o.a.PluginID.Gmail,o.a.SettingsSections.Gmail),this.isPluginEnabled(o.a.PluginID.Gmail)&&this.showEarlyAndAccount()&&this.renderListItem(o.a.SettingsSections.Linked),l.a.createElement(ce.a,{header:!0},"SUPPORT"),this.renderListItem(o.a.SettingsSections.EarlyAccess),this.renderListItem(o.a.SettingsSections.Invite),this.renderListItem(o.a.SettingsSections.Debug)),e)}});t.default=ue},481:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(2),s=a.n(r),l=a(13),c=a(6),u=a(3),d=a(14),m=a(30),p=a(77),h=a(436),f=l.b.createClass({displayName:"FancyFocusGuard",componentDisplay:o.a.ComponentDisplay.Desktop,onFocus:function(){var e=this.props.component.refs[this.props.target];e&&e.focus()},render:function(){return s.a.createElement("input",{className:"fancyFocusGuard",onFocus:this.onFocus,tabIndex:this.props.tabIndex})}}),g=a(57),y=a(44),v=a(8),E=a(48),b=a(433);function C(e){return(C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(){return(k=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function w(e,t){for(var a=0,n=0;n<t.length;n++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function S(e,t){return!t||"object"!==C(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,x(t).apply(this,arguments))}var a,r,C;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,l["a"]),a=t,(r=[{key:"init",value:function(){this.createObservables({canSyncDate:!1,addingLocal:!0})}},{key:"getHotkeys",value:function(){return[m.a.create(o.a.KeyCode.Escape,!0,o.a.Primary.Either,o.a.Shift.Either,this.onEscape),m.a.create(o.a.KeyCode.D,!0,o.a.Primary.Yes,o.a.Shift.Yes,this.onHotkeyDate),m.a.create(o.a.KeyCode.C,!0,o.a.Primary.Never,o.a.Shift.No,this.onHotkeyCreateEvent)]}},{key:"getState",value:function(){var e=this.props.item;return{flags:e.flags,maxWidth:this.props.pane?Math.min(this.props.pane.getWidth()-20,400):400,isStarred:e.isStarred(),priority:e.getPriority()}}},{key:"onMount",value:function(){this.props.item.itemChanged.listen(this.onItemChanged),u.a.isMobile||(d.a.listen("windowResize",this.onResize),d.a.listen("panesChanged",this.onResize))}},{key:"onResize",value:function(){var e=this;this.updateState(),setTimeout(function(){e.refs.menu&&e.refs.menu.updateState()},300)}},{key:"onUnmount",value:function(){if(this.props.item.itemChanged.unlisten(this.onItemChanged),!u.a.isMobile){var e=this.props;if(e.addOnSave&&this.needsSave){c.e.beginAction();var t=this.addItem(),a=t.item,r=t.parent,s=t.insertIndex;e.beginSave&&e.beginSave();try{var l=e.options;if(l)for(var m=0,p=0;p<l.length;p++){if(m++>5e3&&__infLoop&&__infLoop(m))throw new RangeError;var h=l[p],f=this.refs[h.text];if(f&&f.getValue())try{h.cb(a)}catch(k){n.default.reportError(k)}}if(e.children)for(var g=0,y=0;y<e.children.length;y++){if(g++>5e3&&__infLoop&&__infLoop(g))throw new RangeError;var v=e.children[y].clone(a,o.a.ChangeType.Local);a.insertItem(v)}var E=i.default.pluginManager.getPluginGCalendar(),b=this.refs.checkAddCalendar;if(E&&E.isAvailable()&&b&&b.getValue()){var C=this.refs.selectCalendar.getValue();E.createEventForItem(a,C)}isNaN(s)||r.insertItem(a,s)}catch(w){n.default.reportError(w)}c.e.endAction(),e.endSave&&e.endSave()}d.a.unlisten("windowResize",this.onResize),d.a.unlisten("panesChanged",this.onResize)}}},{key:"onItemChanged",value:function(){var e=this.props.item;this.canSyncDate.set(!!e.getMooDate())}},{key:"onHotkeyDate",value:function(){i.default.menus.openContextMenu({componentName:"ReactContextMenuDate",element:this.refs.item.getElement(),item:this.props.item,pane:this.props.pane})}},{key:"onHotkeyCreateEvent",value:function(){var e=i.default.pluginManager.getPluginGCalendar(),t=this.props.item;e&&(this.props.addOnSave?this.state.canSyncDate&&this.refs.checkAddCalendar&&this.refs.checkAddCalendar.setValue(!0):(e.createEventForItem(t),t.itemChanged.notify()))}},{key:"onKeyDownItem",value:function(e){u.a.getKeyCode(e)===o.a.KeyCode.Enter?(this.save(),e.preventDefault()):this.wasAKeyPressed=!0}},{key:"save",value:function(){this.props.item.hasText()?(this.needsSave=!0,i.default.menus.closeContextMenu()):i.default.toasts.pushMessage({text:"Please enter text for the item before adding it.",timeout:2e3})}},{key:"addItem",value:function(){var e=this.props.item,t=!0,a=i.default.pluginManager.getPluginGCalendar();if(a&&a.isAvailable()&&this.refs.checkAddLocal&&(t=this.refs.checkAddLocal.getValue()),e.getRawText().length>0){if(t){var n=this.props.parent,r=this.refs.addTo.getItem(),s=0;r&&(s=(n=r.item).numItems()),n.getDocumentOwner();var l=e.clone(n,o.a.ChangeType.AllLocal),c=this.refs.noteText.getValue();if(c){var u=l.createNote();u&&u.setText(c,o.a.ChangeType.Local)}return{item:l,parent:n,insertIndex:s}}return{item:e}}return{}}},{key:"onEscape",value:function(){this.wasEscapeKeyPressed=!0,i.default.menus.closeContextMenu()}},{key:"onNoteValueSet",value:function(){this.refs.menu.updateState()}},{key:"onKeyDownNote",value:function(e){u.a.getKeyCode(e)===o.a.KeyCode.Enter&&(u.a.mac&&e.metaKey||!u.a.mac&&e.ctrlKey)&&this.save()}},{key:"onClickStar",value:function(){var e=this.props.item;e.setStarred(!e.isStarred(),o.a.ChangeType.Local)}},{key:"setPriority",value:function(e){var t=this.props.item;t.getPriority()===e&&(e=o.a.VMLIFlag.None),t.setPriority(e,o.a.ChangeType.Local)}},{key:"onChangeAddToCalendar",value:function(e){!e&&this.refs.checkAddLocal&&this.refs.checkAddLocal.setValue(!0)}},{key:"onChangeAddLocal",value:function(e){!e&&this.refs.checkAddCalendar&&this.refs.checkAddCalendar.setValue(!0),this.addingLocal.set(e)}},{key:"onChangeCalendar",value:function(e){if(this.props.item.hasPluginAttachment(o.a.PluginID.GCalendar)){var t=this.props.item.getAttachmentByPlugin(o.a.PluginID.GCalendar),a=i.default.pluginManager.getPluginGCalendar(),n=e.target.value;a.changeCalendarForEvent(t,n)}}},{key:"renderCalendarSelector",value:function(){var e,t,a,n,r=this.props.item,l=i.default.pluginManager.getPluginGCalendar();if(l&&l.isAvailable()&&l.isEnabled()){if(r.hasPluginAttachment(o.a.PluginID.GCalendar)){var c=r.getAttachmentByPlugin(o.a.PluginID.GCalendar),u=l.getCalendarForAttach(c);u&&(a=u.id,n=u.accountID,t=a)}e=l.getWritableCalendarListSync(n)}return e?s.a.createElement("div",{className:"detailsSection flexbox"},s.a.createElement("span",{className:"c-foreground-faded"},"Calendar:"),s.a.createElement(b.a,{value:t,style:{marginLeft:16,height:32},ref:"selectCalendar",onChange:this.onChangeCalendar},e.map(function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.summary)}))):void 0}},{key:"render",value:function(){var e,t=this.props,a=this.state,r=t.pane,l=t.item,c=this.state.maxWidth,d=u.a.isMobile&&this.props.bottom,m=n.default.parentTextForItem(l),b=t.children||(r?r.getSubItems(l,!0):[]),C=l.allowTextEditing(),w=C&&(l.canHaveNote()||l.hasNote()),S=a.canSyncDate,x=i.default.pluginManager.getPlugin(o.a.PluginID.GCalendar),M=x.isActive()&&i.default.pluginManager.getSetting(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.SyncNewEvents),D=x.isActive()&&i.default.pluginManager.getSetting(o.a.PluginID.GCalendar,o.a.PluginSettingsID.GCalendar.CreateLocalEvents),P=x&&x.isAvailable()&&x.isEnabled(),N=P&&(S||t.showCalendarButtons),I=l.hasPluginAttachment(o.a.PluginID.GCalendar);if(b.length>0){var _=0;e=[];b[0].getPadding(r);for(var T=0;T<b.length;T++){if(_++>5e3&&__infLoop&&__infLoop(_))throw new RangeError;var O=b[T];e.push(s.a.createElement(p.a,{key:O.id,item:O,pane:t.pane,padded:!0,allowDrag:!1}))}}var A=10,L=n.default.classNames("c-foreground-faded",{disabled:!a.addingLocal});return s.a.createElement(E.a,k({},t,{key:l.id+"_Edit",id:"contextMenuItemDetails",className:"flexbox flexvert",width:400,maxWidth:c,bottom:d,onEscape:this.onEscape,ref:"menu"}),s.a.createElement(f,{component:this,target:"buttonSave",tabIndex:A++}),m&&s.a.createElement("div",{className:"detailsSection flexbox itemContext c-foreground-faded"},s.a.createElement("div",{className:"c-foreground-faded"},"Parents"),s.a.createElement("div",null,m)),s.a.createElement("div",{className:"detailsSection flexbox noShrink"},s.a.createElement("div",{className:"c-foreground-faded"},"Item text"),s.a.createElement(p.a,{ref:"item",className:"detailsItem c-background c-border",item:l,onKeyDown:this.onKeyDownItem,selectIndex:t.selectIndex,showPriority:!0,shouldSave:!t.addOnSave,autocompleteMode:"all",tabIndex:A,inItemDetails:!0,allowDrag:!t.addOnSave,pane:r,editable:C})),t.addOnSave&&s.a.createElement("div",{className:"detailsSection flexbox"},s.a.createElement("div",{className:L},"Add to"),s.a.createElement(y.a,{autocompleteMode:"item",height:33,placeholder:"Select item to add to",tabIndex:A++,ref:"addTo",disabled:!a.addingLocal,onKeyDown:this.onKeyDownItem})),w&&s.a.createElement("div",{className:"detailsSection flexbox"},s.a.createElement("div",{className:"c-foreground-faded"},"Note"),s.a.createElement(h.a,{className:"c-border",ref:"noteText",item:l,heightEmpty:34,heightValue:150,onValueSet:this.onNoteValueSet,onKeyDown:this.onKeyDownNote,tabIndex:A++})),s.a.createElement("div",{className:"detailsSection flexbox"},s.a.createElement("div",{className:"c-foreground-faded"},"Options"),s.a.createElement("span",{className:"itemDetailOption c-border pointer",onClick:this.onClickStar},s.a.createElement("span",{className:"c-foreground-super-faded"},"Star:"),s.a.createElement("i",{className:n.default.classNames("starButton icon-star c-foreground-super-faded",{selected:a.isStarred})})),s.a.createElement("span",{className:"itemDetailOption c-border"},s.a.createElement("span",{className:"c-foreground-super-faded"},"Priority:"),s.a.createElement("span",{className:n.default.classNames("searchPriority searchP0",{selected:a.priority===o.a.VMLIFlag.P0}),onClick:this.setPriority.bind(this,o.a.VMLIFlag.P0)}),s.a.createElement("span",{className:n.default.classNames("searchPriority searchP1",{selected:a.priority===o.a.VMLIFlag.P1}),onClick:this.setPriority.bind(this,o.a.VMLIFlag.P1)}),s.a.createElement("span",{className:n.default.classNames("searchPriority searchP2",{selected:a.priority===o.a.VMLIFlag.P2}),onClick:this.setPriority.bind(this,o.a.VMLIFlag.P2)}))),t.addOnSave&&(P||t.options)&&s.a.createElement("div",{className:"detailsSection"},N&&s.a.createElement(g.a,{key:"addLocal",initialChecked:D,ref:"checkAddLocal",onChange:this.onChangeAddLocal,disabled:!N,tabIndex:N?A++:void 0},"Create Moo.do item"),N&&s.a.createElement(g.a,{key:"addToCalendar",initialChecked:M,ref:"checkAddCalendar",onChange:this.onChangeAddToCalendar,disabled:!N,tabIndex:N?A++:void 0},"Add to Google Calendar"),t.options&&t.options.map(function(e){return s.a.createElement(g.a,{key:e.text,initialChecked:e.value,ref:e.text,tabIndex:A++},e.text)})),(N||I)&&this.renderCalendarSelector(),e&&s.a.createElement("div",{className:"detailsSection"},s.a.createElement("div",{className:"c-foreground-faded"},"Subitems"),s.a.createElement("div",{className:"children c-border"},e)),t.addOnSave&&s.a.createElement("div",{className:"bottomRow flexbox"},s.a.createElement(v.a,{onClick:this.onEscape},"CANCEL"),s.a.createElement(v.a,{primary:!0,marginLeft:8,onClick:this.save,tabIndex:A++,ref:"buttonSave"},"SAVE")),s.a.createElement(f,{component:this,target:"item",tabIndex:A++}))}}])&&w(a.prototype,r),C&&w(a,C),t}();t.default=D},482:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(2),s=a.n(r),l=a(70),c=a(13),u=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d={},m=o.a.Modals;d[m.Lightbox]=a(438),d[m.Prompt]=a(439),d[m.EmailReply]=a(440),d[m.Settings]=a(480),d[m.Alert]=a(441),d[m.Billing]=a(442),d[m.Confirm]=a(443),d[m.Options]=a(444),d[m.ExportData]=a(445),d[m.ImportData]=a(446),d[m.Backups]=a(447),d[m.ReportProblem]=a(448),d[m.DeleteAccount]=a(449),d[m.Invoices]=a(450),d[m.ShareDoc]=a(451),d[m.ReportBug]=a(452),d[m.EnterCode]=a(453),d[m.ImportMoodo]=a(454);var p=d,h=c.b.createClass({displayName:"ReactModals",componentDisplay:o.a.ComponentDisplay.Everywhere,getState:function(){return{modals:i.default.menus.modalStack}},onComponentError:function(e,t){i.default.menus.modalStack.clear()},renderModal:function(e){var t=e.id,a=p[t].default;try{n.default.PAssert(851,a,"Could not find modal with id "+t)}catch(o){self.reportError(o)}return s.a.createElement(a,u({key:e.id},e))},render:function(){for(var e=0,t=[],a=0;a<this.state.modals.length;a++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;t.push(this.renderModal(this.state.modals[a]))}var o=n.default.classNames("modals",{none:0===t.length});return s.a.createElement(l.CSSTransitionGroup,{className:o,transitionName:"modalTransition",transitionEnterTimeout:400,transitionLeaveTimeout:300},t)}});t.default=h},483:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),i=a(4),r=a(2),s=a.n(r),l=a(70),c=a(13),u={ReactAutocomplete:a(437),ReactContextMenuOverviewOptions:a(455),ReactContextMenuGmailSort:a(456),ReactContextMenuSearch:a(457),ReactContextMenuNameBoard:a(458),ReactContextMenuSelectGmailAccount:a(459),ReactContextMenuAddItem:a(460),ReactContextMenuCalendars:a(461),ReactContextMenuInsertLink:a(462),ReactContextMenuContactDetails:a(463),ReactNotePopup:a(464),ReactContextMenuDropBucket:a(465),ReactItemDetailsPopup:a(481),ReactContextMenuEmailDetails:a(466),ReactContextMenuItem:a(467),ReactContextMenuOnlineStatus:a(468),ReactContextMenuPanes:a(469),ReactContextMenuAuthorize:a(470),ReactContextMenuHelp:a(471),ReactContextMenuShare:a(472),ReactContextMenuOptions:a(473),ReactContextMenuAddPane:a(474),ReactContextMenuUpsell:a(475),ReactContextMenuDropZone:a(476),ReactContextMenuDate:a(477),ReactContextMenuDocumentPassword:a(478)},d=c.b.createClass({displayName:"ReactContextMenus",componentDisplay:o.a.ComponentDisplay.Everywhere,getState:function(){return{contextMenus:i.default.menus.contextMenuStack,noFade:i.default.menus.contextMenuNoFade,isDragging:i.default.DragDrop.isVisible}},onComponentError:function(e,t){i.default.menus.contextMenuStack.clear()},onClickBackground:function(e){var t=i.default.menus.getTopContextMenu();t&&i.default.menus.closeContextMenu(t),n.default.preventDefault(e),n.default.stopPropagation(e)},render:function(){for(var e=0,t=this.state,a=[],o=0;o<t.contextMenus.length;o++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var i=t.contextMenus[o];if(i.noBackdrop||a.push(s.a.createElement("div",{key:"backdrop_"+o,className:"contextMenusBackdrop",onMouseDown:this.onClickBackground})),i.fn)a.push(i.fn(i));else if(i.componentName){i.key=i.key||i.componentName,i.id=i.id||i.key;var r=u[i.componentName].default;a.push(s.a.createElement(r,i))}}var c=n.default.classNames("contextMenusReact",{open:a.length>0},{takeClick:a.length>0&&!i.noBackdrop},{none:0===a.length},{hideBackground:t.noFade});return s.a.createElement(l.CSSTransitionGroup,{className:c,transitionName:"contextMenuAnim",transitionEnterTimeout:150,transitionLeaveTimeout:200},a)}});t.default=d}}]);

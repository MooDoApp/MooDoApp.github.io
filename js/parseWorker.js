function dateWrapper(){this.dateLibLoaded=!0,function(){var t=Date,e=Date.CultureStrings?Date.CultureStrings.lang:null,n={},r={getFromKey:function(t,e){var n;return n=Date.CultureStrings&&Date.CultureStrings[e]&&Date.CultureStrings[e][t]?Date.CultureStrings[e][t]:r.buildFromDefault(t),"/"===t.charAt(0)&&(n=r.buildFromRegex(t,e)),n},getFromObjectValues:function(t,e){var n,s={};for(n in t)t.hasOwnProperty(n)&&(s[n]=r.getFromKey(t[n],e));return s},getFromObjectKeys:function(t,e){var n,s={};for(n in t)t.hasOwnProperty(n)&&(s[r.getFromKey(n,e)]=t[n]);return s},getFromArray:function(t,e){for(var n=[],s=0;s<t.length;s++)s in t&&(n[s]=r.getFromKey(t[s],e));return n},buildFromDefault:function(t){var e,n,r,s;switch(t){case"name":e="en-US";break;case"englishName":e="English (United States)";break;case"nativeName":e="English (United States)";break;case"twoDigitYearMax":e=2049;break;case"firstDayOfWeek":e=0;break;default:e=t,r=t.split("_"),n=r.length,n>1&&"/"!==t.charAt(0)&&(s=r[n-1].toLowerCase(),("initial"===s||"abbr"===s)&&(e=r[0]))}return e},buildFromRegex:function(t,e){var n;return n=Date.CultureStrings&&Date.CultureStrings[e]&&Date.CultureStrings[e][t]?new RegExp(Date.CultureStrings[e][t],"i"):new RegExp(t.replace(new RegExp("/","g"),""),"i")}},s=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},a=function(t,s){var a=s?s:e;return n[t]=t,"object"==typeof t?t instanceof Array?r.getFromArray(t,a):r.getFromObjectKeys(t,a):r.getFromKey(t,a)},i={buildFromMethodHash:function(t){var e;for(e in t)t.hasOwnProperty(e)&&(t[e]=i[t[e]]());return t},timeZoneDST:function(){var t={CHADT:"+1345",NZDT:"+1300",AEDT:"+1100",ACDT:"+1030",AZST:"+0500",IRDT:"+0430",EEST:"+0300",CEST:"+0200",BST:"+0100",PMDT:"-0200",ADT:"-0300",NDT:"-0230",EDT:"-0400",CDT:"-0500",MDT:"-0600",PDT:"-0700",AKDT:"-0800",HADT:"-0900"};return a(t)},timeZoneStandard:function(){var t={LINT:"+1400",TOT:"+1300",CHAST:"+1245",NZST:"+1200",NFT:"+1130",SBT:"+1100",AEST:"+1000",ACST:"+0930",JST:"+0900",CWST:"+0845",CT:"+0800",ICT:"+0700",MMT:"+0630",BST:"+0600",NPT:"+0545",IST:"+0530",PKT:"+0500",AFT:"+0430",MSK:"+0400",IRST:"+0330",FET:"+0300",EET:"+0200",CET:"+0100",GMT:"+0000",UTC:"+0000",CVT:"-0100",GST:"-0200",BRT:"-0300",NST:"-0330",AST:"-0400",EST:"-0500",CST:"-0600",MST:"-0700",PST:"-0800",AKST:"-0900",MIT:"-0930",HST:"-1000",SST:"-1100",BIT:"-1200"};return a(t)},timeZones:function(t){var e;t.timezones=[];for(e in t.abbreviatedTimeZoneStandard)t.abbreviatedTimeZoneStandard.hasOwnProperty(e)&&t.timezones.push({name:e,offset:t.abbreviatedTimeZoneStandard[e]});for(e in t.abbreviatedTimeZoneDST)t.abbreviatedTimeZoneDST.hasOwnProperty(e)&&t.timezones.push({name:e,offset:t.abbreviatedTimeZoneDST[e],dst:!0});return t.timezones},days:function(){return a(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"])},dayAbbr:function(){return a(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"])},dayShortNames:function(){return a(["Su","Mo","Tu","We","Th","Fr","Sa"])},dayFirstLetters:function(){return a(["S_Sun_Initial","M_Mon_Initial","T_Tues_Initial","W_Wed_Initial","T_Thu_Initial","F_Fri_Initial","S_Sat_Initial"])},months:function(){return a(["January","February","March","April","May","June","July","August","September","October","November","December"])},monthAbbr:function(){return a(["Jan_Abbr","Feb_Abbr","Mar_Abbr","Apr_Abbr","May_Abbr","Jun_Abbr","Jul_Abbr","Aug_Abbr","Sep_Abbr","Oct_Abbr","Nov_Abbr","Dec_Abbr"])},formatPatterns:function(){return r.getFromObjectValues({shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss",monthDay:"MMMM dd",monthDayShortTime:"MM/dd",monthDayYear:"MM/dd/yy",yearMonth:"MMMM, yyyy"},Date.i18n.currentLanguage())},regex:function(){return r.getFromObjectValues({thisMorning:"/(this )(morn(ing)?)\\b/",thisEvening:"/(this )(even(ing)?)\\b/",jan:"/jan(uary)?/",feb:"/feb(ruary)?/",mar:"/mar(ch)?/",apr:"/apr(il)?/",may:"/may/",jun:"/jun(e)?/",jul:"/jul(y)?/",aug:"/aug(ust)?/",sep:"/sep(t(ember)?)?/",oct:"/oct(ober)?/",nov:"/nov(ember)?/",dec:"/dec(ember)?/",sun:"/^sun(day)?/",mon:"/^mon(day)?/",tue:"/^tue(s(day)?)?/",wed:"/^wed(nesday)?/",thu:"/^thu(rsday)?/",fri:"/^fri(day)?/",sat:"/^sat(urday)?/",future:"/^next/",past:"/^last|past|prev(ious)?/",yesterday:"/^yesterday/",today:"/^today/",tomorrow:"/^tom(orrow)?/",soon:"/^soon/",later:"/^later/",someday:"/^someday/",now:"/^now/",shortMeridian:"/^(a|p)/",longMeridian:"/^(a\\.?m?\\.?|p\\.?m?\\.?)/",timezone:"/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\\s*(\\+|\\-)\\s*\\d\\d\\d\\d?)|gmt|utc)/",ordinalSuffix:"/^\\s*(st|nd|rd|th)/",timeContext:"/^\\s*(\\:|a(?!u|p)|p)/"},Date.i18n.currentLanguage())}},o=function(){var t=r.getFromObjectValues({name:"name",englishName:"englishName",nativeName:"nativeName",amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:"firstDayOfWeek",twoDigitYearMax:"twoDigitYearMax",dateElementOrder:"mdy"},Date.i18n.currentLanguage()),e=i.buildFromMethodHash({dayNames:"days",abbreviatedDayNames:"dayAbbr",shortestDayNames:"dayShortNames",firstLetterDayNames:"dayFirstLetters",monthNames:"months",abbreviatedMonthNames:"monthAbbr",formatPatterns:"formatPatterns",regexPatterns:"regex",abbreviatedTimeZoneDST:"timeZoneDST",abbreviatedTimeZoneStandard:"timeZoneStandard"});return s(t,e),i.timeZones(t),t};t.i18n={__:function(t,e){return a(t,e)},currentLanguage:function(){return e||"en-US"},setLanguage:function(n,r,s){if(r||"en-US"===n||Date.CultureStrings&&Date.CultureStrings[n])e=n,Date.CultureStrings=Date.CultureStrings||{},Date.CultureStrings.lang=n,Date.CultureInfo=new o;else if(!Date.CultureStrings||!Date.CultureStrings[n])return!1;t.Parsing.Normalizer.buildReplaceData(),t.Grammar&&t.Grammar.buildGrammarFormats(),s&&s()},getLoggedKeys:function(){return n},updateCultureInfo:function(){Date.CultureInfo=new o}},t.i18n.updateCultureInfo()}(),function(){var t=Date,e=t.prototype,n=function(t,e){return e||(e=2),("000"+t).slice(-1*e)};t.console="undefined"!=typeof window&&"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log?console:{log:function(){},error:function(){}},t.Config=t.Config||{},t.initOverloads=function(){t.now?t._now||(t._now=t.now):t._now=function(){return(new Date).getTime()},t.now=function(e){return e?t.present():t._now()},e.toISOString||(e.toISOString=function(){return this.getUTCFullYear()+"-"+n(this.getUTCMonth()+1)+"-"+n(this.getUTCDate())+"T"+n(this.getUTCHours())+":"+n(this.getUTCMinutes())+":"+n(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}),void 0===e._toString&&(e._toString=e.toString)},t.initOverloads(),t.today=function(){return(new Date).clearTime()},t.present=function(){return new Date},t.compare=function(t,e){if(isNaN(t)||isNaN(e))throw new Error(t+" - "+e);if(t instanceof Date&&e instanceof Date)return e>t?-1:t>e?1:0;throw new TypeError(t+" - "+e)},t.equals=function(t,e){return 0===t.compareTo(e)},t.getDayName=function(t){return Date.CultureInfo.dayNames[t]},t.getDayNumberFromName=function(t){for(var e=Date.CultureInfo.dayNames,n=Date.CultureInfo.abbreviatedDayNames,r=Date.CultureInfo.shortestDayNames,s=t.toLowerCase(),a=0;a<e.length;a++)if(e[a].toLowerCase()===s||n[a].toLowerCase()===s||r[a].toLowerCase()===s)return a;return-1},t.getMonthNumberFromName=function(t){for(var e=Date.CultureInfo.monthNames,n=Date.CultureInfo.abbreviatedMonthNames,r=t.toLowerCase(),s=0;s<e.length;s++)if(e[s].toLowerCase()===r||n[s].toLowerCase()===r)return s;return-1},t.getMonthName=function(t){return Date.CultureInfo.monthNames[t]},t.isLeapYear=function(t){return t%4===0&&t%100!==0||t%400===0},t.getDaysInMonth=function(e,n){return!n&&t.validateMonth(e)&&(n=e,e=Date.today().getFullYear()),[31,t.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][n]},e.getDaysInMonth=function(){return t.getDaysInMonth(this.getFullYear(),this.getMonth())},t.getTimezoneAbbreviation=function(t,e){var n,r=e?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard;for(n in r)if(r.hasOwnProperty(n)&&r[n]===t)return n;return null},t.getTimezoneOffset=function(t,e){var n,r=[],s=Date.CultureInfo.timezones;for(t||(t=(new Date).getTimezone()),n=0;n<s.length;n++)s[n].name===t.toUpperCase()&&r.push(n);if(!s[r[0]])return null;if(1===r.length||!e)return s[r[0]].offset;for(n=0;n<r.length;n++)if(s[r[n]].dst)return s[r[n]].offset},t.getQuarter=function(t){t=t||new Date;var e=[1,2,3,4];return e[Math.floor(t.getMonth()/3)]},t.getDaysLeftInQuarter=function(t){t=t||new Date;var e=new Date(t);return e.setMonth(e.getMonth()+3-e.getMonth()%3,0),Math.floor((e-t)/864e5)},e.ensureTimeOfDay=function(){0===this.getMilliseconds()&&this.setTime(this.getTime()+1)};var r=function(t,e,n,r){if(r=r?r:"Object","undefined"==typeof t)return!1;if("number"!=typeof t)throw new TypeError(t+" is not a Number.");return e>t||t>n?!1:!0};t.validateMillisecond=function(t){return r(t,0,999,"millisecond")},t.validateSecond=function(t){return r(t,0,59,"second")},t.validateMinute=function(t){return r(t,0,59,"minute")},t.validateHour=function(t){return r(t,0,23,"hour")},t.validateDay=function(e,n,s){return void 0===n||null===n||void 0===s||null===s?!1:r(e,1,t.getDaysInMonth(n,s),"day")},t.validateWeek=function(t){return r(t,0,53,"week")},t.validateMonth=function(t){return r(t,0,11,"month")},t.validateYear=function(t){return r(t,-271822,275760,"year")},t.validateTimezone=function(t){var e={ACDT:1,ACST:1,ACT:1,ADT:1,AEDT:1,AEST:1,AFT:1,AKDT:1,AKST:1,AMST:1,AMT:1,ART:1,AST:1,AWDT:1,AWST:1,AZOST:1,AZT:1,BDT:1,BIOT:1,BIT:1,BOT:1,BRT:1,BST:1,BTT:1,CAT:1,CCT:1,CDT:1,CEDT:1,CEST:1,CET:1,CHADT:1,CHAST:1,CHOT:1,ChST:1,CHUT:1,CIST:1,CIT:1,CKT:1,CLST:1,CLT:1,COST:1,COT:1,CST:1,CT:1,CVT:1,CWST:1,CXT:1,DAVT:1,DDUT:1,DFT:1,EASST:1,EAST:1,EAT:1,ECT:1,EDT:1,EEDT:1,EEST:1,EET:1,EGST:1,EGT:1,EIT:1,EST:1,FET:1,FJT:1,FKST:1,FKT:1,FNT:1,GALT:1,GAMT:1,GET:1,GFT:1,GILT:1,GIT:1,GMT:1,GST:1,GYT:1,HADT:1,HAEC:1,HAST:1,HKT:1,HMT:1,HOVT:1,HST:1,ICT:1,IDT:1,IOT:1,IRDT:1,IRKT:1,IRST:1,IST:1,JST:1,KGT:1,KOST:1,KRAT:1,KST:1,LHST:1,LINT:1,MAGT:1,MART:1,MAWT:1,MDT:1,MET:1,MEST:1,MHT:1,MIST:1,MIT:1,MMT:1,MSK:1,MST:1,MUT:1,MVT:1,MYT:1,NCT:1,NDT:1,NFT:1,NPT:1,NST:1,NT:1,NUT:1,NZDT:1,NZST:1,OMST:1,ORAT:1,PDT:1,PET:1,PETT:1,PGT:1,PHOT:1,PHT:1,PKT:1,PMDT:1,PMST:1,PONT:1,PST:1,PYST:1,PYT:1,RET:1,ROTT:1,SAKT:1,SAMT:1,SAST:1,SBT:1,SCT:1,SGT:1,SLST:1,SRT:1,SST:1,SYOT:1,TAHT:1,THA:1,TFT:1,TJT:1,TKT:1,TLT:1,TMT:1,TOT:1,TVT:1,UCT:1,ULAT:1,UTC:1,UYST:1,UYT:1,UZT:1,VET:1,VLAT:1,VOLT:1,VOST:1,VUT:1,WAKT:1,WAST:1,WAT:1,WEDT:1,WEST:1,WET:1,WST:1,YAKT:1,YEKT:1,Z:1};return 1===e[t]},t.validateTimezoneOffset=function(t){return t>-841&&721>t},t.validateSetExplicitTime=function(){return!0}}(),function(){var t=Date,e=t.prototype,n=function(t,e){return e||(e=2),("000"+t).slice(-1*e)},r=function(e){var n,r,s={},a=this;r=function(n,r,s){if("day"===n){var i=void 0!==e.month?e.month:a.getMonth(),o=void 0!==e.year?e.year:a.getFullYear();return t[r](s,o,i)}return t[r](s)};for(n in e)if(hasOwnProperty.call(e,n)){var i="validate"+n.charAt(0).toUpperCase()+n.slice(1);t[i]&&null!==e[n]&&r(n,i,e[n])&&(s[n]=e[n])}return s};e.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},e.setTimeToNow=function(){var t=new Date;return this.setHours(t.getHours()),this.setMinutes(t.getMinutes()),this.setSeconds(t.getSeconds()),this.setMilliseconds(t.getMilliseconds()),this},e.clone=function(){return new Date(this.getTime())},e.compareTo=function(t){return Date.compare(this,t)},e.equals=function(t){return Date.equals(this,void 0!==t?t:new Date)},e.between=function(t,e){return this.getTime()>=t.getTime()&&this.getTime()<=e.getTime()},e.isAfter=function(t){return 1===this.compareTo(t||new Date)},e.isBefore=function(t){return-1===this.compareTo(t||new Date)},e.isToday=e.isSameDay=function(t){return this.clone().clearTime().equals((t||new Date).clone().clearTime())},e.addMilliseconds=function(t){return t?(this.setTime(this.getTime()+1*t),this):this},e.addSeconds=function(t){return t?this.addMilliseconds(1e3*t):this},e.addMinutes=function(t){return t?this.addMilliseconds(6e4*t):this},e.addHours=function(t){return t?this.addMilliseconds(36e5*t):this},e.addDays=function(t){return t?(this.setDate(this.getDate()+1*t),this):this},e.addWeekdays=function(t){if(!t)return this;var e=this.getDay(),n=Math.ceil(Math.abs(t)/7);if((0===e||6===e)&&t>0&&(this.next().monday(),this.addDays(-1),e=this.getDay()),0>t){for(;0>t;)this.addDays(-1),e=this.getDay(),0!==e&&6!==e&&t++;return this}return(t>5||t>=6-e)&&(t+=2*n),this.addDays(t)},e.addWeeks=function(t){return t?this.addDays(7*t):this},e.addMonths=function(e){if(!e)return this;var n=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+1*e),this.setDate(Math.min(n,t.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},e.addQuarters=function(t){return t?this.addMonths(3*t):this},e.addYears=function(t){return t?this.addMonths(12*t):this},e.add=function(t){if("number"==typeof t)return this._orient=t,this;var e=t;return e.day&&e.day-this.getDate()!==0&&this.setDate(e.day),e.milliseconds&&this.addMilliseconds(e.milliseconds),e.seconds&&this.addSeconds(e.seconds),e.minutes&&this.addMinutes(e.minutes),e.hours&&this.addHours(e.hours),e.weeks&&this.addWeeks(e.weeks),e.months&&this.addMonths(e.months),e.years&&this.addYears(e.years),e.days&&this.addDays(e.days),e.setExplicitTime&&this.ensureTimeOfDay(),this},e.getWeek=function(t){var e,n=new Date(this.valueOf());t?(n.addMinutes(n.getTimezoneOffset()),e=n.clone()):e=this;var r=(e.getDay()+6)%7;n.setDate(n.getDate()-r+3);var s=n.valueOf();return n.setMonth(0,1),4!==n.getDay()&&n.setMonth(0,1+(4-n.getDay()+7)%7),1+Math.ceil((s-n)/6048e5)},e.getISOWeek=function(){return n(this.getWeek(!0))},e.setWeek=function(t){return t-this.getWeek()===0?1!==this.getDay()?this.moveToDayOfWeek(1,this.getDay()>1?-1:1):this:this.moveToDayOfWeek(1,this.getDay()>1?-1:1).addWeeks(t-this.getWeek())},e.setQuarter=function(t){var e=Math.abs(3*(t-1)+1);return this.setMonth(e,1)},e.getQuarter=function(){return Date.getQuarter(this)},e.getDaysLeftInQuarter=function(){return Date.getDaysLeftInQuarter(this)},e.moveToNthOccurrence=function(t,e){if("Weekday"===t){if(e>0)this.moveToFirstDayOfMonth(),this.is().weekday()&&(e-=1);else{if(!(0>e))return this;this.moveToLastDayOfMonth(),this.is().weekday()&&(e+=1)}return this.addWeekdays(e)}var n=0;if(e>0)n=e-1;else if(-1===e)return this.moveToLastDayOfMonth(),this.getDay()!==t&&this.moveToDayOfWeek(t,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(t,1).addWeeks(n)};var s=function(t,e,n){return function(r,s){var a=(r-this[t]()+n*(s||1))%n;return this[e](0===a?a+=n*(s||1):a)}};e.moveToDayOfWeek=s("getDay","addDays",7),e.moveToMonth=s("getMonth","addMonths",12),e.getOrdinate=function(){var t=this.getDate();return a(t)},e.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},e.getTimezone=function(){return t.getTimezoneAbbreviation(this.getUTCOffset(),this.isDaylightSavingTime())},e.setTimezoneOffset=function(t){var e=this.getTimezoneOffset(),n=-6*Number(t)/10;return n||0===n?this.addMinutes(n-e):this},e.setTimezone=function(e){return this.setTimezoneOffset(t.getTimezoneOffset(e))},e.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},e.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==this.getTimezoneOffset()},e.getUTCOffset=function(t){var e,n=-10*(t||this.getTimezoneOffset())/6;return 0>n?(e=(n-1e4).toString(),e.charAt(0)+e.substr(2)):(e=(n+1e4).toString(),"+"+e.substr(1))},e.getElapsed=function(t){return(t||new Date)-this},e.set=function(t){t=r.call(this,t);var e;for(e in t)if(hasOwnProperty.call(t,e)){var n,s,a=e.charAt(0).toUpperCase()+e.slice(1);"week"!==e&&"month"!==e&&"timezone"!==e&&"timezoneOffset"!==e&&(a+="s"),n="add"+a,s="get"+a,"month"===e?n+="s":"year"===e&&(s="getFullYear"),"day"!==e&&"timezone"!==e&&"timezoneOffset"!==e&&"week"!==e&&"hour"!==e&&"setExplicitTime"!==e?this[n](t[e]-this[s]()):("timezone"===e||"timezoneOffset"===e||"week"===e||"hour"===e)&&this["set"+a](t[e])}return t.day&&this.addDays(t.day-this.getDate()),this},e.moveToFirstDayOfMonth=function(){return this.set({day:1})},e.moveToLastDayOfMonth=function(){return this.set({day:t.getDaysInMonth(this.getFullYear(),this.getMonth())})};var a=function(t){switch(1*t){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},i=function(t){var e,n=Date.CultureInfo.formatPatterns;switch(t){case"d":return this.toString(n.shortDate);case"D":return this.toString(n.longDate);case"F":return this.toString(n.fullDateTime);case"m":return this.toString(n.monthDay);case"r":case"R":return e=this.clone().addMinutes(this.getTimezoneOffset()),e.toString(n.rfc1123)+" GMT";case"s":return this.toString(n.sortableDateTime);case"t":return this.toString(n.shortTime);case"T":return this.toString(n.longTime);case"u":return e=this.clone().addMinutes(this.getTimezoneOffset()),e.toString(n.universalSortableDateTime);case"y":return this.toString(n.yearMonth);default:return!1}},o=function(e){return function(r){if("\\"===r.charAt(0))return r.replace("\\","");switch(r){case"hh":return n(e.getHours()<13?0===e.getHours()?12:e.getHours():e.getHours()-12);case"h":return e.getHours()<13?0===e.getHours()?12:e.getHours():e.getHours()-12;case"HH":return n(e.getHours());case"H":return e.getHours();case"mm":return n(e.getMinutes());case"m":return e.getMinutes();case"ss":return n(e.getSeconds());case"s":return e.getSeconds();case"yyyy":return n(e.getFullYear(),4);case"yy":return n(e.getFullYear());case"y":return e.getFullYear();case"E":case"dddd":return Date.CultureInfo.dayNames[e.getDay()];case"ddd":return Date.CultureInfo.abbreviatedDayNames[e.getDay()];case"dd":return n(e.getDate());case"d":return e.getDate();case"MMMM":return Date.CultureInfo.monthNames[e.getMonth()];case"MMM":return Date.CultureInfo.abbreviatedMonthNames[e.getMonth()];case"MM":return n(e.getMonth()+1);case"M":return e.getMonth()+1;case"t":return e.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return e.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"S":return a(e.getDate());case"W":return e.getWeek();case"WW":return e.getISOWeek();case"Q":return"Q"+e.getQuarter();case"q":return String(e.getQuarter());case"z":return e.getTimezone();case"Z":case"X":return Date.getTimezoneOffset(e.getTimezone());case"ZZ":return-60*e.getTimezoneOffset();case"u":return e.getDay();case"L":return t.isLeapYear(e.getFullYear())?1:0;case"B":return"@"+(e.getUTCSeconds()+60*e.getUTCMinutes()+3600*(e.getUTCHours()+1))/86.4;default:return r}}};e.toString=function(t,e){if(!e&&t&&1===t.length&&(output=i.call(this,t)))return output;var n=o(this);return t?t.replace(/((\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S|q|Q|WW?W?W?)(?![^\[]*\]))/g,n).replace(/\[|\]/g,""):this._toString()}}(),function(){var t=Date,e=t.prototype,n=Number.prototype;e._orient=1,e._nth=null,e._is=!1,e._same=!1,e._isSecond=!1,n._dateElement="days",e.next=function(){return this._move=!0,this._orient=1,this},t.next=function(){return t.today().next()},e.last=e.prev=e.previous=function(){return this._move=!0,this._orient=-1,this},t.last=t.prev=t.previous=function(){return t.today().last()},e.is=function(){return this._is=!0,this},e.same=function(){return this._same=!0,this._isSecond=!1,this},e.today=function(){return this.same().day()},e.weekday=function(){return this._nth?h("Weekday").call(this):this._move?this.addWeekdays(this._orient):this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},e.weekend=function(){return this._is?(this._is=!1,this.is().sat()||this.is().sun()):!1},e.at=function(e){return"string"==typeof e?t.parse(this.toString("d")+" "+e):this.set(e)},n.fromNow=n.after=function(t){var e={};return e[this._dateElement]=this,(t?t.clone():new Date).add(e)},n.ago=n.before=function(t){var e={},n="s"!==this._dateElement[this._dateElement.length-1]?this._dateElement+"s":this._dateElement;return e[n]=-1*this,(t?t.clone():new Date).add(e)};var r,s="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),a="january february march april may june july august september october november december".split(/\s/),i=[],o=[],u="final first second third fourth fifth".split(/\s/);e.toObject=function(){for(var t={},e=0;e<i.length;e++)this["get"+o[e]]&&(t[i[e].toLowerCase()]=this["get"+o[e]]());return t},t.fromObject=function(t){return t.week=null,Date.today().set(t)};var h=function(e){return function(){if(this._is)return this._is=!1,this.getDay()===e;if(this._move&&(this._move=null),null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var n=this._nth;this._nth=null;var r=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(e,n),this>r)throw new RangeError(t.getDayName(e)+" does not occur "+n+" times in the month of "+t.getMonthName(r.getMonth())+" "+r.getFullYear()+".");return this}return this.moveToDayOfWeek(e,this._orient)}},c=function(e){return function(){var n=t.today(),r=e-n.getDay();return(0===e&&1===Date.CultureInfo.firstDayOfWeek&&0!==n.getDay()||0>r)&&(r+=7),n.addDays(r)}},l=function(t){return function(){return this._is?(this._is=!1,this.getMonth()===t):this.moveToMonth(t,this._orient)}},d=function(e){return function(){return t.today().set({month:e,day:1})}},f=function(n,r,s){for(var a=0;a<n.length;a++)t[n[a].toUpperCase()]=t[n[a].toUpperCase().substring(0,3)]=a,t[n[a]]=t[n[a].substring(0,3)]=r(a),e[n[a]]=e[n[a].substring(0,3)]=s(a)};f(s,c,h),f(a,d,l);for(var g=function(t){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var e=this.toObject(),n=(arguments[0]||new Date).toObject(),r="",s=t.toLowerCase();s="s"===s[s.length-1]?s.substring(0,s.length-1):s;for(var a=i.length-1;a>-1;a--){if(r=i[a].toLowerCase(),e[r]!==n[r])return!1;if(s===r)break}return!0}return"s"!==t.substring(t.length-1)&&(t+="s"),this._move&&(this._move=null),this["add"+t](this._orient)}},m=function(t){return function(){return this._dateElement=t,this}},y=0;y<i.length;y++)r=i[y].toLowerCase(),"weekday"!==r&&(e[r]=e[r+"s"]=g(i[y]),n[r]=n[r+"s"]=m(r+"s"));e._ss=g("Second");for(var p=function(t){return function(e){return this._same?this._ss(arguments[0]):e||0===e?this.moveToNthOccurrence(e,t):(this._nth=t,2!==t||void 0!==e&&null!==e?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},D=0;D<u.length;D++)e[u[D]]=p(0===D?-1:D)}(),function(){Date.Parsing={Exception:function(t){this.message="Parse error at '"+t.substring(0,10)+" ...'"}};var t=Date.Parsing,e={standard:[0,31,59,90,120,151,181,212,243,273,304,334],leap:[0,31,60,91,121,152,182,213,244,274,305,335]};t.isLeapYear=function(t){return t%4===0&&t%100!==0||t%400===0};var n={multiReplace:function(t,e){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r;"function"==typeof e[n]||(r=e[n]instanceof RegExp?e[n]:new RegExp(e[n],"g")),t=t.replace(r,n)}return t},getDayOfYearFromWeek:function(t){var e,n,r;return t.weekDay=t.weekDay||0===t.weekDay?t.weekDay:1,e=new Date(t.year,0,4),n=0===e.getDay()?7:e.getDay(),r=n+3,t.dayOfYear=7*t.week+(0===t.weekDay?7:t.weekDay)-r,t},getDayOfYear:function(t,e){t.dayOfYear||(t=n.getDayOfYearFromWeek(t));for(var r=0;r<=e.length;r++){if(t.dayOfYear<e[r]||r===e.length){t.day=t.day?t.day:t.dayOfYear-e[r-1];break}t.month=r}return t},adjustForTimeZone:function(t,e){var n;return"Z"===t.zone.toUpperCase()||0===t.zone_hours&&0===t.zone_minutes?n=-e.getTimezoneOffset():(n=60*t.zone_hours+(t.zone_minutes||0),"+"===t.zone_sign&&(n*=-1),n-=e.getTimezoneOffset()),e.setMinutes(e.getMinutes()+n),e},setDefaults:function(t){return t.year=t.year||Date.today().getFullYear(),t.hours=t.hours||0,t.minutes=t.minutes||0,t.seconds=t.seconds||0,t.milliseconds=t.milliseconds||0,(t.month||!t.week&&!t.dayOfYear)&&(t.month=t.month||0,t.day=t.day||1),t},dataNum:function(t,e,n,r){var s=1*t;return e?r?t?1*e(t):t:t?e(s):t:n?t&&"undefined"!=typeof t?s:t:t?s:t},timeDataProcess:function(t){var e={};for(var r in t.data)t.data.hasOwnProperty(r)&&(e[r]=t.ignore[r]?t.data[r]:n.dataNum(t.data[r],t.mods[r],t.explict[r],t.postProcess[r]));return t.data.secmins&&(t.data.secmins=60*t.data.secmins.replace(",","."),e.minutes?e.seconds||(e.seconds=t.data.secmins):e.minutes=t.data.secmins,delete t.secmins),e},buildTimeObjectFromData:function(t){var e=n.timeDataProcess({data:{year:t[1],month:t[5],day:t[7],week:t[8],dayOfYear:t[10],hours:t[15],zone_hours:t[23],zone_minutes:t[24],zone:t[21],zone_sign:t[22],weekDay:t[9],minutes:t[16],seconds:t[19],milliseconds:t[20],secmins:t[18]},mods:{month:function(t){return t-1},weekDay:function(t){return t=Math.abs(t),7===t?0:t},minutes:function(t){return t.replace(":","")},seconds:function(t){return Math.floor(1*t.replace(":","").replace(",","."))},milliseconds:function(t){return 1e3*t.replace(",",".")}},postProcess:{minutes:!0,seconds:!0,milliseconds:!0},explict:{zone_hours:!0,zone_minutes:!0},ignore:{zone:!0,zone_sign:!0,secmins:!0}});return e},addToHash:function(t,e,n){e=e,n=n;for(var r=e.length,s=0;r>s;s++)t[e[s]]=n[s];return t},combineRegex:function(t,e){return new RegExp("(("+t.source+")\\s("+e.source+"))")},getDateNthString:function(t,e,n){return t?Date.today().addDays(n).toString("d"):e?Date.today().last()[n]().toString("d"):void 0},buildRegexData:function(t){for(var e=[],n=t.length,r=0;n>r;r++)e.push(Array.isArray(t[r])?this.combineRegex(t[r][0],t[r][1]):t[r]);return e}};t.processTimeObject=function(r){var s,a;return n.setDefaults(r),a=t.isLeapYear(r.year)?e.leap:e.standard,r.month||!r.week&&!r.dayOfYear?r.dayOfYear=a[r.month]+r.day:n.getDayOfYear(r,a),s=new Date(r.year,r.month,r.day,r.hours,r.minutes,r.seconds,r.milliseconds),r.zone&&n.adjustForTimeZone(r,s),s},t.Numeric={isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},regex:/\b([0-1]?[0-9])([0-3]?[0-9])([0-2]?[0-9]?[0-9][0-9])\b/i,parse:function(e){var n,r,s={},a=Date.CultureInfo.dateElementOrder.split("");if(!this.isNumeric(e)||"+"===e[0]&&"-"===e[0])return null;if(e.length<5&&e.indexOf(".")<0&&e.indexOf("/")<0)return s.year=e,t.processTimeObject(s);if(n=e.match(this.regex),!n||!n.length)return null;for(r=0;r<a.length;r++)switch(a[r]){case"d":s.day=n[r+1];break;case"m":s.month=n[r+1]-1;break;case"y":s.year=n[r+1]}return t.processTimeObject(s)}},t.Normalizer={regexData:function(){var t=Date.CultureInfo.regexPatterns;return n.buildRegexData([t.tomorrow,t.yesterday,[t.past,t.mon],[t.past,t.tue],[t.past,t.wed],[t.past,t.thu],[t.past,t.fri],[t.past,t.sat],[t.past,t.sun]])},basicReplaceHash:function(){var t=Date.CultureInfo.regexPatterns;return{January:t.jan,February:t.feb,March:t.mar,April:t.apr,May:t.may,June:t.jun,July:t.jul,August:t.aug,September:t.sep,October:t.oct,November:t.nov,December:t.dec,"":/\bat\b/gi," ":/\s{2,}/,"9am":t.thisMorning,"7pm":t.thisEvening}},keys:function(){return[n.getDateNthString(!0,!1,1),n.getDateNthString(!0,!1,-1),n.getDateNthString(!1,!0,"monday"),n.getDateNthString(!1,!0,"tuesday"),n.getDateNthString(!1,!0,"wednesday"),n.getDateNthString(!1,!0,"thursday"),n.getDateNthString(!1,!0,"friday"),n.getDateNthString(!1,!0,"saturday"),n.getDateNthString(!1,!0,"sunday")]},buildRegexFunctions:function(){var t=Date.CultureInfo.regexPatterns,e=Date.i18n.__,n=new RegExp("(\\b\\d\\d?("+e("AM")+"|"+e("PM")+")? )("+t.tomorrow.source.slice(1)+")","i"),r=new RegExp(t.today.source+"(?!\\s*([+-]))\\b");this.replaceFuncs=[[r,function(t){return t.length>1?Date.today().toString("d"):t}],[n,function(t,e){var n=Date.today().addDays(1).toString("d");return n+" "+e}]]},buildReplaceData:function(){this.buildRegexFunctions(),this.replaceHash=n.addToHash(this.basicReplaceHash(),this.keys(),this.regexData())},stringReplaceFuncs:function(t){for(var e=0;e<this.replaceFuncs.length;e++)t=t.replace(this.replaceFuncs[e][0],this.replaceFuncs[e][1]);return t},parse:function(e){e=this.stringReplaceFuncs(e),e=n.multiReplace(e,this.replaceHash);try{var r=e.split(/([\s\-\.\,\/\x27]+)/);3===r.length&&t.Numeric.isNumeric(r[0])&&t.Numeric.isNumeric(r[2])&&r[2].length>=4&&"d"===Date.CultureInfo.dateElementOrder[0]&&(e="1/"+r[0]+"/"+r[2])}catch(s){}return e}},t.Normalizer.buildReplaceData()}(),function(){for(var t=Date.Parsing,e=t.Operators={rtoken:function(e){return function(n){var r=n.match(e);if(r)return[r[0],n.substring(r[0].length)];throw new t.Exception(n)}},token:function(){return function(t){return e.rtoken(new RegExp("^\\s*"+t+"\\s*"))(t)}},stoken:function(t){return e.rtoken(new RegExp("^"+t))},until:function(t){return function(e){for(var n=[],r=null;e.length;){try{r=t.call(this,e)}catch(s){n.push(r[0]),e=r[1];continue}break}return[n,e]}},many:function(t){return function(e){for(var n=[],r=null;e.length;){try{r=t.call(this,e)}catch(s){return[n,e]}n.push(r[0]),e=r[1]}return[n,e]}},optional:function(t){return function(e){var n=null;try{n=t.call(this,e)}catch(r){return[null,e]}return[n[0],n[1]]}},not:function(e){return function(n){try{e.call(this,n)}catch(r){return[null,n]}throw new t.Exception(n)}},ignore:function(t){return t?function(e){var n=null;return n=t.call(this,e),[null,n[1]]}:null},product:function(){for(var t=arguments[0],n=Array.prototype.slice.call(arguments,1),r=[],s=0;s<t.length;s++)r.push(e.each(t[s],n));return r},cache:function(e){var n={},r=0,s=[],a=Date.Config.CACHE_MAX||500,i=null,o=function(){if(r===a)for(var t=0;10>t;t++){var e=s.shift();e&&(delete n[e],r--)}};return function(a){o();try{i=n[a]=n[a]||e.call(this,a)}catch(u){i=n[a]=u}if(r++,s.push(a),i instanceof t.Exception)throw i;return i}},any:function(){var e=arguments;return function(n){for(var r=null,s=0;s<e.length;s++)if(null!=e[s]){try{r=e[s].call(this,n)}catch(a){r=null}if(r)return r}throw new t.Exception(n)}},each:function(){var e=arguments;return function(n){for(var r=[],s=null,a=0;a<e.length;a++)if(null!=e[a]){try{s=e[a].call(this,n)}catch(i){throw new t.Exception(n)}r.push(s[0]),n=s[1]}return[r,n]}},all:function(){var t=arguments,e=e;return e.each(e.optional(t))},sequence:function(n,r,s){return r=r||e.rtoken(/^\s*/),s=s||null,1===n.length?n[0]:function(e){for(var a=null,i=null,o=[],u=0;u<n.length;u++){try{a=n[u].call(this,e)}catch(h){break}o.push(a[0]);try{i=r.call(this,a[1])}catch(c){i=null;break}e=i[1]}if(!a)throw new t.Exception(e);if(i)throw new t.Exception(i[1]);if(s)try{a=s.call(this,a[1])}catch(l){throw new t.Exception(a[1])}return[o,a?a[1]:e]}},between:function(t,n,s){s=s||t;var a=e.each(e.ignore(t),n,e.ignore(s));return function(t){var e=a.call(this,t);return[[e[0][0],r[0][2]],e[1]]}},list:function(t,n,r){return n=n||e.rtoken(/^\s*/),r=r||null,t instanceof Array?e.each(e.product(t.slice(0,-1),e.ignore(n)),t.slice(-1),e.ignore(r)):e.each(e.many(e.each(t,e.ignore(n))),px,e.ignore(r))},set:function(n,r,s){return r=r||e.rtoken(/^\s*/),s=s||null,function(a){for(var i=null,o=null,u=null,h=null,c=[[],a],l=!1,d=0;d<n.length;d++){u=null,o=null,i=null,l=1===n.length;try{i=n[d].call(this,a)}catch(f){continue}if(h=[[i[0]],i[1]],i[1].length>0&&!l)try{u=r.call(this,i[1])}catch(g){l=!0}else l=!0;if(l||0!==u[1].length||(l=!0),!l){for(var m=[],y=0;y<n.length;y++)d!==y&&m.push(n[y]);o=e.set(m,r).call(this,u[1]),o[0].length>0&&(h[0]=h[0].concat(o[0]),h[1]=o[1])}if(h[1].length<c[1].length&&(c=h),0===c[1].length)break}if(0===c[0].length)return c;if(s){try{u=s.call(this,c[1])}catch(p){throw new t.Exception(c[1])}c[1]=u[1]}return c}},forward:function(t,e){return function(n){return t[e].call(this,n)}},replace:function(t,e){return function(n){var r=t.call(this,n);return[e,r[1]]}},process:function(t,e){return function(n){var r=t.call(this,n);return[e.call(this,r[0]),r[1]]}},min:function(e,n){return function(r){var s=n.call(this,r);if(s[0].length<e)throw new t.Exception(r);
return s}}},n=function(t){function e(){var e,n,r=null,s=[];return arguments.length>1?r=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(r=arguments[0]),r?(e=r.shift(),e.length>0?(r.unshift(e[n]),s.push(t.apply(null,r)),r.shift(),s):void 0):t.apply(null,arguments)}return e},s="optional not ignore cache".split(/\s/),a=0;a<s.length;a++)e[s[a]]=n(e[s[a]]);for(var i=function(t){return function(){return arguments[0]instanceof Array?t.apply(null,arguments[0]):t.apply(null,arguments)}},o="each any all".split(/\s/),u=0;u<o.length;u++)e[o[u]]=i(e[o[u]])}(),function(){var t=Date,e=function(t){for(var n=[],r=0;r<t.length;r++)t[r]instanceof Array?n=n.concat(e(t[r])):t[r]&&n.push(t[r]);return n},n=function(){if(this.meridian&&(this.hour||0===this.hour)){if("a"===this.meridian&&this.hour>11&&Date.Config.strict24hr)throw"Invalid hour and meridian combination";if("p"===this.meridian&&this.hour<12&&Date.Config.strict24hr)throw"Invalid hour and meridian combination";"p"===this.meridian&&this.hour<12?this.hour=this.hour+12:"a"===this.meridian&&12===this.hour&&(this.hour=0)}else this.meridian||!this.hour&&0!==this.hour||this.hour<8&&(this.hour=this.hour+12)},r=function(){var t=new Date;!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=t.getDate()),this.year||(this.year=t.getFullYear(),this.month<t.getMonth()&&this.year++),this.month||0===this.month||(this.month=t.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.millisecond||(this.millisecond=0)},s={getToday:function(){return this.now||-1!=="hour minute second".indexOf(this.unit)?new Date:t.today()},setDaysFromWeekday:function(e,n){var r;return n=n||1,this.unit="day",r=t.getDayNumberFromName(this.weekday)-e.getDay(),this.days=r?r+7*n:7*n,this},setMonthsFromMonth:function(t,e){var n;return e=e||1,this.unit="month",n=this.month-t.getMonth(),this.months=n?(n+12*e)%12:12*e,this.month=null,this},setDMYFromWeekday:function(){var t=Date[this.weekday]();return this.day=t.getDate(),this.month||(this.month=t.getMonth()),this.year=t.getFullYear(),this},setUnitValue:function(t){!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"===this.operator?1:-1)+(this.value||0)*t:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*t)},generateDateFromWeeks:function(){var t=void 0!==this.weekday?this.weekday:"today",e=Date[t]().addWeeks(this.weeks);return this.now&&e.setTimeToNow(),e}};t.Translator={hour:function(t){return function(){this.hour=Number(t),this.setExplicitTime=!0}},minute:function(t){return function(){this.minute=Number(t),this.setExplicitTime=!0}},second:function(t){return function(){this.second=Number(t),this.setExplicitTime=!0}},secondAndMillisecond:function(t){return function(){var e=t.match(/^([0-5][0-9])\.([0-9]{1,3})/);this.second=Number(e[1]),this.millisecond=Number(e[2]),this.setExplicitTime=!0}},meridian:function(t){return function(){this.meridian=t.slice(0,1).toLowerCase(),this.setExplicitTime=!0}},timezone:function(t){return function(){var e=t.replace(/[^\d\+\-]/g,"");e.length?this.timezoneOffset=Number(e):this.timezone=t.toLowerCase()}},day:function(t){var e=t[0];return function(){if(this.day=Number(e.match(/\d+/)[0]),this.day<1)throw"invalid day"}},month:function(t){return function(){if(this.month=3===t.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(t)/4:Number(t)-1,this.month<0)throw"invalid month"}},year:function(t){return function(){var e=Number(t);this.year=t.length>2?e:e+(e+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(t){return function(){switch(t){case"yesterday":this.days=-1;break;case"someday":this.days=14;break;case"later":this.days=5;break;case"soon":this.days=2;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(e){var s;e=e instanceof Array?e:[e];for(var a=0;a<e.length;a++)e[a]&&e[a].call(this);if(r.call(this),n.call(this),this.day>t.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");return s=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond),this.setExplicitTime&&s.ensureTimeOfDay(),this.year<100&&s.setFullYear(this.year),this.timezone?s.set({timezone:this.timezone}):this.timezoneOffset&&s.set({timezoneOffset:this.timezoneOffset}),s},finish:function(r){var a,i,o,u;if(r=r instanceof Array?e(r):[r],0===r.length)return null;for(var h=0;h<r.length;h++)"function"==typeof r[h]&&r[h].call(this);if(this.now&&!this.unit&&!this.operator)return new Date;if(a=s.getToday.call(this),givenYear=!!this.year,i=!!(this.days&&null!==this.days||this.orient||this.operator),o="past"===this.orient||"subtract"===this.operator?-1:1,this.month&&"week"===this.unit&&(this.value=this.month+1,delete this.month,delete this.day),!this.month&&0!==this.month||-1==="year day hour minute second".indexOf(this.unit)||(this.value||(this.value=this.month+1),this.month=null,i=!0),i||!this.weekday||this.day||this.days||s.setDMYFromWeekday.call(this),i&&this.weekday&&"month"!==this.unit&&"week"!==this.unit&&s.setDaysFromWeekday.call(this,a,o),!this.weekday||"week"===this.unit||this.day||this.days||(u=Date[this.weekday](),this.day=u.getDate(),u.getMonth()!==a.getMonth()&&(this.month=u.getMonth())),this.month&&"day"===this.unit&&this.operator&&(this.value||(this.value=this.month+1),this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(a.set({day:1*this.value}),i||(this.day=1*this.value)),this.month||!this.value||"month"!==this.unit||this.now||(this.month=this.value,i=!0),i&&(this.month||0===this.month)&&"year"!==this.unit&&s.setMonthsFromMonth.call(this,a,o),this.unit||(this.unit="day"),s.setUnitValue.call(this,o),n.call(this),!this.month&&0!==this.month||this.day||(this.day=1),!this.orient&&!this.operator&&"week"===this.unit&&this.value&&!this.day&&!this.month)return Date.today().setWeek(this.value);if("week"===this.unit&&this.weeks&&!this.day&&!this.month)return s.generateDateFromWeeks.call(this);if(i&&this.timezone&&this.day&&this.days&&(this.day=this.days),!givenYear&&this.month<a.getMonth()&&(this.year=a.getFullYear()+1),i&&(this.hour||this.minute||this.second)&&(this.hours=this.hour,this.minutes=this.minute,this.seconds=this.second),i?a.add(this):a.set(this),this.timezone){this.timezone=this.timezone.toUpperCase();var c,l=t.getTimezoneOffset(this.timezone);a.hasDaylightSavingTime()&&(c=t.getTimezoneAbbreviation(l,a.isDaylightSavingTime()),c!==this.timezone&&a.addHours(a.isDaylightSavingTime()?-1:1)),a.setTimezoneOffset(l)}return a}}}(),function(){var t=Date;t.Grammar={};var e,n=t.Parsing.Operators,r=t.Grammar,s=t.Translator;e=function(){return n.each(n.any.apply(null,arguments),n.not(r.ctoken2("timeContext")))},r.datePartDelimiter=n.rtoken(/^([\s\-\.\,\/\x27]+)/),r.timePartDelimiter=n.stoken(":"),r.whiteSpace=n.rtoken(/^\s*/),r.generalDelimiter=n.rtoken(/^(([\s\,]|at|@|on)+)/);var a={};r.ctoken=function(t){var e=a[t];if(!e){for(var r=Date.CultureInfo.regexPatterns,s=t.split(/\s+/),i=[],o=0;o<s.length;o++)i.push(n.replace(n.rtoken(r[s[o]]),s[o]));e=a[t]=n.any.apply(null,i)}return e},r.ctoken2=function(t){return n.rtoken(Date.CultureInfo.regexPatterns[t])};var i=function(t,e,s,a){r[t]=n.cache(a?n.process(n.each(n.rtoken(e),n.optional(r.ctoken2(a))),s):n.process(n.rtoken(e),s))},o=function(t,e){return n.cache(n.process(r.ctoken2(t),e))},u={},h=function(t){return u[t]=u[t]||r.format(t)[0],u[t]};r.allformats=function(t){var e=[];if(t instanceof Array)for(var n=0;n<t.length;n++)e.push(h(t[n]));else e.push(h(t));return e},r.formats=function(t){if(t instanceof Array){for(var e=[],r=0;r<t.length;r++)e.push(h(t[r]));return n.any.apply(null,e)}return h(t)};var c={timeFormats:function(){var t,e=["h","hh","H","HH","m","mm","s","ss","ss.s","z","zz"],a=[/^(0[0-9]|1[0-2]|[1-9])/,/^(0[0-9]|1[0-2])/,/^([0-1][0-9]|2[0-3]|[0-9])/,/^([0-1][0-9]|2[0-3])/,/^([0-5][0-9]|[0-9])/,/^[0-5][0-9]/,/^([0-5][0-9]|[0-9])/,/^[0-5][0-9]/,/^[0-5][0-9]\.[0-9]{1,3}/,/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/,/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/],u=[s.hour,s.hour,s.hour,s.minute,s.minute,s.second,s.second,s.secondAndMillisecond,s.timezone,s.timezone,s.timezone];for(t=0;t<e.length;t++)i(e[t],a[t],u[t]);r.hms=n.cache(n.sequence([r.H,r.m,r.s],r.timePartDelimiter)),r.t=o("shortMeridian",s.meridian),r.tt=o("longMeridian",s.meridian),r.zzz=o("timezone",s.timezone),r.timeSuffix=n.each(n.ignore(r.whiteSpace),n.set([r.tt,r.zzz])),r.time=n.each(n.optional(n.ignore(n.stoken("T"))),r.hms,r.timeSuffix)},dateFormats:function(){i("d",/^([0-2]\d|3[0-1]|\d)/,s.day,"ordinalSuffix"),i("dd",/^([0-2]\d|3[0-1])/,s.day,"ordinalSuffix"),r.rday=n.cache(n.process(r.ctoken("yesterday tomorrow soon later someday today now"),s.rday)),r.ddd=r.dddd=n.cache(n.process(r.ctoken("sun mon tue wed thu fri sat"),function(t){return function(){this.weekday=t}})),i("M",/^(1[0-2]|0\d|\d)/,s.month),i("MM",/^(1[0-2]|0\d)/,s.month),r.MMM=r.MMMM=n.cache(n.process(r.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),s.month)),i("y",/^(\d+)/,s.year),i("yy",/^(\d\d)/,s.year),i("yyy",/^(\d\d?\d?\d?)/,s.year),i("yyyy",/^(\d\d\d\d)/,s.year),r.day=e(r.d,r.dd),r.month=e(r.M,r.MMM),r.year=e(r.yyyy,r.yy);var t=function(){return n.set(arguments,r.datePartDelimiter)};r.mdy=t(r.ddd,r.month,r.day,r.year),r.ymd=t(r.ddd,r.year,r.month,r.day),r.dmy=t(r.ddd,r.day,r.month,r.year),r.date=function(t){return(r[Date.CultureInfo.dateElementOrder]||r.mdy).call(this,t)}},relative:function(){r.orientation=n.process(r.ctoken("past future"),function(t){return function(){this.orient=t}}),r.operator=n.process(r.ctoken("add subtract"),function(t){return function(){this.operator=t}})}};r.buildGrammarFormats=function(){a={},c.timeFormats(),c.dateFormats(),c.relative(),r.value=n.process(n.rtoken(/^([-+]?\d+)?(st|nd|rd|th)?/),function(t){return function(){this.value=t.replace(/\D/g,"")}}),r.expression=n.set([r.rday,r.time,r.value,r.orientation,r.ddd,r.MMM]),r.format=n.process(n.many(n.any(n.process(n.rtoken(/^(dd?d?d?(?!e)|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(e){if(r[e])return r[e];throw t.Parsing.Exception(e)}),n.process(n.rtoken(/^[^dMyhHmstz]+/),function(t){return n.ignore(n.stoken(t))}))),function(t){return n.process(n.each.apply(null,t),s.finishExact)}),r._start=n.process(n.set([r.date,r.expression,r.time],r.generalDelimiter,r.whiteSpace),s.finish)},r.buildGrammarFormats(),r._formats=r.formats(["M-d H","ddd H"]),r.start=function(t){try{var e=r._formats.call({},t);if(0===e[1].length)return e}catch(n){}return r._start.call({},t)}}(),function(){function t(t){var r;return t?t instanceof Date?t.clone():(t.length>=4&&"0"!==t.charAt(0)&&"+"!==t.charAt(0)&&"-"!==t.charAt(0)&&(r=e.Parsing.Numeric.parse(t)),r instanceof Date&&!isNaN(r.getTime())?r:(t=e.Parsing.Normalizer.parse(n.removeOrds(t)),r=n.grammarParser(t))):null}var e=Date,n={removeOrds:function(t){return ords=t.match(/\b(\d+)(?:st|nd|rd|th)\b/),t=ords&&2===ords.length?t.replace(ords[0],ords[1]):t},grammarParser:function(t){var n=null;try{n=e.Grammar.start.call({},t.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(r){return null}return 0===n[1].length?n[0]:null}};e._parse||(e._parse=e.parse),e.parse=t,Date.getParseFunction=function(t){var e=Date.Grammar.allformats(t);return function(t){for(var n=null,r=0;r<e.length;r++){try{n=e[r].call({},t)}catch(s){continue}if(0===n[1].length)return n[0]}return null}},e.parseExact=function(t,n){return e.getParseFunction(n)(t)}}(),function(){var e=Date,n=e.prototype,r=function(t,e){return e||(e=2),("000"+t).slice(-1*e)},s={substitutes:function(t){switch(t){case"d":case"%d":return"dd";case"D":case"%a":return"ddd";case"j":case"l":case"%A":return"dddd";case"S":return"S";case"F":case"%B":return"MMMM";case"m":case"%m":return"MM";case"M":case"%b":case"%h":return"MMM";case"n":return"M";case"Y":case"%Y":return"yyyy";case"y":case"%y":return"yy";case"g":case"%I":return"h";case"G":return"H";case"h":return"hh";case"H":case"%H":return"HH";case"i":case"%M":return"mm";case"s":case"%S":return"ss";case"%r":return"hh:mm tt";case"%R":return"H:mm";case"%T":return"H:mm:ss";case"%X":return"t";case"%x":case"%e":return"d";case"%D":return"MM/dd/yy";case"%n":return"\\n";case"%t":return"\\t";case"e":case"T":case"%z":case"%Z":return"z";case"Z":return"ZZ";case"N":case"w":case"%w":return"u";case"W":case"%V":return"W"}},interpreted:function(n,s){var a;switch(n){case"%u":return s.getDay()+1;case"z":return s.getOrdinalNumber();case"%j":return r(s.getOrdinalNumber(),3);case"%U":var i=s.clone().set({month:0,day:1}).addDays(-1).moveToDayOfWeek(0),o=s.clone().addDays(1).moveToDayOfWeek(0,-1);return i>o?"00":r((o.getOrdinalNumber()-i.getOrdinalNumber())/7+1);case"%W":return r(s.getWeek());case"t":return e.getDaysInMonth(s.getFullYear(),s.getMonth());case"o":case"%G":return s.setWeek(s.getISOWeek()).toString("yyyy");case"%g":return s._format("%G").slice(-2);case"a":case"%p":return t("tt").toLowerCase();case"A":return t("tt").toUpperCase();case"u":return r(s.getMilliseconds(),3);case"I":return s.isDaylightSavingTime()?1:0;case"O":return s.getUTCOffset();case"P":return a=s.getUTCOffset(),a.substring(0,a.length-2)+":"+a.substring(a.length-2);case"B":var u=new Date;return Math.floor((3600*u.getHours()+60*u.getMinutes()+u.getSeconds()+60*(u.getTimezoneOffset()+60))/86.4);case"c":return s.toISOString().replace(/\"/g,"");case"U":return e.strtotime("now");case"%c":return t("d")+" "+t("t");case"%C":return Math.floor(s.getFullYear()/100+1)}},shouldOverrideDefaults:function(t){switch(t){case"%e":return!0;default:return!1}},parse:function(t,e){var n,r=e||new Date;return(n=s.substitutes(t))?n:(n=s.interpreted(t,r),n?n:t)}};e.normalizeFormat=function(t,e){return t.replace(/(%|\\)?.|%%/g,function(t){return s.parse(t,e)})},e.strftime=function(t,e){var n=Date.parse(e);return n._format(t)},e.strtotime=function(t){var n=e.parse(t);return Math.round(e.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds())/1e3)};var a=function(t){return function(n){var r,a=!1;return"\\"===n.charAt(0)||"%%"===n.substring(0,2)?n.replace("\\","").replace("%%","%"):(a=s.shouldOverrideDefaults(n),r=e.normalizeFormat(n,t),r?t.toString(r,a):void 0)}};n._format=function(t){var e=a(this);return t?t.replace(/(%|\\)?.|%%/g,e):this._toString()},n.format||(n.format=n._format)}(),function(){var t=function(t){return function(){return this[t]}},e=function(t){return function(e){return this[t]=e,this}},n=["years","months","days","hours","minutes","seconds","milliseconds"],r=function(n,r){for(var s=0;s<r.length;s++){var a=r[s],i=a.slice(0,1).toUpperCase()+a.slice(1);n.prototype[a]=0,n.prototype["get"+i]=t(a),n.prototype["set"+i]=e(a)}},s=function(t,e,n,r,a){if(1===arguments.length&&"number"==typeof t){var i=0>t?-1:1,o=Math.abs(t);this.setDays(Math.floor(o/864e5)*i),o%=864e5,this.setHours(Math.floor(o/36e5)*i),o%=36e5,this.setMinutes(Math.floor(o/6e4)*i),o%=6e4,this.setSeconds(Math.floor(o/1e3)*i),o%=1e3,this.setMilliseconds(o*i)}else this.set(t,e,n,r,a);return this.getTotalMilliseconds=function(){return 864e5*this.getDays()+36e5*this.getHours()+6e4*this.getMinutes()+1e3*this.getSeconds()},this.compareTo=function(t){var e,n=new Date(1970,1,1,this.getHours(),this.getMinutes(),this.getSeconds());return e=null===t?new Date(1970,1,1,0,0,0):new Date(1970,1,1,t.getHours(),t.getMinutes(),t.getSeconds()),e>n?-1:n>e?1:0},this.equals=function(t){return 0===this.compareTo(t)},this.add=function(t){return null===t?this:this.addSeconds(t.getTotalMilliseconds()/1e3)},this.subtract=function(t){return null===t?this:this.addSeconds(-t.getTotalMilliseconds()/1e3)},this.addDays=function(t){return new s(this.getTotalMilliseconds()+864e5*t)},this.addHours=function(t){return new s(this.getTotalMilliseconds()+36e5*t)},this.addMinutes=function(t){return new s(this.getTotalMilliseconds()+6e4*t)},this.addSeconds=function(t){return new s(this.getTotalMilliseconds()+1e3*t)},this.addMilliseconds=function(t){return new s(this.getTotalMilliseconds()+t)},this.get12HourHour=function(){return this.getHours()>12?this.getHours()-12:0===this.getHours()?12:this.getHours()},this.getDesignator=function(){return this.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator},this.toString=function(t){this._toString=function(){return null!==this.getDays()&&this.getDays()>0?this.getDays()+"."+this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds()):this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds())},this.p=function(t){return t.toString().length<2?"0"+t:t};var e=this;return t?t.replace(/dd?|HH?|hh?|mm?|ss?|tt?/g,function(t){switch(t){case"d":return e.getDays();case"dd":return e.p(e.getDays());case"H":return e.getHours();case"HH":return e.p(e.getHours());case"h":return e.get12HourHour();case"hh":return e.p(e.get12HourHour());case"m":return e.getMinutes();case"mm":return e.p(e.getMinutes());case"s":return e.getSeconds();case"ss":return e.p(e.getSeconds());case"t":return(e.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator).substring(0,1);case"tt":return e.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator}}):this._toString()},this};r(s,n.slice(2)),s.prototype.set=function(t,e,n,r,s){this.setDays(t||this.getDays()),this.setHours(e||this.getHours()),this.setMinutes(n||this.getMinutes()),this.setSeconds(r||this.getSeconds()),this.setMilliseconds(s||this.getMilliseconds())},Date.prototype.getTimeOfDay=function(){return this.getMilliseconds()+1e3*this.getSeconds()+6e4*this.getMinutes()+36e5*this.getHours()},Date.prototype.hasTimeOfDay=function(){return 0!==this.getHours()||0!==this.getMinutes()||0!==this.getSeconds()||0!==this.getMilliseconds()},Date.prototype.isRepeatDate=function(){return!1},Date.TimeSpan=s,"undefined"!=typeof window&&(window.TimeSpan=s)}(),function(){var t=["years","months","days","hours","minutes","seconds","milliseconds"],e=function(t){return function(){return this[t]}},n=function(t){return function(e){return this[t]=e,this}},r=function(t,r){for(var s=0;s<r.length;s++){var a=r[s],i=a.slice(0,1).toUpperCase()+a.slice(1);t.prototype[a]=0,t.prototype["get"+i]=e(a),t.prototype["set"+i]=n(a)}},s=function(t,e,n,r){function s(){e.addMonths(-t),r.months++,12===r.months&&(r.years++,r.months=0)}if(1===t)for(;e>n;)s();else for(;n>e;)s();r.months--,r.months*=t,r.years*=t},a=function(t,e,n){var r=!1==(e.isDaylightSavingTime()===n.isDaylightSavingTime());r&&1===t?e.addHours(-1):r&&e.addHours(1)},i=function(t,e,n,r,i,o,u){if(7===arguments.length)this.set(t,e,n,r,i,o,u);else if(2===arguments.length&&arguments[0]instanceof Date&&arguments[1]instanceof Date){var h=arguments[0].clone(),c=arguments[1].clone(),l=h>c?1:-1;this.dates={start:arguments[0].clone(),end:arguments[1].clone()},s(l,h,c,this),a(l,h,c);var d=c-h;if(0!==d){var f=new TimeSpan(d);this.set(this.years,this.months,f.getDays(),f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds())}}return this};r(i,t),i.prototype.set=function(t,e,n,r,s,a,i){this.setYears(t||this.getYears()),this.setMonths(e||this.getMonths()),this.setDays(n||this.getDays()),this.setHours(r||this.getHours()),this.setMinutes(s||this.getMinutes()),this.setSeconds(a||this.getSeconds()),this.setMilliseconds(i||this.getMilliseconds())},Date.TimePeriod=i,"undefined"!=typeof window&&(window.TimePeriod=i)}()}function DuchessHelpersWrapper(t){function e(t,e){return(t&e)===e}function n(t,e){for(var n in t)if(t[n]==e)return n;return null}function r(t){return String(t).replace(/[&\"<>]/g,function(t){return p[t]})}function s(t){var e=t.replace(/[:,\.\'\"\)\]]$/g,"");return e}function a(t){if(t&&"string"==typeof t){var e=t.split("|");if(e.length>3){{e[0]}return new Date(parseInt(e[1]))}}return void 0}function i(t){A=void 0,I=t.split(" "),F=1,H=I[0].length,_=0,E=void 0}function o(t){var e=!1;return c&&void 0===t&&log("INVALID TOKEN TYPE"),F<I.length&&(e=I[F].match(t),e&&(A=I[F],F++,H+=A.length+1)),e}function u(){var t=!1;if(F+1<I.length&&!I[F+1].match(x.at)){var e=Date.parse(I[F]+" "+I[F+1]);e&&(t=!0,A=I[F]+I[F+1],E=e,F+=2,H+=A.length+2)}if(!t&&F<I.length){var n=Date.parse(I[F]);n&&(t=!0,A=I[F],E=n,F++,H+=A.length+1)}return t}function h(t,e,n,r,s,a){var i=a||new Date,o=(a?new Date(a):new Date).clearTime();if(void 0!==r&&o.setMonth(r),void 0!==n&&n>0&&31>=n){var u=Date.getDaysInMonth(o.getFullYear(),o.getMonth());n>u&&o.addMonths(1),o.setDate(n)}if(void 0!==e){{o.getMonth()}o.moveToNthOccurrence(t,e),o.isBefore(i)&&(o.addMonths(1),o.moveToNthOccurrence(t,e))}else void 0!==t&&o.getDay()!==t&&(o.moveToDayOfWeek(t,-1),o.isBefore(i)&&o.moveToDayOfWeek(t));if(s){var h=S.exec(s);if(void 0!==h[1])var c=h[3].toUpperCase(),l=c===Date.CultureInfo.pmDesignator[0]||c===Date.CultureInfo.pmDesignator,d=parseInt(h[1])+(l?12:0),f=h[2]?parseInt(h[2].slice(1)):0;else if(void 0!==h[4]&&void 0!==h[5])var d=parseInt(h[4]),f=parseInt(h[5]);c||8>d&&(d+=12),o.setHours(d),o.setMinutes(f),o.setMilliseconds(1)}return o}var c=!1;this.helperLibLoaded=!0;var l="@",d="+",f={None:0,Local:1,Remote:2,Auto:4,Text:1073741824,Property:2147483648,All:3221225472},g={Once:0,Daily:1,Weekly:2,Monthly:3,DayOfMonth:4,Yearly:5,EndOfMonthOffset:6,NthMonthInst:7},m={Once:1,Repeat:2},y=-1==navigator.userAgent.indexOf("Mac")?"ctrl":"";String.prototype.insertTag=function(t,e,n,r){return this.substr(0,t)+e+this.substr(t,n)+r+this.substr(t+n)},"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(t){return 0===this.lastIndexOf(t,0)}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)});var p={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"},D=["http","https","evernote"],T=new Date(9e12).getTime(),v=new Date(1401606e6),M=/^(today|tomorrow|yesterday|(?:sun|mon|tue(?:s)?|wed(?:nes)?|thu(?:rs)?|fri|sat(?:ur)?)(?:day)?)/i,S=/^(?:([0]?[1-9]|1[0-2])(:[0-5]\d)?(?:\s)?(am?|pm?|\b))|(?:([0]?\d|1\d|2[0-3]):([0-5]\d))$/i,b=/(^#|[\(\s]#)([^\s\),]+)/g,w=/(?:^@|[\(\s]@)([^\s\)]{2,})(\s[^\s\)@]{1,})?(\s[^\s\)@]{1,})?/g,O=/\b((?:(https?|evernote):\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/g,C=/(?:^|[\s\(\[])([^\(\[@\s]+\.(?:com|org|net|io))/gi;t.parseText=function(e,n,a,i,o,u){var h=!1,c=e,f=[];if(!e||0===e.length)return{parsedText:void 0};var g=e,p=!1,T=e.length;e=r(e),T!==e.length&&(p=!0);var v,M,S,k=[];if(u&&u.___info___.count>0&&e.indexOf(d)>=0&&e.indexOf(d)>=0){for(var x=e.split(" "),N=0,A=0;A<x.length;A++){if(0===x[A].indexOf(d)){for(var H=void 0,_=x[A].substring(1),I=1;;I++){var F=s(_);if(""===u[F]&&(H=F),!(A+I<x.length))break;_+=" "+x[A+I]}H&&f.push({name:H,lineIndex:N})}N+=x[A].length+1}if(f.length>0)for(var A=f.length-1;A>=0;A--)e=e.insertTag(f[A].lineIndex,'<p class="contact">',f[A].name.length+1,"</p>"),p=!0}for(b.lastIndex=0;v=b.exec(e);){var E=v.index+v[1].length-1,W=v[2].length+1;":"==v[2].charAt(v[2].length-1)&&W--,e=e.insertTag(E,'<p class="tag" title="'+y+'+click to search">',W,"</p>"),p=!0}for(w.lastIndex=0;v=w.exec(e);){for(var z,P=v[0].indexOf(l),L=!1,A=1;A<v.length&&v[A];++A)if(L)v[A]=void 0;else{var Y=v[A][v[A].length-1];(":"===Y||","===Y||"."===Y)&&(v[A]=v[A].slice(0,-1),L=!0)}var R=t.parseRepeatDate(a,i,o,e.substr(v.index+P+1));if(R||"every"===v[1]||"in"===v[1]){if(R){if(R.replacedStartDate){dateLength=R.text.length+1;var U=v.index+P+1,j=e.substr(U,U+R.repLength);e=e.substr(0,U)+R.text+e.substr(U+R.repLength),e=e.insertTag(v.index+P,'<p class="date">',dateLength,"</p>");var Z=c.indexOf(j);c=c.substr(0,Z)+R.text+c.substr(Z+R.repLength),h=!0,k.push(R)}else e=e.insertTag(v.index+P,'<p class="date">',R.repLength+P+1,"</p>"),k.push(R);p=!0;break}}else{z=v[1]+(v[2]?v[2]:"")+(v[3]?v[3]:"");var K=Date.parse(z);if(!K&&v[3]&&(z=v[1]+(v[2]?v[2]:""),K=Date.parse(z)),!K&&v[2]&&(z=v[1],K=Date.parse(z)),K){var G=t.computeDateInfo(n,o,K,z);if(G.replacedDate){dateLength=G.text.length+1;var U=v.index+P+1;e=e.substr(0,U)+G.text+e.substr(U+z.length),e=e.insertTag(v.index+P,'<p class="date">',dateLength,"</p>");var Z=c.indexOf(z);c=c.substr(0,Z)+G.text+c.substr(Z+z.length),h=!0,k.push({type:m.Once,date:G.date,text:G.text,explicitTime:K.hasTimeOfDay()})}else dateLength=z.length+1,e=e.insertTag(v.index+P,'<p class="date">',dateLength,"</p>"),k.push({type:m.Once,date:G.date,text:z,explicitTime:K.hasTimeOfDay()});p=!0;break}}}if(O.lastIndex=0,v=O.exec(e)){var B=D.indexOf(v[2])>=0,V=B?v[0]:"http://"+v[0];M="<a target='_blank' href='"+V+"' tooltip='"+y+"+click to navigate'>",S="</a>",e=e.insertTag(v.index,M,v[0].length,S),p=!0}else if(C.lastIndex=0,v=C.exec(e)){var P=v[0].length-v[1].length,V=v[1].startsWith("http")?v[1]:"http://"+v[1];M="<a target='_blank' href='"+V+"' tooltip='"+y+"+click to navigate'>",S="</a>",e=e.insertTag(v.index+P,M,v[1].length,S),p=!0}return{text:g,styledText:e,parsedText:h?c:void 0,dates:k,hasStyle:p,numContacts:f.length}};var k=864e5;t.computeDateInfo=function(t,r,s,a){function i(t){return 0>h?h>=-k?"yesterday":t.toString(Date.CultureInfo.formatPatterns.shortDate):k>=h&&t.isToday()?"today":2*k>h?"tomorrow":void 0}var o=new Date(t).clearTime(),u=(new Date).clearTime(),h=o-u;c&&(log("Prev Date Time: ",o),log("Curr Date Time: ",u),log("RawDiff: ",h),log("DiffDays: ",h/k));var l,d=a,g=!1;if(e(r,f.Auto)||e(r,f.Remote))if(l=new Date(t),void 0!==t&&s.getTime()!==t||h>=0&&2*k>h){var m;if(m=M.exec(a)){var y=i(l);y&&y.toUpperCase()!==m[0].toUpperCase()&&(d=a.replace(m[0],y),g=!0)}else if(m=S.exec(a)){var y=i(l);y&&"today"!==y&&(d=y+" "+a,g=!0)}}else void 0===t&&(l=s);else e(r,f.Local)?l=s:(c&&log("Invalid ChageType for dates: "+r),l=s);return c&&(log(">>> Date Rollver <<<"),log(">>> Change Type:  ",n(f,r)),log(">>> Prev Date:    ",new Date(t)),log(">>> New Date:     ",l),log(">>> Prev String:  ",a),log(">>> Trans String: ",y),log(">>> New String:   ",d),log("--------------------")),{text:d,date:l,replacedDate:g}};var x={repeat:/^(ev(ery)?|after)\b/i,recur:/^(other|first|second|third|fourth|1st|2nd|3rd|4th|last)$/i,day:/^(((sun|mon|tue(s)?|wed(nes)?|thu(rs)?|fri|sat(ur)?)(day)?)(?:,|\sand\s)?)$/i,daysOfWeek:/^(weekday|weekend)$/i,len:/^(day|week|month|year|morning|afternoon|night)$/i,count:/^((\d{1,2})|one|two|three|four|five|six|seven|eight|nine|ten)$/i,month:/^(jan(uary)?|feb(ruary)?|ma((r(ch)?)?|y)|apr(il)?|ju(ly|ne)|aug(ust)?|oct(ober)?|(sept|nov|dec)(ember)?)$/i,at:/^at$/i,of:/^of$/i,"in":/^in$/i,delim:/^and$/i,date:/^((\d{1,2})|([2-5]?1(st)?|[2-5]?2(nd)?|[2-5]?3(rd)?|(0|[1-5]?[4-9]|[1-5]0|1[1-3])(th)?))$/i,year:/^((\d\d)|(\d\d\d\d))$/i,time:S,from:/^(from|starting)$/i,until:/^(until)$/i,measure:/^(days|weeks|months|years)$/i},N={"1st":0,fir:0,"2nd":2,sec:2,"3rd":3,thi:3,"4th":4,fou:4,sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6,jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,days:g.Daily,weeks:g.Weekly,months:g.Monthly,years:g.Yearly},A=void 0,H=0,_=0,I=void 0,F=1,E=void 0;t.parseRepeatDate=function(n,r,s,l){var d=void 0;if(l.match(x.repeat)){i(l);var y,p=!1,D=Date.today(),M=void 0,S=g.Daily,b=1,w=void 0,O=void 0,C=void 0,k=void 0,I=void 0,F=!1;if(o(x.recur)){switch(A){case"other":b=2;break;case"last":S=g.NthMonthInst,C=-1;break;default:S=g.NthMonthInst,C=N[A.substr(0,3).toLowerCase()]}F=!0,c&&log("Parse Recur: ",A)}if(F&&"other"!==A||!o(x.date))if(!F&&o(x.count)){var W=parseInt(A);isNaN(W)&&(W=N[A]),o(x.measure)&&(S=N[A.toLowerCase()],b=W,p=!0,c&&log("Parse Measure: ",A))}else if(o(x.day)){S!==g.NthMonthInst&&(S=g.Weekly),O=N[A.substr(0,3).toLowerCase()],c&&log("Parse Day: ",A);for(var z=void 0;(A.endsWith(",")||o(x.delim))&&o(x.day);){var P=N[A.substr(0,3).toLowerCase()];z?z.push(P):z=[O,P],c&&log("Parse Day: ",A)}z&&(z.sort(),w=z),p=!0}else if(o(x.daysOfWeek))S=g.Weekly,"weekday"===A?w=[1,2,3,4,5]:"weekend"===A&&(w=[0,6]),p=!0;else if(o(x.month)){var L=A;c&&log("Parse Month: ",A),o(x.date)&&(k=parseInt(A),I=N[L.substr(0,3).toLowerCase()],S=g.Yearly,p=!0,c&&log("Parse Date: ",A))}else if(F&&"other"!==A||!o(x.len)){if((!F||"last"===A)&&o(x.len))switch(A){case"day":p=!0,S=g.EndOfMonthOffset,endOffset=0}}else{switch(A){case"day":S=g.Daily;break;case"week":S=g.Weekly;break;case"month":S=g.Monthly;break;case"year":S=g.Yearly;break;case"morning":S=g.Daily,y="9:00am";break;case"afternoon":S=g.Daily,y="2:00pm";break;case"night":S=g.Daily,y="7:00pm"}p=!0,c&&log("Parese Length: ",A)}else{var Y=parseInt(A);Y>0&&31>=Y&&(isNaN(Y)||(S=g.DayOfMonth,k=Y,p=!0),c&&log("Parse Date: ",A),o(x.measure)?(S=N[A.toLowerCase()],b=Y,k=void 0,p=!0,c&&log("Parse Measure: ",A)):(o(x.of),o(x.month)&&(k=Y,I=N[A.substr(0,3).toLowerCase()],S=g.Yearly,p=!0,c&&log("Parse Month: ",A))))}var R=!1;o(x.at)&&(R=!0,c&&log("Parse At: ",A)),o(x.time)&&(y=A,p=!0,c&&log("Parse Time: ",A));var U=!1,j=!1;if(o(x.in)){j=!0;var Z,K;o(x.month)&&(Z=N[A.substr(0,3).toLowerCase()]),o(x.year)&&(K=parseInt(A)),(void 0!==Z||void 0!==K)&&(M=new Date,G=new Date,U=!0,K&&(M.setYear(K),M.setMonth(11),G.setYear(K),G.setMonth(0)),void 0!==Z&&(void 0!==!K&&(M.getMonth()>Z&&M.addYears(1),G.getMonth()>Z&&G.addYears(1)),M.setMonth(Z),G.setMonth(Z)),M.moveToLastDayOfMonth(),G.setDate(1))}var G,B=H+1,V=H;o(x.from)?(B=H+1,u()&&((!U||E.isAfter(G))&&(G=E),U=!1,_=H,c&&log("Parse From: ",A))):_=H;var $=!1;if(R||y||(o(x.at)&&(R=!0,$=!0,c&&log("Parse Post-At: ",A)),o(x.time)&&(y=A,$=!0,c&&log("Parse Post-Time: ",A))),j||o(x.until)&&u()&&(M=E,$=!0,c&&log("Parse until: ",A)),M&&M.isBefore(G)&&(p=!1),p){var J=a(n),Q=e(s,f.Remote)?J:G;if(w&&S===g.Weekly)for(var q=(Q||new Date).getDay(),X=0;X<w.length;++X)if(w[X]>=q){O=w[X];break}var D=h(O,C,k,I,y,Q),te=!!D;if(D&&(D.isBefore(v)&&(te=!1),M&&M.isBefore(D)&&(te=!1)),te){var ee,ne,re=l.substr(0,H);if(!r&&G&&n&&!U){ne=l.substr(B,_);var se=t.computeDateInfo(J,s,G,ne);se.replacedDate&&(ne=se.text)}else r&&r!==T&&(e(s,f.Text)||(ne=new Date(r).toString(Date.CultureInfo.formatPatterns.shortDate)));if(ne){var ae=l.substr(B,_);if(ae.toUpperCase()!==ne.toUpperCase()){c&&log("Replaced From Date: ",ae,"->",ne);var ie=Date.parse(ne);ie&&(ee=ie.getTime(),re=re.substr(0,V)+" from "+ne+($?re.substr(_):""))}}d={type:m.Repeat,repLength:H,text:re,startDate:ee||D,endDate:M,frequency:S,separation:b,offsets:w,replacedStartDate:ee},c&&(log("Start: ",ee||D),log("End: ",M),log("Freq: ",S),log("Sep: ",b),log("Offsets: ",w?w.toString():void 0))}}}return d}}function parseWorkerWrapper(){DuchessHelpersWrapper&&!this.helperLibLoaded&&DuchessHelpersWrapper(this.DuchessHelpers=this.DuchessHelpers||{}),dateWrapper&&!this.dateLibLoaded&&dateWrapper(),log=postMessage;var t;onmessage=function(e){if(e.data.contacts&&(t=e.data.contacts),e.data.language){var n=e.data.language;Date.CultureStrings=Date.CultureStrings||{},Date.CultureStrings[n.name]=n,Date.i18n.setLanguage(n.name,!1)}if(e.data.items){for(var r=Date.now(),s=new Array(e.data.items.length),a=0;a<e.data.items.length;a++){var i=e.data.items[a];s[a]=DuchessHelpers.parseText(i.text,i.prevDate,i.prevRepeatDate,i.completedDate,i.changeType,t)}postMessage({id:e.data.id,styles:s,done:!0,start:r,end:Date.now()})}else postMessage({id:e.data.id,done:!1,msg:"ERROR: No items passed to the worker"})}}this.document&&(window.dateWrapper=dateWrapper),this.dateLibLoaded||this.document&&dateWrapper(),this.document&&(window.helperWrapper=DuchessHelpersWrapper),this.helperLibLoaded||DuchessHelpersWrapper(this.DuchessHelpers=this.DuchessHelpers||{}),!this.document,this.document?window.parseWorkerWrapper=parseWorkerWrapper:parseWorkerWrapper();
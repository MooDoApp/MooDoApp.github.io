/*! For license information please see delayedUI-1595138363517.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],Array(295).concat([function(e,t,n){"use strict";t.__esModule=!0;t.default=function(e,t){return e}},function(e,t,n){var a=n(402),r=n(333),o=/[T ]/,i=/:/,l=/^(\d{2})$/,s=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],c=/^(\d{4})/,u=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],d=/^-(\d{2})$/,f=/^-?(\d{3})$/,p=/^-?(\d{2})-?(\d{2})$/,m=/^-?W(\d{2})$/,h=/^-?W(\d{2})-?(\d{1})$/,g=/^(\d{2}([.,]\d*)?)$/,y=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,v=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,E=/([Z+-].*)$/,C=/^(Z)$/,b=/^([+-])(\d{2})$/,_=/^([+-])(\d{2}):?(\d{2})$/;function k(e,t,n){t=t||0,n=n||0;var a=new Date(0);a.setUTCFullYear(e,0,4);var r=7*t+n+1-(a.getUTCDay()||7);return a.setUTCDate(a.getUTCDate()+r),a}e.exports=function(e,t){if(r(e))return new Date(e.getTime());if("string"!==typeof e)return new Date(e);var n=(t||{}).additionalDigits;n=null==n?2:Number(n);var w=function(e){var t,n={},a=e.split(o);i.test(a[0])?(n.date=null,t=a[0]):(n.date=a[0],t=a[1]);if(t){var r=E.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}(e),x=function(e,t){var n,a=s[t],r=u[t];if(n=c.exec(e)||r.exec(e)){var o=n[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(n=l.exec(e)||a.exec(e)){var i=n[1];return{year:100*parseInt(i,10),restDateString:e.slice(i.length)}}return{year:null}}(w.date,n),D=x.year,S=function(e,t){if(null===t)return null;var n,a,r,o;if(0===e.length)return(a=new Date(0)).setUTCFullYear(t),a;if(n=d.exec(e))return a=new Date(0),r=parseInt(n[1],10)-1,a.setUTCFullYear(t,r),a;if(n=f.exec(e)){a=new Date(0);var i=parseInt(n[1],10);return a.setUTCFullYear(t,0,i),a}if(n=p.exec(e)){a=new Date(0),r=parseInt(n[1],10)-1;var l=parseInt(n[2],10);return a.setUTCFullYear(t,r,l),a}if(n=m.exec(e))return o=parseInt(n[1],10)-1,k(t,o);if(n=h.exec(e)){o=parseInt(n[1],10)-1;var s=parseInt(n[2],10)-1;return k(t,o,s)}return null}(x.restDateString,D);if(S){var M,T=S.getTime(),P=0;if(w.time&&(P=function(e){var t,n,a;if(t=g.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*36e5;if(t=y.exec(e))return n=parseInt(t[1],10),a=parseFloat(t[2].replace(",",".")),n%24*36e5+6e4*a;if(t=v.exec(e)){n=parseInt(t[1],10),a=parseInt(t[2],10);var r=parseFloat(t[3].replace(",","."));return n%24*36e5+6e4*a+1e3*r}return null}(w.time)),w.timezone)M=6e4*function(e){var t,n;if(t=C.exec(e))return 0;if(t=b.exec(e))return n=60*parseInt(t[2],10),"+"===t[1]?-n:n;if(t=_.exec(e))return n=60*parseInt(t[2],10)+parseInt(t[3],10),"+"===t[1]?-n:n;return 0}(w.timezone);else{var N=T+P,O=new Date(N);M=a(O);var I=new Date(N);I.setDate(O.getDate()+1);var A=a(I)-a(O);A>0&&(M+=A)}return new Date(T+P+M)}return new Date(e)}},function(e,t,n){"use strict";var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(1),m=n(47),h=n(0),g=n(3),y=n.n(g),v=n(4),E=n(20),C=n(96);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var _=function(e){s()(n,e);var t=b(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){this.refModal=y.a.createRef()}},{key:"close",value:function(e){this.props.onClose&&this.props.onClose(),v.default.menus.closeModal(this.props.modalID,e)}},{key:"onCloseButton",value:function(e){this.props.onCloseButton?this.props.onCloseButton():this.close()}},{key:"onEscapeKey",value:function(){this.props.noCancel||this.close()}},{key:"getElement",value:function(){return this.refModal.current}},{key:"render",value:function(){var e,t=this.props,n=this.getChildByKey("sidebar"),a=this.getChildByKey("content"),r=this.getChildByKey("buttons"),o={maxHeight:t.height?"".concat(p.a.ModalMaxHeightPerc,"%"):null,minWidth:t.minWidth,minHeight:t.minHeight,width:t.width,height:t.height},i=h.default.classNames("fancyModal c-bg-app popup c-shadow-popup flexbox flexvert",t.className,{small:t.small},{hasSidebar:!!n},{hasButtons:!!r}),l=h.default.classNames("fancyModalWrapper",{"small flexbox":t.small}),s=h.default.classNames("fancyModalContent c-border c-background f1",a.props.className),c=y.a.createElement(t.scrollable?C.a:"div",{className:s},a.props.children||a);if(n){var u={width:t.sidebarWidth||180};e=y.a.createElement("div",{className:"fancyModalSidebar",style:u},n.props.children)}return y.a.createElement("div",{className:l},!t.noBackdrop&&y.a.createElement(m.b.div,{className:"bg-black fixed inset-0",onClick:!1!==t.backdropClose?this.close.bind(this,!1):void 0,initial:{opacity:0},animate:{opacity:.8},transition:{duration:.25}}),y.a.createElement(m.b.div,{className:i,id:t.id,style:o,ref:this.refModal,initial:{scale:.85},animate:{scale:1},transition:p.a.TransitionSpringMedium},t.title&&!1!==t.closeButton&&y.a.createElement(E.a,{className:"fancyModalClose",icon:"icon-close",iconSize:20,width:36,height:36,onClick:this.onCloseButton,tooltip:"Close"}),t.title&&y.a.createElement("div",{className:"fancyModalTitle"},t.title),y.a.createElement("div",{className:"fancyModalInside flexbox flex1"},e,y.a.createElement("div",{className:"fancyModalContentArea c-border-light c-background flexbox flexvert f1"},c,r&&y.a.createElement("div",{className:h.default.classNames("fancyModalButtons c-background")},r)))))}}]),n}(n(34).a);t.a=_},function(e,t,n){"use strict";t.__esModule=!0;var a=o(n(331)),r=o(n(332));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=(0,r.default)(e);return function(n,r){return(0,a.default)(!1,t,e,n,r)}}},function(e,t,n){var a;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var i=r.apply(null,a);i&&e.push(i)}else if("object"===o)for(var l in a)n.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(a=function(){return r}.apply(t,[]))||(e.exports=a)}()},function(e,t,n){var a=n(418),r=n(421),o=n(337),i=n(296),l=n(424),s=n(425);var c={M:function(e){return e.getMonth()+1},MM:function(e){return f(e.getMonth()+1,2)},Q:function(e){return Math.ceil((e.getMonth()+1)/3)},D:function(e){return e.getDate()},DD:function(e){return f(e.getDate(),2)},DDD:function(e){return a(e)},DDDD:function(e){return f(a(e),3)},d:function(e){return e.getDay()},E:function(e){return e.getDay()||7},W:function(e){return r(e)},WW:function(e){return f(r(e),2)},YY:function(e){return f(e.getFullYear(),4).substr(2)},YYYY:function(e){return f(e.getFullYear(),4)},GG:function(e){return String(o(e)).substr(2)},GGGG:function(e){return o(e)},H:function(e){return e.getHours()},HH:function(e){return f(e.getHours(),2)},h:function(e){var t=e.getHours();return 0===t?12:t>12?t%12:t},hh:function(e){return f(c.h(e),2)},m:function(e){return e.getMinutes()},mm:function(e){return f(e.getMinutes(),2)},s:function(e){return e.getSeconds()},ss:function(e){return f(e.getSeconds(),2)},S:function(e){return Math.floor(e.getMilliseconds()/100)},SS:function(e){return f(Math.floor(e.getMilliseconds()/10),2)},SSS:function(e){return f(e.getMilliseconds(),3)},Z:function(e){return d(e.getTimezoneOffset(),":")},ZZ:function(e){return d(e.getTimezoneOffset())},X:function(e){return Math.floor(e.getTime()/1e3)},x:function(e){return e.getTime()}};function u(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|]$/g,""):e.replace(/\\/g,"")}function d(e,t){t=t||"";var n=e>0?"-":"+",a=Math.abs(e),r=a%60;return n+f(Math.floor(a/60),2)+t+f(r,2)}function f(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return n}e.exports=function(e,t,n){var a=t?String(t):"YYYY-MM-DDTHH:mm:ss.SSSZ",r=(n||{}).locale,o=s.format.formatters,d=s.format.formattingTokensRegExp;r&&r.format&&r.format.formatters&&(o=r.format.formatters,r.format.formattingTokensRegExp&&(d=r.format.formattingTokensRegExp));var f=i(e);return l(f)?function(e,t,n){var a,r,o=e.match(n),i=o.length;for(a=0;a<i;a++)r=t[o[a]]||c[o[a]],o[a]=r||u(o[a]);return function(e){for(var t="",n=0;n<i;n++)o[n]instanceof Function?t+=o[n](e,c):t+=o[n];return t}}(a,o,d)(f):"Invalid Date"}},function(e,t,n){"use strict";var a=n(0),r=n(3),o=n.n(r),i=n(21);t.a=Object(i.b)((function(e){var t=e.id,n=e.className,r=e.children,i=a.default.classNames("fancyTable c-border-heavy",n);return o.a.createElement("div",{className:i,id:t},r)}))},function(e,t,n){"use strict";var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(0),m=n(3),h=n.n(m),g=n(34),y=n(4);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var E=function(e){s()(n,e);var t=v(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){this.createObservables({isFocused:this.props.focused||!1})}},{key:"onMount",value:function(){var e=this,t=this.refs.input;this.props.value&&(t.value=this.props.value),this.props.focused&&requestAnimationFrame((function(){t&&(t.focus(),void 0!==e.props.selectionStart&&(t.selectionStart=e.props.selectionStart),void 0!==e.props.selectionEnd&&(t.selectionEnd=e.props.selectionEnd),t.scrollTop=0)}))}},{key:"onUnmount",value:function(){this.isFocused.get()&&this.onBlur()}},{key:"focus",value:function(){this.refs.input.focus()}},{key:"blur",value:function(){this.refs.input.blur()}},{key:"getValue",value:function(){return this.refs.input.value}},{key:"setValue",value:function(e){this.refs.input.value=e}},{key:"getSelectionStart",value:function(){return this.refs.input.selectionStart}},{key:"getSelectionEnd",value:function(){return this.refs.input.selectionEnd}},{key:"onFocus",value:function(e){this.isFocused.set(!0),this.props.onEscape&&(this.__hotkeyEscape=y.default.hotkeys.pushStackEscape(this.handleEscapeKey)),this.props.onFocus&&this.props.onFocus(e)}},{key:"onBlur",value:function(e){this.isFocused.set(!1),this.__hotkeyEscape&&(y.default.hotkeys.popStack(this.__hotkeyEscape),this.__hotkeyEscape=void 0),this.props.onBlur&&this.props.onBlur(e)}},{key:"onKeyPress",value:function(e){this.props.onKeyPress&&this.props.onKeyPress(e)}},{key:"handleEscapeKey",value:function(){this.props.onEscape&&this.props.onEscape()}},{key:"render",value:function(){var e=this.props,t=p.default.classNames("fancyTextarea c-background c-foreground",e.className),n=!!e.spellCheck||null,a={fontSize:e.fontSize,height:e.height||150,margin:void 0!==e.margin?e.margin:"16px 0",overflow:e.height<=34&&"hidden"};return h.a.createElement("textarea",{className:t,style:a,ref:"input",readOnly:!!e.isReadOnly,spellCheck:n,onClick:e.onClick,onChange:e.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:e.onKeyDown,onKeyPress:e.onKeyPress,placeholder:e.placeholder,tabIndex:e.tabIndex})}}]),n}(g.a);t.a=E},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(3),o=c(n(314)),i=c(n(304)),l=c(n(295)),s=c(n(298));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=(0,l.default)((function(e,t){return function(n){var l=(0,s.default)(n),c="function"===typeof e?e:function(t,n){return!(0,i.default)((0,o.default)(t,e),(0,o.default)(n,e))};return function(e){function n(){var a,r;u(this,n);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return a=r=d(this,e.call.apply(e,[this].concat(i))),r.computedProps=t(r.props),d(r,a)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),n.prototype.componentWillReceiveProps=function(e){c(this.props,e)&&(this.computedProps=t(e))},n.prototype.render=function(){return l(a({},this.props,this.computedProps))},n}(r.Component)}}),"withPropsOnChange")},function(e,t,n){"use strict";t.__esModule=!0;var a,r=n(399),o=(a=r)&&a.__esModule?a:{default:a};t.default=o.default},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){var a=n(296);e.exports=function(e,t){var n=a(e),r=a(t);return n.getTime()<r.getTime()}},function(e,t,n){var a=n(296);e.exports=function(e){var t=a(e);return t.setHours(0,0,0,0),t}},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(3),o=l(n(295)),i=l(n(298));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=(0,o.default)((function(e,t,n){return function(o){var l=(0,i.default)(o);return function(r){function o(){var e,t;s(this,o);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return e=t=c(this,r.call.apply(r,[this].concat(i))),t.state={stateValue:"function"===typeof n?n(t.props):n},t.updateStateValue=function(e,n){return t.setState((function(t){var n=t.stateValue;return{stateValue:"function"===typeof e?e(n):e}}),n)},c(t,e)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r),o.prototype.render=function(){var n;return l(a({},this.props,((n={})[e]=this.state.stateValue,n[t]=this.updateStateValue,n)))},o}(r.Component)}}),"withState")},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=i(n(295)),o=i(n(310));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)((function(e){return(0,o.default)((function(t){return a({},t,"function"===typeof e?e(t):e)}))}),"withProps")},function(e,t,n){"use strict";t.__esModule=!0;var a=o(n(295)),r=o(n(298));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,a.default)((function(e){return function(t){var n=(0,r.default)(t);return function(t){return n(e(t))}}}),"mapProps")},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];return t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}},function(e,t,n){"use strict";t.__esModule=!0;var a={fromESObservable:null,toESObservable:null};t.config={fromESObservable:function(e){return"function"===typeof a.fromESObservable?a.fromESObservable(e):e},toESObservable:function(e){return"function"===typeof a.toESObservable?a.toESObservable(e):e}};t.default=function(e){a=e}},function(e,t,n){"use strict";t.__esModule=!0;t.default=function(e){return Boolean(e&&e.prototype&&"object"===typeof e.prototype.isReactComponent)}},function(e,t,n){"use strict";t.__esModule=!0;t.default=function(e,t){for(var n={},a=0;a<t.length;a++){var r=t[a];e.hasOwnProperty(r)&&(n[r]=e[r])}return n}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var a=!("undefined"===typeof window||!window.document||!window.document.createElement);t.default=a,e.exports=t.default},function(e,t,n){var a=n(296);e.exports=function(e,t){var n=a(e),r=a(t);return n.getTime()>r.getTime()}},function(e,t,n){var a=n(422);e.exports=function(e){return a(e,{weekStartsOn:1})}},function(e,t,n){"use strict";t.__esModule=!0;t.default=function(e,t){for(var n=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,[]),a=0;a<t.length;a++){var r=t[a];n.hasOwnProperty(r)&&delete n[r]}return n}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(3),r=i(n(295)),o=i(n(298));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=(0,r.default)((function(e){return function(t){var n=(0,o.default)(t);return function(t){function a(){return l(this,a),s(this,t.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),a.prototype.shouldComponentUpdate=function(t){return e(this.props,t)},a.prototype.render=function(){return n(this.props)},a}(a.Component)}}),"shouldUpdate")},function(e,t,n){"use strict";t.__esModule=!0;t.default=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":void 0}},function(e,t,n){"use strict";t.__esModule=!0;var a,r=n(295),o=(a=r)&&a.__esModule?a:{default:a};t.default=(0,o.default)((function(e,t){return function(n){return n[e]=t,n}}),"setStatic",!1)},function(e,t,n){"use strict";n.r(t),function(e,a){var r,o=n(456);r="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:a;var i=Object(o.a)(r);t.default=i}.call(this,n(83),n(455)(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(3);function r(e,t,n){Object(a.useEffect)((function(){var t=function(t){return e[t.normCode]&&e[t.normCode](t)};return window.addEventListener(n,t),function(){window.removeEventListener(n,t)}}),t)}var o=function(e,t){return r(e,t,"keydown")}},function(e,t,n){"use strict";var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(0),m=n(4),h=n(3),g=n.n(h),y=n(34),v=n(30),E=n(20),C=n(81);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var _=function(e){s()(n,e);var t=b(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){this.refInputEmails=g.a.createRef()}},{key:"getState",value:function(){var e=m.default.billingManager;return{validBilling:e._hasValidBillingData,premiumStatus:e._premiumStatus,inviteEmailSuccess:e.inviteEmailSuccess,inviteEmailError:e.inviteEmailError,inviteCodeError:e.inviteCodeError}}},{key:"onTapInviteUrl",value:function(e){var t=e.target;t!==document.activeElement&&(v.default.selectElement(t),e.preventDefault(),p.default.sendEvent("Billing","TapInviteUrl"))}},{key:"inviteEmails",value:function(){for(var e=0,t=this.refInputEmails.current.getTokens(),n=[],a=0;a<t.length;a++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;n.push(t[a].email)}m.default.billingManager.sendInviteEmail(n)}},{key:"render",value:function(){var e=m.default.billingManager,t=this.state;return g.a.createElement("span",{className:"new-modal-group"},g.a.createElement("div",{className:"new-modal-title"},g.a.createElement("div",{className:"title"},"Share Moo.do with your friends"),g.a.createElement("div",{className:"subtext center"},"Thank you for spreading the ",g.a.createElement("i",{className:"icon-heart red"}))),g.a.createElement("div",{className:"new-modal-center"},g.a.createElement("div",null,g.a.createElement("div",{className:"subtitle"},"Social"),g.a.createElement("span",{className:"shareIcons"},g.a.createElement(E.a,{iconSize:22,icon:"icon-twitter",tooltip:"@MooDoApp",onClick:e.shareTwitter.bind(e)}),g.a.createElement(E.a,{iconSize:22,marginLeft:16,marginRight:16,icon:"icon-facebook",tooltip:"@MooDoApp",onClick:e.shareFacebook.bind(e)}),g.a.createElement(E.a,{iconSize:22,icon:"icon-google-plus",tooltip:"@MooDoApp",onClick:e.shareGoogle.bind(e)})),g.a.createElement("br",null),g.a.createElement("br",null),g.a.createElement("div",{className:"subtitle"},"Share Link"),g.a.createElement("div",{className:"subtext"},e.getSelectText()),g.a.createElement(C.a,{display:"inline-block",width:280,height:36,value:e.getInviteUrl(),onMouseDown:this.onTapInviteUrl,readonly:!0}),g.a.createElement("br",null),g.a.createElement("br",null),g.a.createElement("div",{className:"subtitle"},"Share by email"),g.a.createElement("div",{className:"subtext"},"Separate multiple email addresses with commas."),g.a.createElement(C.a,{ref:this.refInputEmails,width:350,buttonWidth:70,height:36,autocompleteMode:"email",placeholder:"Add friends' email addresses",buttonText:"SEND",onButtonClick:this.inviteEmails}),(t.inviteEmailSuccess||t.inviteEmailError)&&g.a.createElement("div",{id:"inviteEmailMessage",className:p.default.classNames({success:t.inviteEmailSuccess},{error:t.inviteEmailError})},t.inviteEmailSuccess||t.inviteEmailError))))}}]),n}(y.a);t.a=_},function(e,t,n){var a=n(119),r=n(367);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(3);function r(e,t){var n=Object(a.useRef)();n.current||(n.current=e.listen(t)),Object(a.useEffect)((function(){return function(){var e;null===(e=n.current)||void 0===e||e.dispose(),n.current=void 0}}),[])}},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(1),m=n(0),h=n(3),g=n.n(h),y=n(4),v=n(65),E=n(43),C=n(81),b=n(328),_=n(107),k=n(55),w=n(15),x=n(25),D=n(34),S=n(151),M=n(98);function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var P=function(e){s()(n,e);var t=T(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){var e=this.props;this.refVirtualList=Object(h.createRef)(),this.createObservables({selectedIndex:e.elementInput||e.fromPane||e.onlyMatches?0:-1,expanded:-1,selectedDocument:w.a.getDefaultDocument()})}},{key:"onMount",value:function(){if(this.hasOwnInput()){var e=this.props,t=this.refs.input;t&&(t.focus(),t.updateAutocomplete(e.item||e.items&&e.items[0]))}document.addEventListener("keydown",this.onInputKeyDown,!0)}},{key:"componentWillReceiveProps",value:function(e){this.props.matches!==e.matches&&this.updateState(e)}},{key:"onUnmount",value:function(){document.removeEventListener("keydown",this.onInputKeyDown,!0)}},{key:"onBeforeChanged",value:function(e,t){var n=this.refs;if(e.matches!==t.matches&&!e.hasSpecialMatches){this.expanded.set(-1,!1),e.expanded=-1;var a=!n.input||!this.props.allowCustom&&n.input.getValue()&&this.state.matches.length>0?0:-1;this.selectedIndex.set(a,!1),e.selectedIndex=a}}},{key:"onAfterChanged",value:function(e,t){e.matches.length>t.matches.length&&setTimeout(function(){this.refs.contextMenu&&this.refs.contextMenu.updateState()}.bind(this),0)}},{key:"getState",value:function(e){var t=this.getSpecialMatches();return{matches:e.matches||t||k.a.matches,hasSpecialMatches:!!t,owner:k.a.owner}}},{key:"getClassNameForType",value:function(e){return("contact"===e?"autocomplete_contact":"date"===e&&"autocomplete_date")||"gmailLabel"===e&&"autocomplete_gmailLabel"||"header"===e&&"autocomplete_header"||"item"===e&&"autocomplete_item"||"snooze"===e&&"autocomplete_snooze"||"tag"===e&&"autocomplete_tag"}},{key:"updateTextFromIndex",value:function(){if(this.hasOwnInput()){var e=this.refs.input,t=this.selectedIndex.get(),n="";if(t>=0){var a=this.state.matches[t];n=this.getInsertText(a)}e.setValue(n),e.selectEnd()}}},{key:"onInputKeyDown",value:function(e){var t=this.state.matches,n=this.props;if(n.allowCustom&&e.keyCode===p.a.KeyCode.Enter)this.onSelected(),m.default.preventDefault(e),m.default.stopPropagation(e);else if(t.length>0){var a=this.selectedIndex.get();if(t.length>1&&(e.keyCode===p.a.KeyCode.ArrowDown||e.keyCode===p.a.KeyCode.ArrowUp)){var r,o;if(e.keyCode===p.a.KeyCode.ArrowUp)"header"===(null===(r=t[--a])||void 0===r?void 0:r.type)&&a--,a<(n.allowCustom?-1:0)&&(a=t.length-1),"header"===(null===(o=t[a])||void 0===o?void 0:o.type)&&a++;else if(e.keyCode===p.a.KeyCode.ArrowDown){var i;"header"===(null===(i=t[++a])||void 0===i?void 0:i.type)&&a++,a>t.length-1&&(a=n.allowCustom?-1:0)}if(a!==this.selectedIndex.get()&&(this.selectedIndex.set(a),this.updateTextFromIndex(),a>=0))try{this.refVirtualList.current.scrollToIndex({index:a,align:e.keyCode===p.a.KeyCode.ArrowDown?"end":"start",behavior:"auto"})}catch(l){}m.default.preventDefault(e)}else e.keyCode===p.a.KeyCode.ArrowRight?this.expanded.set(a):e.keyCode===p.a.KeyCode.Enter&&a>=0&&(this.onSelected(),m.default.preventDefault(e),m.default.stopPropagation(e))}}},{key:"onEscapeKey",value:function(){this.hide()}},{key:"hide",value:function(){k.a.hide()}},{key:"onMouseMove",value:function(e){this.selectedIndex.set(e)}},{key:"onClick",value:function(e){this.selectedIndex.set(e),this.updateTextFromIndex(),this.onSelected()}},{key:"onButtonClick",value:function(){this.onSelected()}},{key:"hasOwnInput",value:function(){return!this.props.elementInput&&!this.props.fromPane&&!this.props.onlyMatches}},{key:"onSelected",value:function(){var e,t,n=this.props,a=this.state,r=this.refs.input,o={owner:a.owner,index:n.indexInPane};if(n.allowCustom)(n.allowEmpty||r.getValue())&&(t={text:r.getValue()});else{var i=this.selectedIndex.get();t=this.state.matches[i]}t&&("contact"===t.type&&"email"===this.props.mode?o.token=t:"item"===t.type?o.item=t.item:e=k.a.insertMatch(this.getInsertText(t)),e&&(o.value=e.text,o.offset=e.offset),n.onSelected?n.onSelected(o):a.owner&&a.owner.onAutocompleteSelected&&a.owner.onAutocompleteSelected(o),this.hide())}},{key:"getInsertText",value:function(e){return"email"===this.props.mode?e.text+" <"+e.email+">":"snooze"===e.type?e.insertText:e.text}},{key:"insertHighlight",value:function(e){var t=[],n=k.a.getText(),a=e.toUpperCase().indexOf(n.toUpperCase());return a>=0&&n.length>0?(a>0&&t.push(e.substr(0,a)),t.push(g.a.createElement("span",{key:"match",className:"ac-match c-bg-autocomplete-highlight"},e.substr(a,n.length))),e.length>a+n.length&&t.push(e.substr(a+n.length))):t=e,t}},{key:"onClickExpand",value:function(e,t){this.expanded.set(e),t.stopPropagation()}},{key:"onClickExpandedInput",value:function(e){e.stopPropagation()}},{key:"onSelectedAddChild",value:function(){var e=this.props,t=this.state,n=t.expanded,a=t.matches[n];if(e.onSelected){var r={item:a.item,subItemText:this.refs.inputAdd.getValue()};e.onSelected(r)}}},{key:"getSpecialMatches",value:function(){if("snooze"===this.props.mode){var e,t,n,a=new Date,r=a.getHours(),o=a.getDay(),i=x.a.getTodayPlusMS(p.a.MSPerHour*Math.min(r+3,23+59/60));e=r<18?x.a.getTodayPlusMS(19*p.a.MSPerHour):x.a.getTodayPlusMS(p.a.MSPerHour*Math.min(r+2,23+59/60)),t=o<6?x.a.getTodayPlusMS(p.a.MSPerDay*(6-a.getDay())+9*p.a.MSPerHour):6===o?x.a.getTodayPlusMS(1*p.a.MSPerDay+9*p.a.MSPerHour):x.a.getTodayPlusMS(p.a.MSPerHour*Math.min(r+3,23+59/60)),n=o>0?x.a.getTodayPlusMS(p.a.MSPerDay*(8-a.getDay())+9*p.a.MSPerHour):x.a.getTodayPlusMS(p.a.MSPerDay+9*p.a.MSPerHour);var l=x.a.getTodayPlusMS(p.a.MSPerDay+9*p.a.MSPerHour),s=x.a.getTodayPlusMS(p.a.MSPerDay+19*p.a.MSPerHour);return[{type:"snooze",icon:"icon-access_time",iconColor:"#f30",text:"Later Today",insertText:"Today "+i.toString(y.default.International.getFormat(p.a.DFormat.ShortTime)),date:i,showDay:!1},{type:"snooze",icon:"icon-access_time",iconColor:"#fa0",text:"Tonight",insertText:"Today "+e.toString(y.default.International.getFormat(p.a.DFormat.ShortTime)),date:e,showDay:!1},{type:"snooze",icon:"icon-access_time",iconColor:"#fd0",text:"Tomorrow Morning",insertText:"Tomorrow "+l.toString(y.default.International.getFormat(p.a.DFormat.ShortTime)),date:l,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:"#2a6",text:"Tomorrow Night",insertText:"Tomorrow "+s.toString(y.default.International.getFormat(p.a.DFormat.ShortTime)),date:s,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:m.default.colorBlue,text:"This Weekend",insertText:t.toString(y.default.International.getFormat(p.a.DFormat.NoPadShortDayTime)),date:t,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:"#b0d",text:"Next Week",insertText:n.toString(y.default.International.getFormat(p.a.DFormat.NoPadShortDayTime)),date:n,showDay:!0}]}}},{key:"onCloseButton",value:function(){y.default.menus.closeContextMenu()}},{key:"setText",value:function(e){this.refs.input.setValue(e)}},{key:"onAutocompleteDateChange",value:function(e){this.setText(e),this.refs.input.selectEnd()}},{key:"onChangeDocument",value:function(e){this.selectedDocument.set(w.a.getDocumentById(e))}},{key:"renderRightContent",value:function(){var e=this.state;if(e.matches.length>0&&e.selectedIndex>=0){var t,n=e.matches[e.selectedIndex];if("contact"===n.type&&(t=g.a.createElement(b.a,{contact:n})),t)return g.a.createElement("div",{className:"newAutocompleteRightContent c-border"},t)}}},{key:"renderObject",value:function(e,t){var n;switch(e.type){case"header":return g.a.createElement("span",{className:"autocompleteHeader"},e.text);case"contact":if(e.text&&e.email){n=this.insertHighlight(e.text);var a=this.insertHighlight(" <"+e.email+">");return g.a.createElement("span",null,g.a.createElement("span",{className:"contact c-contact"},n),a)}if(e.email)return e.email;if(e.text)return n=this.insertHighlight(e.text),g.a.createElement("span",{className:"contact c-contact"},n);break;case"tag":return n=this.insertHighlight(e.text),g.a.createElement(g.a.Fragment,null,g.a.createElement("span",{className:"tag c-tag"},n),g.a.createElement("span",{className:"number c-foreground-faded"},e.count));case"snooze":var r=(e.showDay?e.date.toString("dddd")+" ":"")+e.date.toString("h:mm tt");return g.a.createElement(g.a.Fragment,null,g.a.createElement("span",{className:"snoozeDate"},e.text),g.a.createElement("span",{className:"snoozeDetail"},r));case"item":var o=e.item,i=m.default.parentTextForItem(o),l=t===this.state.expanded,s=m.default.classNames("autocompleteItem flexbox",{hasParent:!!i},{itemExpanded:l}),c="move"===this.props.mode;return g.a.createElement("div",{className:s},g.a.createElement("div",{className:"autocompleteItemInside f1",style:{width:360}},i&&g.a.createElement("div",{className:"parentPath c-foreground-very-faded"},i),g.a.createElement(_.a,{key:o.id,item:o}),c&&l&&g.a.createElement(C.a,{ref:"inputAdd",placeholder:"Add subitem",buttonText:"MOVE TO CHILD",focused:!0,onButtonClick:this.onSelectedAddChild,onClick:this.onClickExpandedInput})));case"gmailLabel":return n=this.insertHighlight(e.text),g.a.createElement("span",null,n);default:try{m.default.PAssert(552,!1,"Invalid insert text",e.type)}catch(u){m.default.reportError(u)}}}},{key:"renderMatch",value:function(e){var t=this.state,n=t.selectedIndex,a=t.matches[e];if(a){var r=m.default.classNames("c-border-light",this.getClassNameForType(a.type),{selected:e===n});return g.a.createElement(E.a,{key:e,icon:a.icon,iconColor:a.iconColor,className:r,onMouseMove:"header"!==a.type?this.onMouseMove.bind(this,e):void 0,canClose:!1,noMouseUp:!0,onClick:"header"!==a.type?this.onClick.bind(this,e):void 0},this.renderObject(a,e))}}},{key:"render",value:function(){var e,t,n=this.state,a=n.matches,r=n.selectedIndex,o=n.expanded,i=n.selectedDocument,l=this.props,s=l.text,c=l.buttonText;this.hasOwnInput()&&(t=!!l.allowEmpty||(l.allowCustom?void 0:r>=0));var u,d=m.default.classNames("newAutocomplete flexbox",l.className,{flexvert:this.hasOwnInput()},{hasOwnInput:this.hasOwnInput()},{expanded:-1!==o});if(this.hasOwnInput()){var f=l.documentSelector&&i.getRootItem()||l.item||l.items&&l.items[0];u=g.a.createElement("div",{className:"newAutocompleteTopBar c-border-heavy"},l.documentSelector&&g.a.createElement("div",{className:"flexbox",style:{padding:8}},g.a.createElement("div",{style:{paddingRight:16}},"Document:"),g.a.createElement(S.a,{className:"f1",defaultValue:i.id,onChange:this.onChangeDocument},w.a.getDocumentsArray().map((function(e){return g.a.createElement("option",{key:e.id,value:e.id},e.text.get())})))),g.a.createElement(C.a,{ref:"input",display:"block",className:"f1",placeholder:s,autocompleteMode:l.mode,padding:{left:16,right:16},tokens:l.tokens,onTokenRemoved:l.onTokenRemoved,border:!1,buttonText:c,onEscape:this.onEscapeKey,buttonEnabled:t,onButtonClick:this.onButtonClick,autocompleteItem:f}))}var p=g.a.createElement(M.a,{className:"autocompleteMatches h-full f1",items:a,renderItem:this.renderMatch,defaultItemSize:"item"===(null===a||void 0===a||null===(e=a[0])||void 0===e?void 0:e.type)?46:28,ref:this.refVirtualList});a.map((function(e){return"item"===e.type?46:28}));var h=Math.min(m.default.sum(a.map((function(e){return"item"===e.type?46:28})))+(this.hasOwnInput()?100:0),600);return l.onlyMatches?p:g.a.createElement(v.a,{className:d,id:l.id,element:l.elementDisplay,maxWidth:"none",positionOffset:l.positionOffset,height:h,overflowHeight:"shrink",ref:"contextMenu"},u,p,this.renderRightContent())}}]),n}(D.a);t.default=P},function(e,t,n){"use strict";var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(0),m=n(4),h=n(3),g=n.n(h);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var v=function(e){s()(n,e);var t=y(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"onClickNumber",value:function(e,t){m.default.menus.closeContextMenu(),p.default.openUrl(e.link,t,!0)}},{key:"onClickEmail",value:function(e,t){var n=m.default.pluginManager.getPluginGmail();if(n.isActive()){m.default.menus.closeContextMenu();var a={to:[{text:"",email:e.address}]};m.default.menus.openComposeEmail(n,{initData:a})}else p.default.openUrl(e.link,t,!0)}},{key:"render",value:function(){var e=this,t=this.props.contact;return g.a.createElement("div",{className:"contactPreview"},g.a.createElement("div",{className:"contactName c-border"},t.text),t.phoneNumbers&&t.phoneNumbers.map((function(t){return g.a.createElement("div",{className:"contactRow contactPhone",key:t.number},g.a.createElement("i",{className:"contactButton icon-phone c-foreground-super-faded"}),g.a.createElement("span",{className:"contactNumber link",onClick:e.onClickNumber.bind(e,t)},t.number),g.a.createElement("span",{className:"phoneType c-foreground-faded"},t.type))})),t.emails&&t.emails.map((function(t){return g.a.createElement("div",{className:"contactRow contactEmail",key:t.address},g.a.createElement("i",{className:"icon-mail_outline contactButton c-foreground-super-faded"}),g.a.createElement("span",{className:"contactEmail link",onClick:e.onClickEmail.bind(e,t)},t.address))})))}}]),n}(n(34).a);t.a=v},function(e,t,n){"use strict";var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(1),m=n(4),h=n(3),g=n.n(h),y=n(34),v=n(166);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var C=function(e){s()(n,e);var t=E(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){var e=this.props,t=e.item.hasNote()&&e.item.getNote(),n=t?t.getParsedText():void 0;this.createObservables({hasValue:!!n}),this.refNoteText=g.a.createRef()}},{key:"onUnmount",value:function(){clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=void 0,this._saveNote()}},{key:"getValue",value:function(){return this.refNoteText.current.getValue()}},{key:"_saveNote",value:function(){if(this.props.shouldSave){m.default.PaneUpdateBatcher.beginUpdateItems();var e=this.props.item,t=e.hasNote()&&e.getNote(),n=this.refNoteText.current.getValue();!t&&n&&(t=e.createNote()),t&&(n!==t.getRawText()&&t.setText(n,p.a.ChangeType.Local),n||e.setNote(void 0,p.a.ChangeType.Local)),m.default.PaneUpdateBatcher.commitUpdateItems()}}},{key:"onChange",value:function(){var e=this,t=this.refNoteText.current.getValue().length>0;t!==this.hasValue.get()&&(this.hasValue.set(t),t&&this.props.onValueSet&&requestAnimationFrame((function(){return e.props.onValueSet}))),clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=setTimeout(this._saveNote,8e3)}},{key:"render",value:function(){var e=this.props,t=m.default.DisplaySettings.fontSize(),n=e.item.hasNote()&&e.item.getNote(),a=n?n.getParsedText():void 0,r=n?void 0:"Add note",o=this.state.hasValue?e.heightValue:e.heightEmpty,i=!e.item.canHaveNote();return g.a.createElement(v.a,{ref:this.refNoteText,className:e.className,value:a,placeholder:r,focused:e.focused,onChange:this.onChange,onKeyDown:e.onKeyDown,onKeyPress:e.onKeyPress,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,fontSize:t,margin:0,height:o,tabIndex:e.tabIndex,richText:!!e.richText,onMaximize:e.richText&&e.onMaximize,isMaximized:e.richText&&e.isMaximized,onClickClose:e.onClickClose,isReadOnly:i})}}]),n}(y.a);t.a=C},function(e,t,n){"use strict";t.__esModule=!0;var a=o(n(295)),r=o(n(298));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,a.default)((function(e){return function(t){var n=(0,r.default)(t),a=function(e){return n(e)};return a.defaultProps=e,a}}),"defaultProps")},function(e,t,n){"use strict";t.__esModule=!0;var a,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n(3),i=(a=o)&&a.__esModule?a:{default:a};t.default=function(e,t,n,a,o){if(!e&&t)return n(o?r({},a,{children:o}):a);var l=n;return o?i.default.createElement(l,a,o):i.default.createElement(l,a)}},function(e,t,n){"use strict";t.__esModule=!0;var a,r=n(313),o=(a=r)&&a.__esModule?a:{default:a};t.default=function(e){return Boolean("function"===typeof e&&!(0,o.default)(e)&&!e.defaultProps&&!e.contextTypes&&!0)}},function(e,t){e.exports=function(e){return e instanceof Date}},function(e,t,n){var a=n(296);e.exports=function(e){return a(e).getDay()}},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=c(n(3)),o=c(n(40)),i=c(n(408)),l=c(n(412)),s=n(336);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}s.nameShape.isRequired,o.default.bool,o.default.bool,o.default.bool,(0,s.transitionTimeout)("Appear"),(0,s.transitionTimeout)("Enter"),(0,s.transitionTimeout)("Leave");var f=function(e){function t(){var n,a;u(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=d(this,e.call.apply(e,[this].concat(i))),a._wrapChild=function(e){return r.default.createElement(l.default,{name:a.props.transitionName,appear:a.props.transitionAppear,enter:a.props.transitionEnter,leave:a.props.transitionLeave,appearTimeout:a.props.transitionAppearTimeout,enterTimeout:a.props.transitionEnterTimeout,leaveTimeout:a.props.transitionLeaveTimeout},e)},d(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return r.default.createElement(i.default,a({},this.props,{childFactory:this._wrapChild}))},t}(r.default.Component);f.displayName="CSSTransitionGroup",f.propTypes={},f.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=f,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};r(n(3));var a=r(n(40));function r(e){return e&&e.__esModule?e:{default:e}}t.nameShape=a.default.oneOfType([a.default.string,a.default.shape({enter:a.default.string,leave:a.default.string,active:a.default.string}),a.default.shape({enter:a.default.string,enterActive:a.default.string,leave:a.default.string,leaveActive:a.default.string,appear:a.default.string,appearActive:a.default.string})])},function(e,t,n){var a=n(296),r=n(317);e.exports=function(e){var t=a(e),n=t.getFullYear(),o=new Date(0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);var i=r(o),l=new Date(0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);var s=r(l);return t.getTime()>=i.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(3),o=l(n(298)),i=l(n(295));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=(0,i.default)((function(e){return function(t){var n,i,l=(0,o.default)(t);return n=function(e){function t(){var n,a;s(this,t);for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];return n=a=c(this,e.call.apply(e,[this].concat(o))),i.call(a),c(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillReceiveProps=function(){this.cachedHandlers={}},t.prototype.render=function(){return l(a({},this.props,this.handlers))},t}(r.Component),i=function(){var t=this;this.cachedHandlers={},this.handlers=function(e,t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=t(e[a],a));return n}("function"===typeof e?e(this.props):e,(function(e,n){return function(){var a=t.cachedHandlers[n];if(a)return a.apply(void 0,arguments);var r=e(t.props);return t.cachedHandlers[n]=r,r.apply(void 0,arguments)}}))},n}}),"withHandlers")},function(e,t,n){"use strict";t.__esModule=!0;var a=l(n(319)),r=l(n(304)),o=l(n(295)),i=l(n(314));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.default)((function(e){return(0,a.default)((function(t,n){return!(0,r.default)((0,i.default)(n,e),(0,i.default)(t,e))}))}),"onlyUpdateForKeys")},function(e,t,n){"use strict";t.__esModule=!0;var a=o(n(331)),r=o(n(332));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){var o=(0,r.default)(e),i=t&&t.hasOwnProperty("key");return(0,a.default)(i,o,e,t,n)}},function(e,t,n){"use strict";t.__esModule=!0,t.componentFromStreamWithConfig=void 0;var a,r=n(3),o=n(342),i=n(322),l=(a=i)&&a.__esModule?a:{default:a},s=n(312);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var d=(t.componentFromStreamWithConfig=function(e){return function(t){return function(n){function a(){var r,i,s;c(this,a);for(var d=arguments.length,f=Array(d),p=0;p<d;p++)f[p]=arguments[p];return i=s=u(this,n.call.apply(n,[this].concat(f))),s.state={vdom:null},s.propsEmitter=(0,o.createChangeEmitter)(),s.props$=e.fromESObservable(((r={subscribe:function(e){return{unsubscribe:s.propsEmitter.listen((function(t){t?e.next(t):e.complete()}))}}})[l.default]=function(){return this},r)),s.vdom$=e.toESObservable(t(s.props$)),u(s,i)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,n),a.prototype.componentWillMount=function(){var e=this;this.subscription=this.vdom$.subscribe({next:function(t){e.setState({vdom:t})}}),this.propsEmitter.emit(this.props)},a.prototype.componentWillReceiveProps=function(e){this.propsEmitter.emit(e)},a.prototype.shouldComponentUpdate=function(e,t){return t.vdom!==this.state.vdom},a.prototype.componentWillUnmount=function(){this.propsEmitter.emit(),this.subscription.unsubscribe()},a.prototype.render=function(){return this.state.vdom},a}(r.Component)}})(s.config);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createChangeEmitter=function(){var e=[],t=e;function n(){t===e&&(t=e.slice())}return{listen:function(e){if("function"!==typeof e)throw new Error("Expected listener to be a function.");var a=!0;return n(),t.push(e),function(){if(a){a=!1,n();var r=t.indexOf(e);t.splice(r,1)}}},emit:function(){for(var n=e=t,a=0;a<n.length;a++)n[a].apply(n,arguments)}}}},function(e,t,n){var a=n(119),r=n(459);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(0),m=n(1),h=n(10),g=n(3),y=n.n(g),v=n(34),E=n(297),C=n(20),b=n(90);function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var k=function(e){s()(n,e);var t=_(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){this.createObservables({isLoaded:!1,error:!1}),this.refModal=y.a.createRef()}},{key:"onLoaded",value:function(){this.isLoaded.set(!0)}},{key:"onError",value:function(){this.isLoaded.set(!0,!1),this.error.set("Could not load image")}},{key:"openExternal",value:function(){this.props.buttonAction?this.props.buttonAction():p.default.openUrl(this.props.src),this.close()}},{key:"close",value:function(){this.refModal.current.close()}},{key:"render",value:function(){var e=this.props,t=this.state,n=e.src,a={maxWidth:Math.min(.95*h.a.windowWidth(),900),maxHeight:Math.min(.95*h.a.windowHeight()-30,900),visibility:!t.isLoaded&&"hidden"},r=p.default.classNames({loaded:t.isLoaded});return y.a.createElement(E.a,{id:"modalLightbox",className:r,closeButton:!1,scrollable:!1,modalID:m.a.Modals.Lightbox,ref:this.refModal},y.a.createElement("div",{key:"content"},!t.isLoaded&&y.a.createElement(b.a,{center:!0}),!t.error&&y.a.createElement("img",{src:n,style:a,onLoad:this.onLoaded,onError:this.onError,onClick:this.close,ref:"image"}),t.error&&y.a.createElement("div",{className:"lightboxText"},t.error),t.isLoaded&&y.a.createElement(C.a,{id:"lightboxOpen",className:"c-border-heavy",primary:!0,height:30,onClick:this.openExternal},e.buttonText||(h.a.app?"Open in browser":"Open in new tab"))))}}]),n}(v.a);t.default=k},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(35),i=n.n(o),l=n(19),s=n.n(l),c=n(61),u=n.n(c),d=n(1),f=n(3),p=n.n(f),m=n(4),h=n(20),g=n(81),y=n(297),v=n(21),E=n(323);t.default=Object(v.b)((function(e){var t=e.title,n=e.fields,a=e.validate,o=u()(e,["title","fields","validate"]),l=[];n.forEach((function(e,t){l[t]=Object(f.useRef)()}));var c=Object(f.useState)(),v=s()(c,2),C=v[0],b=v[1],_=function(){var e=l.map((function(e){return e.current.getValue()})),t=null===a||void 0===a?void 0:a(e);t?b(t):m.default.menus.closeModal(d.a.Modals.Prompt,e)};return Object(E.a)(i()({},d.a.KeyCode.Enter,_),[]),p.a.createElement(y.a,r()({},o,{id:"modalPrompt",title:t,small:!0,scrollable:!1,modalID:d.a.Modals.Prompt}),p.a.createElement("div",{key:"content"},n.map((function(e,t){return p.a.createElement(g.a,{key:t,focused:0===t,ref:l[t],type:e.type,placeholder:e.placeholder,value:e.value,className:t>0&&"mt-4"})})),C&&p.a.createElement("div",{className:"error mt-2"},C)),p.a.createElement("div",{key:"buttons"},p.a.createElement(h.a,{primary:!0,width:100,onClick:_},"OK"),p.a.createElement(h.a,{width:100,onClick:function(){return m.default.menus.closeModal(d.a.Modals.Prompt)}},"CANCEL")))}))},function(e,t,n){var a=n(119),r=n(366);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,t,n){(t=n(120)(!1)).push([e.i,"._1UykSJDyR4UTDPjn039-LH {\n    line-height: 18px;\n    font-size: 15px;\n}\n._3UMkU_qWXOD231TBqin1oC {\n    border-radius: 16px;\n    width: 42px;\n    height: 20px;\n    padding: 0 2px;\n}\n.UIljFlsy_8nT7shB2ELON {\n    border-radius: 50%;\n    width: 16px;\n    height: 16px;\n    margin: 0 1px;\n}\n._2mg06fP2DkZ0gxrTyyo9Nz {\n    padding-left: 56px;\n}",""]),t.locals={title:"_1UykSJDyR4UTDPjn039-LH",toggleOuter:"_3UMkU_qWXOD231TBqin1oC",toggleInner:"UIljFlsy_8nT7shB2ELON",description:"_2mg06fP2DkZ0gxrTyyo9Nz"},e.exports=t},function(e,t,n){(t=n(120)(!1)).push([e.i,"._2UgicGaVBDko5-eGd3GypU {\n    line-height: 18px;\n    font-size: 15px;\n}",""]),t.locals={title:"_2UgicGaVBDko5-eGd3GypU"},e.exports=t},function(e,t,n){var a=n(119),r=n(369);"string"===typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};a(r,o);e.exports=r.locals||{}},function(e,t,n){(t=n(120)(!1)).push([e.i,"._2YnFeG17Gis_vIFc_Feqy7 {\n    line-height: 30px;\n    border: 1px solid;\n    overflow-x: auto;\n    margin-left: -8px;\n    margin-right: -8px\n}",""]),t.locals={table:"_2YnFeG17Gis_vIFc_Feqy7"},e.exports=t},function(e,t,n){"use strict";n.r(t);var a=n(35),r=n.n(a),o=n(61),i=n.n(o),l=n(4),s=n(3),c=n.n(s),u=n(1),d=n(20),f=n(297),p=n(21),m=n(323);t.default=Object(p.b)((function(e){var t=e.text,n=e.actionText,a=(i()(e,["text","actionText"]),function(){return l.default.menus.closeModal(u.a.Modals.Alert)});return Object(m.a)(r()({},u.a.KeyCode.Enter,a),[]),c.a.createElement(f.a,{id:"modalAlert",closeButton:!1,small:!0,backdropClose:!1,scrollable:!1,modalID:u.a.Modals.Alert},c.a.createElement("div",{key:"content",dangerouslySetInnerHTML:{__html:t}}),c.a.createElement("div",{key:"buttons"},c.a.createElement(d.a,{primary:!0,onClick:a},n||"OKAY")))}))},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(1),m=n(0),h=n(4),g=n(3),y=n.n(g),v=n(34),E=n(20),C=n(90),b=n(297),_=n(66);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var w=null,x=1,D=2,S=3,M=null,T=1,P=2,N=3,O=4,I=5,A=6,R=7,L=8,F=9,j=10,H=["2m4b","gjgm","pmjw","5pm2","vvdg"],G=function(e){s()(n,e);var t=k(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){this._braintreeRequested=!1,this._braintreeLoaded=!1,this._clientTokenRequested=!1,this._clientToken=void 0,this._btClient=void 0,this._btIntegration=void 0,this.createObservables({isSubmitting:!1,isLoading:!0,billingFailureCode:w,signupFailureCode:M,signupErrorMessage:void 0}),this._ensureBraintreeLib(),this._ensureClientToken()}},{key:"onUnmount",value:function(){this._btIntegration&&(this._btIntegration.teardown(),this._btIntegration=void 0)}},{key:"_handlePaymentMethodUpdate",value:function(e){this.props.isUpdate?e&&e.nonce?this._processUpdateNonce(void 0,e.nonce):this._processUpdateNonce({error:!0},void 0):e&&e.nonce?this._processPaymentNonce(void 0,e.nonce):this._processPaymentNonce({error:!0},void 0)}},{key:"_notifyDependencyLoaded",value:function(){var e=this;this._braintreeLoaded&&this._clientToken&&(this._btClient=new braintree.api.Client({clientToken:this._clientToken}),braintree.setup(this._clientToken,"dropin",{container:"braintreeDropin",onPaymentMethodReceived:this._handlePaymentMethodUpdate,onError:function(e){m.default.reportError(e)},onReady:function(t){e.isLoading.set(!1),e._btIntegration=t}}))}},{key:"_notifyDependencyLoadError",value:function(e){this.billingFailureCode.set(e),m.default.reportError(new Error("Client hit error in billing: "+e)),h.default.billingManager.setLastSignupError(e),m.default.sendEvent("Billing","SignupError_"+e)}},{key:"_ensureBraintreeLib",value:function(){var e=this;this._braintreeRequested||(window.braintree?(this._braintreeLoaded=!0,this._notifyDependencyLoaded()):(this._braintreeRequested=!0,m.default.addScriptHack("https://js.braintreegateway.com/v2/braintree.js","braintreeScript",(function(){window.braintree?(e._braintreeLoaded=!0,e._notifyDependencyLoaded()):(e._braintreeRequested=!1,e._notifyDependencyLoadError(x))}),(function(){e._braintreeRequested=!1,e._notifyDependencyLoadError(D)}))))}},{key:"_ensureClientToken",value:function(){var e=this;this._clientTokenRequested||(this._clientTokenRequested=!0,_.a.getBillingToken().then((function(t){t.value?(e._clientToken=t.value.token,e._notifyDependencyLoaded()):e._notifyDependencyLoadError(S)})))}},{key:"_setPaymentResponse",value:function(e){switch(e.code){case p.a.PrivateAPIErrorCodes.UnauthorizedUser:this.signupFailureCode.set(O),this.signupErrorMessage.set(void 0);break;case p.a.PrivateAPIErrorCodes.InvalidParameter:this.signupFailureCode.set(I),this.signupErrorMessage.set(void 0);break;case p.a.PrivateAPIErrorCodes.MissingParameter:this.signupFailureCode.set(A),this.signupErrorMessage.set(void 0);break;case p.a.PrivateAPIErrorCodes.BraintreePaypalBlock:this.signupFailureCode.set(L),this.signupErrorMessage.set(e.data);break;case p.a.PrivateAPIErrorCodes.BraintreeInvalidCCN:this.signupFailureCode.set(F),this.signupErrorMessage.set(e.data);break;case p.a.PrivateAPIErrorCodes.BraintreeUnknown:this.signupFailureCode.set(R),this.signupErrorMessage.set(e.data);break;case p.a.PrivateAPIErrorCodes.AlreadyPremium:this.signupFailureCode.set(j),this.signupErrorMessage.set('Our database shows you as already being a Premium member. Please contact <a href="mailto:support@moo.do">support@moo.do</a>. Sorry for the trouble!');break;default:this.signupFailureCode.set(N),this.signupErrorMessage.set(void 0)}}},{key:"_processUpdateNonce",value:function(e,t){var n=this;m.default.sendEvent("Billing","PremiumUpdate"),!e&&t&&(this.isSubmitting.get()||(this.isSubmitting.set(!0),_.a.updatePlan({nonce:t}).then((function(e){n.isSubmitting.set(!1),e.error?(void 0!==e.errorCode?n._setPaymentResponse({code:e.errorCode}):n.signupErrorMessage.set(e.error),m.default.sendEvent("Billing","PremiumUpdateFAILURE")):(h.default.menus.isModalOpen(n.id)&&n.onClickClose(),h.default.menus.alert({text:"Your payment information has been updated.",actionText:"OKAY"}),m.default.sendEvent("Billing","PremiumUpdateSUCCESS"))}))))}},{key:"_processPaymentNonce",value:function(e,t){var n=this;if(m.default.sendEvent("Billing","PremiumSignup"),!e&&t){this.signupFailureCode.set(M),this.signupErrorMessage.set(void 0);var a=H[h.default.billingManager.getBillingPeriod()];try{m.default.PAssert(954,a,"Must have selected a valid plan to signup")}catch(r){m.default.reportError(r)}a?this.isSubmitting.get()||(this.isSubmitting.set(!0),_.a.purchasePlan({nonce:t,planID:a}).then((function(e){if(n.isSubmitting.set(!1),e.error)void 0!==e.errorCode?n._setPaymentResponse({code:e.errorCode}):n.signupErrorMessage.set(e.error),m.default.sendEvent("Billing","PremiumSignupFAILURE");else{h.default.menus.isModalOpen(n.id)&&n.onClickClose(),h.default.menus.alert({text:"Thank you for signing up for <b>Moo.do</b> Premium!",actionText:"OKAY"}),m.default.sendEvent("Billing","PremiumSignupSUCCESS");var t=m.default.parseInt(h.default.billingManager.getPlanPrice(H.indexOf(a)));m.default.reportAdConversion(p.a.ConversionID.Purchase,t)}}))):(this.signupFailureCode.set(P),this.signupErrorMessage.set(void 0),m.default.sendEvent("Billing","PremiumSignupFAILURE"))}else this.signupFailureCode.set(T),this.signupErrorMessage.set(void 0),m.default.sendEvent("Billing","PremiumSignupFAILURE")}},{key:"onClickSubmit",value:function(){this.refs.form.submit()}},{key:"onClickClose",value:function(){this.refs.modal.close()}},{key:"render",value:function(){var e=this.state,t=e.billingFailureCode||e.signupFailureCode?200:400,n=m.default.classNames("billingSubmit loading20 right",{loading:e.isSubmitting},{disabled:e.isLoading}),a=e.signupErrorMessage?e.signupErrorMessage:"There was an error processing your payment. We will follow up with you shortly.";return y.a.createElement(b.a,{id:"modalBilling",width:400,height:t,scrollable:!1,modalID:p.a.Modals.Billing,ref:"modal"},y.a.createElement("div",{key:"content"},!e.billingFailureCode&&!e.signupFailureCode&&y.a.createElement("form",{id:"billingForm",method:"post",action:"javascript:void(0);",ref:"form"},y.a.createElement("div",{id:"braintreeDropin"}),e.isLoading&&y.a.createElement(C.a,{center:!0},"Loading billing system..."),!e.billingFailureCode&&y.a.createElement("div",{className:n},y.a.createElement("input",{type:"submit",className:"new-modal-button mat-button-raised mat-button-blue",value:"SUBMIT"}))),e.signupFailureCode&&y.a.createElement("div",{id:"billingSignupError",dangerouslySetInnerHTML:{__html:a}}),e.billingFailureCode&&y.a.createElement("div",{id:"billingError"},"There was an error loading our payment system. Please contact support@moo.do with code "+e.billingFailureCode+" or try again in a few minutes.")),y.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},e.billingFailureCode&&y.a.createElement(E.a,{primary:!0,onClick:this.onClickClose},"OK")))}}]),n}(v.a);t.default=G},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(61),i=n.n(o),l=n(7),s=n.n(l),c=n(8),u=n.n(c),d=n(17),f=n.n(d),p=n(18),m=n.n(p),h=n(9),g=n.n(h),y=n(3),v=n.n(y),E=n(34),C=n(4),b=n(1),_=n(20),k=n(297);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var x=function(e){f()(n,e);var t=w(n);function n(){return s()(this,n),t.apply(this,arguments)}return u()(n,[{key:"init",value:function(){this.refModal=v.a.createRef()}},{key:"getHotkeys",value:function(){return[C.default.hotkeys.create(b.a.KeyCode.Escape,!0,b.a.Primary.Either,b.a.Shift.Either,this.onClickNo),C.default.hotkeys.create(b.a.KeyCode.N,!0,b.a.Primary.Either,b.a.Shift.Either,this.onClickNo),C.default.hotkeys.create(b.a.KeyCode.Enter,!0,b.a.Primary.Either,b.a.Shift.Either,this.onClickYes),C.default.hotkeys.create(b.a.KeyCode.Y,!0,b.a.Primary.Either,b.a.Shift.Either,this.onClickYes)]}},{key:"onClickYes",value:function(){this.refModal.current.close(!0)}},{key:"onClickNo",value:function(){this.refModal.current.close(!1)}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.textYes,a=e.textNo,o=i()(e,["text","textYes","textNo"]);return v.a.createElement(k.a,r()({},o,{id:"modalConfirm",small:!0,backdropClose:!1,scrollable:!1,closeButton:!1,modalID:b.a.Modals.Confirm,ref:this.refModal}),v.a.createElement("div",{key:"content"},t),v.a.createElement("div",{key:"buttons"},v.a.createElement(_.a,{primary:!0,width:100,onClick:this.onClickYes},n||"YES"),v.a.createElement(_.a,{width:100,onClick:this.onClickNo},a||"NO")))}}]),n}(E.a);t.default=x},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(61),i=n.n(o),l=n(1),s=n(4),c=n(3),u=n.n(c),d=n(20),f=n(297),p=n(21);t.default=Object(p.b)((function(e){var t=e.text,n=e.options,a=i()(e,["text","options"]),o=Object(c.useRef)(),p=function(e){return s.default.menus.closeModal(l.a.Modals.Options,e)};return u.a.createElement(f.a,r()({},a,{id:"modalOptions",title:"Please Choose",small:!0,backdropClose:!1,scrollable:!1,modalID:l.a.Modals.Options,ref:o}),u.a.createElement("div",{key:"content"},t),u.a.createElement("div",{key:"buttons"},n.map((function(e,t){return u.a.createElement(d.a,{key:t,raised:!0,width:120,margin:"0 8px",onClick:function(){return p(e)}},e)})),u.a.createElement(d.a,{cancel:!0,raised:!0,width:100,margin:"0 8px",onClick:function(){return p()}},"Cancel")))}))},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(0),m=n(1),h=n(15),g=n(10),y=n(3),v=n(34),E=n(30),C=n(20),b=n(127),_=n(297),k=n(151),w=n(138);function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var D=function(e){s()(n,e);var t=x(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){this.createObservables({exportedContent:""}),this.exportArchived=!1,this.includeNotes=!0,this.includePrefixes=!0,this.dataType="json",this.document=h.a.getDocumentsArray()[0]}},{key:"getState",value:function(){return{documents:h.a.getDocumentsArray()}}},{key:"onMount",value:function(){this.exportData()}},{key:"exportData",value:function(){var e=this,t=this.document,n=this.exportArchived,a=this.includeNotes,r=this.includePrefixes;"html"===this.dataType?this.exportedContent.set(t.toHTML(n,a,r)):"text"===this.dataType?this.exportedContent.set(t.toPlaintext(n,a,r)):"opml"===this.dataType?this.exportedContent.set(t.toOPML(n,a,r)):"json"===this.dataType&&t.toJSON({exportArchived:n,includeNotes:a}).then((function(t){e.exportedContent.set(t)}))}},{key:"setDataType",value:function(e){this.dataType=e,this.exportData()}},{key:"onChangeArchiveItems",value:function(e){this.exportArchived=e,this.exportData()}},{key:"onChangeIncludePrefixes",value:function(e){this.includePrefixes=e,this.exportData()}},{key:"onChangeIncludeNotes",value:function(e){this.includeNotes=e,this.exportData()}},{key:"onChangeDocument",value:function(e){var t=this.state.documents.find((function(t){return t.id===e}));this.document=t,this.exportData()}},{key:"onTapOpen",value:function(){var e=open("url"),t=this.exportedContent.get();"opml"===this.dataType&&(t=p.default.escape(t)+"   "),e.document.write(t)}},{key:"onTapSelect",value:function(){var e=E.default.createSelectionRange();e.selectNodeContents(this.refs.exportedContent),E.default.setSelectionRange(e)}},{key:"onTapSaveExport",value:function(){var e="text"===this.dataType?"txt":this.dataType;try{p.default.saveFile(this.state.exportedContent,"moodo."+e)}catch(t){p.default.reportError(t)}}},{key:"onKeyDown",value:function(e){var t=g.a.getKeyCode(e);(!(g.a.mac&&e.metaKey||!g.a.mac&&e.ctrlKey)||t!==m.a.KeyCode.C&&t!==m.a.KeyCode.A&&t!==m.a.KeyCode.F)&&p.default.preventAndStop(e)}},{key:"render",value:function(){var e=this.state,t=e.documents,n=e.exportedContent,a=this.dataType,r=p.default.classNames("exportedContent",a),o="html"!==a?p.default.escape(n):n;return y.createElement(_.a,{id:"modalExport",width:860,height:900,sidebarWidth:190,modalID:m.a.Modals.ExportData},y.createElement("div",{key:"sidebar"},y.createElement(w.b,{inset:!0},y.createElement(w.a,{type:"header"},"SELECT DOCUMENT"),y.createElement(w.a,{type:"noselect"},y.createElement(k.a,{style:{height:32},ref:this.refSelectDocument,onChange:this.onChangeDocument},t.map((function(e){return y.createElement("option",{key:e.id,value:e.id},e.text.get())})))),y.createElement(w.a,{type:"header"},"DATA TYPE"),y.createElement(w.a,{onClick:this.setDataType.bind(this,"json")},"Moo.do Backup (JSON)"),y.createElement(w.a,{onClick:this.setDataType.bind(this,"html")},"HTML"),y.createElement(w.a,{onClick:this.setDataType.bind(this,"opml")},"OPML"),y.createElement(w.a,{onClick:this.setDataType.bind(this,"text")},"Plain Text"),y.createElement(w.a,{type:"header"},"OPTIONS"),y.createElement(w.a,{type:"noselect"},y.createElement(b.a,{checked:this.includePrefixes,onChange:this.onChangeIncludePrefixes},"Include Prefixes")),y.createElement(w.a,{type:"noselect"},y.createElement(b.a,{checked:this.includeNotes,onChange:this.onChangeIncludeNotes},"Include Notes")),y.createElement(w.a,{type:"noselect"},y.createElement(b.a,{checked:this.exportArchived,onChange:this.onChangeArchiveItems},"Archived Items")),y.createElement(w.a,{type:"header"},"EXPORT"),!g.a.app&&y.createElement(w.a,{type:"noselect",height:36},y.createElement(C.a,{marginLeft:-16,onClick:this.onTapOpen},"OPEN IN TAB")),y.createElement(w.a,{type:"noselect",height:36},y.createElement(C.a,{marginLeft:-16,onClick:this.onTapSelect},"SELECT")),y.createElement(w.a,{type:"noselect",height:36},y.createElement(C.a,{marginLeft:-16,onClick:this.onTapSaveExport},"SAVE")))),y.createElement("div",{key:"content"},y.createElement("div",{className:r,onKeyDown:this.onKeyDown,contentEditable:!0,dangerouslySetInnerHTML:{__html:o},ref:"exportedContent"})))}}]),n}(v.a);t.default=D},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(0),m=n(1),h=n(4),g=n(3),y=n.n(g),v=n(34),E=n(297),C=n(20),b=n(81),_=n(138),k=n(302);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var x=function(e){s()(a,e);var t=w(a);function a(){return r()(this,a),t.apply(this,arguments)}return i()(a,[{key:"init",value:function(){var e=this,t=this.props.importer;n.e(3).then(n.bind(null,463)).then((function(t){var n=t.default;e.importer=new n,e.dimportLoaded.set(!0)})),"GTasks"===t&&(t="Google Tasks"),this.createObservables({isImporting:!1,preloadDisable:0,currentImporter:t||"Moo.do Backup",importMessage:"",dimportLoaded:!1}),this.refWorkflowy=y.a.createRef(),h.default.onIntroAction("Import")}},{key:"getImporterFromName",value:function(e){var t;switch(e){case"Wunderlist":t=this.importer.wunderlist;break;case"Workflowy":t=this.importer.workflowy;break;case"OPML":t=this.importer.opml;break;case"Moo.do Backup":t=this.importer.json;break;case"Google Tasks":t=this.importer.gtasks;break;case"Trello":t=this.importer.trello;break;case"Todoist":t=this.importer.todoist;break;default:try{p.default.PAssert(952,!1,"Must add valid importer: ",e)}catch(n){p.default.reportError(n)}}return t}},{key:"selectImporter",value:function(e){var t=this,n=this.getImporterFromName(e);this.currentImporter.set(e),this.importMessage.set(""),this.isImporting.set(!1),n&&n.preload&&!n.isLoaded&&(this.preloadDisable.set(this.preloadDisable.get()+1),this.importMessage.set("Loading Trello login..."),n.preload((function(){t.preloadDisable.set(t.preloadDisable.get()-1);var e=t.getImporterFromName(t.currentImporter.get());0===t.preloadDisable.get()&&e&&e.preload&&t.importMessage.set("")}),(function(e){t.preloadDisable.set(t.preloadDisable.get()-1),t.importMessage.set("Error loading Trello. Please try again.")})))}},{key:"onImportError",value:function(e,t){!1!==e?(e&&p.default.isString(e)||(t||(t=e),e="Moo.do encountered an error importing your data. The developers have been notified with details of the error."),p.default.reportError(t||new Error(e),e),this.importMessage.set(e)):this.importMessage.set(""),this.isImporting.set(!1)}},{key:"runImport",value:function(e,t,n){var a=this;if(!(this.isImporting.get()||this.preloadDisable.get()>0)){var r=function(){a.importMessage.set(""),h.default.menus.alert({text:"Your data has been imported successfully!",actionText:"OK",callback:function(){h.default.menus.closeModal(m.a.Modals.ImportData)}}),p.default.sendEvent("ImportSuccess",e)};if("Workflowy"===e){var o=this.refWorkflowy.current.getValue(),i=this.importer.opmlToDocument(o,"Workflowy Import");!0===i?r():this.importMessage.set(i)}else{var l=this.getImporterFromName(e);if(l){p.default.sendEvent("Menu","Import"+e),this.isImporting.set(!0),this.importMessage.set("Importing...");try{this.importer.runImport(l,t,n,(function(){a.isImporting.set(!1),r()}),this.onImportError)}catch(s){this.onImportError("There was an issue importing your data. Please try again later.",s)}}}}}},{key:"onTapSelect",value:function(e){this.selectImporter(e)}},{key:"whichArea",value:function(){switch(this.state.currentImporter){case"Wunderlist":return"disabled";case"Workflowy":return"WorkflowyArea";case"OPML":case"Moo.do Backup":return"UploadArea";case"Google Tasks":case"Trello":case"Todoist":return"OAuthArea";default:try{p.default.PAssert(953,!1,"Must add valid importer")}catch(e){p.default.reportError(e)}}return!1}},{key:"onClickSupport",value:function(){h.default.menus.openModal(m.a.Modals.ReportBug)}},{key:"onClickImport",value:function(){if(!this.isImporting.get()){var e=this.refs.email&&this.refs.email.getValue(),t=this.refs.password&&this.refs.password.getValue();this.runImport(this.state.currentImporter,e,t)}}},{key:"renderListItem",value:function(e){return y.a.createElement(_.a,{onClick:this.onTapSelect.bind(this,e)},e)}},{key:"renderContent",value:function(){var e,t=this.state,n=this.state.currentImporter,a=this.whichArea(),r=y.a.createElement(C.a,{primary:!0,enabled:0===t.preloadDisable&&!t.isImporting,onClick:this.onClickImport},"IMPORT");return"LoginArea"===a?e=y.a.createElement("div",null,y.a.createElement("div",{className:"importTitle"},"Import data from ",n),y.a.createElement(b.a,{floatingText:"Email",display:"block",ref:"email"}),y.a.createElement(b.a,{type:"password",floatingText:"Password",display:"block",ref:"password"}),y.a.createElement("br",null)):"UploadArea"===a?e=y.a.createElement("div",{id:"importUploadArea"},y.a.createElement("div",{className:"importTitle"},"Upload ",n," file"),y.a.createElement("div",null,"Select a","OPML"===n?"n":""," ",n," file to upload"),y.a.createElement("form",{name:"importFileUpload"},y.a.createElement("input",{id:"importFileUploadButton",type:"file",required:!0,name:"importFile"}))):"OAuthArea"===a?e=y.a.createElement("div",null,y.a.createElement("div",{className:"importTitle"},"Import data from ",n),y.a.createElement("div",null,"Click to login to your account")):"disabled"===a?(e=y.a.createElement("div",null,y.a.createElement("div",null,"Importing data from ",n," is not yet migrated to the new backend. Sorry about that! Please contact support.")),r=y.a.createElement(C.a,{style:{marginLeft:0},raised:!0,onClick:this.onClickSupport},"Contact support")):"WorkflowyArea"===a&&(e=y.a.createElement("div",null,y.a.createElement("div",{className:"importTitle",style:{marginBottom:24}},"Import data from Workflowy"),y.a.createElement("div",null,"In Workflowy, click the gear icon in the top right and select Export All. Select OPML and copy it, and paste it in the box below."),y.a.createElement(k.a,{height:300,ref:this.refWorkflowy}))),y.a.createElement("div",{className:"importInside"},e,r,y.a.createElement("div",{className:"importMessage"},t.importMessage))}},{key:"render",value:function(){var e,t="Loading...";return this.state.dimportLoaded&&(e=y.a.createElement(_.b,{inset:!0},y.a.createElement(_.a,{type:"header"},"IMPORT FROM DATA"),this.renderListItem("Moo.do Backup"),this.renderListItem("OPML"),y.a.createElement(_.a,{type:"header"},"IMPORT FROM APP"),this.renderListItem("Wunderlist"),this.renderListItem("Google Tasks"),this.renderListItem("Workflowy"),this.renderListItem("Trello"),this.renderListItem("Todoist")),t=this.renderContent()),y.a.createElement(E.a,{id:"modalImport",width:700,height:540,sidebarWidth:180,modalID:m.a.Modals.ImportData},y.a.createElement("div",{key:"sidebar"},e),y.a.createElement("div",{key:"content"},t))}}]),a}(v.a);t.default=x},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(0),m=n(1),h=n(4),g=n(10),y=n(3),v=n.n(y),E=n(34),C=n(137),b=n(297),_=n(127),k=n(151),w=n(38),x=n(94),D=n(15),S=n(62),M=n(138);function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var P=function(e){s()(n,e);var t=T(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){var e=D.a.getDocumentsArray(!0);this.createObservables({documents:e,selectedDoc:this.props.doc||e[0],selectedTime:void 0,showRaw:!1,showCompleted:!1,backupData:void 0,previewText:""})}},{key:"getState",value:function(){var e=D.a.getDocumentsArray(!0),t={};return e.forEach((function(e){t[e.id]=e.backups})),t}},{key:"onKeyDown",value:function(e){g.a.getKeyCode(e);(g.a.mac&&e.metaKey||!g.a.mac&&e.ctrlKey)&&m.a.KeyCode.A}},{key:"onChangeDocument",value:function(e){var t=this.state.documents.find((function(t){return t.id===e}));this.selectedDoc.set(t)}},{key:"onClickBackup",value:function(e){var t=this,n=this.state.selectedDoc;e!==this.selectedTime.get()&&(this.previewText.set("Loading..."),this.backupData.set(void 0),this.selectedTime.set(e),C.a.downloadBackup(n,e).then((function(a){if(t.selectedDoc.get()===n&&t.selectedTime.get()===e&&a){var r=function(e){var n=x.a.transformItems(e),r=a.doc;t.backupData.set({raw:a,rootItem:n[r.root]})},o=h.default.crypto.getKeyBySentinel(a.sentinel),i=function(){Promise.all(a.items.map((function(e){return h.default.crypto.decryptText(o,e.t,e.id).then((function(t){return e.t=t,e}))}))).then(r)};o?i():h.default.menus.openModal(m.a.Modals.EnterCode,{isPassword:!0,text:"This document was backed up with an encryption password. Please enter the password to unlock this backup.",onSelect:function(e){return new Promise((function(t,r){var l="backuptemp"+n.id;e&&h.default.crypto.addKey({name:l,password:e,sentinelSalt:w.a.getEncryptionUid()}).then((function(e){a.sentinel===e.sentinel?(t(),o=e.key,i()):(r("Incorrect password. Please try again."),h.default.crypto.removeKey(l))}))}))}})}})))}},{key:"onChangeShowRaw",value:function(e){this.showRaw.set(e)}},{key:"onChangeShowCompleted",value:function(e){this.showCompleted.set(e)}},{key:"renderItems",value:function(e,t){var n=this;if(this.state.showCompleted||!(e.flags&m.a.VMLIFlag.Complete)){var a=e.text;if(a.includes(m.a.CharDate)){var r=S.a.fromData(e.date);r&&(a=a.replace(m.a.CharDate,"!"+r.toText()))}a=t?"":"<li>".concat(p.default.escape(a));var o=e.noteItem,i=e.items;return(o||i)&&(a+="<ul>",o&&(a+='<li class="note c-foreground-faded">'.concat(p.default.escape(o.text),"</li>")),i&&i.forEach((function(e){return a+=n.renderItems(e,!1)})),a+="</ul>"),t||(a+="</li>"),a}return""}},{key:"renderBackup",value:function(){var e=this.state.backupData;if(this.state.showRaw){var t=p.default.cloneDeep(e.raw);try{t.items.forEach((function(e){return e.t=p.default.escape(e.t)}))}catch(n){}return JSON.stringify(t,null,2)}return"<ul>".concat(this.renderItems(e.rootItem,!0),"</ul>")}},{key:"renderBackups",value:function(){var e,t=this,n=this.state.selectedDoc,a=this.state[n.id];return a&&(e=Object.keys(a).sort((function(e,t){return+t-+e}))),v.a.createElement(M.b,{noInitialSelected:!0},e&&e.map((function(e){var n=+e,a=new Date(n);return v.a.createElement(M.a,{key:n,onClick:t.onClickBackup.bind(t,n)},a.toString("MMMM d, hh:mm tt"))})),!a&&v.a.createElement(M.a,{type:"noselect"},"No backups..."))}},{key:"render",value:function(){var e=this.state,t=p.default.classNames("flexbox flexvert"),n=e.backupData?this.renderBackup():"<ul><ul><li>".concat(e.previewText,"</li></ul></ul>");return v.a.createElement(b.a,{id:"modalBackups",width:1e3,height:900,sidebarWidth:200,modalID:m.a.Modals.Backups},v.a.createElement("div",{key:"sidebar"},v.a.createElement(k.a,{style:{margin:"0 16px 8px 16px",height:32},defaultValue:this.props.doc?this.props.doc.id:void 0,ref:this.refSelectDocument,onChange:this.onChangeDocument},e.documents.map((function(e){return v.a.createElement("option",{key:e.id,value:e.id},e.text.get())}))),e.selectedDoc&&this.renderBackups()),v.a.createElement("div",{key:"content",className:t},v.a.createElement("div",{className:"exportHeader"},v.a.createElement(_.a,{checked:e.showRaw,onChange:this.onChangeShowRaw},"Show raw"),v.a.createElement(_.a,{checked:e.showCompleted,onChange:this.onChangeShowCompleted},"Show completed")),v.a.createElement("div",{className:"exportedContent f1 scrollable c-border",onKeyDown:this.onKeyDown,dangerouslySetInnerHTML:{__html:n},ref:"exportedContent"})))}}]),n}(E.a);t.default=P},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(7),i=n.n(o),l=n(8),s=n.n(l),c=n(17),u=n.n(c),d=n(18),f=n.n(d),p=n(9),m=n.n(p),h=n(1),g=n(4),y=n(3),v=n.n(y),E=n(34),C=n(20),b=n(302),_=n(297);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var w=function(e){u()(n,e);var t=k(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"sendReport",value:function(e){var t=this.props;g.default.EmailPreview.reportMessage(t.accountID,t.threadID,t.msgID,this.refText.current.getValue(),e),this.refModal.current.close()}},{key:"onClickSend",value:function(){this.sendReport(!0)}},{key:"onClickCancel",value:function(){this.sendReport(!1)}},{key:"render",value:function(){return v.a.createElement(_.a,r()({},this.props,{id:"modalReportProblem",scrollable:!1,modalID:h.a.Modals.ReportProblem,ref:this.refModal}),v.a.createElement("div",{key:"content"},v.a.createElement("div",{className:"fancyModalText"},"Please describe the display problem."),v.a.createElement(b.a,{ref:this.refText,focused:!0}),v.a.createElement("div",{className:"fancyModalText"},"This will send the content of your email to the developers to fix display errors.")),v.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},v.a.createElement(C.a,{width:100,onClick:this.onClickCancel},"CANCEL"),v.a.createElement(C.a,{primary:!0,width:100,onClick:this.onClickSend},"SEND")))}}]),n}(E.a);t.default=w},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(6),i=n.n(o),l=n(13),s=n.n(l),c=n(1),u=n(3),d=n.n(u),f=n(4),p=n(20),m=n(297),h=n(302),g=n(21);t.default=Object(g.b)((function(e){var t=Object(u.useRef)(),n=Object(u.useRef)();return d.a.createElement(m.a,r()({},e,{id:"modalDeleteAccount",scrollable:!1,width:600,modalID:c.a.Modals.DeleteAccount,ref:n}),d.a.createElement("div",{key:"content"},d.a.createElement("div",{className:"fancyModalText"},"It would be very helpful if you could describe how Moo.do could be more useful to you. Your feedback will help us improve Moo.do for you and others. Thanks!"),d.a.createElement(h.a,{ref:t,focused:!0})),d.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},d.a.createElement(p.a,{width:100,onClick:function(){n.current.close(!1)}},"CANCEL"),d.a.createElement(p.a,{primary:!0,width:100,onClick:function(e,a){return s()(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(var o=0;;){if(o++>5e3&&__infLoop&&__infLoop(o))throw new RangeError;switch(e.prev=e.next){case 0:if("Moo.do Deleted Account",!(r=t.current.getValue())){e.next=5;break}return e.next=5,f.default.sendFeedback("Moo.do Deleted Account",r);case 5:a(),n.current.close(!0);case 7:case"end":return e.stop()}}}),e)})))(),!0}},"DELETE")))}))},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(7),i=n.n(o),l=n(8),s=n.n(l),c=n(17),u=n.n(c),d=n(18),f=n.n(d),p=n(9),m=n.n(p),h=n(0),g=n(1),y=n(4),v=n(3),E=n.n(v),C=n(34),b=n(20),_=n(301),k=n(297);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var x=function(e){u()(n,e);var t=w(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"onTransactionClick",value:function(e){var t=h.default.clone(e),n=y.default.billingManager.userProperties;t.company=n.invoiceCompany,t.address=n.invoiceAddress;var a=window.btoa(JSON.stringify(t));h.default.openUrl(window.location.protocol+"//"+window.location.host+"/invoice#d="+a)}},{key:"render",value:function(){var e=this;return E.a.createElement(k.a,r()({},this.props,{id:"modalInvoices",scrollable:!1,modalID:g.a.Modals.Invoices,ref:"modal"}),E.a.createElement("div",{key:"content"},this.props.transactions.length>0&&E.a.createElement(_.a,{className:"transactionsTable"},E.a.createElement("div",{key:"header"},E.a.createElement("div",null,"Transaction Date"),E.a.createElement("div",null,"Amount"),E.a.createElement("div",null)),this.props.transactions.map((function(t){var n=new Date(t.date).toString(y.default.International.getFormat(g.a.DFormat.LongStrDate));return E.a.createElement("div",{key:t.id},E.a.createElement("div",null,n),E.a.createElement("div",null,t.amount),E.a.createElement(b.a,{primary:!0,onClick:e.onTransactionClick.bind(e,t),height:"auto"},"VIEW"))}))),0===this.props.transactions.length&&E.a.createElement("div",null,"There are not transactions available for this account.")))}}]),n}(C.a);t.default=x},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(3),m=n.n(p),h=n(1),g=n(0),y=n(4),v=n(38),E=n(34),C=n(81),b=n(20),_=n(297),k=n(301),w=n(151),x=n(96),D=n(73),S=n(137);function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var T=function(e){s()(n,e);var t=M(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){this.createObservables({page:0,error:!1,invites:[],defaultAcl:h.a.DocumentAccessRoles.Write}),y.default.onIntroAction("ShareDoc")}},{key:"getState",value:function(){var e=y.default.settings.encryptionKeys,t=this.props.doc;return{acl:t.acl,isShared:t.isShared(),encryptionKeys:e,hasDocPassword:e.get()&&!!e.get()[t.id]}}},{key:"onClickShare",value:function(e,t){var n=this,a=this.refs.invite,r=a.getTokens().map((function(e){return e.email}));if(this.error.set(""),r&&r.length>0)return this.props.doc.shareWithUser(r,this.state.defaultAcl).then((function(e){if(t(),e.error)n.error.set(e.error);else if(e.value){var a=e.value;!0!==a&&g.default.isArray(a)&&a.forEach((function(e){var t=e.email;e.error,e.shared;e.invited&&!n.invites.includes(t)&&n.invites.push(t)}))}})),a.clearValue(),a.clearTokens(),!0}},{key:"onChangeSelectRole",value:function(e,t){var n=+t;this.props.doc.shareWithUser([e.email],n)}},{key:"onChangeDefaultRole",value:function(e){this.defaultAcl.set(+e.target.value)}},{key:"onClickRemovePermission",value:function(e,t,n){var a=this;return this.props.doc.shareWithUser([e.email],null).then((function(e){n(),e.error&&a.error.set(e.error)})),!0}},{key:"onClickCancel",value:function(){y.default.menus.closeModal(h.a.Modals.ShareDoc)}},{key:"onClickSkip",value:function(e,t){var n=this;if(y.default.settings.hasUserPassword()){var a=this.props.doc;return D.a.updateDocumentEncryption(a,y.default.crypto.getGlobalKeyInfo()).then((function(){n.page.set(1),t()})),!0}this.page.set(1)}},{key:"onClickEncrypt",value:function(e,t){var n=this.props.doc,a=this.refs.pass1.getValue(),r=this.refs.pass2.getValue(),o=n.id;if(a===r)return S.a.backupDocumentAll(n).then((function(){y.default.crypto.addKey({name:o,password:a,sentinelSalt:n.id}).then((function(e){D.a.updateDocumentEncryption(n,e).then((function(){t()}))}))})),!0;this.error.set("Passwords do not match")}},{key:"renderSelect",value:function(e,t){return m.a.createElement(w.a,{value:e,onChange:t,style:{height:36,marginRight:8}},m.a.createElement("option",{value:h.a.DocumentAccessRoles.Admin},"Admin"),m.a.createElement("option",{value:h.a.DocumentAccessRoles.Write},"Write"))}},{key:"renderPageEncryption",value:function(){var e={marginTop:8,width:240};return m.a.createElement("div",null,m.a.createElement("div",{className:"font-big4 bold"},"Make this document (".concat(this.props.doc.text.get(),") extra secure?")),m.a.createElement("div",{className:"modal-subtitle font-small1 c-foreground-light",style:{marginTop:16}},"This document will be encrypted using this password for an extra level of security. You will need to give this password to anyone you share the document with. For your security, Moo.do cannot recover your password, so keep your password safe!"),m.a.createElement("div",{className:"flexbox flex-center"},m.a.createElement("div",{style:{marginTop:16}},m.a.createElement(C.a,{type:"password",placeholder:"Password",ref:"pass1",style:e}),m.a.createElement(C.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:e}))),m.a.createElement("div",{className:"flexbox flex-center"},m.a.createElement("div",{style:{marginTop:20}},m.a.createElement(b.a,{raised:!0,onClick:this.onClickSkip},"SKIP"),m.a.createElement(b.a,{primary:!0,raised:!0,style:{marginLeft:24},onClick:this.onClickEncrypt},"ENCRYPT"))))}},{key:"renderPageShare",value:function(){var e=this,t=this.props.doc,n=this.state,a=n.acl,r=n.error,o=n.invites,i=Object.keys(a).filter((function(e){return e!==v.a.getEncryptionUid()})).map((function(e){return{uid:e,name:a[e].t,email:a[e].e,role:a[e].r}}));return m.a.createElement(x.a,{style:{height:"100%"}},m.a.createElement(k.a,null,m.a.createElement("div",{className:"fancyTableHeader font-big4 bold",style:{marginBottom:8}},"Share ",t.text.get()),i.map((function(n){var a=n.name?"".concat(n.name," <").concat(n.email,">"):n.email;return m.a.createElement("div",{key:n.uid,className:"flexbox items-center"},m.a.createElement("div",{className:"f1"},a),e.renderSelect(n.role,e.onChangeSelectRole.bind(e,n)),t.isAdmin()&&m.a.createElement(b.a,{icon:"icon-close",width:40,height:40,onClick:e.onClickRemovePermission.bind(e,n)}))})),o.map((function(e){return m.a.createElement("div",{key:e,className:"flexbox"},m.a.createElement("div",{className:"f1"},e),m.a.createElement("div",null,"Invited"))}))),t.isAdmin()&&m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"flexbox items-center",style:{marginTop:24}},m.a.createElement(C.a,{id:"inputShareInvite",className:"f1",placeholder:"Enter an mail address",autocompleteMode:"email",ref:"invite",style:{marginRight:8}}),this.renderSelect(this.state.defaultAcl,this.onChangeDefaultRole)),m.a.createElement(b.a,{primary:!0,raised:!0,onClick:this.onClickShare,style:{marginTop:16}},"INVITE")),r&&m.a.createElement("div",{className:"error"},r),!t.isAdmin()&&m.a.createElement("div",{className:"modal-group"},m.a.createElement("div",{className:"shareNotOwned gd"},"Only the creator of this file can share it with others. Please contact the creator to share it with others."),m.a.createElement(b.a,{id:"shareOkay",raised:!0,onClick:this.onClickCancel},"OKAY")))}},{key:"render",value:function(){var e=this.props,t=this.state;e.doc;return m.a.createElement(_.a,{id:"shareDoc",modalID:h.a.Modals.ShareDoc,ref:"modal",width:500,height:320},m.a.createElement("div",{key:"content"},t.hasDocPassword||t.isShared||1===t.page?this.renderPageShare():this.renderPageEncryption()))}}]),n}(E.a);t.default=T},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(3),m=n.n(p),h=n(1),g=n(0),y=n(4),v=n(34),E=n(20),C=n(302),b=n(297);function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var k=function(e){s()(n,e);var t=_(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"onClickUV",value:function(e){g.default.openUrl("https://feedback.moo.do/",e),g.default.sendEvent("Menu","FeedbackUserVoice")}},{key:"onClickTwitter",value:function(e){g.default.openUrl("https://www.twitter.com/MooDoApp",e),g.default.sendEvent("Menu","FeedbackTwitter")}},{key:"onClickFacebook",value:function(e){g.default.openUrl("https://www.facebook.com/MooDoApp",e),g.default.sendEvent("Menu","FeedbackFacebook")}},{key:"onClickCancel",value:function(e){y.default.menus.closeModal(h.a.Modals.ReportBug)}},{key:"onClickSend",value:function(e){var t=this.refs.description.getValue();if(t&&t.length>2){y.default.sendFeedback("Moo.do Feedback",t),y.default.menus.closeModal(h.a.Modals.ReportBug),y.default.toasts.pushMessage({text:"Thanks for taking the time to send us feedback!"}),g.default.sendEvent("Menu","SendFeedback")}}},{key:"render",value:function(){return m.a.createElement(b.a,{id:"reportBug",modalID:h.a.Modals.ReportBug,ref:"modal",width:450,height:500},m.a.createElement("div",{key:"content"},m.a.createElement("div",{className:"c-foreground-light"},"If you're requesting a feature, it's often easier to vote it up (or add it) on our UserVoice page."),m.a.createElement("div",{className:"center"},m.a.createElement(E.a,{className:"mc",primary:!0,onClick:this.onClickUV},"Open UserVoice")),m.a.createElement("br",null),m.a.createElement("div",{className:"c-foreground-light"},"Or talk to us on your favorite social network."),m.a.createElement("div",{className:"feedbackIcons marginCenter flexbox flex-center",style:{width:150}},m.a.createElement(E.a,{width:50,height:50,icon:"icon-twitter",tooltip:"@MooDoApp",onClick:this.onClickTwitter}),m.a.createElement(E.a,{width:50,height:50,marginLeft:16,icon:"icon-facebook",tooltip:"MooDoApp",onClick:this.onClickFacebook})),m.a.createElement("div",{className:"mat-subheader c-foreground-light"},"Or send us a message directly."),m.a.createElement(C.a,{focused:!0,id:"bugDescription",height:200,ref:"description",margin:0})),m.a.createElement("div",{key:"buttons"},m.a.createElement(E.a,{raised:!0,onClick:this.onClickCancel},"CANCEL"),m.a.createElement(E.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSend},"SEND")))}}]),n}(v.a);t.default=k},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(7),i=n.n(o),l=n(8),s=n.n(l),c=n(17),u=n.n(c),d=n(18),f=n.n(d),p=n(9),m=n.n(p),h=n(1),g=n(4),y=n(3),v=n.n(y),E=n(34),C=n(20),b=n(81),_=n(297);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var w=function(e){u()(n,e);var t=k(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"init",value:function(){this.createObservables({errorText:""})}},{key:"onMount",value:function(){this.refs.code.focus()}},{key:"onClickConfirm",value:function(){var e=this,t=this.refs.code.getValue();this.errorText.set(""),this.props.onSelect(t).then((function(){g.default.menus.closeModal(h.a.Modals.EnterCode)})).catch((function(t){e.errorText.set(t)}))}},{key:"onClickCancel",value:function(){!1!==this.props.noCancel&&g.default.menus.closeModal(h.a.Modals.EnterCode)}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.noCancel,a=e.isPassword;return v.a.createElement(_.a,r()({},this.props,{id:"modalEnterCode",closeButton:!1,width:360,scrollable:!1,modalID:h.a.Modals.EnterCode,backdropClose:!1,ref:"modal"}),v.a.createElement("div",{key:"content"},v.a.createElement("div",{className:"mb16 c-foreground"},t),v.a.createElement(b.a,{ref:"code",type:a&&"password",onEnter:this.onClickConfirm}),v.a.createElement("div",{className:"red",style:{marginTop:8}},this.state.errorText),v.a.createElement("div",{style:{marginTop:24,textAlign:"right"}},!n&&v.a.createElement(C.a,{width:100,onClick:this.onClickCancel},"CANCEL"),v.a.createElement(C.a,{primary:!0,width:100,onClick:this.onClickConfirm},"CONFIRM"))))}}]),n}(E.a);t.default=w},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(0),m=n(4),h=n(3),g=n.n(h),y=n(34),v=n(1),E=n(20),C=n(297);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var _=function(e){s()(n,e);var t=b(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"onClickCancel",value:function(){this.props.onCancel(),m.default.menus.closeModal(v.a.Modals.ConfirmEncrypt)}},{key:"onClickDownload",value:function(){p.default.saveFile(this.props.password,"moodo encryption password.txt")}},{key:"onClickYes",value:function(){this.props.onYes(),m.default.menus.closeModal(v.a.Modals.ConfirmEncrypt)}},{key:"render",value:function(){return g.a.createElement(C.a,{id:"modalConfirmEncrypt",closeButton:!1,small:!0,backdropClose:!1,scrollable:!1,modalID:v.a.Modals.ConfirmEncrypt},g.a.createElement("div",{key:"content"},g.a.createElement("p",null,"It is very important that you remember this password."),g.a.createElement("p",{style:{color:"red",fontWeight:"bold"}},"It cannot be reset."),g.a.createElement("p",null,"Are you sure you want to set an encryption password?")),g.a.createElement("div",{key:"buttons"},g.a.createElement(E.a,{raised:!0,cancel:!0,onClick:this.onClickCancel},"Cancel"),g.a.createElement(E.a,{raised:!0,marginLeft:16,onClick:this.onClickDownload},"Download Password"),g.a.createElement(E.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickYes},"Yes")))}}]),n}(y.a);t.default=_},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(61),i=n.n(o),l=n(1),s=n(10),c=n(3),u=n.n(c),d=n(297),f=n(21),p=n(326),m=n(169);t.default=Object(f.b)((function(e){var t=e.pane,n=e.item,a=i()(e,["pane","item"]),o=Object(c.useRef)(),f=Object(c.useMemo)((function(){return Math.max(0,t.indexOfItem(n)-4)}),[]);t.setRect(Object.assign({},t.rect.get(),{width:Math.min(Math.round(s.a.windowWidth()*l.a.ModalMaxWidthPerc*.01),800),height:Math.min(Math.round(s.a.windowHeight()*l.a.ModalMaxHeightPerc*.01),900)}));var h=function(){var e=o.current.getElement().getBoundingClientRect();t.setRect(Object.assign({},t.rect.get(),{width:Math.round(e.width),height:Math.round(e.height)}))};return Object(p.a)(s.a.windowSize,h),Object(c.useEffect)((function(){h(),n&&t.type===l.a.PaneMode.Task&&n.highlight()}),[]),u.a.createElement(d.a,r()({},a,{id:"modalPane",width:800,height:900,scrollable:!1,modalID:l.a.Modals.ModalPane,ref:o}),u.a.createElement("div",{key:"content"},u.a.createElement(m.a,{pane:t,isPopup:!0,initialScrollIndex:f})))}))},function(e,t,n){"use strict";n.r(t);var a=n(19),r=n.n(a),o=n(0),i=n(1),l=n(4),s=n(10),c=n(21),u=n(3),d=n.n(u),f=n(97),p=n(20),m=n(81);t.default=Object(c.b)((function(){var e=Object(u.useState)(!1),t=r()(e,2),n=t[0],a=t[1],c="https://[*.]accounts.google.com:443";return d.a.createElement("div",{className:"fixed bottom-0 left-0 right-0 flex justify-center pb-4"},d.a.createElement(f.a,{title:"Authentication Error",close:function(){l.default.menus.closeModal(i.a.Modals.ErrorCookies)},width:500,className:"flex flex-col"},d.a.createElement("div",{className:"p-4 text-15 leading-snug"},d.a.createElement("div",{className:"pb-2"},"Moo.do is unable to authenticate wth Google because third party cookies may be disabled in your browser."),d.a.createElement("div",{className:"py-2"},"Please enable third party cookies or add an exception for the following URL and try again:"),d.a.createElement("div",{className:"py-2 flex items-center"},d.a.createElement(m.a,{value:c,readonly:!0,padding:{left:16,right:16}}),d.a.createElement(p.a,{raised:!0,height:30,padding:8,marginLeft:24,onClick:function(){navigator.clipboard.writeText(c),a(!0)}},n?"Copied":"COPY")),d.a.createElement("div",{className:"py-2"},"See this page for how to enable cookies: ",d.a.createElement("a",{href:"https://www.whatismybrowser.com/guides/how-to-enable-cookies/",target:"_blank"},"https://www.whatismybrowser.com/guides/how-to-enable-cookies/")),d.a.createElement("div",{className:"py-2"},"If you prefer not to enable third party cookies for Google, you can download the app."),d.a.createElement("div",{className:"flex justify-center py-2"},d.a.createElement(p.a,{raised:!0,onClick:function(){o.default.openUrl(s.a.getAppDownloadURL())}},"DOWNLOAD")))))}))},function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),o=n(5),i=n(65),l=n(43),s=n(21);t.default=Object(s.b)((function(e){var t=e.item,n=e.pane,a=e.element,s=e.scrollToItem;return r.a.createElement(i.a,{key:"contextMenuOverviewOptions",id:"contextMenuOverviewOptions",element:a},r.a.createElement(l.a,{icon:"icon-zoom-in",onClick:function(){n.canZoomToItem(t)&&(o.a.setFocusedPane(n),n.zoomIn(t))}},"Zoom In"),r.a.createElement(l.a,{icon:"icon-unfold_less",onClick:function(){return s()}},"Scroll to item"),r.a.createElement(l.a,{icon:"icon-add",onClick:function(){n.zoomIn(t),n.addProject()}},"Add subproject"))}))},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(3),o=n.n(r),i=n(65),l=n(43),s=n(91),c=n(21);t.default=Object(c.b)((function(e){var t=e.element,n=e.onSelected,r=function(e){n(e)};return o.a.createElement(i.a,{key:"contextMenuGmailSort",id:"contextMenuGmailSort",element:t},o.a.createElement(s.a,null,"Sort by"),o.a.createElement(l.a,{icon:"icon-access_time",onClick:function(){return r(a.a.GmailViewMode.Date)}},a.a.GmailViewMode.Date),o.a.createElement(l.a,{icon:"icon-exclamation",onClick:function(){return r(a.a.GmailViewMode.Priority)}},a.a.GmailViewMode.Priority))}))},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(4),m=n(3),h=n.n(m),g=n(34),y=n(20),v=n(127),E=n(65),C=n(91),b=n(43);function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var k=function(e){s()(n,e);var t=_(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){this.createObservables({anyCalendarsSync:this.computeAnyCalendarsSync()})}},{key:"getState",value:function(){var e=this.props.pane;return{displayCalendars:e.displayCalendars,displayLocalItems:e.displayLocalItems}}},{key:"getSyncCalendars",value:function(){return p.default.pluginManager.getPluginGCalendar().getImportCalendarList()}},{key:"computeAnyCalendarsSync",value:function(){for(var e=0,t=this.props.pane.displayCalendars.get(),n=this.getSyncCalendars(),a=0,r=0;r<n.length;r++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;!1!==t[n[r].id]&&a++}return a>0}},{key:"onChangeDisplayCalendar",value:function(e,t){var n=this.props.pane;n.setDisplayCalendar(e,t),n.saveState(),this.anyCalendarsSync.set(this.computeAnyCalendarsSync())}},{key:"onChangeDisplayLocal",value:function(e){this.props.pane.setDisplayLocal(e)}},{key:"onChangeAllCalendars",value:function(e){var t=0,n=this.props.pane,a=this.getSyncCalendars(),r=this.state.displayCalendars;p.default.PaneUpdateBatcher.beginUpdateItems();for(var o=0;o<a.length;o++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var i=a[o];r[i.id]!==e&&n.setDisplayCalendar(i,e)}n.saveState(),p.default.PaneUpdateBatcher.commitUpdateItems()}},{key:"onClickAdd",value:function(){p.default.menus.closeContextMenu(),p.default.menus.openSettings("Calendar")}},{key:"onClickSettings",value:function(){p.default.menus.closeContextMenu(),p.default.menus.openSettings("Plugins")}},{key:"render",value:function(){var e=this,t=this.state,n=this.props,a=p.default.pluginManager.getPluginGCalendar(),r=a.isEnabled(),o=this.getSyncCalendars(),i=t.displayCalendars;return h.a.createElement(E.a,{key:"contextMenuSelectCalendars",id:"contextMenuSelectCalendars",element:n.element},h.a.createElement(b.a,null,h.a.createElement(v.a,{checked:t.displayLocalItems,onChange:this.onChangeDisplayLocal},"Display local events")),r&&h.a.createElement(h.a.Fragment,null,h.a.createElement(C.a,null,h.a.createElement(v.a,{checked:t.anyCalendarsSync,onChange:this.onChangeAllCalendars,size:14},"Google Calendars")),o&&o.map((function(t){var n=a.getCalendarBackgroundColor(t.id);return h.a.createElement(b.a,{key:t.id},h.a.createElement(v.a,{checked:!1!==i[t.id],checkedColor:n,onChange:e.onChangeDisplayCalendar.bind(e,t)},t.summary||t.id))})),(!o||0===o.length)&&h.a.createElement("div",{className:"center",style:{marginTop:8}},h.a.createElement(y.a,{raised:!0,primary:!0,onClick:this.onClickAdd},"ADD CALENDARS"))),!r&&h.a.createElement("div",{className:"center",style:{marginTop:24}},h.a.createElement(y.a,{raised:!0,primary:!0,onClick:this.onClickSettings},"ENABLE CALENDARS")))}}]),n}(g.a);t.default=k},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(7),i=n.n(o),l=n(8),s=n.n(l),c=n(17),u=n.n(c),d=n(18),f=n.n(d),p=n(9),m=n.n(p),h=n(1),g=n(4),y=n(3),v=n.n(y),E=n(34),C=n(81),b=n(65),_=n(20);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var w=function(e){u()(n,e);var t=k(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"init",value:function(){var e=this.props,t=e.text,n=e.href;if(n)this.text=t,this.href=n;else{var a=h.a.Regexp.MDLink,r=new RegExp(/\S{2,}\.[^0-9.\s]{2,}\S*$/);a.lastIndex=0;var o=a.exec(t);o?(this.text=o[2],this.href=o[3]):null===r.exec(t)?this.text=t:this.href=t}this.refText=v.a.createRef(),this.refLink=v.a.createRef()}},{key:"getHotkeys",value:function(){return[g.default.hotkeys.create(h.a.KeyCode.Enter,!0,h.a.Primary.Either,h.a.Shift.Either,this.onClick),g.default.hotkeys.create(h.a.KeyCode.Escape,!0,h.a.Primary.Either,h.a.Shift.Either,this.close)]}},{key:"onMount",value:function(){var e;(e=this.href||!this.text?this.refText.current:this.refLink.current).focus(),e.selectAll()}},{key:"close",value:function(){g.default.menus.closeContextMenu("ReactContextMenuInsertLink")}},{key:"onClickRemove",value:function(){var e=this.refText.current.getValue();this.props.onInsertLink({text:e,href:void 0,isUpdate:!0})}},{key:"onClick",value:function(){var e=this.refText.current.getValue(),t=this.refLink.current.getValue();(e||t)&&g.default.menus.isContextMenuOpen("ReactContextMenuInsertLink")&&(this.close(),this.props.onInsertLink({text:e,href:t,isUpdate:!!this.props.href}))}},{key:"render",value:function(){return v.a.createElement(b.a,r()({},this.props,{key:"contextMenuInsertLink",id:"contextMenuInsertLink"}),v.a.createElement("div",{className:"flexbox"},v.a.createElement("span",null,"Text"),v.a.createElement(C.a,{className:"f1",ref:this.refText,height:28,width:300,maxWidth:300,value:this.text||this.href,onEnter:this.onClick,onEscape:this.close})),v.a.createElement("div",{className:"flexbox"},v.a.createElement("span",null,"URL"),v.a.createElement(C.a,{className:"f1",ref:this.refLink,height:28,width:300,maxWidth:300,value:this.href,onEnter:this.onClick,onEscape:this.close})),v.a.createElement("div",{className:"flexbox",style:{marginTop:16}},this.href&&v.a.createElement(_.a,{cancel:!0,height:32,onClick:this.onClickRemove},"REMOVE"),v.a.createElement("div",{className:"f1"}),v.a.createElement(_.a,{primary:!0,height:32,onClick:this.onClick},this.props.href?"EDIT":"INSERT")))}}]),n}(E.a);t.default=w},function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),o=n(328),i=n(65),l=n(21);t.default=Object(l.b)((function(e){var t=e.contact,n=e.element;return r.a.createElement(i.a,{key:"contextMenuContactDetails",id:"contextMenuContactDetails",element:n},r.a.createElement(o.a,{contact:t}))}))},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(19),i=n.n(o),l=n(61),s=n.n(l),c=n(0),u=n(1),d=n(4),f=n(3),p=n.n(f),m=n(10),h=n(329),g=n(65),y=n(21),v=n(24),E=n(326);t.default=Object(y.b)((function(e){var t=e.pane,n=e.note,a=e.item,o=e.selectionStart,l=e.selectionEnd,y=s()(e,["pane","note","item","selectionStart","selectionEnd"]),C=Object(f.useRef)(),b=Object(v.a)(t.rect),_=i()(b,1)[0],k=Object(f.useState)(!1),w=i()(k,2),x=w[0],D=w[1],S=Math.max(_.width-20,400);Object(E.a)(m.a.windowSize,(function(){setTimeout((function(){var e;return null===(e=C.current)||void 0===e?void 0:e.updateState()}),300)}));var M=Object(f.useCallback)((function(e){m.a.getKeyCode(e)!==u.a.KeyCode.Enter||!e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||(d.default.menus.closeContextMenu(),c.default.preventAndStop(e))}),[]),T=Object(f.useCallback)((function(){d.default.menus.closeContextMenu()}),[]),P=Object(f.useCallback)((function(e){D(e),e||requestAnimationFrame((function(){return C.current.updateState()}))}),[]);return p.a.createElement(g.a,r()({},y,{key:n.id+"_Note",id:"contextMenuNote",width:600,height:300,maxWidth:S,ref:C,canMaximize:!0,isMaximized:x,border:!0}),p.a.createElement(h.a,{item:a,focused:!0,onKeyPress:M,selectionStart:o,selectionEnd:l,richText:!0,onMaximize:P,isMaximized:x,onClickClose:T,shouldSave:!0}))}))},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(1),m=n(3),h=n.n(m),g=n(34),y=n(4),v=n(65);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var C=function(e){s()(n,e);var t=E(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"_generateParticipantTextExpanded",value:function(e){return e.text?h.a.createElement("span",null,h.a.createElement("b",null,e.text)," <"+e.email+">"):e.email}},{key:"renderLabels",value:function(){for(var e=0,t=y.default.pluginManager.getPluginGmail(),n=this.props.accountID,a=this.props.message.labelIds,r=[],o=0;o<a.length;o++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var i=t._getLabelByID(n,a[o]);r.push(h.a.createElement("div",{key:o},i.getName()))}return this.renderLine("labels",r)}},{key:"renderParticipants",value:function(e){var t=this.props.message[e].map(function(e,t){return h.a.createElement("div",{key:t},this._generateParticipantTextExpanded(e))}.bind(this));return this.renderLine(e,t)}},{key:"renderLine",value:function(e,t){return h.a.createElement("div",{className:"emailDetailsLine flexbox"},h.a.createElement("div",null,e+":"),h.a.createElement("span",{className:"f1"},t))}},{key:"render",value:function(){var e=this.props.message,t=e.date,n=t.toString(y.default.International.getFormat(p.a.DFormat.DayMonthDateYear))+" at "+t.toString(y.default.International.getFormat(p.a.DFormat.ShortTime));return h.a.createElement(v.a,{key:"contextMenuEmailDetails",id:"contextMenuEmailDetails",element:this.props.element},this.renderLine("from",this._generateParticipantTextExpanded(e.from)),e.to&&this.renderParticipants("to"),e.cc&&this.renderParticipants("cc"),e.bcc&&this.renderParticipants("bcc"),this.renderLine("date",n),this.renderLine("subject",e.subject),e.labelIds&&this.renderLabels())}}]),n}(g.a);t.default=C},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(1),m=n(0),h=n(10),g=n(3),y=n.n(g),v=n(5),E=n(4),C=n(48),b=n(20),_=n(65),k=n(91),w=n(43),x=n(25),D=n(34),S=n(64),M=n(30);function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var P=function(e){s()(n,e);var t=T(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){var e=this,t=this.props,n=!1;this.mod=h.a.secModKey,this.priMod=h.a.priModKey,this.items=[],this.paneObjects=[],t.pane.applyToSelection((function(a,r,o,i){t.item===a&&(n=!0),e.item||(e.item=a,e.paneObject=i),e.hasSelection=!0,e.items.push(a),e.paneObjects.push(i)})),n||(this.item=void 0,this.hasSelection=!1),this.item||(this.item=t.item,this.paneObject=t.paneObject,this.items=[this.item],this.paneObjects=[this.paneObject],this.hasSelection=!1);try{m.default.PAssert(1424,this.item,"Must have a valid item")}catch(a){m.default.reportError(a)}}},{key:"onClickComplete",value:function(){this.hasSelection?m.default.focusedPane.applyFnToSelection("setComplete",{toggle:"isComplete",value2:p.a.ChangeType.Local}):this.item.setComplete(!this.item.isComplete(),p.a.ChangeType.Local)}},{key:"onClickStar",value:function(){this.hasSelection?m.default.focusedPane.applyFnToSelection("setStarred",{toggle:"isStarred",value2:p.a.ChangeType.Local}):this.item.setStarred(!this.item.isStarred(),p.a.ChangeType.Local)}},{key:"onClickPriority",value:function(e){this.hasSelection?this.props.pane.applyPriorityToSelection(e):this.item.setPriority(e,p.a.ChangeType.Local),E.default.menus.closeContextMenu()}},{key:"onClickIndent",value:function(e){v.a.fireKeyEvent(void 0,{normCode:p.a.KeyCode.Tab,shiftKey:e})}},{key:"onClickMove",value:function(){this.props.pane.autocompleteMove()}},{key:"onClickCreateTask",value:function(){this.props.pane.autocompleteCreateTask()}},{key:"onClickNote",value:function(){this.props.pane.openNoteContextMenuByPaneObject(this.props.paneObject)}},{key:"onClickCollapse",value:function(){this.item.toggleCollapsed(this.props.pane)}},{key:"onClickZoom",value:function(){var e=this.props.pane;e.canZoomToItem(this.item)&&(v.a.setFocusedPane(e),e.zoomIn(this.item))}},{key:"onClickZoomNewPane",value:function(){var e=this.props.pane;if(e.canZoomToItem(this.item)){var t=E.default.PaneManager.getPaneIndex(e)+1,n=e.getSaveInfo();n.item=this.item,n.document=e.getDocument(),delete n.id;var a=S.a.createPane(p.a.PaneMode.Task,n);return E.default.PaneManager.addPaneAtIndex(a,t),v.a.setFocusedPane(a),a.onAdded(),!1}}},{key:"onClickGoto",value:function(){E.default.PaneManager.scrollToAndHighlightItem(this.item,this.props.pane)}},{key:"onClickArchive",value:function(){var e=this.props.pane;e.isWriteable&&(this.hasSelection?e.archiveSelected(!0):this.props.item.archiveSelf(p.a.ChangeType.Local))}},{key:"onClickUnarchive",value:function(){this.item.unArchive(p.a.ChangeType.Local)}},{key:"onClickUndelete",value:function(){this.item.unDelete(p.a.ChangeType.Local)}},{key:"onClickDelete",value:function(){var e=this.item,t=this.props.pane;if(e.isNote())e.parent().setNote(void 0,p.a.ChangeType.Local),E.default.menus.closeContextMenu(),v.a.reset();else if(t.isWriteable)if(t.isViewDates()&&!e.hasAttachmentType(p.a.PluginType.Calendar)&&e.hasChildren()){E.default.menus.options("The item you are deleting has children.",["Remove Date","Delete All"],(function(t){if("Remove Date"===t){e.setMooDate(void 0,p.a.ChangeType.Local,!0);var n=e.getParsedText().replace(p.a.CharDate,"");e.setText(n,p.a.ChangeType.Local)}else"Delete All"===t&&e.deleteSelf(p.a.ChangeType.Local)}))}else this.hasSelection?(C.a.saveDeleteSelection(),t.deleteSelected()):(e.hasAttachmentType(p.a.PluginType.Calendar)&&this.deleteCalendar(),e.deleteSelf(p.a.ChangeType.Local))}},{key:"onClickAddCalendar",value:function(){var e=E.default.pluginManager.getPluginGCalendar(),t=this.item;e&&(e.createEventForItem(t),t.itemChanged.notify())}},{key:"onClickDeleteCalendar",value:function(){var e=0;this.deleteCalendar();for(var t=0;t<this.items.length;t++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var n=this.items[t];n.getDocumentOwner()||n.deleteSelf(p.a.ChangeType.Local)}}},{key:"deleteCalendar",value:function(){for(var e=0,t=this.props.pane,n=0,a=function(e,a){n--,a?0===n&&t.updateItems():E.default.toasts.pushMessage({text:"There was an error removing the event from your Google Calendar.",action:p.a.MessageAction.Okay})},r=0;r<this.items.length;r++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var o=this.items[r];if(o.hasAttachmentType(p.a.PluginType.Calendar)){var i=o.getAttachmentByPlugin(p.a.PluginID.GCalendar);try{m.default.PAssert(1425,i,"Must be able to get a valid attachment")}catch(s){m.default.reportError(s)}try{m.default.PAssert(1426,this.item,"Must have a valid item")}catch(s){m.default.reportError(s)}var l=i.getPlugin();l.hasWritePermissionForAttach(i)?(n++,v.a.reset(),l.deleteCalendarEventForItem(o,i,m.default.newEmptyFn(),m.default.newEmptyFn(),a)):E.default.toasts.pushMessage(p.a.MessageID.ReadOnlyCalendar)}}}},{key:"onClickReply",value:function(){this.hasSelection?this.props.pane.replySelected():this.props.pane.openEmailByItem(this.item,p.a.EmailResponseMode.Reply)}},{key:"onClickReplyAll",value:function(){this.hasSelection?this.props.pane.replyAllSelected():this.props.pane.openEmailByItem(this.item,p.a.EmailResponseMode.ReplyAll)}},{key:"onClickForward",value:function(){this.hasSelection?this.props.pane.forwardSelected():this.props.pane.openEmailByItem(this.item,p.a.EmailResponseMode.Forward)}},{key:"onClickRead",value:function(){var e=this.item,t=e.getAttachmentByType(p.a.PluginType.Email),n=t.getPlugin(),a=n.isItemUnread(e);this.hasSelection?this.props.pane.markReadSelected(a):a?n.performAction(p.a.PluginAction.Gmail.MarkRead,!1,t):n.performAction(p.a.PluginAction.Gmail.MarkUnread,!1,t)}},{key:"onClickStarGmail",value:function(){if(this.hasSelection)this.props.pane.toggleStarSelected();else{var e=this.item.getAttachmentByType(p.a.PluginType.Email),t=e.getPlugin();t.isItemStarred(this.item)?t.performAction(p.a.PluginAction.Gmail.Unstar,!1,e):t.performAction(p.a.PluginAction.Gmail.Star,!1,e)}}},{key:"onClickLabel",value:function(){this.props.pane.autocompleteLabel()}},{key:"onClickSchedule",value:function(){this.props.pane.autocompleteSchedule({item:this.item,element:this.props.element})}},{key:"onClickArchiveGmail",value:function(){var e=this.item,t=e.getAttachmentByType(p.a.PluginType.Email),n=t.getPlugin(),a=n.isItemArchived(e);"PaneGmail"===this.props.pane.type&&this.hasSelection?this.props.pane.archiveSelected(!a):a?n.performAction(p.a.PluginAction.Gmail.Unarchive,!1,t):n.performAction(p.a.PluginAction.Gmail.Archive,!1,t)}},{key:"onClickDeleteGmail",value:function(){var e=this.item,t=this.props.pane,n=e.getAttachmentByType(p.a.PluginType.Email).getPlugin(),a=n.isItemFullTrashed(e);t.type===p.a.PaneMode.Gmail?this.hasSelection?t.deleteSelected(n.isGmailItem,!a):n.isGmailItem(e)&&(this.onClickDeleteCalendar(),e.deleteSelf(p.a.ChangeType.Local)):a?n.undeleteItem(e):n.deleteItem(e)}},{key:"onClickPrefix",value:function(e){v.a.applyPrefixToSelection(e,!this.hasSelection&&this.item),E.default.menus.closeContextMenu()}},{key:"onClickShowMDImageText",value:function(e){this.props.pane.search.clearStickyMatches();var t=this.item.getRawText(),n=e.substr(1);t=t.replace(e,n),this.item.setText(t,p.a.ChangeType.Local)}},{key:"onClickShowDriveImageText",value:function(e){this.props.pane.search.clearStickyMatches();var t=this.item,n=t.getAttachmentByPlugin(p.a.PluginID.Drive);n.getPlugin().setShowInline(t,n,e)}},{key:"onClickMakeLinkImage",value:function(e){var t=0;this.props.pane.search.clearStickyMatches();var n,a,r=this.item.getRawText();for(p.a.Regexp.MDLink.lastIndex=0;null!==(n=p.a.Regexp.MDLink.exec(r));){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;n[3]===e&&(e=n[0],a="!["+n[2]+"]("+n[3]+(n[4]?n[4]:"")+")")}a||(a=e.startsWith("[")?"!"+e:"!["+e+"]("+e+")"),r=r.replace(e,a),this.item.setText(r,p.a.ChangeType.Local)}},{key:"onViewInDrive",value:function(){var e=this.item,t=e.getAttachmentByPlugin(p.a.PluginID.Drive);t.getPlugin().openAttach(t,e,this.props.pane)}},{key:"onClickFixSync",value:function(){m.default.focusedPane.applyToSelection((function(e){var t=e.getDocumentOwner();t.getBacking().saveItem(t,e,e.getFullSaveData(),p.a.ChangeType.Local,p.a.SaveFlag.All)}))}},{key:"renderMenuItemMDImage",value:function(e){var t=e.getAttribute("data-original-text");if(t)return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{onClick:this.onClickShowMDImageText.bind(this,t)},"Show as text"),y.a.createElement("hr",null))}},{key:"renderMenuLink",value:function(e){var t=this,n=this.props,a=n.item,r=n.element,o=n.paneObject,i=e.textContent,l=e.getAttribute("data-href"),s=m.default.isUrlImage(l);return y.a.createElement(y.a.Fragment,null,s&&y.a.createElement(w.a,{onClick:function(){t.onClickMakeLinkImage(l)}},"Show Image"),y.a.createElement(w.a,{onClick:function(){E.default.menus.openContextMenu({componentName:"ReactContextMenuInsertLink",element:r,onInsertLink:a.onInsertLink,text:i,href:l})}},"Edit link"),y.a.createElement(w.a,{onClick:function(){var t=M.default.getChildNodeOffset(e,!0);v.a.selectIndex(o.index,t),a.onInsertLink({text:i,href:void 0,isUpdate:!0})}},"Remove link"),y.a.createElement("hr",null))}},{key:"renderMenuLinkImage",value:function(e){var t=e.getAttribute("data-original-text")||e.getAttribute("data-href")||e.textContent;return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{onClick:this.onClickMakeLinkImage.bind(this,t)},"Show as image"),y.a.createElement("hr",null))}},{key:"renderMenuDate",value:function(){return y.a.createElement("span",null,y.a.createElement(w.a,{icon:"icon-calendar",hotkey:{name:"AddToCalendar"},onClick:this.onClickAddCalendar},"Add to Google Calendar"))}},{key:"renderMenuNote",value:function(){return y.a.createElement("span",null,y.a.createElement(w.a,{icon:"icon-edit",hotkey:{name:"EditNote"},onClick:this.onClickNote},"Edit"),y.a.createElement(w.a,{icon:"icon-delete",onClick:this.onClickDelete,clickCloses:!1},"Delete"))}},{key:"renderMenuDefault",value:function(){var e,t,n=this.props.pane,a=this.item,r=this.priMod,o=n.isViewCalendar(),i=!o,l=n.supportIndent&&!a.isNote()&&0!==a.getIndex()&&!n.isViewFlatList(),s=n.supportIndent&&!a.isNote()&&a.parent()!==m.default.focusedItem&&!n.isViewFlatList(),c=E.default.pluginManager.getPluginGCalendar();if(c&&a.getDate())if(a.hasAttachmentType(p.a.PluginType.Calendar)){var u=a.getAttachmentByType(p.a.PluginType.Calendar);e=y.a.createElement(w.a,{icon:"icon-delete",disabled:!c.hasWritePermissionForAttach(u),onClick:this.onClickDeleteCalendar},"Remove from Google Calendar")}else e=y.a.createElement(w.a,{icon:"icon-calendar",hotkey:i&&{name:"AddToCalendar"},onClick:this.onClickAddCalendar},"Add to Google Calendar");if(a.hasAttachmentType(p.a.PluginType.Email)){var d=a.getAttachmentByType(p.a.PluginType.Email),f=d.getPlugin();if(!d.getPlugin().shouldUseNewPlugin(d)){var h=f.isItemArchived(a),g=f.isItemFullTrashed(a);t=y.a.createElement(y.a.Fragment,null,y.a.createElement("hr",null),y.a.createElement(w.a,{disabled:g,icon:"icon-task",onClick:this.onClickArchiveGmail},"".concat(h?"Unarchive":"Archive"," email")),y.a.createElement(w.a,{icon:"icon-delete",onClick:this.onClickDeleteGmail},"".concat(g?"Undelete":"Delete"," email")))}}return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{icon:"icon-check",hotkey:i&&{name:"Complete"},onClick:this.onClickComplete},a.isComplete()?"Uncomplete":"Complete"),y.a.createElement(w.a,{icon:"icon-zoom-in",hotkey:i&&{name:"ZoomIn"},onClick:this.onClickZoom},"Zoom In"),y.a.createElement(w.a,{icon:"icon-star",hotkey:i&&{name:"Star"},onClick:this.onClickStar},a.isStarred()?"Unstar":"Star"),y.a.createElement(k.a,{hotkey:i&&r+" + #",border:!1},"Priority"),y.a.createElement("div",{className:"horizontalMenu"},y.a.createElement(b.a,{className:"c-border-heavy",id:"itemPriorityHigh",width:24,height:24,tooltipHotkey:i&&{name:"Priority1"},onClick:this.onClickPriority.bind(this,p.a.VMLIFlag.P0)}),y.a.createElement(b.a,{className:"c-border-heavy",id:"itemPriorityMed",width:24,height:24,tooltipHotkey:i&&{name:"Priority2"},onClick:this.onClickPriority.bind(this,p.a.VMLIFlag.P1)}),y.a.createElement(b.a,{className:"c-border-heavy",id:"itemPriorityLow",width:24,height:24,tooltipHotkey:i&&{name:"Priority3"},onClick:this.onClickPriority.bind(this,p.a.VMLIFlag.P2)}),y.a.createElement(b.a,{className:"c-border-heavy",id:"itemPriorityNone",width:24,height:24,tooltipHotkey:i&&{name:"PriorityNone"},onClick:this.onClickPriority.bind(this,p.a.VMLIFlag.None)})),y.a.createElement(k.a,{border:!1},"Item Type"),y.a.createElement("div",{className:"horizontalMenu"},y.a.createElement(b.a,{className:"c-border-heavy",iconSize:14,width:24,height:24,tooltip:"None",onClick:this.onClickPrefix.bind(this,null)}),y.a.createElement(b.a,{className:"c-border-heavy",icon:"icon-project",iconSize:18,width:24,height:24,tooltip:"Project",onClick:this.onClickPrefix.bind(this,p.a.Prefix.Header)}),y.a.createElement(b.a,{className:"c-border-heavy",icon:"icon-check",iconSize:15,width:24,height:24,tooltip:"Task",onClick:this.onClickPrefix.bind(this,p.a.Prefix.Task)}),y.a.createElement(b.a,{className:"c-border-heavy",icon:"icon-bullet",iconSize:22,width:24,height:24,tooltip:"Bullet",onClick:this.onClickPrefix.bind(this,p.a.Prefix.Bullet)}),y.a.createElement(b.a,{className:"c-border-heavy",icon:"icon-numlist",iconSize:13,width:24,height:24,tooltip:"Numbered List",onClick:this.onClickPrefix.bind(this,p.a.Prefix.NumList)})),e&&y.a.createElement(y.a.Fragment,null,y.a.createElement("hr",null),e),y.a.createElement("hr",null),l&&y.a.createElement(w.a,{icon:"icon-format_indent_increase",hotkey:{name:"Indent"},onClick:this.onClickIndent.bind(this,!1)},"Indent"),s&&y.a.createElement(w.a,{icon:"icon-format_indent_decrease",hotkey:{name:"Unindent"},onClick:this.onClickIndent.bind(this,!0)},"Unindent"),!o&&y.a.createElement(w.a,{icon:"icon-align-left",hotkey:{name:"MoveAutocomplete"},onClick:this.onClickMove},"Move"),y.a.createElement("hr",null),!o&&y.a.createElement(w.a,{icon:"icon-sticky-note-o",hotkey:{name:"EditNote"},onClick:this.onClickNote},"Add Note"),y.a.createElement(w.a,{icon:"icon-zoom-in-plus",onClick:this.onClickZoomNewPane},"Open in New Pane"),y.a.createElement(w.a,{icon:"icon-keyboard-tab",hotkey:{name:"Goto"},onClick:this.onClickGoto},"Go to in all panes"),t,y.a.createElement("hr",null),a.getDocumentOwner()&&y.a.createElement(w.a,{icon:"icon-task",onClick:this.onClickArchive},"Archive Item"),y.a.createElement(w.a,{icon:"icon-delete",hotkey:{name:"DeleteItem"},onClick:this.onClickDelete},"Delete"),this.props.showExtra&&y.a.createElement(y.a.Fragment,null,y.a.createElement("hr",null),y.a.createElement(w.a,{icon:"icon-link",onClick:this.onClickFixSync},"Fix Sync")),y.a.createElement(w.a,{className:"mt-2 mb-1 text-xs",hoverEffects:!1,faded:!0,customLayout:!0,style:{lineHeight:1.35}},y.a.createElement("div",{className:"flex"},y.a.createElement("b",{className:"f1"},"Created"),y.a.createElement("div",null,x.a.toHumanText(a.dateCreated))),y.a.createElement("div",{className:"flex"},y.a.createElement("b",{className:"f1"},"Modified"),y.a.createElement("div",null,x.a.toHumanText(a.dateModified))),a.isComplete()&&y.a.createElement("div",{className:"flex"},y.a.createElement("b",{className:"f1"},"Completed"),y.a.createElement("div",null,x.a.toHumanText(a.dateCompleted)))))}},{key:"renderMenuArchived",value:function(){return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{icon:"icon-task",onClick:this.onClickUnarchive},"Unarchive"),y.a.createElement(w.a,{icon:"icon-delete",onClick:this.onClickDelete},"Delete"))}},{key:"renderMenuDeleted",value:function(){return y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{icon:"icon-task",onClick:this.onClickUndelete},"Undelete"))}},{key:"renderMenuDrive",value:function(){var e=this.props.pane,t=this.item,n=t.isCollapsed(e,!1),a=e.supportCollapsing&&(t.isHeader()||t.hasChildren()),r=t.isHeader()||t.hasChildren(),o=t.getAttachmentByPlugin(p.a.PluginID.Drive),i=o.getPlugin().isImage(o),l=o.getField("showInline");return y.a.createElement(y.a.Fragment,null,!e.plugin&&i&&y.a.createElement(w.a,{onClick:this.onClickShowDriveImageText.bind(this,!l)},"Show as "+(l?"text":"image")),e.plugin&&y.a.createElement(w.a,{disabled:!a,icon:n?"icon-add":"icon-minus",hotkey:{name:"Collapse"},onClick:this.onClickCollapse},n?"Expand":"Collapse"),e.plugin&&y.a.createElement(w.a,{disabled:!r,icon:"icon-zoom-in",hotkey:{name:"ZoomIn"},onClick:this.onClickZoom},"Zoom In"),y.a.createElement(w.a,{onClick:this.onViewInDrive},"View in Drive"),!e.plugin&&y.a.createElement("hr",null))}},{key:"renderMenuGCalendar",value:function(e){return e.getPlugin().hasWritePermissionForAttach(e)?y.a.createElement(w.a,{icon:"icon-delete",onClick:this.onClickDeleteCalendar},"Remove from Google Calendar"):y.a.createElement(w.a,{icon:"icon-warning"},"Read-Only Event")}},{key:"renderMenuGmail",value:function(e){var t=this.item,n=this.mod,a="PaneGmail"===this.props.pane.type,r=e.getPlugin(),o=r.isItemUnread(t),i=r.isItemStarred(t),l=r.isItemArchived(t),s=r.isItemFullTrashed(t),c=y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{icon:"icon-reply",hotkey:a&&{name:"Reply",group:"Email"},onClick:this.onClickReply},"Reply"),y.a.createElement(w.a,{icon:"icon-reply-all",hotkey:a&&{name:"ReplyAll",group:"Email"},onClick:this.onClickReplyAll},"Reply All"),y.a.createElement(w.a,{icon:"icon-forward",hotkey:a&&{name:"Forward",group:"Email"},onClick:this.onClickForward},"Forward"),y.a.createElement("hr",null));return y.a.createElement(y.a.Fragment,null,c,a&&y.a.createElement(y.a.Fragment,null,y.a.createElement(w.a,{icon:o?"icon-drafts":"icon-unread",iconSize:14,hotkey:o?"":{name:"MarkUnread",group:"Email"},onClick:this.onClickRead},o?"Mark as read":"Mark as unread"),y.a.createElement(w.a,{icon:"icon-star",hotkey:{name:"Star",group:a?"Email":"Pane"},onClick:this.onClickStarGmail},i?"Unstar":"Star"),y.a.createElement("hr",null),y.a.createElement(w.a,{className:"mat-subheader",hotkey:n+" + #"},"Priority"),y.a.createElement("div",{id:"contextMenuPriority",className:"horizontalMenu"},y.a.createElement(b.a,{className:"c-border-heavy",id:"itemPriorityNone",onClick:this.onClickPriority.bind(this,p.a.VMLIFlag.None)}),y.a.createElement(b.a,{className:"c-border-heavy",id:"itemPriorityLow",onClick:this.onClickPriority.bind(this,p.a.VMLIFlag.P2)}),y.a.createElement(b.a,{className:"c-border-heavy",id:"itemPriorityMed",onClick:this.onClickPriority.bind(this,p.a.VMLIFlag.P1)}),y.a.createElement(b.a,{className:"c-border-heavy",id:"itemPriorityHigh",onClick:this.onClickPriority.bind(this,p.a.VMLIFlag.P0)})),y.a.createElement("hr",null),y.a.createElement(w.a,{icon:"icon-tag",hotkey:{name:"Label",group:"Email"},onClick:this.onClickLabel},"Label"),y.a.createElement(w.a,{icon:"icon-check",hotkey:{name:"Task",group:"Email"},onClick:this.onClickCreateTask},"Create Task"),y.a.createElement(w.a,{icon:"icon-align-left",hotkey:{name:"Move",group:"Email"},onClick:this.onClickMove},"Add to Outline"),y.a.createElement(w.a,{icon:"icon-calendar",hotkey:{name:"Schedule",group:"Email"},onClick:this.onClickSchedule},"Add To Calendar"),y.a.createElement("hr",null),y.a.createElement(w.a,{disabled:s,icon:"icon-task",hotkey:{name:"Archive",group:"Email"},onClick:this.onClickArchiveGmail},l?"Unarchive":"Archive"),y.a.createElement(w.a,{icon:"icon-delete",hotkey:{name:"Delete",group:"Email"},onClick:this.onClickDeleteGmail},s?"Undelete":"Delete")))}},{key:"render",value:function(){var e,t,n=this.props,a=n.pane,r=this.item,o=n.element,i=m.default.getPluginForElement(o);this.items.length;if(i){var l=m.default.hasClass(i,"plugin_drive")&&p.a.PluginID.Drive||m.default.hasClass(i,"plugin_gmail")&&p.a.PluginID.Gmail||m.default.hasClass(i,"syncedToCalendar")&&p.a.PluginID.GCalendar||"";if(l&&r.hasPluginAttachment(l)){var s=r.getAttachmentByPlugin(l);if(!s.getPlugin().shouldUseNewPlugin(s)){switch(l){case p.a.PluginID.Drive:t=this.renderMenuDrive();break;case p.a.PluginID.GCalendar:t=this.renderMenuGCalendar(r.getAttachmentByPlugin(l));break;case p.a.PluginID.Gmail:t=this.renderMenuGmail(r.getAttachmentByPlugin(l))}a.plugin||(e=t,t=void 0)}}}else if(m.default.hasClass(o,"link"))e=this.renderMenuLink(o);else if(m.default.hasClass(o,"linkImage"))e=this.renderMenuLinkImage(o);else if(m.default.hasClass(o,"mdImage"))e=this.renderMenuItemMDImage(o);else if(m.default.hasClass(o,"driveImage"))e=this.renderMenuDrive();else if(m.default.hasClass(o,"date")){E.default.pluginManager.getPluginGCalendar()&&(t=r.hasAttachmentType(p.a.PluginType.Calendar)?this.renderMenuGCalendar(r.getAttachmentByPlugin(p.a.PluginID.GCalendar)):this.renderMenuDate())}else r.isNote()&&(t=this.renderMenuNote());if(!t){var c=a.getContextMenuMode();switch(c){case"Normal":t=this.renderMenuDefault();break;case"Archived":t=this.renderMenuArchived();break;case"Deleted":t=this.renderMenuDeleted();break;case"Gmail":t=this.renderMenuGmail(r.getAttachmentByPlugin(p.a.PluginID.Gmail));break;case"Drive":t=this.renderMenuDrive();break;default:try{m.default.PAssert(1427,!1,"Unknown context menu mdoe: "+c)}catch(u){m.default.reportError(u)}}}return y.a.createElement(_.a,{id:"contextMenuItem",element:n.element,supportArrows:!0,pos:n.pos,noBackdrop:n.noBackdrop},e,t)}}]),n}(D.a);t.default=P},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(7),i=n.n(o),l=n(8),s=n.n(l),c=n(17),u=n.n(c),d=n(18),f=n.n(d),p=n(9),m=n.n(p),h=n(0),g=n(1),y=n(10),v=n(4),E=n(15),C=n(3),b=n.n(C),_=n(34),k=n(137),w=n(65),x=n(43),D=n(20),S=n(25),M=n(28);function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var P=function(e){u()(n,e);var t=T(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"init",value:function(){this.createObservables({isBackingUp:!1,updateMessage:void 0}),this.listenTo(M.a.onAccountsUpdated)}},{key:"getState",value:function(){var e=E.a.onlineStatus.get(),t={onlineStatus:E.a.onlineStatus,lastSync:v.default.settings.lastSync,lastSyncText:this.getLastSyncText(),lastBackupText:this.getLastBackupText(),isOnline:"Offline"!==e,isConnected:"Online"===e,supportsOffline:"serviceWorker"in navigator,nearQuota:y.a.isNearStorageQuota,hasUnsavedData:!1,cacheRatioWarning:parseFloat(v.default.pluginManager.getCacheSizeRatio())<.6,backupFrequency:v.default.settings.backupFrequency,isBackupEnabled:v.default.settings.isBackupEnabled(),hasUpdate:v.default.AppCache.hasUpdate};return t.hasWarning=t.nearQuota||t.hasUnsavedData||t.cacheRatioWarning||!t.supportsOffline,t}},{key:"getLastSyncText",value:function(){var e=v.default.settings.lastSync.get();return e>0?new Date(e).toString(v.default.International.getFormat(g.a.DFormat.LongDayTime)):"Not synced"}},{key:"getLastBackupText",value:function(){var e,t=k.a.getLastBackup();if(this.isBackingUp.get())e="Backing up...";else if(t>0){var n=new Date(t);e=S.a.toHumanText(n)}else e="Not backed up";return e}},{key:"_handleQuotaOverClick",value:function(){v.default.toasts.pushMessage({text:"Your computer's offline storage quota has been exceeded. Please try freeing space on your device. Offline access will not work.",action:g.a.MessageAction.Okay})}},{key:"_handleQuotaNearClick",value:function(){v.default.toasts.pushMessage({text:"Your computer's offline storage quota is almost exceeded. Please try freeing space on your device, running out will cause offline access to not work.",action:g.a.MessageAction.Okay})}},{key:"_handleUnsavedClick",value:function(){v.default.toasts.pushMessage({text:"Your local changes have been unable to be persisted to disk and have not been saved remotely. You must reconnect to the internet to save them. Free up disk space to prevent this happening.",action:g.a.MessageAction.Okay})}},{key:"_handleRatioClick",value:function(){v.default.toasts.pushMessage({text:"Due to low disk space your cache size was restricted. View your General Settings to reset your cache size.",action:g.a.MessageAction.OpenGeneralSettings})}},{key:"_handleBlockClick",value:function(){}},{key:"_handleCookiesClick",value:function(){}},{key:"onClickBackup",value:function(){var e=this;this.isBackingUp.set(!0),k.a.backupAll().then((function(){return e.isBackingUp.set(!1)}))}},{key:"onClickEnableBackups",value:function(){k.a.enable()}},{key:"onClickCheckUpdates",value:function(e,t){var n=this;this.state.hasUpdate?h.default.reload():v.default.AppCache.update((function(e){n.updateMessage.set(e?"Installing...":"Up to date")}))}},{key:"_handleIconWarningClick",value:function(e){M.a.doAuthForAccount(e,v.default.pluginManager.getPlugin(g.a.PluginID.Gmail).googleScopes(),h.default.emptyFn)}},{key:"componentDidUpdate",value:function(){this.refs.menu.updateState()}},{key:"render",value:function(){var e=this.state,t=+g.a.jsVersion,n="".concat(t,": ").concat(new Date(t).toString("MMMM d, h:mm tt"));return b.a.createElement(w.a,r()({},this.props,{ref:"menu",minWidth:250,key:"contextMenuOnlineStatus",id:"contextMenuOnlineStatus",element:this.props.element}),b.a.createElement(x.a,{className:"onlineStatusHeader"},"Last Sync"),b.a.createElement(x.a,null,e.lastSyncText),b.a.createElement("hr",null),b.a.createElement(x.a,{className:"onlineStatusHeader",height:36},"Last Backup",b.a.createElement(D.a,{primary:!0,onClick:this.onClickBackup},"Backup now")),b.a.createElement(x.a,null,e.lastBackupText),e.hasWarning&&b.a.createElement("div",null,b.a.createElement("hr",null),b.a.createElement(x.a,{className:"onlineStatusHeader"},"Warnings"),!e.supportsOffline&&b.a.createElement(x.a,{clickCloses:!1,tooltip:"Learn More"},"Your browser does not support offline access"),e.nearQuota&&b.a.createElement(x.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleQuotaNearClick},"Nearly out of disk space"),e.hasUnsavedData&&b.a.createElement(x.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleUnsavedClick},"Unsaved changes will be lost"),e.cacheRatioWarning&&b.a.createElement(x.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleRatioClick},"Your data is not efficiently being cached")),b.a.createElement("hr",null),b.a.createElement(x.a,{className:"onlineStatusHeader",height:36},"App version",e.updateMessage&&!e.hasUpdate?b.a.createElement("div",{style:{paddingLeft:48}},e.updateMessage):b.a.createElement(D.a,{primary:!0,onClick:this.onClickCheckUpdates},e.hasUpdate?"Update":"Check for updates")),y.a.isBeta&&b.a.createElement(x.a,null,"Beta"),b.a.createElement(x.a,null,n))}}]),n}(_.a);t.default=P},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(3),i=n.n(o),l=n(324),s=n(65),c=n(21);t.default=Object(c.b)((function(e){return i.a.createElement(s.a,r()({},e,{key:"contextMenuHeart",id:"contextMenuHeart",element:e.element}),i.a.createElement(l.a,null))}))},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(7),i=n.n(o),l=n(8),s=n.n(l),c=n(17),u=n.n(c),d=n(18),f=n.n(d),p=n(9),m=n.n(p),h=n(38),g=n(1),y=n(0),v=n(10),E=n(3),C=n.n(E),b=n(4),_=n(65),k=n(43);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var x=function(e){u()(n,e);var t=w(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"onClickSettings",value:function(){b.default.menus.openSettings()}},{key:"onClickDisplaySettings",value:function(){b.default.menus.openDisplaySettings()}},{key:"onClickImport",value:function(){b.default.menus.openModal(g.a.Modals.ImportData)}},{key:"onClickExport",value:function(){b.default.menus.openModal(g.a.Modals.ExportData)}},{key:"onClickRevision",value:function(){b.default.menus.openModal(g.a.Modals.Backups)}},{key:"onClickFeedback",value:function(){b.default.menus.openModal(g.a.Modals.ReportBug)}},{key:"onClickBlog",value:function(){y.default.openUrl("https://www.moo.do/blog/")}},{key:"onClickLogout",value:function(){b.default.setup.logoutClicked()}},{key:"onClickShare",value:function(){b.default.menus.openContextMenu({componentName:"ReactContextMenuShare",element:this.props.element})}},{key:"onClickDownloadApp",value:function(){y.default.openUrl(v.a.getAppDownloadURL())}},{key:"onClickTrial",value:function(){b.default.menus.openSettings("Account")}},{key:"onClickHelp",value:function(){b.default.intro.showHelp()}},{key:"onClickHotkeys",value:function(){b.default.intro.showHotkeys()}},{key:"render",value:function(){var e=b.default.billingManager,t=h.a.getAccountName(),n=e.isTrialState()&&!b.default.settings.trialOverHidden.get(),a=e.isTrialOver(),o=!y.default.isDemoMode(),i=e.daysLeftInTrial.get();return C.a.createElement(_.a,r()({},this.props,{key:"contextMenuOptions",id:"contextMenuOptions",supportArrows:!0}),C.a.createElement(k.a,{onClick:this.onClickSettings},"Settings"),C.a.createElement(k.a,{onClick:this.onClickDisplaySettings},"Display Settings"),C.a.createElement("hr",null),C.a.createElement(k.a,{onClick:this.onClickHelp},"Help"),C.a.createElement(k.a,{onClick:this.onClickHotkeys},"Hotkeys"),o&&C.a.createElement("hr",null),o&&C.a.createElement(k.a,{onClick:this.onClickImport},"Import Data"),o&&C.a.createElement(k.a,{onClick:this.onClickExport},"Export Data"),o&&C.a.createElement(k.a,{onClick:this.onClickRevision},"Revision History"),C.a.createElement("hr",null),o&&C.a.createElement(k.a,{onClick:this.onClickFeedback},"Contact Support"),C.a.createElement(k.a,{onClick:this.onClickBlog},"Moo.do Blog"),C.a.createElement(k.a,{onClick:this.onClickShare},"Share Moo.do"),v.a.canDownloadNativeApp()&&C.a.createElement(k.a,{onClick:this.onClickDownloadApp},"Get "+v.a.getPlatformName()+" app"),C.a.createElement("hr",null),n&&C.a.createElement(k.a,{className:a?"error":"",onClick:this.onClickTrial},a?"Trial over":"Trial: "+i+" days"),C.a.createElement(k.a,{onClick:this.onClickLogout},"Logout"),C.a.createElement(k.a,{className:"username",faded:!0,hoverEffects:!1},t),C.a.createElement(k.a,{className:"useremail",faded:!0,hoverEffects:!1},b.default.settings.getUserIdentifier()))}}]),n}(n(34).a);t.default=x},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(7),i=n.n(o),l=n(8),s=n.n(l),c=n(17),u=n.n(c),d=n(18),f=n.n(d),p=n(9),m=n.n(p),h=n(1),g=n(4),y=n(3),v=n.n(y),E=n(34),C=n(65),b=n(20);function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var k=function(e){u()(n,e);var t=_(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"onClickUpsell",value:function(){var e=!g.default.billingManager.isTrialOver();g.default.menus.closeContextMenu(),e?g.default.billingManager.startTrial():g.default.menus.openSettings("Account")}},{key:"render",value:function(){var e=this.props,t=!g.default.billingManager.isTrialOver();return v.a.createElement(C.a,r()({},e,{id:"contextMenuBoardsUpsell"}),v.a.createElement("div",null,v.a.createElement("div",null,e.premiumMessage),v.a.createElement("br",null),t&&v.a.createElement("div",null,"Start your "+h.a.TrialDuration+" day free trial to enable "+e.enableMessage+"."),!t&&v.a.createElement("div",null,"Go Premium to enable "+e.enableMessage+".")),v.a.createElement("br",null),v.a.createElement("div",{className:"center"},v.a.createElement(b.a,{primary:!0,raised:!0,onClick:this.onClickUpsell},t?"Start Trial":"Go Premium")))}}]),n}(E.a);t.default=k},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(0),m=n(1),h=n(4),g=n(3),y=n.n(g),v=n(34),E=n(65),C=n(81),b=n(5);function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var k=function(e){s()(n,e);var t=_(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){var e=h.default.pluginManager.getPlugin(m.a.PluginID.Drive);this.createObservables({isHovered:!1,isDriveEnabled:e.isEnabled()}),this.refMenu=y.a.createRef(),this.refPicker=y.a.createRef(),this.refInputUrl=y.a.createRef()}},{key:"doUpload",value:function(e){for(var t=0,n=h.default.pluginManager.getPluginDrive(),a=0;a<e.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;n.handleDropFile(e[a],this.props.pane,void 0,this.onUploadComplete.bind(this,0===a))}this.refMenu.current.close()}},{key:"onUploadComplete",value:function(e,t){var n=this.props,a=n.item,r=n.itemParent,o=n.pane,i=isNaN(n.insertIndex)?n.paneObject.index+1:n.insertIndex;if(e&&a)a.setText(t,m.a.ChangeType.Local);else{var l=r||a.parent(),s=o.createVMLI({text:t},{parent:l,changeType:m.a.ChangeType.AllLocal});l.insertItem(s,i)}return a}},{key:"onChangeFile",value:function(e){return e.target.files&&e.target.files.length>0&&this.doUpload(e.target.files),!1}},{key:"onDragEnter",value:function(){this.isHovered.set(!0)}},{key:"onDragLeave",value:function(){this.isHovered.set(!1)}},{key:"onDrop",value:function(e){var t=e.dataTransfer;t.files&&t.files.length>0&&this.doUpload(t.files)}},{key:"onClickEnableDrive",value:function(){this.refMenu.current.close(),h.default.menus.openSettings("Plugins")}},{key:"onClick",value:function(){this.refPicker.current.click()}},{key:"onClickAddUrl",value:function(){this.refMenu.current.close();var e=this.props,t=this.refInputUrl.current.getValue();if(e.pane.setIgnoreRestoreScroll(),this.props.item)b.a.selectIndex(this.props.paneObject.index,0,0),this.props.item.onInsertLink({href:t},h.default.settings.showImagesInline.get());else{var n=e.itemParent,a=e.pane.createVMLI({text:h.default.settings.getDefaultItemText()},{parent:n,changeType:m.a.ChangeType.AllLocal});n.insertItem(a,e.insertIndex),b.a.selectIndex(e.insertIndex,a.getParsedText().length),a.onInsertLink({href:t},h.default.settings.showImagesInline.get())}}},{key:"render",value:function(){var e=this.props,t=this.state,n=this.state.isHovered,a=e.image,r=p.default.classNames("uploadDropZone",{"hovered c-bg-light":n}),o=a?"image":"file";return y.a.createElement(E.a,{key:"contextMenuDropZone",id:"contextMenuDropZone",name:"ReactContextMenuDropZone",element:e.element,pos:e.pos,ref:this.refMenu},a&&y.a.createElement(C.a,{focused:!0,placeholder:"Enter an image address",height:32,buttonText:"ADD",onButtonClick:this.onClickAddUrl,ref:this.refInputUrl}),a&&y.a.createElement("div",{className:"dropOr center c-foreground-faded"},"or"),t.isDriveEnabled&&y.a.createElement("div",{className:r,onClick:this.onClick,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop},(n?"Drop file(s)":"Drag files here or click")+" to add "+o+".",y.a.createElement("input",{type:"file",ref:this.refPicker,className:"hidden",multiple:!0,onChange:this.onChangeFile})),!t.isDriveEnabled&&y.a.createElement("div",{className:r,onClick:this.onClickEnableDrive},"Enable the Google Drive plugin to upload files"))}}]),n}(v.a);t.default=k},function(e,t,n){"use strict";var a=Object.prototype.hasOwnProperty;function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}e.exports=function(e,t){if(r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var i=0;i<n.length;i++)if(!a.call(t,n[i])||!r(e[n[i]],t[n[i]]))return!1;return!0}},function(e,t,n){"use strict";var a=n(305);t.__esModule=!0,t.default=function(e){if((!r&&0!==r||e)&&o.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),r=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return r};var r,o=a(n(315));e.exports=t.default},function(e,t,n){var a=n(296);e.exports=function(e){var t=a(e),n=t.getFullYear(),r=t.getMonth(),o=new Date(0);return o.setFullYear(n,r+1,0),o.setHours(0,0,0,0),o.getDate()}},function(e,t){e.exports=function(e){var t=new Date(e.getTime()),n=t.getTimezoneOffset();return t.setSeconds(0,0),6e4*n+t.getTime()%6e4}},function(e,t,n){var a=n(307);e.exports=function(e,t){var n=a(e),r=a(t);return n.getTime()===r.getTime()}},function(e,t,n){var a=n(296);e.exports=function(e){var t=a(e);return t.setHours(23,59,59,999),t}},function(e,t){e.exports={hideYearsOnSelect:!0,layout:"portrait",overscanMonthCount:2,shouldHeaderAnimate:!0,showHeader:!0,showMonthsForYears:!0,showOverlay:!0,showTodayHelper:!0,showWeekdays:!0,todayHelperRowOffset:4}},function(e,t){e.exports={blank:"Select a date...",headerFormat:"ddd, MMM Do",todayLabel:{long:"Today"},weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekStartsOn:0}},function(e,t){e.exports={accentColor:"#448AFF",floatingNav:{background:"rgba(56, 87, 138, 0.94)",chevron:"#FFA726",color:"#FFF"},headerColor:"#448AFF",selectionColor:"#559FFF",textColor:{active:"#FFF",default:"#333"},todayColor:"#FFA726",weekdayColor:"#559FFF"}},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=s(n(409)),o=s(n(3)),i=s(n(40)),l=(s(n(410)),n(411));function s(e){return e&&e.__esModule?e:{default:e}}i.default.any,i.default.func,i.default.node;var c=function(e){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,r));return o.performAppear=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(o._handleDoneAppearing.bind(o,e,t)):o._handleDoneAppearing(e,t)},o._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete o.currentlyTransitioningKeys[e];var n=(0,l.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performEnter=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(o._handleDoneEntering.bind(o,e,t)):o._handleDoneEntering(e,t)},o._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete o.currentlyTransitioningKeys[e];var n=(0,l.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performLeave=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(o._handleDoneLeaving.bind(o,e,t)):o._handleDoneLeaving(e,t)},o._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete o.currentlyTransitioningKeys[e];var n=(0,l.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)?o.keysToEnter.push(e):o.setState((function(t){var n=a({},t.children);return delete n[e],{children:n}}))},o.childRefs=Object.create(null),o.state={children:(0,l.getChildMapping)(n.children)},o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,l.getChildMapping)(e.children),n=this.state.children;for(var a in this.setState({children:(0,l.mergeChildMappings)(n,t)}),t){var r=n&&n.hasOwnProperty(a);!t[a]||r||this.currentlyTransitioningKeys[a]||this.keysToEnter.push(a)}for(var o in n){var i=t&&t.hasOwnProperty(o);!n[o]||i||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[],n=function(n){var a=e.state.children[n];if(a){var i="string"!==typeof a.ref,l=e.props.childFactory(a),s=function(t){e.childRefs[n]=t};l===a&&i&&(s=(0,r.default)(a.ref,s)),t.push(o.default.cloneElement(l,{key:n,ref:s}))}};for(var i in this.state.children)n(i);var l=a({},this.props);return delete l.transitionLeave,delete l.transitionName,delete l.transitionAppear,delete l.transitionEnter,delete l.childFactory,delete l.transitionLeaveTimeout,delete l.transitionEnterTimeout,delete l.transitionAppearTimeout,delete l.component,o.default.createElement(this.props.component,l,t)},t}(o.default.Component);c.displayName="TransitionGroup",c.propTypes={},c.defaultProps={component:"span",childFactory:function(e){return e}},t.default=c,e.exports=t.default},function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return a.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var a={},r=[];for(var o in e)t.hasOwnProperty(o)?r.length&&(a[o]=r,r=[]):r.push(o);var i=void 0,l={};for(var s in t){if(a.hasOwnProperty(s))for(i=0;i<a[s].length;i++){var c=a[s][i];l[a[s][i]]=n(c)}l[s]=n(s)}for(i=0;i<r.length;i++)l[r[i]]=n(r[i]);return l};var a=n(3)},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=f(n(413)),o=f(n(415)),i=f(n(416)),l=n(417),s=f(n(3)),c=f(n(40)),u=n(79),d=n(336);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var h=[];l.transitionEnd&&h.push(l.transitionEnd),l.animationEnd&&h.push(l.animationEnd);c.default.node,d.nameShape.isRequired,c.default.bool,c.default.bool,c.default.bool,c.default.number,c.default.number,c.default.number;var g=function(e){function t(){var n,a;p(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=m(this,e.call.apply(e,[this].concat(o))),a.componentWillAppear=function(e){a.props.appear?a.transition("appear",e,a.props.appearTimeout):e()},a.componentWillEnter=function(e){a.props.enter?a.transition("enter",e,a.props.enterTimeout):e()},a.componentWillLeave=function(e){a.props.leave?a.transition("leave",e,a.props.leaveTimeout):e()},m(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var a=(0,u.findDOMNode)(this);if(a){var i=this.props.name[e]||this.props.name+"-"+e,s=this.props.name[e+"Active"]||i+"-active",c=null,d=void 0;(0,r.default)(a,i),this.queueClassAndNode(s,a);var f=function(e){e&&e.target!==a||(clearTimeout(c),d&&d(),(0,o.default)(a,i),(0,o.default)(a,s),d&&d(),t&&t())};n?(c=setTimeout(f,n),this.transitionTimeouts.push(c)):l.transitionEnd&&(d=function(e,t){return h.length?h.forEach((function(n){return e.addEventListener(n,t,!1)})):setTimeout(t,0),function(){h.length&&h.forEach((function(n){return e.removeEventListener(n,t,!1)}))}}(a,f))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,i.default)((function(){return n.flushClassNameAndNodeQueue()})))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,r.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=a({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,s.default.cloneElement(s.default.Children.only(this.props.children),e)},t}(s.default.Component);g.displayName="CSSTransitionGroupChild",g.propTypes={},t.default=g,e.exports=t.default},function(e,t,n){"use strict";var a=n(305);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,r.default)(e,t)||("string"===typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var r=a(n(414));e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},function(e,t,n){"use strict";function a(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"===typeof e.className?e.className=a(e.className,t):e.setAttribute("class",a(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";var a=n(305);t.__esModule=!0,t.default=void 0;var r,o=a(n(315)),i="clearTimeout",l=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-c)),a=setTimeout(e,n);return c=t,a},s=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};o.default&&["","webkit","moz","o","ms"].some((function(e){var t=s(e,"request");if(t in window)return i=s(e,"cancel"),l=function(e){return window[t](e)}}));var c=(new Date).getTime();(r=function(e){return l(e)}).cancel=function(e){window[i]&&"function"===typeof window[i]&&window[i](e)};var u=r;t.default=u,e.exports=t.default},function(e,t,n){"use strict";var a=n(305);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var r,o,i,l,s,c,u,d,f,p,m,h=a(n(315)),g="transform";if(t.transform=g,t.animationEnd=i,t.transitionEnd=o,t.transitionDelay=u,t.transitionTiming=c,t.transitionDuration=s,t.transitionProperty=l,t.animationDelay=m,t.animationTiming=p,t.animationDuration=f,t.animationName=d,h.default){var y=function(){for(var e,t,n=document.createElement("div").style,a={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},r=Object.keys(a),o="",i=0;i<r.length;i++){var l=r[i];if(l+"TransitionProperty"in n){o="-"+l.toLowerCase(),e=a[l]("TransitionEnd"),t=a[l]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");return n=null,{animationEnd:t,transitionEnd:e,prefix:o}}();r=y.prefix,t.transitionEnd=o=y.transitionEnd,t.animationEnd=i=y.animationEnd,t.transform=g=r+"-"+g,t.transitionProperty=l=r+"-transition-property",t.transitionDuration=s=r+"-transition-duration",t.transitionDelay=u=r+"-transition-delay",t.transitionTiming=c=r+"-transition-timing-function",t.animationName=d=r+"-animation-name",t.animationDuration=f=r+"-animation-duration",t.animationTiming=p=r+"-animation-delay",t.animationDelay=m=r+"-animation-timing-function"}var v={transform:g,end:o,property:l,timing:c,delay:u,duration:s};t.default=v},function(e,t,n){var a=n(296),r=n(419),o=n(420);e.exports=function(e){var t=a(e);return o(t,r(t))+1}},function(e,t,n){var a=n(296);e.exports=function(e){var t=a(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}},function(e,t,n){var a=n(307);e.exports=function(e,t){var n=a(e),r=a(t),o=n.getTime()-6e4*n.getTimezoneOffset(),i=r.getTime()-6e4*r.getTimezoneOffset();return Math.round((o-i)/864e5)}},function(e,t,n){var a=n(296),r=n(317),o=n(423);e.exports=function(e){var t=a(e),n=r(t).getTime()-o(t).getTime();return Math.round(n/6048e5)+1}},function(e,t,n){var a=n(296);e.exports=function(e,t){var n=t&&Number(t.weekStartsOn)||0,r=a(e),o=r.getDay(),i=(o<n?7:0)+o-n;return r.setDate(r.getDate()-i),r.setHours(0,0,0,0),r}},function(e,t,n){var a=n(337),r=n(317);e.exports=function(e){var t=a(e),n=new Date(0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),r(n)}},function(e,t,n){var a=n(333);e.exports=function(e){if(a(e))return!isNaN(e);throw new TypeError(toString.call(e)+" is not an instance of Date")}},function(e,t,n){var a=n(426),r=n(427);e.exports={distanceInWords:a(),format:r()}},function(e,t){e.exports=function(){var e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(t,n,a){var r;return a=a||{},r="string"===typeof e[t]?e[t]:1===n?e[t].one:e[t].other.replace("{{count}}",n),a.addSuffix?a.comparison>0?"in "+r:r+" ago":r}}}},function(e,t,n){var a=n(428);e.exports=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Su","Mo","Tu","We","Th","Fr","Sa"],r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["AM","PM"],l=["am","pm"],s=["a.m.","p.m."],c={MMM:function(t){return e[t.getMonth()]},MMMM:function(e){return t[e.getMonth()]},dd:function(e){return n[e.getDay()]},ddd:function(e){return r[e.getDay()]},dddd:function(e){return o[e.getDay()]},A:function(e){return e.getHours()/12>=1?i[1]:i[0]},a:function(e){return e.getHours()/12>=1?l[1]:l[0]},aa:function(e){return e.getHours()/12>=1?s[1]:s[0]}};return["M","D","DDD","d","Q","W"].forEach((function(e){c[e+"o"]=function(t,n){return function(e){var t=e%100;if(t>20||t<10)switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"}(n[e](t))}})),{formatters:c,formattingTokensRegExp:a(c)}}},function(e,t){var n=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];e.exports=function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a);var r=n.concat(t).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+r.join("|")+"|.)","g")}},function(e,t,n){var a=n(296);e.exports=function(e){var t=a(e);return t.setDate(1),t.setHours(0,0,0,0),t}},function(e,t,n){var a=n(296);e.exports=function(e,t){var n=a(e),r=a(t);return n.getFullYear()===r.getFullYear()}},function(e,t,n){var a=n(296);e.exports=function(e,t){var n=a(e),r=a(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}},function(e,t,n){var a=n(296);e.exports=function(e,t){var n=a(e),r=Number(t);return n.setDate(n.getDate()+r),n}},function(e,t,n){"use strict";t.__esModule=!0,t.setObservableConfig=t.createEventHandler=t.mapPropsStream=t.componentFromStream=t.hoistStatics=t.nest=t.componentFromProp=t.createSink=t.createEagerFactory=t.createEagerElement=t.isClassComponent=t.shallowEqual=t.wrapDisplayName=t.getDisplayName=t.compose=t.setDisplayName=t.setPropTypes=t.setStatic=t.toClass=t.lifecycle=t.getContext=t.withContext=t.onlyUpdateForPropTypes=t.onlyUpdateForKeys=t.pure=t.shouldUpdate=t.renderNothing=t.renderComponent=t.branch=t.withReducer=t.withState=t.flattenProp=t.renameProps=t.renameProp=t.defaultProps=t.withHandlers=t.withPropsOnChange=t.withProps=t.mapProps=void 0;var a=Y(n(310)),r=Y(n(309)),o=Y(n(303)),i=Y(n(338)),l=Y(n(330)),s=Y(n(434)),c=Y(n(435)),u=Y(n(436)),d=Y(n(308)),f=Y(n(437)),p=Y(n(438)),m=Y(n(439)),h=Y(n(440)),g=Y(n(319)),y=Y(n(441)),v=Y(n(339)),E=Y(n(442)),C=Y(n(443)),b=Y(n(444)),_=Y(n(445)),k=Y(n(446)),w=Y(n(321)),x=Y(n(447)),D=Y(n(448)),S=Y(n(311)),M=Y(n(320)),T=Y(n(449)),P=Y(n(304)),N=Y(n(313)),O=Y(n(340)),I=Y(n(298)),A=Y(n(450)),R=Y(n(451)),L=Y(n(452)),F=Y(n(453)),j=Y(n(341)),H=Y(n(457)),G=Y(n(458)),U=Y(n(312));function Y(e){return e&&e.__esModule?e:{default:e}}t.mapProps=a.default,t.withProps=r.default,t.withPropsOnChange=o.default,t.withHandlers=i.default,t.defaultProps=l.default,t.renameProp=s.default,t.renameProps=c.default,t.flattenProp=u.default,t.withState=d.default,t.withReducer=f.default,t.branch=p.default,t.renderComponent=m.default,t.renderNothing=h.default,t.shouldUpdate=g.default,t.pure=y.default,t.onlyUpdateForKeys=v.default,t.onlyUpdateForPropTypes=E.default,t.withContext=C.default,t.getContext=b.default,t.lifecycle=_.default,t.toClass=k.default,t.setStatic=w.default,t.setPropTypes=x.default,t.setDisplayName=D.default,t.compose=S.default,t.getDisplayName=M.default,t.wrapDisplayName=T.default,t.shallowEqual=P.default,t.isClassComponent=N.default,t.createEagerElement=O.default,t.createEagerFactory=I.default,t.createSink=A.default,t.componentFromProp=R.default,t.nest=L.default,t.hoistStatics=F.default,t.componentFromStream=j.default,t.mapPropsStream=H.default,t.createEventHandler=G.default,t.setObservableConfig=U.default},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=l(n(318)),o=l(n(310)),i=l(n(295));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.default)((function(e,t){return(0,o.default)((function(n){var o;return a({},(0,r.default)(n,[e]),((o={})[t]=n[e],o))}))}),"renameProp")},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=s(n(318)),o=s(n(314)),i=s(n(310)),l=s(n(295));function s(e){return e&&e.__esModule?e:{default:e}}var c=Object.keys;t.default=(0,l.default)((function(e){return(0,i.default)((function(t){return a({},(0,r.default)(t,c(e)),(n=(0,o.default)(t,c(e)),i=function(t,n){return e[n]},c(n).reduce((function(e,t){var a=n[t];return e[i(a,t)]=a,e}),{})));var n,i}))}),"renameProps")},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=i(n(295)),o=i(n(298));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)((function(e){return function(t){var n=(0,o.default)(t);return function(t){return n(a({},t,t[e]))}}}),"flattenProp")},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(3),o=l(n(295)),i=l(n(298));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=(0,o.default)((function(e,t,n,o){return function(l){var u=(0,i.default)(l);return function(r){function i(){var e,t;s(this,i);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=t=c(this,r.call.apply(r,[this].concat(o))),t.state={stateValue:t.initalizeStateValue()},t.dispatch=function(e){return t.setState((function(t){var a=t.stateValue;return{stateValue:n(a,e)}}))},c(t,e)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r),i.prototype.initalizeStateValue=function(){return void 0!==o?"function"===typeof o?o(this.props):o:n(void 0,{type:"@@recompose/INIT"})},i.prototype.render=function(){var n;return u(a({},this.props,((n={})[e]=this.state.stateValue,n[t]=this.dispatch,n)))},i}(r.Component)}}),"withReducer")},function(e,t,n){"use strict";t.__esModule=!0;var a=o(n(295)),r=o(n(298));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return e};t.default=(0,a.default)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return function(a){var o=void 0,i=void 0;return function(l){return e(l)?(o=o||(0,r.default)(t(a)))(l):(i=i||(0,r.default)(n(a)))(l)}}}),"branch")},function(e,t,n){"use strict";t.__esModule=!0;var a=o(n(295)),r=o(n(298));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,a.default)((function(e){return function(t){var n=(0,r.default)(e);return function(e){return n(e)}}}),"renderComponent",!1)},function(e,t,n){"use strict";t.__esModule=!0;var a,r=n(3),o=n(295),i=(a=o)&&a.__esModule?a:{default:a};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var c=function(e){function t(){return l(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return null},t}(r.Component);c.displayName="Nothing";t.default=(0,i.default)((function(e){return c}),"renderNothing",!1,!0)},function(e,t,n){"use strict";t.__esModule=!0;var a=i(n(319)),r=i(n(304)),o=i(n(295));function i(e){return e&&e.__esModule?e:{default:e}}var l=(0,a.default)((function(e,t){return!(0,r.default)(e,t)}));t.default=(0,o.default)(l,"pure",!0,!0)},function(e,t,n){"use strict";t.__esModule=!0;var a=o(n(339)),r=o(n(295));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)((function(e){var t=e.propTypes,n=Object.keys(t||{});return(0,a.default)(n)(e)}),"onlyUpdateForPropTypes",!0,!0)},function(e,t,n){"use strict";t.__esModule=!0;var a=n(3),r=i(n(295)),o=i(n(298));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=(0,r.default)((function(e,t){return function(n){var r=(0,o.default)(n),i=function(e){function n(){var a,r;l(this,n);for(var o=arguments.length,i=Array(o),c=0;c<o;c++)i[c]=arguments[c];return a=r=s(this,e.call.apply(e,[this].concat(i))),r.getChildContext=function(){return t(r.props)},s(r,a)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),n.prototype.render=function(){return r(this.props)},n}(a.Component);return i.childContextTypes=e,i}}),"withContext")},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=i(n(295)),o=i(n(298));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)((function(e){return function(t){var n=(0,o.default)(t),r=function(e,t){return n(a({},e,t))};return r.contextTypes=e,r}}),"getContext")},function(e,t,n){"use strict";t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(3),o=l(n(295)),i=l(n(298));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.default)((function(e){return function(t){var n=(0,i.default)(t);return(0,r.createClass)(a({},e,{render:function(){return n(a({},this.props,this.state))}}))}}),"lifecycle")},function(e,t,n){"use strict";t.__esModule=!0;var a=n(3),r=l(a),o=l(n(320)),i=l(n(313));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=function(e){if((0,i.default)(e))return e;var t=function(t){function n(){return s(this,n),c(this,t.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.render=function(){return"string"===typeof e?r.default.createElement(e,this.props):e(this.props,this.context)},n}(a.Component);return t.displayName=(0,o.default)(e),t.propTypes=e.propTypes,t.contextTypes=e.contextTypes,t.defaultProps=e.defaultProps,t}},function(e,t,n){"use strict";t.__esModule=!0;var a=o(n(321)),r=o(n(295));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)((function(e){return(0,a.default)("propTypes",e)}),"setPropTypes",!1)},function(e,t,n){"use strict";t.__esModule=!0;var a=o(n(321)),r=o(n(295));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)((function(e){return(0,a.default)("displayName",e)}),"setDisplayName",!1)},function(e,t,n){"use strict";t.__esModule=!0;var a,r=n(320),o=(a=r)&&a.__esModule?a:{default:a};t.default=function(e,t){return t+"("+(0,o.default)(e)+")"}},function(e,t,n){"use strict";t.__esModule=!0;var a=n(3);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=function(e){return function(t){function n(){return r(this,n),o(this,t.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.componentWillMount=function(){e(this.props)},n.prototype.componentWillReceiveProps=function(t){e(t)},n.prototype.render=function(){return null},n}(a.Component)}},function(e,t,n){"use strict";t.__esModule=!0;var a=o(n(318)),r=o(n(340));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=function(t){return(0,r.default)(t[e],(0,a.default)(t,[e]))};return t.displayName="componentFromProp("+e+")",t}},function(e,t,n){"use strict";t.__esModule=!0;var a,r=n(298),o=(a=r)&&a.__esModule?a:{default:a};function i(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.map(o.default),r=function(e){var t=i(e,[]),n=e.children;return a.reduceRight((function(e,n){return n(t,e)}),n)};return r}},function(e,t,n){"use strict";t.__esModule=!0;var a,r=n(454),o=(a=r)&&a.__esModule?a:{default:a};t.default=function(e){return function(t){var n=e(t);return(0,o.default)(n,t),n}}},function(e,t,n){"use strict";var a={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},o="function"===typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!==typeof t){var i=Object.getOwnPropertyNames(t);o&&(i=i.concat(Object.getOwnPropertySymbols(t)));for(var l=0;l<i.length;++l)if(!a[i[l]]&&!r[i[l]]&&(!n||!n[i[l]]))try{e[i[l]]=t[i[l]]}catch(s){}}return e}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function a(e){var t,n=e.Symbol;return"function"===typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";t.__esModule=!0,t.mapPropsStreamWithConfig=void 0;var a=s(n(322)),r=s(n(298)),o=s(n(295)),i=n(341),l=n(312);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){return e},u=(0,i.componentFromStreamWithConfig)({fromESObservable:c,toESObservable:c}),d=(t.mapPropsStreamWithConfig=function(e){return function(t){return function(n){var o=(0,r.default)(n),i=e.fromESObservable,l=e.toESObservable;return u((function(e){var n;return(n={subscribe:function(n){var a=l(t(i(e))).subscribe({next:function(e){return n.next(o(e))}});return{unsubscribe:function(){return a.unsubscribe()}}}})[a.default]=function(){return this},n}))}}})(l.config);t.default=(0,o.default)(d,"mapPropsStream")},function(e,t,n){"use strict";t.__esModule=!0,t.createEventHandlerWithConfig=void 0;var a,r=n(322),o=(a=r)&&a.__esModule?a:{default:a},i=n(342),l=n(312);var s=(t.createEventHandlerWithConfig=function(e){return function(){var t,n=(0,i.createChangeEmitter)(),a=e.fromESObservable(((t={subscribe:function(e){return{unsubscribe:n.listen((function(t){return e.next(t)}))}}})[o.default]=function(){return this},t));return{handler:n.emit,stream:a}}})(l.config);t.default=s},function(e,t,n){(t=n(120)(!1)).push([e.i,".Cal__Day__root {\n  display: inline-block;\n  box-sizing: border-box;\n  width: 14.28571%;\n  list-style: none;\n  font-size: 16px;\n  text-align: center;\n  cursor: pointer;\n  user-select: none; }\n  .Cal__Day__root.Cal__Day__enabled.Cal__Day__highlighted, .Cal__Day__root.Cal__Day__enabled:active, .Cal__Day__root.Cal__Day__enabled:hover {\n    position: relative;\n    z-index: 1; }\n    .Cal__Day__root.Cal__Day__enabled.Cal__Day__highlighted:before, .Cal__Day__root.Cal__Day__enabled:active:before, .Cal__Day__root.Cal__Day__enabled:hover:before {\n      content: '';\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      width: 52px;\n      height: 52px;\n      margin-top: -26px;\n      margin-left: -26px;\n      border-radius: 50%;\n      background-color: #EFEFEF;\n      z-index: -1; }\n  .Cal__Day__root.Cal__Day__enabled:hover:before {\n    opacity: 0.5; }\n  .Cal__Day__root.Cal__Day__enabled.Cal__Day__highlighted:before, .Cal__Day__root.Cal__Day__enabled:active:before {\n    opacity: 1; }\n  .Cal__Day__root:first-child {\n    position: relative; }\n  .Cal__Day__root.Cal__Day__today {\n    position: relative;\n    z-index: 2; }\n    .Cal__Day__root.Cal__Day__today > span {\n      color: #3d3d3d; }\n    .Cal__Day__root.Cal__Day__today.Cal__Day__disabled > span {\n      color: #AAA; }\n    .Cal__Day__root.Cal__Day__today:before {\n      content: '';\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      width: 52px;\n      height: 52px;\n      margin-top: -26px;\n      margin-left: -26px;\n      border-radius: 50%;\n      box-shadow: inset 0 0 0 1px;\n      z-index: -1; }\n    .Cal__Day__root.Cal__Day__today.Cal__Day__disabled:before {\n      box-shadow: inset 0 0 0 1px #BBB; }\n  .Cal__Day__root.Cal__Day__selected {\n    position: relative; }\n    .Cal__Day__root.Cal__Day__selected > .Cal__Day__month, .Cal__Day__root.Cal__Day__selected > .Cal__Day__year {\n      display: none; }\n    .Cal__Day__root.Cal__Day__selected:before {\n      display: none; }\n    .Cal__Day__root.Cal__Day__selected .Cal__Day__selection {\n      content: '';\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      width: 52px;\n      height: 52px;\n      margin-top: -26px;\n      margin-left: -26px;\n      border-radius: 50%;\n      line-height: 56px;\n      z-index: 2; }\n      .Cal__Day__root.Cal__Day__selected .Cal__Day__selection .Cal__Day__month {\n        top: 9px; }\n      .Cal__Day__root.Cal__Day__selected .Cal__Day__selection .Cal__Day__day {\n        position: relative;\n        top: 5px;\n        font-weight: bold;\n        font-size: 18px; }\n  .Cal__Day__root.Cal__Day__disabled {\n    color: #AAA;\n    cursor: not-allowed; }\n\n.Cal__Day__month, .Cal__Day__year {\n  position: absolute;\n  left: 0;\n  right: 0;\n  font-size: 12px;\n  line-height: 12px;\n  text-transform: capitalize; }\n\n.Cal__Day__month {\n  top: 5px; }\n\n.Cal__Day__year {\n  bottom: 5px; }\n\n/*\n * Range selection styles\n */\n.Cal__Day__range.Cal__Day__selected.Cal__Day__start:after, .Cal__Day__range.Cal__Day__selected.Cal__Day__end:after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  width: 50%;\n  height: 52px;\n  margin-top: -26px;\n  box-shadow: inset 56px 56px; }\n\n.Cal__Day__range.Cal__Day__selected.Cal__Day__disabled .Cal__Day__selection.Cal__Day__selection {\n  background-color: #EEE !important; }\n  .Cal__Day__range.Cal__Day__selected.Cal__Day__disabled .Cal__Day__selection.Cal__Day__selection .Cal__Day__day, .Cal__Day__range.Cal__Day__selected.Cal__Day__disabled .Cal__Day__selection.Cal__Day__selection .Cal__Day__month {\n    color: #AAA;\n    font-weight: 300; }\n\n.Cal__Day__range.Cal__Day__selected.Cal__Day__start .Cal__Day__selection {\n  border-top-left-radius: 50%;\n  border-bottom-left-radius: 50%; }\n\n.Cal__Day__range.Cal__Day__selected.Cal__Day__start:after {\n  right: 0; }\n\n.Cal__Day__range.Cal__Day__selected.Cal__Day__start.Cal__Day__end:after {\n  display: none; }\n\n.Cal__Day__range.Cal__Day__selected.Cal__Day__betweenRange .Cal__Day__selection {\n  left: 0;\n  right: 0;\n  width: 100%;\n  margin-left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 0; }\n\n.Cal__Day__range.Cal__Day__selected.Cal__Day__betweenRange .Cal__Day__day {\n  top: 0;\n  font-size: 16px; }\n\n.Cal__Day__range.Cal__Day__selected.Cal__Day__betweenRange .Cal__Day__month {\n  display: none; }\n\n.Cal__Day__range.Cal__Day__selected.Cal__Day__end:after {\n  left: 0; }\n\n.Cal__Day__range.Cal__Day__selected.Cal__Day__end .Cal__Day__selection {\n  border-top-right-radius: 50%;\n  border-bottom-right-radius: 50%;\n  color: inherit !important;\n  background-color: #FFF !important;\n  border: 2px solid;\n  box-sizing: border-box; }\n  .Cal__Day__range.Cal__Day__selected.Cal__Day__end .Cal__Day__selection .Cal__Day__day {\n    top: 4px; }\n.Cal__Container__root {\n  position: relative;\n  display: table;\n  z-index: 1;\n  font: 14px 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  line-height: 1.4em;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-weight: 300;\n  outline: none;\n  text-align: left; }\n  .Cal__Container__root.Cal__Container__landscape {\n    display: flex;\n    flex-direction: row; }\n    .Cal__Container__root.Cal__Container__landscape .Cal__Container__wrapper {\n      position: relative;\n      flex-grow: 1;\n      overflow: hidden;\n      z-index: 1;\n      border-top-right-radius: 3px;\n      border-bottom-right-radius: 3px; }\n\n.Cal__Container__listWrapper {\n  position: relative;\n  overflow: hidden;\n  background-color: #FFF; }\n.Cal__Header__root {\n  position: relative;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  overflow: hidden;\n  min-height: 98px;\n  padding: 20px;\n  line-height: 1.3;\n  font-weight: 400;\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px; }\n  .Cal__Header__root.Cal__Header__landscape {\n    align-items: flex-start;\n    min-width: 200px;\n    border-top-right-radius: 0;\n    border-bottom-left-radius: 3px; }\n    .Cal__Header__root.Cal__Header__landscape .Cal__Header__dateWrapper.Cal__Header__day {\n      flex-grow: 1;\n      height: 76px; }\n\n.Cal__Header__wrapper {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  cursor: pointer; }\n  .Cal__Header__wrapper.Cal__Header__blank {\n    height: 58px;\n    line-height: 58px;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 18px;\n    cursor: default; }\n\n.Cal__Header__dateWrapper {\n  position: relative;\n  display: block;\n  overflow: hidden;\n  color: rgba(255, 255, 255, 0.5);\n  transition: color 0.3s ease; }\n  .Cal__Header__dateWrapper.Cal__Header__active {\n    color: white; }\n  .Cal__Header__dateWrapper.Cal__Header__day {\n    height: 38px;\n    font-size: 36px;\n    line-height: 36px;\n    text-transform: capitalize; }\n  .Cal__Header__dateWrapper.Cal__Header__year {\n    height: 20px;\n    font-size: 18px;\n    line-height: 18px; }\n\n.Cal__Header__date {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0; }\n\n.Cal__Header__range {\n  display: flex;\n  flex-grow: 1; }\n  .Cal__Header__range .Cal__Header__dateWrapper {\n    overflow: visible; }\n  .Cal__Header__range .Cal__Header__wrapper:first-child:before, .Cal__Header__range .Cal__Header__wrapper:first-child:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 50%;\n    width: 0;\n    height: 0;\n    margin-top: -50px;\n    margin-left: -50px;\n    border-top: 100px solid transparent;\n    border-bottom: 100px solid transparent;\n    border-left: 60px solid; }\n  .Cal__Header__range .Cal__Header__wrapper:first-child:before {\n    color: rgba(255, 255, 255, 0.15);\n    transform: translateX(1px); }\n  .Cal__Header__range .Cal__Header__wrapper:last-child {\n    margin-left: 60px; }\n  .Cal__Header__range .Cal__Header__wrapper .Cal__Header__date {\n    white-space: nowrap;\n    z-index: 1; }\n.Cal__Today__root {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 32px;\n  padding: 6px;\n  box-sizing: border-box;\n  transform: translate3d(0, -100%, 0);\n  font-weight: 500;\n  line-height: 0;\n  z-index: 10;\n  cursor: pointer;\n  transition: transform 0.3s ease;\n  transition-delay: 0.3s; }\n  .Cal__Today__root.Cal__Today__show {\n    transform: translate3d(0, 0, 0);\n    transition-delay: 0s; }\n    .Cal__Today__root.Cal__Today__show .Cal__Today__chevron {\n      transition: transform 0.3s ease; }\n  .Cal__Today__root .Cal__Today__chevron {\n    position: absolute;\n    top: 50%;\n    margin-top: -6px;\n    margin-left: 5px;\n    transform: rotate(270deg);\n    transition: transform 0.3s ease; }\n  .Cal__Today__root.Cal__Today__chevronUp .Cal__Today__chevron {\n    transform: rotate(180deg); }\n  .Cal__Today__root.Cal__Today__chevronDown .Cal__Today__chevron {\n    transform: rotate(360deg); }\n.Cal__MonthList__root {\n  width: 100% !important;\n  background-color: #FFF;\n  -webkit-overflow-scrolling: touch; }\n  .Cal__MonthList__root.Cal__MonthList__scrolling > div {\n    pointer-events: none; }\n  .Cal__MonthList__root.Cal__MonthList__scrolling label {\n    opacity: 1; }\n.Cal__Weekdays__root {\n  position: relative;\n  z-index: 5;\n  display: flex;\n  padding: 0;\n  margin: 0;\n  list-style: none;\n  box-shadow: inset 0 -1px rgba(0, 0, 0, 0.04); }\n\n.Cal__Weekdays__day {\n  padding: 15px 0;\n  flex-basis: 14.28571%;\n  flex-grow: 1;\n  font-weight: 500;\n  text-align: center; }\n.Cal__Years__root {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #F9F9F9; }\n  .Cal__Years__root:before, .Cal__Years__root:after {\n    content: '';\n    position: absolute;\n    left: 0;\n    right: 0;\n    height: 50px;\n    pointer-events: none;\n    z-index: 1; }\n  .Cal__Years__root:before {\n    top: 0;\n    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0) 100%); }\n  .Cal__Years__root:after {\n    bottom: 0;\n    background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.8) 100%); }\n\n.Cal__Years__list {\n  box-sizing: border-box; }\n  .Cal__Years__list.Cal__Years__center {\n    display: flex;\n    align-items: center;\n    justify-content: center; }\n\n.Cal__Years__year {\n  display: flex;\n  padding: 0 20px;\n  height: 100%;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  font-weight: 500;\n  text-align: center;\n  cursor: pointer;\n  -webkit-user-select: none;\n  box-sizing: border-box; }\n  .Cal__Years__year.Cal__Years__withMonths {\n    border-bottom: 1px solid #E9E9E9; }\n    .Cal__Years__year.Cal__Years__withMonths label {\n      height: 88px;\n      padding-top: 12px;\n      box-sizing: border-box; }\n  .Cal__Years__year label {\n    flex-basis: 42%; }\n    .Cal__Years__year label span {\n      flex-shrink: 0;\n      color: #333; }\n  .Cal__Years__year ol {\n    display: flex;\n    flex-wrap: wrap;\n    margin: 0;\n    padding: 0;\n    font-size: 14px; }\n    .Cal__Years__year ol li {\n      display: flex;\n      width: 44px;\n      height: 44px;\n      flex-shrink: 0;\n      align-items: center;\n      justify-content: center;\n      list-style: none;\n      border-radius: 50%;\n      box-sizing: border-box;\n      color: #444;\n      font-weight: 400;\n      text-transform: capitalize; }\n      .Cal__Years__year ol li.Cal__Years__currentMonth {\n        border: 1px solid; }\n      .Cal__Years__year ol li.Cal__Years__selected {\n        position: relative;\n        z-index: 1;\n        background-color: blue;\n        color: #FFF !important;\n        border: 0; }\n      .Cal__Years__year ol li.Cal__Years__disabled {\n        cursor: not-allowed;\n        color: #AAA; }\n        .Cal__Years__year ol li.Cal__Years__disabled:hover {\n          background-color: inherit; }\n      .Cal__Years__year ol li:hover {\n        background-color: #EFEFEF; }\n  .Cal__Years__year:hover label > span, .Cal__Years__year.Cal__Years__active label > span {\n    color: inherit; }\n  .Cal__Years__year:hover, .Cal__Years__year.Cal__Years__active {\n    position: relative;\n    z-index: 2; }\n  .Cal__Years__year.Cal__Years__active {\n    font-size: 32px; }\n  .Cal__Years__year.Cal__Years__currentYear {\n    position: relative; }\n    .Cal__Years__year.Cal__Years__currentYear label > span {\n      min-width: 50px;\n      padding-bottom: 5px;\n      border-bottom: 3px solid; }\n    .Cal__Years__year.Cal__Years__currentYear.Cal__Years__active label > span {\n      min-width: 85px; }\n  .Cal__Years__year.Cal__Years__first {\n    padding-top: 40px; }\n  .Cal__Years__year.Cal__Years__last {\n    padding-bottom: 40px; }\n.Cal__Animation__enter {\n  opacity: 0;\n  transform: translate3d(0, -100%, 0);\n  transition: 0.25s ease; }\n\n.Cal__Animation__enter.Cal__Animation__enterActive {\n  opacity: 1;\n  transform: translate3d(0, 0, 0); }\n\n.Cal__Animation__leave {\n  transform: translate3d(0, 0, 0);\n  transition: 0.25s ease; }\n\n.Cal__Animation__leave.Cal__Animation__leaveActive {\n  opacity: 0;\n  transform: translate3d(0, 100%, 0); }\n.Cal__Slider__root, .Cal__Slider__slide {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0; }\n\n.Cal__Slider__root {\n  overflow: hidden; }\n\n.Cal__Slider__slide {\n  padding: 20px 65px; }\n  .Cal__Slider__slide:first-child {\n    padding-left: 20px; }\n\n.Cal__Slider__wrapper {\n  height: 100%;\n  transition: transform 0.3s ease; }\n\n.Cal__Slider__arrow {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 100%;\n  opacity: 0.7;\n  cursor: pointer;\n  border-left: 1px solid rgba(255, 255, 255, 0.1); }\n  .Cal__Slider__arrow svg {\n    width: 15px; }\n  .Cal__Slider__arrow:hover {\n    opacity: 1; }\n\n.Cal__Slider__arrowRight {\n  right: 0; }\n\n.Cal__Slider__arrowLeft {\n  left: 0;\n  transform: scaleX(-1); }\n.Cal__transition__enter {\n  opacity: 0; }\n\n.Cal__transition__enterActive {\n  opacity: 1;\n  transition: opacity 0.3s ease; }\n\n.Cal__transition__leave {\n  opacity: 1; }\n\n.Cal__transition__leaveActive {\n  opacity: 0;\n  transition: opacity 0.3s ease; }\n.Cal__Month__rows {\n  position: relative;\n  background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 50%, rgba(0, 0, 0, 0.05) 100%); }\n\n.Cal__Month__row {\n  padding: 0;\n  margin: 0; }\n  .Cal__Month__row:first-child {\n    text-align: right; }\n    .Cal__Month__row:first-child li {\n      background-color: #FFF;\n      box-shadow: 0 -1px 0 #E9E9E9; }\n  .Cal__Month__row:nth-child(2) {\n    box-shadow: 0 -1px 0 #E9E9E9; }\n  .Cal__Month__row.Cal__Month__partial:first-child li:first-child {\n    box-shadow: 0px -1px 0 #E9E9E9, inset 1px 0 0 #E9E9E9; }\n  .Cal__Month__row.Cal__Month__partial:last-of-type li {\n    position: relative;\n    z-index: 1; }\n\n.Cal__Month__label {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: 0;\n  font-size: 30px;\n  font-weight: 500;\n  z-index: 3;\n  pointer-events: none;\n  background-color: rgba(255, 255, 255, 0.6);\n  opacity: 0;\n  transition: opacity 0.3s ease; }\n  .Cal__Month__label > span {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 56px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    text-transform: capitalize; }\n  .Cal__Month__label.Cal__Month__partialFirstRow {\n    top: 56px; }\n",""]),e.exports=t},function(e,t,n){"use strict";n.r(t);var a=n(7),r=n.n(a),o=n(8),i=n.n(o),l=n(17),s=n.n(l),c=n(18),u=n.n(c),d=n(9),f=n.n(d),p=n(3),m=n(34),h=n(20),g=n(81),y=n(65);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var E=function(e){s()(n,e);var t=v(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"init",value:function(){}},{key:"onClickSavePassword",value:function(){this.refs.pass1.getValue(),this.refs.pass2.getValue()}},{key:"render",value:function(){var e=this.props,t={marginTop:8,width:240};return p.createElement(y.a,{key:"contextMenuDocumentPassword",id:"contextMenuDocumentPassword",className:"padded",element:e.element},p.createElement("div",{className:"bold"},"Enter a password"),p.createElement("div",null,p.createElement(g.a,{type:"password",placeholder:"Password",ref:"pass1",style:t,onEnter:this.onClickSavePassword}),p.createElement(g.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:t,onEnter:this.onClickSavePassword})),p.createElement("div",{style:{marginTop:8}},p.createElement(h.a,{raised:!0,primary:!0,onClick:this.onClickSavePassword},"Save")))}}]),n}(m.a);t.default=E},function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),o=n(13),i=n.n(o),l=n(1),s=n(10),c=n(3),u=n.n(c),d=n(123),f=(n(343),n(5)),p=n(4),m=n(55),h=n(21),g=n(69),y=n(99),v=n(65),E=n(43);t.default=Object(h.b)((function(e){var t=e.paneObject,n=e.element,a=Object(c.useRef)(),o=p.default.pluginManager.isDriveEnabled(),h=function(e){return function(){p.default.menus.openContextMenu({componentName:"ReactContextMenuDropZone",element:n,pane:t.pane,item:t.item,image:e,paneObject:t})}},C=function(){var e=i()(r.a.mark((function e(){var n,a;return r.a.wrap((function(e){for(var r=0;;){if(r++>5e3&&__infLoop&&__infLoop(r))throw new RangeError;switch(e.prev=e.next){case 0:return n=t.item,a=p.default.pluginManager.getPluginDrive(),e.next=4,a.pickFilesFromDrive();case 4:e.sent.forEach((function(e,t){if(0===t)n.setText(e,l.a.ChangeType.Local);else{var a=n.parent(),r=a.getIndexOf(n.id);n=f.a.getPane().createVMLI({text:e},{parent:a,changeType:l.a.ChangeType.AllLocal}),a.insertItem(n,r+1,!1)}}));case 6:case"end":return e.stop()}}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e,n){return function(){"string"===typeof e?(t.item.setText(e,l.a.ChangeType.Local),f.a.selectIndex(t.index,-1),n&&m.a.updateFromPane({owner:t,index:t.index,start:f.a.getStartOffset(),element:f.a.getStartElement(),forceShow:!0})):e()}},_=function(e,t,n,a,r,o,i){var l="icon-bullet"===e?26:void 0;return u.a.createElement(E.a,{icon:e,iconSize:l,onClick:o||b(a,r),height:36,iconColor:i},u.a.createElement("div",{className:"f1"},t),n&&u.a.createElement("div",{className:"hHotkey c-bg-light"},n))};return u.a.createElement(v.a,{element:n,id:"contextMenuSlashHelp",supportArrows:!0,ref:a},_("icon-project","Project","# + Space","# "),_("prefixTask","Task","[ + Space","[ "),_("icon-bullet","Bullet","".concat(l.a.Prefix.Bullet," Space"),"".concat(l.a.Prefix.Bullet," ")),_("icon-numlist","Numbered List","1. + Space","1. "),s.a.isDevURL&&_(d.c,"Code Block","``` + Space","``` "),_("icon-hash","Tag","#tag","#",!0),_("icon-user","Contact","+Name","+",!0),_("icon-calendar","Date or reminder","!","!",!0),_("icon-hr","Line","---","---"),_("icon-hr-heavy","Heavy Line","===","===",void 0,void 0,"c-foreground"),_("icon-link","Link",s.a.priModKey+" + K",(function(){p.default.menus.openContextMenu({componentName:"ReactContextMenuInsertLink",element:n,onInsertLink:function(e){var n=e.text,a=e.href;t.item.elsNew=new y.a([new g.a(n,{link:{href:a,text:n}})]),t.item.setTextFromEls(l.a.ChangeType.Local),f.a.selectIndex(t.index,-1)}})})),_("icon-moodo","Link to item","[[","[[",!0),o&&_("icon-drive-file","Upload File",void 0,h(!1)),o&&_("icon-image","Upload Image",void 0,h(!0)),o&&_("icon-drive-file","Choose Drive File",void 0,C))}))},function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(3),o=n.n(r),i=n(65),l=n(29),s=n(21),c=n(43);t.default=Object(s.b)((function(e){var t=e.pane,n=e.element,r=l.a.getSelectedItems(t),s=!0,u=!0;r.forEach((function(e){s=s&&e.isComplete.get(),u=u&&e.isRead.get()}));var d=function(e){l.a.forEach(t,(function(t){return e(t)}))};return o.a.createElement(i.a,{key:"contextMenuInboxItem",element:n},o.a.createElement(c.a,{icon:"icon-check",iconSize:14,hotkey:{name:"Complete",group:"Inbox"},onClick:function(){d((function(e){return e.setComplete(!s,Date.now(),a.a.ChangeType.Local)}))}},s?"Uncomplete":"Complete"),o.a.createElement(c.a,{icon:u?"icon-unread":"icon-drafts",iconSize:14,hotkey:{name:u?"MarkUnread":"MarkRead",group:"Inbox"},onClick:function(){d((function(e){return e.setRead(!u,a.a.ChangeType.Local)}))}},u?"Mark as unread":"Mark as read"),o.a.createElement(c.a,{icon:"icon-align-left",hotkey:{name:"CopyToItem",group:"Inbox"},onClick:function(){d((function(e){return t.autocompleteCopy()}))}},"Copy to Item"),o.a.createElement(c.a,{icon:"icon-add",hotkey:{name:"CopyToNewItem",group:"Inbox"},onClick:function(){d((function(e){return t.autocompleteCreateTask()}))}},"Copy to New Item"))}))},,function(e,t,n){"use strict";n.r(t);var a=n(19),r=n.n(a),o=n(0),i=n(1),l=n(4),s=n(10),c=n(3),u=n.n(c),d=n(70),f=n(324),p=n(7),m=n.n(p),h=n(8),g=n.n(h),y=n(17),v=n.n(y),E=n(18),C=n.n(E),b=n(9),_=n.n(b),k=n(35),w=n.n(k),x=n(34),D=n(20),S=n(47),M=n(21),T=n(24),P=n(14),N=n(365),O=n.n(N),I=Object(M.b)((function(e){var t,n=e.title,a=e.description,l=e.checkedObservable,s=e.disabled,c=e.onChange,d=e.getCheckedFromObservable,f=e.getValueFromChecked;var p=Object(T.a)(l),m=r()(p,1)[0],h=null!==(t=null===d||void 0===d?void 0:d(m))&&void 0!==t?t:m,g=function(e){var t;return l.set(null!==(t=null===f||void 0===f?void 0:f(e))&&void 0!==t?t:e)},y=o.default.classNames("cursor-pointer py-4"),v=o.default.classNames("relative flex items-center cursor-pointer c-button-raised-primary c-shadow-thin borderBox",h?"justify-end":"justify-start",O.a.toggleOuter),E=o.default.classNames("c-background c-shadow-light",O.a.toggleInner),C={backgroundColor:h?i.a.ColorBrand:"#888"};return u.a.createElement("div",{className:y,onClick:function(){if(!s){var e=!h;g(e),c&&!1===c(e)&&g(!e)}}},u.a.createElement("div",{className:"flex"},u.a.createElement(S.b.div,{animate:!0,className:v,style:C},u.a.createElement(S.b.div,{animate:!0,key:"check",className:E,transition:i.a.TransitionSpringSlow})),u.a.createElement("div",{className:o.default.classNames(O.a.title,"pl-3 f1 font-bold")},n)),a&&u.a.createElement("div",{className:o.default.classNames("c-foreground-light text-xs pt-1 leading-tight",O.a.description)},a))})),A=n(325),R=n.n(A),L=Object(M.b)((function(e){var t,n=e.valueObservable,a=e.title,i=e.description,l=e.options,s=e.style,c=e.styleTitle,d=e.className,f=e.onChange,p=e.getValueFromSelected,m=e.getSelectedFromObservable,h=Object(T.a)(n),g=r()(h,1)[0],y=null!==(t=null===m||void 0===m?void 0:m(g))&&void 0!==t?t:g,v=o.default.classNames("c-background c-border-heavy my-2 rounded"),E=Object.assign({textIndent:4,width:100,height:32,fontSize:12},s);return u.a.createElement("div",{className:o.default.classNames("py-2",d)},u.a.createElement("div",null,a&&u.a.createElement("span",{className:o.default.classNames("font-bold pr-8 inline-block",R.a.title),style:c},a),u.a.createElement("select",{className:v,onChange:function(e){var t,a=null!==(t=null===p||void 0===p?void 0:p(e.target.value))&&void 0!==t?t:e.target.value;n.set(a),f&&f(a,g)},value:y,style:E},l.map((function(e){var t="string"===typeof e,n=t?e:Object.keys(e)[0],a=t?e:e[n];return u.a.createElement("option",{key:n,value:n},a)})))),i&&u.a.createElement("div",{className:"c-foreground-light text-xs leading-tight"},i))}));function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return C()(this,n)}}var j=[{"":"None"},w()({},i.a.Prefix.Task,"Task"),w()({},i.a.Prefix.Bullet,"Bullet")],H=function(e){v()(n,e);var t=F(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(){var e=this;this.createObservables({isStoragePersisted:!1,usage:NaN,quota:NaN}),s.a.isStoragePersisted((function(t){e.isStoragePersisted.set(t)})),s.a.estimateAvailableStorage((function(t){e.usage.set(t.usage),e.quota.set(t.quota)}),(function(){}))}},{key:"onCacheRatioClick",value:function(){this.getCacheRatio()<.98&&(l.default.settings.cacheSizeRatio.set(1),o.default.sendEvent("CacheRatio","Changed",1),l.default.toasts.pushMessage({text:"Success!",action:i.a.MessageAction.Okay}))}},{key:"parseFn",value:function(e){return parseFloat(e.toFixed(2))}},{key:"getCacheRatio",value:function(){return this.parseFn(l.default.pluginManager.getCacheSizeRatio())}},{key:"onPersistClick",value:function(e){var t=this;if(this.state.isStoragePersisted)return!1;e&&s.a.requestStoragePersistence((function(){t.isStoragePersisted.set(!0)}),(function(){t.isStoragePersisted.set(!1)}))}},{key:"render",value:function(){var e=this.getCacheRatio()<.98,t=!s.a.app&&s.a.supportsPersistedStorage(),n=s.a.supportsEstimatedStorage(),a=+(this.usage.get()/1024/1024).toFixed(2),r=+(this.quota.get()/1024/1024).toFixed(2);return u.a.createElement("div",{key:"content",className:"px-3"},u.a.createElement(L,{title:"Default item type",description:"The default prefix for all new items. If you prefer the bulleted look of an Outliner, choose Bullet. If you prefer a checklist, choose Task. If you prefer the flat look of a document, choose None.",valueObservable:l.default.settings.defaultItemPrefix,options:j}),u.a.createElement(I,{checkedObservable:l.default.settings.showMarkdown,title:"Show Markdown formatting",description:"Show the raw Markdown formatting characters in selected items"}),u.a.createElement(I,{checkedObservable:l.default.settings.showFormattingToolbar,title:"Enable formatting toolbar",description:"Show a toolbar with formatting hotkeys when text is selected",getCheckedFromObservable:function(e){return e>=0},getValueFromChecked:function(e){return e?1:-1}}),u.a.createElement(I,{checkedObservable:l.default.settings.showImagesInline,title:"Show images inline",description:"Show images inline by default when inserting a link to an image, dragging a file from the Drive pane, or uploading an image from your computer. If disabled, it will show a link to the image."}),u.a.createElement(I,{checkedObservable:l.default.settings.openEvernoteApp,title:"Open Evernote links in Evernote app",description:"If not enabled, Evernote links will open the Evernote website"}),u.a.createElement(I,{checkedObservable:l.default.settings.useServerAuth,title:"Use new authentication",description:"This is generally better, but you can disable it if it causes any problems."}),s.a.isDevURL&&u.a.createElement(I,{checkedObservable:l.default.settings.testBetaFeatures,title:"Test beta features",description:u.a.createElement("span",null,"Beta test new UI features that may be unstable. See ",u.a.createElement("a",{href:"https://www.moo.do/beta/",target:"_blank"},"the Slack community")," for details.")}),u.a.createElement("hr",null),t&&u.a.createElement(I,{checkedObservable:this.isStoragePersisted,getValueFromChecked:function(){return!0},title:"Enable persistent storage",description:"Allow Moo.do to store your data offline without potential for the browser to delete it. This can help Moo.do's performance if your disk is low on free-space."}),e&&u.a.createElement("div",{className:"modal-row"},u.a.createElement(D.a,{raised:!0,onClick:this.onCacheRatioClick},"Reset Cache Ratio"),u.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"If you have run out of disk space in the past, we may not be efficiently caching your data. If you have resolved any disk space issues, click this button to efficiently cache your data again.")),n&&u.a.createElement("div",{className:"modal-row pt-4"},u.a.createElement("div",{className:"modal-row-title"},"Estimated disk usage"),u.a.createElement("div",{className:"modal-subtext"},u.a.createElement("b",null,"Usage: "),Math.round(a)," MB / ",u.a.createElement("b",null,"Quota: "),Math.round(r)," MB")))}}]),n}(x.a),G=n(38),U=n(28),Y=n(127),z=n(301),B=n(90);function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return C()(this,n)}}var W=[i.a.PluginID.Contacts,i.a.PluginID.Gmail,i.a.PluginID.Drive,i.a.PluginID.GCalendar],K=function(e){v()(n,e);var t=V(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(){this.pluginsEnabled={},this.pluginOptions={},this.accountRefs={},this.createObservables({errorMessage:"",linkingAccount:void 0,isAddEnabled:!1,modifyingAccounts:{},useLegacyGmail:!1,useLegacyDrive:!1}),this.refAddGmail=u.a.createRef(),this.refAddCalendar=u.a.createRef(),this.refAddContacts=u.a.createRef(),this.refAddDrive=u.a.createRef(),d.a.refresh(),this.listenTo(U.a.onAccountsUpdated)}},{key:"getState",value:function(){var e,t=0,n=U.a.getDefaultAccountID(),a=l.default.settings.syncAccounts.get(),r=Object.keys(a);n&&r.length>1&&r[0]!==n&&(r.remove(n),r.splice(0,0,n));var o={isSaveEnabled:d.a.isSaveEnabled,premiumStatus:l.default.billingManager._premiumStatus,authTokens:U.a.authTokens,syncAccounts:a,accountsList:r,defaultID:n,googleID:null===(e=G.a.getGoogleProvider())||void 0===e?void 0:e.email,isAuthLoaded:U.a.isLoaded,hasPremiumFeatures:l.default.billingManager.hasPremiumFeatures(),erroredAuthTokens:U.a.erroredAuthTokens,supportsGmail:Object.keys(U.a.authTokens).some((function(e){return U.a.authTokens[e].scopes.includes(i.a.GScope.GmailModify)}))};o.showGmail=this.useLegacyGmail.get();for(var s=d.a.pluginsAvailable,c=0;c<s.length;++c){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var u=s[c];this.pluginsEnabled[u]=o[u+"Enabled"]=d.a.getPluginEnabledObservable(u);var f=d.a.getPluginOptions(u);for(var p in f)if(f.hasOwnProperty(p)){var m=u+"_"+p;this.pluginOptions[m]=o[m]=f[p]}}return o}},{key:"updatePluginEnabled",value:function(){var e=o.default.clone(l.default.settings.syncAccounts.get()||{});[i.a.PluginID.Contacts].forEach((function(t){var n=Object.keys(e).some((function(n){return e[n][t]}));n!==d.a.isPluginEnabled(t)&&(n?(console.log("Enabling",t),d.a.enablePlugin(t)):(console.log("Disabling",t),d.a.disablePlugin(t)))}))}},{key:"getAccountCheckboxValue",value:function(e,t){var n=this.accountRefs[e];if(n[t])return n[t].getValue()}},{key:"onClickSaveButton",value:function(e,t,n,a){var r=this;l.default.onIntroAction("PluginSettings");var i=o.default.clone(l.default.settings.syncAccounts.get()||{}),s=[];i[e]={},W.forEach((function(t){var n=r.getAccountCheckboxValue(e,t);i[e][t]=n,n&&s.push(t)}));var c=function(){return r.modifyingAccounts.set(Object.assign({},r.modifyingAccounts.get(),w()({},e,!1)))};if(s.length>0){var u=l.default.pluginManager.getAllPluginScopes(s,this.state.useLegacyDrive);return(t?U.a.doAuthForAccount:U.a.authAccount).bind(U.a)(e,u,(function(e){e&&(l.default.settings.syncAccounts.set(i),r.updatePluginEnabled(),c()),a()})),t}l.default.settings.syncAccounts.set(i),this.updatePluginEnabled(),c()}},{key:"onClickAddButton",value:function(e,t){var n=this;if(!o.default.isDemoMode()){var a,r,s;this.errorMessage.set("");var c=[];(null===(a=this.refAddGmail.current)||void 0===a?void 0:a.getValue())&&c.push(i.a.PluginID.Gmail),this.refAddCalendar.current.getValue()&&c.push(i.a.PluginID.GCalendar),(null===(r=this.refAddContacts.current)||void 0===r?void 0:r.getValue())&&c.push(i.a.PluginID.Contacts),(null===(s=this.refAddDrive.current)||void 0===s?void 0:s.getValue())&&c.push(i.a.PluginID.Drive);var u=l.default.pluginManager.getAllPluginScopes(c,this.state.useLegacyDrive);return U.a.authAccount(void 0,u,(function(e){if(e){n.updatePluginEnabled();var a=e.email,r=o.default.clone(l.default.settings.syncAccounts.get()||{});r[a]={},c.forEach((function(e){return r[a][e]=!0})),l.default.settings.syncAccounts.set(r),l.default.onIntroAction("PluginSettings")}t()})),!0}}},{key:"onClickRemoveEmail",value:function(e){var t=this;l.default.menus.confirm("Are you sure you want to remove ".concat(e,"?"),(function(n){if(n){U.a.removeAccount(e);var a=o.default.clone(l.default.settings.syncAccounts.get());delete a[e],l.default.settings.syncAccounts.set(a),t.updatePluginEnabled()}}))}},{key:"fixAuth",value:function(e){var t=this.state.syncAccounts,n=t&&t[e],a=n&&Object.keys(n).filter((function(e){return n[e]}));if(a){this.useLegacyGmail.get()||a.remove("Gmail");var r=l.default.pluginManager.getAllPluginScopes(a,this.state.useLegacyDrive);U.a.doAuthForAccount(e,r)}}},{key:"onClickCheckbox",value:function(e,t,n){this.modifyingAccounts.set(Object.assign({},this.modifyingAccounts.get(),w()({},e,!0)))}},{key:"onClickEnablePremium",value:function(e,t){return l.default.billingManager.isTrialOver()?this.props.openSection("Account"):l.default.billingManager.startTrial().then((function(){t()})),!0}},{key:"onClickCalendarSettings",value:function(){this.props.openSection("Calendar")}},{key:"renderFeature",value:function(e,t,n){return u.a.createElement("div",{className:"feature f1 c-bg-light"},u.a.createElement("div",{className:"featureImg"},u.a.createElement("img",{src:t})),u.a.createElement("div",{className:"bold"},e),n&&u.a.createElement("div",{className:"featurePremium c-bg-lighter"},"PREMIUM"))}},{key:"renderEmptyCheckbox",value:function(){return u.a.createElement("div",{className:"column"})}},{key:"renderAccountCheckbox",value:function(e,t,n){var a=this,r=this.state,o=r.syncAccounts,i=r.hasPremiumFeatures,l=o[e]&&o[e][t],s=n&&!i;return u.a.createElement("div",{className:"column"},u.a.createElement(Y.a,{initialChecked:l||!1,disabled:s,tooltip:s&&"The ".concat(t," plugin is a premium feature."),onChange:this.onClickCheckbox.bind(this,e,t),ref:function(n){return a.accountRefs[e][t]=n}}))}},{key:"renderAccount",value:function(e){var t=this,n=this.state,a=n.defaultID,r=n.googleID,l=n.showGmail,s=n.modifyingAccounts,c=e===a,d=e===r,f=s[e],p=o.default.classNames("accountRow c-border flexbox");this.accountRefs[e]||(this.accountRefs[e]={});var m=U.a.accountHasError(e);return u.a.createElement("div",{key:"row"+e,className:p},u.a.createElement("div",{className:"f1"},e),m&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"flex justify-center",style:{width:176}},u.a.createElement(D.a,{raised:!0,primary:!0,onClick:function(){return t.fixAuth(e)},style:{height:36}},"FIX AUTHENTICATION")),u.a.createElement("div",{className:"column"},!d&&!f&&u.a.createElement(D.a,{icon:"icon-close",iconSize:20,width:40,height:40,onClick:this.onClickRemoveEmail.bind(this,e)}))),!m&&u.a.createElement(u.a.Fragment,null,c?this.renderAccountCheckbox(e,i.a.PluginID.Contacts):this.renderEmptyCheckbox(),l&&this.renderAccountCheckbox(e,i.a.PluginID.Gmail),this.renderAccountCheckbox(e,i.a.PluginID.GCalendar,!0),c?this.renderAccountCheckbox(e,i.a.PluginID.Drive,!0):this.renderEmptyCheckbox(),u.a.createElement("div",{className:"column"},f&&u.a.createElement(D.a,{padding:0,width:44,primary:f,raised:!0,onClick:this.onClickSaveButton.bind(this,e,!f)},f?"SAVE":"FIX"),!d&&!f&&u.a.createElement(D.a,{icon:"icon-close",iconSize:20,width:40,height:40,onClick:this.onClickRemoveEmail.bind(this,e)}))))}},{key:"renderAddAccount",value:function(){var e=this.state,t=e.hasPremiumFeatures,n=e.accountsList,a=e.showGmail,r=0===n.length,i=o.default.classNames("accountRow c-border flexbox");return u.a.createElement("div",{key:"rowAdding",className:i},u.a.createElement("div",{className:"f1"},u.a.createElement(D.a,{raised:!0,onClick:this.onClickAddButton},"+ ADD ACCOUNT")),r?u.a.createElement("div",{className:"column"},u.a.createElement(Y.a,{initialChecked:!0,ref:this.refAddContacts})):this.renderEmptyCheckbox(),a&&(r?u.a.createElement("div",{className:"column"},u.a.createElement(Y.a,{initialChecked:!0,ref:this.refAddGmail})):this.renderEmptyCheckbox()),u.a.createElement("div",{className:"column"},u.a.createElement(Y.a,{initialChecked:!0,ref:this.refAddCalendar,disabled:!t})),r?u.a.createElement("div",{className:"column"},u.a.createElement(Y.a,{initialChecked:!0,ref:this.refAddDrive,disabled:!t})):this.renderEmptyCheckbox(),u.a.createElement("div",{className:"column"}))}},{key:"render",value:function(){var e=this,t=l.default.billingManager,n=this.state.accountsList,a=this.state,r=a.isAuthLoaded,c=a.hasPremiumFeatures,d=(a.supportsGmail,a.showGmail);a.useLegacyGmail,a.useLegacyDrive;return u.a.createElement("div",{key:"content",className:"new-modal-group"},u.a.createElement("div",{className:"title"},"Integrate with your other services"),u.a.createElement("div",{className:"setupSubtext subtext c-foreground-light"},u.a.createElement("b",null,"Moo.do")," connects with your Google services to integrate everything together. Plugin data is cached locally on your device and is never sent to any server. See our ",u.a.createElement("span",{className:"link"},"Privacy Policy")," for more details."),u.a.createElement("div",{className:"setupFeaturesNew flexbox"},this.renderFeature("Google Contacts","/img/plugin-gcontacts.png",!1),d&&this.renderFeature("Gmail","/img/plugin-gmail.png",!1),this.renderFeature("Google Calendar","/img/plugin-gcal.png",!0),this.renderFeature("Google Drive","/img/plugin-gdrive.png",!0)),!c&&u.a.createElement("div",{className:"flexbox flex-center mt-6"},u.a.createElement(D.a,{raised:!0,primary:!0,onClick:this.onClickEnablePremium},t.isTrialOver()?"Go Premium":"Start your free trial"),u.a.createElement("span",{style:{marginLeft:8}},"to enable Premium plugins")),u.a.createElement("div",{className:"pt-4 pl-4"},u.a.createElement("div",{className:"font-bold text-xl"},"Gmail"),u.a.createElement("div",{className:"flex pt-3"},u.a.createElement(D.a,{raised:!0,primary:!0,onClick:function(){return o.default.openUrl(s.a.getChromeExtensionURL())}},"CHROME EXTENSION"))),r?u.a.createElement(z.a,{className:"gmailAccountTable py-4"},u.a.createElement("div",{key:"header",className:"tableHeader flexbox"},u.a.createElement("div",{className:"f1"},"Account"),u.a.createElement("div",{className:"column"},u.a.createElement("img",{src:"/img/plugin-gcontacts.png"})),d&&u.a.createElement("div",{className:"column"},u.a.createElement("img",{src:"/img/plugin-gmail.png"})),u.a.createElement("div",{className:"column"},u.a.createElement("img",{src:"/img/plugin-gcal.png"})),u.a.createElement("div",{className:"column"},u.a.createElement("img",{src:"/img/plugin-gdrive.png"})),u.a.createElement("div",{className:"column"})),n.map((function(t){return e.renderAccount(t)})),this.renderAddAccount()):u.a.createElement(B.a,{style:{marginTop:100}},"Loading Authorization"),this.pluginsEnabled[i.a.PluginID.GCalendar].get()&&0===l.default.pluginManager.getPluginGCalendar().getImportCalendarList().length&&u.a.createElement("div",{className:"flexbox flex-center mt48"},"See the",u.a.createElement(D.a,{raised:!0,style:{marginLeft:8,marginRight:8},onClick:this.onClickCalendarSettings},"Google Calendar settings"),"to sync your calendars."),u.a.createElement("div",{className:"mt-6"},u.a.createElement(I,{checkedObservable:this.useLegacyGmail,title:"Use Legacy Gmail Plugin",description:"This may work only if you've previously authenticated the Gmail plugin. Disable this if you get a verification error."}),u.a.createElement(I,{checkedObservable:this.useLegacyDrive,title:"Use Legacy Drive Access",description:"This may work only if you've previously authenticated for full Drive access. Disable this if you get a verification error."})))}}]),n}(x.a),q=n(6),Z=n.n(q),$=n(13),X=n.n($),Q=n(26),J=n(78),ee="text-xs bold c-foreground-very-faded mt-8 mb-4",te=Object(M.b)((function(){var e,t,n=l.default.billingManager,a=Object(T.a)(n._hasValidBillingData,n._premiumStatus,n.daysLeftInTrial,l.default.settings.trialOverHidden,G.a.user),s=r()(a,5),c=s[0],d=(s[1],s[2]),f=s[3],p=s[4],m=Object(J.a)(),h=function(){var e=X()(Z.a.mark((function e(t,n){return Z.a.wrap((function(e){for(var t=0;;){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;switch(e.prev=e.next){case 0:return e.next=2,G.a.linkWithGoogle();case 2:n(),m();case 4:case"end":return e.stop()}}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=X()(Z.a.mark((function e(t,n){return Z.a.wrap((function(e){for(var t=0;;){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;switch(e.prev=e.next){case 0:return e.next=2,G.a.unlinkEmail();case 2:n(),m();case 4:case"end":return e.stop()}}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=X()(Z.a.mark((function e(t,n){return Z.a.wrap((function(e){for(var t=0;;){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;switch(e.prev=e.next){case 0:return e.next=2,G.a.unlinkGoogle();case 2:n(),m();case 4:case"end":return e.stop()}}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=G.a.getAccountName(),E=G.a.getAccountEmail(),C=n.getMonthlyPrice(),b=n.getYearlyPrice(),_=n.hasPremium(),k=n.hasSubscription(),w=n.isTrialOver(),x=null===(e=G.a.getGoogleProvider())||void 0===e?void 0:e.email,S=null===(t=G.a.getEmailProvider())||void 0===t?void 0:t.email,M=!!Q.a.getURLParam("threeYear");return u.a.createElement("div",{key:"content",className:"new-modal-group"},n.isTrialOver()&&!f&&u.a.createElement("div",{className:"new-modal-row-1c"},u.a.createElement("div",{className:"new-modal-row trialEnd"},u.a.createElement("div",null,"Your trial has ended. Please sign up to continue using Premium features."),u.a.createElement("div",{className:"center",style:{marginTop:16}},u.a.createElement(D.a,{raised:!0,onClick:function(){l.default.settings.trialOverHidden.set(!0)}},"DISMISS"))),u.a.createElement("hr",null)),u.a.createElement("div",{className:"text-2xl bold center"},v&&"Hi "+v),c&&n.isTrialState()&&u.a.createElement("div",{className:"subtext center"},"We hope your trial of Premium is going well."),c&&_&&u.a.createElement("div",{className:"subtext center"},"We are very happy to have you as a Premium Member."),c&&!_&&!n.isTrialState()&&u.a.createElement("div",{className:"subtext center"},"We hope Moo.do is helping you be productive."),u.a.createElement("div",{className:ee},"ACCOUNT STATUS"),u.a.createElement("div",{className:"new-modal-subrow"},u.a.createElement("div",null,u.a.createElement("div",{className:"subtitle"},"Account email"),u.a.createElement("div",{className:"subtext"},E)),u.a.createElement("div",null,u.a.createElement("div",{className:"subtitle"},"Member since"),u.a.createElement("div",{className:"subtext"},n.getJoinDate().toString(l.default.International.getFormat(i.a.DFormat.LongStrDate)))),n.isTrialState()&&!n.isTrialOver()&&u.a.createElement("div",null,u.a.createElement("div",{className:"subtitle"},"Days left in trial"),u.a.createElement("div",{className:"subtext"},d)),_&&u.a.createElement("div",null,u.a.createElement("div",{className:"subtitle"},"Premium since"),u.a.createElement("div",{className:"subtext"},n.getPremiumStartDate().toString(l.default.International.getFormat(i.a.DFormat.LongStrDate)))),n.canceledUserHasPremiumAccess()&&u.a.createElement("div",null,u.a.createElement("div",{className:"subtitle"},"Premium end"),u.a.createElement("div",{className:"subtext"},n.premiumEndDateText())),_&&k&&u.a.createElement("div",null,u.a.createElement("div",{className:"subtitle"},"Next billing cycle"),u.a.createElement("div",{className:"subtext"},n.nextBillingDateText()))),u.a.createElement("div",{className:ee},"MANAGE SIGNIN"),u.a.createElement("div",{className:"new-modal-subrow"},p&&u.a.createElement(u.a.Fragment,null,S&&x&&u.a.createElement("div",{className:"flexbox"},u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("b",null,"Email signin:")),u.a.createElement("div",{className:"mt-1"},S)),u.a.createElement("div",{className:"ml-4"},u.a.createElement(D.a,{raised:!0,height:32,marginLeft:16,onClick:g},"UNLINK"))),!S&&u.a.createElement("div",null,u.a.createElement(D.a,{height:32,raised:!0,onClick:function(e,t){return l.default.menus.confirm("Please reauthenticate your Google account first.",function(){var e=X()(Z.a.mark((function e(n){return Z.a.wrap((function(e){for(var a=0;;){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,G.a.reauthenticateGoogle();case 3:e.sent&&l.default.menus.promptComplex("Create Account",[{placeholder:"Email"},{placeholder:"Password",type:"password"},{placeholder:"Confirm Password",type:"password"}],(function(e){var t=r()(e,3),n=t[0],a=t[1],i=t[2];return(o.default.isEmail(n)?a!==i&&"Passwords do not match":"Invalid email address")||a.length<6&&"Please use a longer password for better security."}),function(){var e=X()(Z.a.mark((function e(n){var a,o,i;return Z.a.wrap((function(e){for(var l=0,s=0;;){if(s++>5e3&&__infLoop&&__infLoop(s))throw new RangeError;if(l++>5e3&&__infLoop&&__infLoop(l))throw new RangeError;switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return a=r()(n,3),o=a[0],i=a[1],a[2],e.next=4,G.a.linkWithEmail(o,i);case 4:m();case 5:t();case 6:case"end":return e.stop()}}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8;break;case 7:t();case 8:case"end":return e.stop()}}}),e)})));return function(t){return e.apply(this,arguments)}}(),{textYes:"OK",textNo:"CANCEL"}),!0}},"SETUP EMAIL SIGNIN")),S&&x&&u.a.createElement("div",{className:"flexbox"},u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("b",null,"Google signin:")),u.a.createElement("div",{className:"mt-1"},x)),u.a.createElement("div",{className:"ml-4"},u.a.createElement(D.a,{raised:!0,height:32,onClick:y},"UNLINK"))),!x&&u.a.createElement("div",null,u.a.createElement(D.a,{raised:!0,height:32,onClick:h},"SETUP GOOGLE SIGNIN")))),u.a.createElement("div",{className:ee},"MANAGE ACCOUNT"),u.a.createElement("div",{className:"new-modal-subrow"},!_&&u.a.createElement("div",null,u.a.createElement(D.a,{raised:!0,height:32,onClick:n.onTapDeleteAccount},"DELETE ACCOUNT")),_&&k&&u.a.createElement("div",null,u.a.createElement(D.a,{raised:!0,height:32,onClick:n.onTapUpdatePaymentMethod},"UPDATE PAYMENT METHOD")),_&&k&&u.a.createElement("div",null,u.a.createElement(D.a,{raised:!0,height:32,onClick:n.cancelSubscription},"CANCEL PREMIUM"))),k&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:ee},"INVOICES"),u.a.createElement("div",null,u.a.createElement(D.a,{raised:!0,height:32,onClick:n.onTapViewInvoices},"VIEW INVOICES"))),!_&&u.a.createElement("div",{id:"accountSettingsPremium",className:"mt-8"},u.a.createElement("hr",null),u.a.createElement("div",{className:"new-modal-title",style:{marginTop:24}},u.a.createElement("div",{className:"title"},"Moo.do Premium"),u.a.createElement("div",{className:"subtext center"},"Integrate more of your services together and unlock advanced organization and customization features."),u.a.createElement("div",{className:"center",style:{marginTop:24}},!w&&u.a.createElement("div",{style:{marginTop:16}},u.a.createElement(D.a,{fontSize:14,raised:!0,primary:!0,onClick:function(){l.default.billingManager.startTrial()}},"Start ".concat(i.a.TrialDuration," day free trial"))),u.a.createElement("div",{style:{marginTop:16}},u.a.createElement(D.a,{fontSize:14,raised:!0,primary:!0,onClick:n.onTapSignupMonth},"$"+C+" / month"),u.a.createElement(D.a,{fontSize:14,raised:!0,primary:!0,marginLeft:16,onClick:n.onTapSignupYear},"$"+b+" / year"),M&&u.a.createElement(D.a,{fontSize:14,raised:!0,primary:!0,marginLeft:16,onClick:n.onTapSignupThreeYear},"$"+3*+b+" / 3 years")))),u.a.createElement("div",{id:"premiumFeatures"},u.a.createElement("div",{className:"flexbox c-border"},u.a.createElement("div",{className:"premiumImg premiumShadow"},u.a.createElement("img",{src:"/img/about/DrivePane.png"})),u.a.createElement("div",{className:"premiumDesc"},u.a.createElement("div",{className:"premiumTitle"},"Google Drive Pane"),u.a.createElement("div",{className:"premiumText"},"Attach documents to your tasks. Dragging a file from your computer into Moo.do automatically uploads it to Drive."))),u.a.createElement("div",{className:"flexbox c-border"},u.a.createElement("div",{className:"premiumImg premiumShadow"},u.a.createElement("img",{src:"/img/about/GCalSettings.jpg"})),u.a.createElement("div",{className:"premiumDesc"},u.a.createElement("div",{className:"premiumTitle"},"Google Calendar Sync"),u.a.createElement("div",{className:"premiumText"},"Two way sync: Manage your Google Calendar in Moo.do and/or sync your Moo.do events with your Google Calendar."))),u.a.createElement("div",{className:"flexbox c-border"},u.a.createElement("div",{className:"premiumImg premiumShadow"},u.a.createElement("img",{src:"/blog/img/update-workspaces.png"})),u.a.createElement("div",{className:"premiumDesc"},u.a.createElement("div",{className:"premiumTitle"},"More than 5 Boards"),u.a.createElement("div",{className:"premiumText"},"Save sets of panes to easily switch between workflows."))),u.a.createElement("div",{className:"flexbox c-border"},u.a.createElement("div",{className:"premiumImg premiumShadow"},u.a.createElement("img",{src:"/img/about/DisplaySettings-Small.jpg"})),u.a.createElement("div",{className:"premiumDesc"},u.a.createElement("div",{className:"premiumTitle"},"Advanced Display Settings"),u.a.createElement("div",{className:"premiumText"},"Customize Moo.do's look and feel to your liking."))),u.a.createElement("div",{className:"flexbox c-border"},u.a.createElement("div",{className:"premiumImg"},u.a.createElement("img",{src:"/img/about/GmailCache.jpg"})),u.a.createElement("div",{className:"premiumDesc"},u.a.createElement("div",{className:"premiumTitle"},"Gmail Sync Time"),u.a.createElement("div",{className:"premiumText"},"Cache emails for up to ",i.a.MaxGmailSyncTime.Premium," days for access while offline and quicker load time.")))),u.a.createElement("table",{id:"pricingTable"},u.a.createElement("tbody",null,u.a.createElement("tr",{className:"c-border c-bg-faded"},u.a.createElement("td",null),u.a.createElement("td",null,"Free"),u.a.createElement("td",null,"Premium")),u.a.createElement("tr",{className:"empty"},u.a.createElement("td",null),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",{className:"header price"},u.a.createElement("td",null,"Price"),u.a.createElement("td",null,"$0"),u.a.createElement("td",null,u.a.createElement("div",null,"$"+C+" / month"),u.a.createElement("div",null,"$"+b+" / year"))),u.a.createElement("tr",{className:"header"},u.a.createElement("td",null,"Core Features"),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",null,u.a.createElement("td",null,"Unlimited items"),u.a.createElement("td",{className:"icon-check"}),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",null,u.a.createElement("td",null,"Powerful search"),u.a.createElement("td",{className:"icon-check"}),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",null,u.a.createElement("td",null,"Realtime collaboration"),u.a.createElement("td",{className:"icon-check"}),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",null,u.a.createElement("td",null,"Maximum Number of Boards"),u.a.createElement("td",null,"5"),u.a.createElement("td",null,"Unlimited")),u.a.createElement("tr",null,u.a.createElement("td",null,"Board Folders"),u.a.createElement("td",null),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",null,u.a.createElement("td",null,"Day, Week, Month views"),u.a.createElement("td",null),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",null,u.a.createElement("td",null,"Custom Hotkeys"),u.a.createElement("td",null),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",{className:"empty"},u.a.createElement("td",null),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",{className:"header"},u.a.createElement("td",null,"Plugins"),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement("img",{src:"/img/plugin-gcontacts.png"}),"Google Contacts"),u.a.createElement("td",{className:"icon-check"}),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement("img",{src:"/img/plugin-mailbird.png"}),"Mailbird"),u.a.createElement("td",{className:"icon-check"}),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",null,u.a.createElement("td",null,u.a.createElement("img",{src:"/img/plugin-gdrive.png"}),"Google Drive"),u.a.createElement("td",null),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",{className:"empty"},u.a.createElement("td",null),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",{className:"header"},u.a.createElement("td",null,u.a.createElement("img",{src:"/img/plugin-gmail.png"}),"Gmail"),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",null,u.a.createElement("td",null,"Standard email features"),u.a.createElement("td",{className:"icon-check"}),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",null,u.a.createElement("td",null,"Offline sync"),u.a.createElement("td",null,"5 days"),u.a.createElement("td",null,"120 days")),u.a.createElement("tr",{className:"empty"},u.a.createElement("td",null),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",{className:"header"},u.a.createElement("td",null,u.a.createElement("img",{src:"/img/plugin-gcal.png"}),"Google Calendar"),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",null,u.a.createElement("td",null,"Sync Moo.do tasks"),u.a.createElement("td",null),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",null,u.a.createElement("td",null,"Manage Calendar in Moo.do"),u.a.createElement("td",null),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",{className:"empty"},u.a.createElement("td",null),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",{className:"header"},u.a.createElement("td",null,"Customization"),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",null,u.a.createElement("td",null,"Display settings presets"),u.a.createElement("td",{className:"icon-check"}),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",null,u.a.createElement("td",null,"Advanced display settings"),u.a.createElement("td",null),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",{className:"empty"},u.a.createElement("td",null),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",{className:"header"},u.a.createElement("td",null,"We love you",u.a.createElement("i",{className:"icon-heart"})),u.a.createElement("td",null),u.a.createElement("td",null)),u.a.createElement("tr",null,u.a.createElement("td",null,"Premium support"),u.a.createElement("td",null),u.a.createElement("td",{className:"icon-check"})),u.a.createElement("tr",{className:"empty"},u.a.createElement("td",null),u.a.createElement("td",null),u.a.createElement("td",null))))))})),ne=Object(M.b)((function(e){e.openSection;var t=Object(c.useState)(!1),n=r()(t,2),a=n[0],i=n[1],s=Object(c.useRef)();return u.a.createElement("div",{key:"content",className:"new-modal-group"},u.a.createElement("div",{className:"new-modal-title"},u.a.createElement("div",{className:"title"},"Send Feedback"),u.a.createElement("div",{className:"subtext middle"},"Send the developers bug reports, feedback, or suggestions. Your feedback is very helpful in planning what to do next.")),u.a.createElement("div",{className:"earlyAccessFeedback"},u.a.createElement("textarea",{className:"feedbackTextArea c-background c-foreground",ref:s,style:{marginBottom:16,color:a?"#aaa":null}}),u.a.createElement("div",{style:{textAlign:"right"}},u.a.createElement(D.a,{raised:!0,onClick:function(){s.current.value="",s.current.focus()}},"DISCARD"),u.a.createElement(D.a,{raised:!0,primary:!0,marginLeft:16,onClick:function(e,t){var n=s.current.value;if(n&&n.length>2){i(!0);return l.default.sendFeedback("Moo.do Feedback",n).then((function(){s.current.value="",i(!1),t&&o.default.isFunction(t)&&t()})),!0}}},"SEND"))))})),ae=n(81),re=n(165),oe=Object(M.b)((function(e){var t,n=e.valueObservable,a=e.title,i=e.description,l=e.minValue,s=e.maxValue,c=e.interval,d=e.readonly,f=(e.style,e.styleTitle),p=e.className,m=e.onChange,h=e.getNumberFromObservable,g=e.getValueFromNumber,y=Object(T.a)(n),v=r()(y,1)[0],E=null!==(t=null===h||void 0===h?void 0:h(v))&&void 0!==t?t:v;return u.a.createElement("div",{className:o.default.classNames("py-2",p)},u.a.createElement("div",null,a&&u.a.createElement("span",{className:o.default.classNames("font-bold pr-8 inline-block",R.a.title),style:f},a),u.a.createElement(re.a,{value:E,minValue:l,maxValue:s,interval:c,readonly:d,onChange:function(e){var t,a=null!==(t=null===g||void 0===g?void 0:g(e))&&void 0!==t?t:e;n.set(a),m&&m(a)}})),i&&u.a.createElement("div",{className:"c-foreground-light text-xs pt-3 leading-tight"},i))}));function ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return C()(this,n)}}var le=function(e){v()(n,e);var t=ie(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(){this.hadCalendarSyncUpdated=!1,this.createObservables({addingCalendar:!1}),this.refAddCalendar=u.a.createRef(),d.a.refresh()}},{key:"openSection",value:function(e){this.props.openSection(e)}},{key:"onUnmount",value:function(){if(this.hadCalendarSyncUpdated){var e=l.default.pluginManager.getPlugin(i.a.PluginID.GCalendar);e.isActive()&&e.forceRemoteEventSync()}}},{key:"getState",value:function(){var e=l.default.pluginManager.getPluginGCalendar(),t={premiumStatus:l.default.billingManager._premiumStatus,hasAccounts:e.getSyncAccounts().length>0,GCalendarsAvailable:d.a.GCalendarsAvailable,GCalendarSyncErrors:d.a.GCalendarSyncErrors,GCalendarAddFailure:d.a.GCalendarAddFailure,GCalendarListFailure:d.a.GCalendarListFailure,GCalendarListLoading:d.a.GCalendarListLoading},n=d.a.getPluginOptions(i.a.PluginID.GCalendar);for(var a in n){if(n.hasOwnProperty(a))t[i.a.PluginID.GCalendar+"_"+a]=n[a]}return t}},{key:"toggleCalendarImport",value:function(e){var t=i.a.PluginSettingsID.GCalendar.ImportCalendars,n=(this.state[i.a.PluginID.GCalendar+"_"+t]||[]).slice(0),a=this.isExportCalendar(e);a&&this.disableCalendarExport();var r=n.indexOfWithProperty("id",e.id);if(r>=0)n.removeAt(r);else{try{o.default.PAssert(1355,!a,"Export calendar state must be matching with import calendar state")}catch(l){o.default.reportError(l)}try{o.default.PAssert(1356,e.accountID,"Calendar should have an accountID")}catch(l){o.default.reportError(l)}n.push({id:e.id,summary:e.summary,accessRole:e.accessRole,accountID:e.accountID})}d.a.setPluginOption(i.a.PluginID.GCalendar,t,n,!1),this.hadCalendarSyncUpdated=!0}},{key:"enableCalendarExport",value:function(e){d.a.setPluginOption(i.a.PluginID.GCalendar,i.a.PluginSettingsID.GCalendar.ExportCalendar,e.id,!1),this.hadCalendarSyncUpdated=!0,this.isImportCalendar(e)||this.toggleCalendarImport(e)}},{key:"disableCalendarExport",value:function(){d.a.setPluginOption(i.a.PluginID.GCalendar,i.a.PluginSettingsID.GCalendar.ExportCalendar,null,!1)}},{key:"toggleCalendarExport",value:function(e){this.isExportCalendar(e)?this.disableCalendarExport():this.enableCalendarExport(e)}},{key:"onAddCalendarClick",value:function(e){var t=this;this.addingCalendar.set(e),setTimeout((function(){t.refAddCalendar.current.focus()}),0)}},{key:"onAddButtonClick",value:function(e,t){d.a.addCalendar(e,t),this.addingCalendar.set(!1)}},{key:"isImportCalendar",value:function(e){var t=!1;if(this.state.GCalendar_importCalendars)for(var n=0,a=0;a<this.state.GCalendar_importCalendars.length;++a){if(n++>5e3&&__infLoop&&__infLoop(n))throw new RangeError;var r=this.state.GCalendar_importCalendars[a];if(o.default.isObject(r)||(r={id:r}),r.id===e.id){t=!0;break}}return t}},{key:"isExportCalendar",value:function(e){var t=!1;return this.state.GCalendar_exportCalendar&&(t=this.state.GCalendar_exportCalendar===e.id),t}},{key:"updateCalendarEvents",value:function(){var e=l.default.pluginManager.getPlugin(i.a.PluginID.GCalendar);try{o.default.PAssert(1357,e,"GCalendar plugin does not exist. HOW?")}catch(t){o.default.reportError(t)}e&&e.runCalendarSync()}},{key:"onChangeWeeks",value:function(){clearTimeout(this.timeoutUpdateCalendarEvents),this.timeoutUpdateCalendarEvents=setTimeout(this.updateCalendarEvents,5e3)}},{key:"comparatorCalendar",value:function(e,t){var n=e.accountID&&t.accountID?e.accountID.localeCompare(t.accountID):0;if(0===n)return e.summary.localeCompare(t.summary);var a=U.a.getDefaultAccountID();return e.accountID===a&&(n=-1),t.accountID===a&&(n=1),n}},{key:"onClickSyncAccounts",value:function(){this.openSection("Plugins")}},{key:"renderTableRows",value:function(){var e=this,t=this.state,n=t.GCalendarsAvailable,a=t.GCalendarSyncErrors,r=l.default.settings.syncAccounts.get(),s=Object.keys(r),c=l.default.pluginManager.getPlugin(i.a.PluginID.GCalendar),d={},f=[];n.sort(this.comparatorCalendar),n.forEach((function(e){d[e.accountID]||(d[e.accountID]=[]),d[e.accountID].push(e)}));var p=U.a.getDefaultAccountID();return s.includes(p)&&(s.remove(p),s.splice(0,0,p)),s.forEach((function(n){var r=d[n];if(f.push(u.a.createElement("div",{className:"calendarAccount bold c-blue",key:"account_"+n},u.a.createElement("div",null,"Account: "+n),!r&&u.a.createElement(D.a,{raised:!0,style:{width:"auto"},onClick:e.onClickSyncAccounts},"Sync this account"))),r){r.forEach((function(t){var r=e.isImportCalendar(t),l=e.isExportCalendar(t),s="owner"===t.accessRole||"writer"===t.accessRole,d=o.default.classNames("calendarSettingsName",{import:r},{export:l});if(a){var p=a.indexOfWithProperty("id",t.id),m=null,h=null;if(p>=0){var g=a[p];g.result===i.a.SyncResult.FailureNoRead?m=!0:g.result===i.a.SyncResult.FailureNoRead&&(h=!0)}}var y=c.getCalendarBackgroundColor(t.id);f.push(u.a.createElement("div",{key:t.id+n},u.a.createElement("div",{className:d},t.summary||t.id),u.a.createElement(Y.a,{checked:r,error:m,checkedColor:y,onChange:e.toggleCalendarImport.bind(e,t)}),s?u.a.createElement(Y.a,{checked:l,checkedColor:y,error:m||h,radio:!0,onChange:e.toggleCalendarExport.bind(e,t)}):u.a.createElement("div",null)))}));var l=t.addingCalendar===n;f.push(u.a.createElement(u.a.Fragment,{key:"add"+n},t.GCalendarAddFailure&&u.a.createElement("div",{key:"footerError"},u.a.createElement("div",{style:{textAlign:"center"}},"There was an error creating your new calendar. Please try again.")),l&&u.a.createElement("div",{key:"footer"},u.a.createElement(ae.a,{ref:e.refAddCalendar,floatingText:"New calendar name",padding:{left:0,right:24},height:50,buttonText:"ADD",onButtonClick:e.onAddButtonClick.bind(e,n)})),!l&&u.a.createElement("div",{key:"footer"},u.a.createElement("div",{style:{textAlign:"center"}},u.a.createElement(D.a,{height:"auto",onClick:e.onAddCalendarClick.bind(e,n)},"ADD NEW CALENDAR")))))}})),f}},{key:"renderCalendarSettings",value:function(){var e,t,n=this.state,a=0,r=n.GCalendarSyncErrors,o=!1;if(r)for(var s=0,c=0;c<r.length;c++){if(s++>5e3&&__infLoop&&__infLoop(s))throw new RangeError;var f=r[c].result;f===i.a.SyncResult.FailureOAuth?o=!0:f!==i.a.SyncResult.FailureNoRead&&f!==i.a.SyncResult.FailureNoWrite||a++}var p=l.default.pluginManager.getPlugin(i.a.PluginID.GCalendar);return l.default.billingManager.hasPremiumFeatures()?o&&0===n.GCalendarsAvailable.length?t=u.a.createElement("div",{className:"center"},u.a.createElement("div",{className:"error"},"We encountered a sync error. Please allow access to your calendar."),u.a.createElement("br",null),u.a.createElement(D.a,{raised:!0,primary:!0,onClick:d.a.enablePlugin.bind(d.a,i.a.PluginID.GCalendar)},"ALLOW")):n.GCalendarListFailure?t=u.a.createElement("div",{className:"center"},u.a.createElement("div",{className:"error"},"There was an error syncing your calendar list. Please try again."),u.a.createElement("br",null),u.a.createElement(D.a,{raised:!0,primary:!0,onClick:d.a.updateCalendarList.bind(d.a)},"RETRY")):n.GCalendarListLoading?t=u.a.createElement(B.a,null,"Loading Google Calendars..."):(a>0&&(t=u.a.createElement("div",{className:"center"},u.a.createElement("div",{style:{maxWidth:600,lineHeight:1.5,marginBottom:16},className:"error"},"There was an error reading or saving to your calendars. Please check your Google Calendar settings. The affected calendars are marked with a ",u.a.createElement(Y.a,{checked:!0,error:!0,style:{marginLeft:5,marginRight:5}})," below."))),e=u.a.createElement(z.a,{className:"calendarSettingsTable new-modal-row"},u.a.createElement("div",{key:"header",className:"fancyTableHeader"},u.a.createElement("div",null,"Calendar Name"),u.a.createElement("div",null,"Sync"),u.a.createElement("div",null,"Default Save")),this.renderTableRows())):t=u.a.createElement("div",{className:"center"},u.a.createElement("div",{className:"error"},"You must have an active Premium subscription or Trial to use Google Calendar."),u.a.createElement("br",null),u.a.createElement(D.a,{raised:!0,primary:!0,onClick:this.openSection.bind(this,"Account")},"ABOUT PREMIUM")),u.a.createElement("div",null),u.a.createElement("div",null),u.a.createElement("div",{className:"calendarSettings"},t,e,u.a.createElement("div",null,u.a.createElement(oe,{title:"Weeks in the past",className:"py-4",valueObservable:p.getSettingObs(i.a.PluginSettingsID.GCalendar.WeeksPast),minValue:0,maxValue:-i.a.CalendarMinSyncWeeks,onChange:this.onChangeWeeks,styleTitle:{width:140}}),u.a.createElement(oe,{title:"Weeks in the future",className:"py-4",valueObservable:p.getSettingObs(i.a.PluginSettingsID.GCalendar.WeeksFuture),minValue:0,maxValue:i.a.CalendarMaxSyncWeeks,onChange:this.onChangeWeeks,styleTitle:{width:140}})),u.a.createElement(I,{title:"Display overdue Google Calendar events in agenda",checkedObservable:p.getSettingObs(i.a.PluginSettingsID.GCalendar.DisplayOverdueInAgenda),description:"In the Agenda view of the Calendar Pane, display events from Google Calendar that happened in the past."}),u.a.createElement(I,{title:"Sync dragged events",checkedObservable:p.getSettingObs(i.a.PluginSettingsID.GCalendar.SyncDraggedEvents),description:"Add events to Google Calendar when dragging onto the Calendar pane."}),u.a.createElement(I,{title:"Sync new events created in add item popup by default",checkedObservable:p.getSettingObs(i.a.PluginSettingsID.GCalendar.SyncNewEvents),description:"When adding events in the New Item popup, an event will be created in the selected Google Calendar."}),u.a.createElement(I,{title:"Sync new events created in date popup by default",checkedObservable:p.getSettingObs(i.a.PluginSettingsID.GCalendar.SyncPopup),description:"When setting dates in the date popup popup, an event will be created in the selected Google Calendar."}),u.a.createElement(I,{title:"Create a local item for new calendar events by default",checkedObservable:p.getSettingObs(i.a.PluginSettingsID.GCalendar.CreateLocalEvents),description:"When adding events in the New Item popup, a Moo.do item will be created in the current document."}))}},{key:"render",value:function(){var e=this.state.hasAccounts;return u.a.createElement("div",{className:"new-modal-group"},e&&u.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},this.renderCalendarSettings()),!e&&u.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},u.a.createElement("div",{className:"subtext"},"No sync accounts available. Please check the Sync Accounts settings."),u.a.createElement("div",{style:{marginTop:24}},u.a.createElement(D.a,{raised:!0,primary:!0,onClick:this.onClickSyncAccounts},"Sync Accounts Settings"))))}}]),n}(x.a),se=n(59),ce=Object(M.b)((function(){var e=Object(T.a)(se.a._contacts),t=r()(e,1)[0];return u.a.createElement("div",{className:"settingPluginOptions"},u.a.createElement("div",{className:"subtext"},u.a.createElement("span",null,"We will not send emails or otherwise communicate with your contacts unless you ask us to."),u.a.createElement("span",null," If you need instant access to contacts you just added you can sync them by pressing the button below, otherwise your contacts will appear automatically after a few hours.")),u.a.createElement("div",{className:"center"},u.a.createElement(D.a,{id:"refreshContacts",raised:!0,primary:!0,onClick:d.a.onTapRefreshContacts},"REFRESH CONTACTS"),u.a.createElement("div",{id:"numContacts"},t.length+" contacts loaded")))})),ue=Object(M.b)((function(e){var t=e.openSection,n=Object(c.useRef)();Object(c.useEffect)((function(){return function(){if(n.current){var e=l.default.pluginManager.getPluginGmail();e.isActive()&&e._forceThreadSync()}}}),[]);var a=l.default.pluginManager.getPlugin(i.a.PluginID.Gmail),r=l.default.billingManager.hasPremiumFeatures()?i.a.MaxGmailSyncTime.Premium:i.a.MaxGmailSyncTime.Free;return u.a.createElement("div",{className:"new-modal-group gmailSettings"},u.a.createElement("div",{className:"new-modal-row new-modal-row-1c center"},u.a.createElement(D.a,{raised:!0,onClick:function(){t("Plugins")}},"SETUP ACCOUNTS")),u.a.createElement(oe,{title:"Offline sync days",className:"py-4",valueObservable:a.getSettingObs(i.a.PluginSettingsID.Gmail.SyncTime),minValue:0,maxValue:r,onChange:function(){n.current=!0},description:"The number of days in the past that your email will be saved for offline access (0 - ".concat(r,").").concat(l.default.billingManager.hasPremiumFeatures()?"":" Premium users can sync up to ".concat(i.a.MaxGmailSyncTime.Premium," days of emails."))}),u.a.createElement(I,{title:"Archive emails when scheduled",checkedObservable:a.getSettingObs(i.a.PluginSettingsID.Gmail.ArchiveOnSchedule),description:"If enabled, when you use the 'Schedule' feature to put an email on your calendar it will be archived."}),u.a.createElement(I,{title:"Archive emails when organized",checkedObservable:a.getSettingObs(i.a.PluginSettingsID.Gmail.ArchiveOnOrganize),description:"If enabled, when you drag an email to your outline it will be archived and marked as Moo.do/Handled."}),u.a.createElement(I,{title:"Insert signature before quoted text in replies",checkedObservable:a.getSettingObs(i.a.PluginSettingsID.Gmail.InsertSignatureAboveReplies),description:"If enabled, your signature will be inserted above the quoted text in replies and will remove the '--' line that precedes it."}),u.a.createElement("div",{className:"new-modal-row new-modal-row-1c center"},u.a.createElement(D.a,{raised:!0,onClick:function(e,t){return l.default.pluginManager.getPluginGmail().syncAllAccountsFull(t),!0}},"Force Full Sync")))})),de=n(164),fe=n(54),pe=n.n(fe),me=n(61),he=n.n(me);function ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return C()(this,n)}}var ye=function(e){v()(n,e);var t=ge(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(){this.amtMoved=void 0,this.prevPos=void 0,this.isDragging=!1,this.createObservables({dragPosition:void 0})}},{key:"getElement",value:function(){return this.refs.element}},{key:"getDraggingElement",value:function(){return this.refs.draggingElement}},{key:"getDragPosition",value:function(){return this.state.dragPosition}},{key:"onMouseDown",value:function(e){var t=this.props.horizontal,n=t?e.clientX:e.clientY;this.amtMoved=0,this.prevPos={left:e.clientX,top:e.clientY},this.dragOffset=o.default.offset(this.refs.element)[t?"left":"top"]-n,this.props.allowDragOut&&(this.startPos={left:e.clientX,top:e.clientY}),document.addEventListener("mousemove",this.onMouseMoveDragging),document.addEventListener("mouseup",this.onMouseUpDragging)}},{key:"onMouseMoveDragging",value:function(e){var t=this.props,n=t.horizontal,a=n?e.clientX:e.clientY;if(this.amtMoved+=Math.abs(e.clientX-this.prevPos.left)+Math.abs(e.clientY-this.prevPos.top),this.amtMoved>3){this.isDragging||(this.isDragging=!0,t.onDragStart(this)),t.onDragMove(this,e);var r=n?"left":"top",i=this.refs.element.parentElement,l=o.default.offset(i),s=a+this.dragOffset-l[r],c={};n?(c.left=s,t.allowDragOut&&(c.top=e.clientY-this.startPos.top)):(c.top=s,t.allowDragOut&&(c.left=e.clientX-this.startPos.left)),this.dragPosition.set(c)}this.prevPos={left:e.clientX,top:e.clientY}}},{key:"onMouseUpDragging",value:function(e){this.isDragging&&this.props.onDragEnd(this,e),this.amtMoved=void 0,this.prevPos=void 0,this.dragOffset=void 0,this.isDragging=!1,this.dragPosition.set(void 0),document.removeEventListener("mousemove",this.onMouseMoveDragging),document.removeEventListener("mouseup",this.onMouseUpDragging)}},{key:"render",value:function(){var e=this.state,t=this.props,n=e.dragPosition,a=!o.default.isEmpty(n),r=o.default.classNames(t.className,"fancySortableItem",{noClick:t.noDrag},{dragging:a||t.isDragging}),i=o.default.classNames((a||t.isDragging)&&t.classDragging),l={};return n&&(l[s.a.transform.react]="translate3d("+(n.left||0)+"px,"+(n.top||0)+"px,0)"),u.a.createElement("div",{className:r,onMouseDownCapture:this.onMouseDown,ref:"element"},u.a.createElement("span",{className:i},t.children),a&&u.a.createElement("div",{className:"draggingElement",style:l,ref:"draggingElement"},t.children))}}]),n}(x.a);function ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return C()(this,n)}}var Ee=function(e){v()(n,e);var t=ve(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(){this.createObservables({draggingChild:void 0})}},{key:"getElement",value:function(){return this.refs.element}},{key:"onDragStart",value:function(e){this.isDraggingInside=!0,this.dragDidMove=!1,this.draggingChild.set(e)}},{key:"findTargetIndex",value:function(e){for(var t=0,n=u.a.Children.count(this.props.children),a=this.props.horizontal?"left":"top",r=this.props.horizontal?"width":"height",i=e.props.owner===this?e.props.index:-1,l=e.getDraggingElement(),s=o.default.offset(l)[a],c=l.getBoundingClientRect()[r],d=-1,f=!1,p=0;p<n;p++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var m=this.refs["el_"+p];if(m!==this.draggingChild.get()){var h=m.getElement(),g=o.default.offset(h)[a],y=h.getBoundingClientRect()[r],v=Math.min(y,c)/2;if(p>i)s+v>=g&&(d=p,p===n-1&&!f&&s>g+v&&(d=n));else if(s<=g+v)return p}else f=!0}return d}},{key:"onDragMove",value:function(e,t){if(e.getDraggingElement()){var n=this,a=e.props.index,r=e.props.owner;0,this.props.getDragTargetFromElement&&!(n=this.props.getDragTargetFromElement(t.target))&&this.isDraggingInside&&(this.isDraggingInside=!1,this.props.onDragOut(a,r)),n&&(this.isDraggingInside=!0,n.handleDragMove(e,t))}}},{key:"handleDragMove",value:function(e,t){var n=e.props.index,a=e.props.owner,r=this.findTargetIndex(e);r>=0&&(r!==n||this!==a)&&(this.dragDidMove=!0,this.props.moveChild(n,r,a,this))}},{key:"onDragEnd",value:function(e,t){if(this.draggingChild.set(void 0),this.props.onDragEnd){var n=!1;if(this.props.getDragTargetFromElement){var a=this.props.getDragTargetFromElement(t.target);n=a&&a!==this}this.props.onDragEnd(e,n,this.dragDidMove||n)}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.moveChild,t.horizontal),a=(t.getDragTargetFromElement,t.onDragOut,t.classDragging,t.onDragEnd,he()(t,["moveChild","horizontal","getDragTargetFromElement","onDragOut","classDragging","onDragEnd"])),r=o.default.classNames("fancySortableList",t.className,{dragging:!!this.state.draggingChild},{flexbox:n}),i=u.a.Children.map(t.children,(function(a,r){return u.a.createElement(ye,{owner:e,onDragStart:e.onDragStart,onDragMove:e.onDragMove,onDragEnd:e.onDragEnd,ref:"el_"+r,index:r,horizontal:n,noDrag:a.props["data-nodrag"],isDragging:a.props["data-isdragging"],allowDragOut:!!t.getDragTargetFromElement,classDragging:t.classDragging},a)}));return u.a.createElement("div",pe()({},a,{className:r,ref:"element"}),i)}}]),n}(x.a);function Ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return C()(this,n)}}var be=["overdue","starred","important","#next","#soon","#later","#someday"],_e=function(e){v()(n,e);var t=Ce(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(){for(var e=0,t=0,n=0,a=l.default.timeline.agendaSort.get(),r=[],o=Object.keys(a).map((function(e){return{key:e,value:a[e]}})),i=0;i<15;i++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;o.push(i)}for(o.sort(this.sortComparator),i=0;i<be.length;i++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var s=be[i];o.indexOfWithProperty("key",s)<0&&r.push({key:s,value:0})}var c=de.a.getAll();for(i=0;i<c.length;i++){if(n++>5e3&&__infLoop&&__infLoop(n))throw new RangeError;var u="#"+c[i].text;o.indexOfWithProperty("key",u)<0&&r.push({key:u,value:0})}r.sort(this.sortComparatorNonSort),this.createObservables({sortArray:o,nonSortArray:r,selected:{array:"sort",index:0}})}},{key:"sortComparatorNonSort",value:function(e,t){var n=e.key[0],a=t.key[0];return"#"===n&&"#"!==a?1:"#"===a&&"#"!==n?-1:e.key.localeCompare(t.key)}},{key:"sortComparator",value:function(e,t){return(isNaN(e)?e.value:100*e)-(isNaN(t)?t.value:100*t)}},{key:"moveChild",value:function(e,t,n,a){var r=this.state,o=n&&n!==this.refs.sortList?"nonSort":"sort",i=a&&a!==this.refs.nonSortList?"sort":"nonSort",l=r[o+"Array"],s=r[i+"Array"],c=l===s,u="sort"===o?r.nonSortArray:r.sortArray,d=l[e];c?l.splice(e,1):d.isDragging=!0;var f=u.indexOfWithProperty("key",d.key);f>=0&&u.splice(f,1),s.splice(t,0,d),this[o+"Array"].set(l,!1),this[i+"Array"].set(s,!0)}},{key:"onDragOut",value:function(e,t){var n=t&&t!==this.refs.sortList?"nonSort":"sort",a=this.state[n+"Array"],r="sort"===n?this.nonSortArray:this.sortArray,o=a[e],i=r.indexOfWithProperty("key",o.key);i>=0&&r.splice(i,1)}},{key:"onDragEnd",value:function(e,t,n){var a=e.props.owner,r=e.props.index,o=a&&a!==this.refs.sortList?"nonSort":"sort",i=this.state[o+"Array"][r];if(i.isDragging=!1,t){var l=e.props.owner;(l&&l!==this.refs.nonSortList?this.sortArray:this.nonSortArray).splice(e.props.index,1)}this.sortArray.indexOf(i)<0&&this.nonSortArray.indexOf(i)<0&&this.nonSortArray.push(i),this.sortArray.notify(),n&&this.saveAfterTimeout()}},{key:"saveAfterTimeout",value:function(){this._saveTimeout&&clearTimeout(this._saveTimeout),this._saveTimeout=setTimeout(this.saveToSettings,200)}},{key:"saveToSettings",value:function(){for(var e,t=0,n=this.state.sortArray,a={},r=-1,o=0;o<n.length;o++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var i=n[o];if(isNaN(i)){var s=100*r,c=e&&e>s?e+1:s+1;a[i.key]=c,e=c}else r=i}l.default.timeline.saveAgendaSort(a)}},{key:"getDragTargetFromElement",value:function(e){var t=o.default.findParent(e,"fancySortableList"),n=this.refs;return t===n.sortList.getElement()?n.sortList:t===n.nonSortList.getElement()?n.nonSortList:void 0}},{key:"onClickMoveToOtherList",value:function(){var e=this.state.selected,t=e.array,n=e.index,a="sort"===t?"nonSort":"sort",r=this.state[t+"Array"][n];isNaN(r)&&(this[t+"Array"].splice(n,1),this[a+"Array"].splice(0,0,r)),this.saveAfterTimeout()}},{key:"onClickListItem",value:function(e,t){this.selected.set({array:e,index:t})}},{key:"renderListItem",value:function(e,t,n,a){var r=this.state,i=this.onClickListItem.bind(this,a,t);if(isNaN(e)){var l=e.key.capitalize(),s=o.default.classNames(n,{"tag c-tag":l.startsWith("#")},{"selected c-popup-item":r.selected.array===a&&r.selected.index===t});return u.a.createElement("div",{key:l,className:s,onClick:i,"data-isdragging":e.isDragging},l)}return u.a.createElement("div",{key:e,className:n+" date c-date","data-nodrag":!0},u.a.createElement("span",{className:"icon-calendar"}),u.a.createElement("span",null,"Today"+(e>0?" + "+e+" days":"")))}},{key:"render",value:function(){var e,t=0,n=0,a=this.state,r=a.sortArray,i=a.nonSortArray,l=[],s=[],c=a.selected.array,d=o.default.classNames("agendaSortSettingsItem c-background"),f=o.default.classNames({"icon-arrow_forward":"sort"===c},{"icon-arrow_back":"nonSort"===c});for(e=0;e<r.length;e++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;l.push(this.renderListItem(r[e],e,d,"sort"))}for(e=0;e<i.length;e++){if(n++>5e3&&__infLoop&&__infLoop(n))throw new RangeError;s.push(this.renderListItem(i[e],e,d,"nonSort"))}return u.a.createElement("div",{className:"agendaSortListsContainer modal-row flexbox flexvert",style:{height:"100%"}},u.a.createElement("div",{className:"modal-row-title"},"Change agenda sort"),u.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Customize the sort order of the Agenda. Drag and drop tags and blocks to arrange them relative to dates."),u.a.createElement("div",{className:"modal-row agendaSortLists flexbox f1"},u.a.createElement("div",{className:"agendaSortListWrapper flexbox flexvert f1"},u.a.createElement("div",{className:"bold"},"Order on Agenda"),u.a.createElement(Ee,{className:"agendaSortList f1 c-border-light",moveChild:this.moveChild,onDragEnd:this.onDragEnd,onDragOut:this.onDragOut,ref:"sortList",getDragTargetFromElement:this.getDragTargetFromElement,classDragging:"c-foreground-very-faded"},l)),u.a.createElement("div",{className:"flexbox flexvert height100"},u.a.createElement(D.a,{raised:!0,round:!1,icon:f,onClick:this.onClickMoveToOtherList})),u.a.createElement("div",{className:"agendaSortListWrapper flexbox flexvert f1"},u.a.createElement("div",{className:"bold"},"Not on Agenda"),u.a.createElement(Ee,{className:"agendaSortList agendaSortList f1 c-border-light",moveChild:this.moveChild,onDragEnd:this.onDragEnd,onDragOut:this.onDragOut,ref:"nonSortList",getDragTargetFromElement:this.getDragTargetFromElement,classDragging:"c-foreground-very-faded"},s))))}}]),n}(x.a),ke=[w()({},i.a.DateFormat.MDY,"M/D/Y"),w()({},i.a.DateFormat.DMY,"D/M/Y"),w()({},i.a.DateFormat.DMYDot,"D.M.Y"),w()({},i.a.DateFormat.YMD,"Y/M/D"),w()({},i.a.DateFormat.YMDDot,"Y.M.D")],we=[{Sunday:"Sunday"},{Monday:"Monday"}],xe=Object(M.b)((function(){return u.a.createElement("div",{key:"content"},u.a.createElement(L,{title:"Date format",valueObservable:l.default.settings.dateFormat,options:ke,style:{width:80},styleTitle:{width:100}}),u.a.createElement(L,{title:"Start week on",valueObservable:l.default.settings.dayWeekStart,getValueFromSelected:function(e){return"Monday"===e?1:0},getSelectedFromObservable:function(e){return 1===e?"Monday":"Sunday"},options:we,style:{width:80},styleTitle:{width:100}}),u.a.createElement(oe,{title:"Number of days in custom calendar view (Premium)",className:"py-4",valueObservable:l.default.settings.calendarCustomDays,minValue:1,maxValue:14,readonly:!l.default.billingManager.hasPremiumFeatures()}),s.a.supportsNotifications()&&u.a.createElement(u.a.Fragment,null,u.a.createElement("hr",null),u.a.createElement(I,{checkedObservable:l.default.settings.disableNotifications,title:"Enable notifications",description:"Display native notifications for items that use a specific @date and time in their text. These are only displayed for the currently open document on this device.",getCheckedFromObservable:function(e){return!e},getValueFromChecked:function(e){return!e},onChange:function(e){e?s.a.usesHTML5Notifications()?s.a.hasNotificationPermission()||Notification.requestPermission((function(e){"granted"===e?l.default.timeline.updateNotifications():(l.default.settings.disableNotifications.set(!0),l.default.toasts.pushMessage({text:"To enable notifications in the future, you must first give permission in your browser.",action:i.a.MessageAction.OpenURL,actionText:"LEARN MORE",data:{url:"https://support.google.com/chrome/answer/6148059"}}))})):l.default.timeline.updateNotifications():l.default.timeline.clearNotifications()}}),u.a.createElement(oe,{title:"Notification time",valueObservable:l.default.settings.notificationDelay,minValue:0,maxValue:120,interval:5,description:"Time in minutes before event to display a notification about the event.",onChange:function(e){o.default.sendEvent("NotificationDelay","Changed",e)}})))})),De=n(137),Se=n(25);var Me=["Minutes","Hours","Days"],Te=function(e){return"Days"===e&&i.a.MSPerDay||"Hours"===e&&i.a.MSPerHour||"Minutes"===e&&i.a.MSPerMinute},Pe=Object(M.b)((function(){var e=this,t=Object(c.useState)((function(){var e,t=De.a.getLastBackup();if(t>0){var n=new Date(t);e=Se.a.toHumanText(n)}else e="Not backed up";return e})),n=r()(t,2),a=n[0],s=n[1],d=Object(T.a)(l.default.settings.backupFrequency),f=r()(d,1)[0],p=function(e,t){var n=Object(c.useMemo)((function(){return new P.a(e)}),[]);if(t){var a=Object(T.a)(n),o=r()(a,1)[0];return e!==o&&n.set(e),[n,o]}return[n]}(function(e){return e>=i.a.MSPerDay?"Days":e>=i.a.MSPerHour?"Hours":e>=0?"Minutes":void 0}(f),!0),m=r()(p,2),h=m[0],g=m[1],y=Math.floor(f);console.log("backup frequency",f);var v=Object(c.useCallback)((function(e){if(e&&!o.default.isDemoMode()){var t=function(){l.default.settings.backupFrequency.set(i.a.DefaultBackupFrequency)};De.a.isDriveBackupAuthorized()?t():De.a.authorize((function(e){e?t():l.default.settings.backupFrequency.set(0)}))}}),[]),E=Object(c.useCallback)((function(e){return Math.floor(e/Te(g))}),[g]),C=Object(c.useCallback)((function(e){return Math.floor(e*Te(g))}),[g]),b=Object(c.useCallback)((function(e,t){return l.default.settings.backupFrequency.set(y/Te(t)*Te(e))}),[y]);return u.a.createElement("div",{key:"content"},u.a.createElement(I,{checkedObservable:l.default.settings.backupFrequency,getCheckedFromObservable:function(e){return e>0},getValueFromChecked:function(e){return e?i.a.DefaultBackupFrequency:0},title:"Enable Drive backups",description:'Automatically backup all data into the "Moo.do Backups" folder in your Google Drive. Backups will run on the following frequency, only if there are any new changes to back up. Moo.do keeps its own encrypted revision history, but this gives you an extra level of security that your data is safe. Note that backups to Drive are not encrypted.',onChange:v}),u.a.createElement("div",null,u.a.createElement("div",{className:"settingsName ib bold"},"Every"),u.a.createElement(oe,{className:"ib",valueObservable:l.default.settings.backupFrequency,getNumberFromObservable:E,getValueFromNumber:C,minValue:0,maxValue:60,interval:1}),u.a.createElement(L,{className:"ib",valueObservable:h,options:Me,style:{marginLeft:16,height:32},onChange:b})),u.a.createElement("div",{className:"py-4"},u.a.createElement(D.a,{raised:!0,onClick:function(){s("Backing up..."),De.a.backupAll().then((function(){return e.backupText.set("Backup complete")}))}},"BACKUP NOW"),a&&u.a.createElement("div",{className:"pt-2"},a)),u.a.createElement("div",{className:"py-4"},u.a.createElement(D.a,{raised:!0,onClick:function(){l.default.menus.closeModal(i.a.Modals.Settings),l.default.menus.openModal(i.a.Modals.Backups)}},"SEE BACKUP HISTORY")))})),Ne=n(73);function Oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=_()(e);if(t){var r=_()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return C()(this,n)}}var Ie=function(e){v()(n,e);var t=Oe(n);function n(){return m()(this,n),t.apply(this,arguments)}return g()(n,[{key:"init",value:function(){this.createObservables({error:"",isChanging:!1}),l.default.onIntroAction("Encryption")}},{key:"getState",value:function(){var e=l.default.settings.encryptionKeys;return{encryptionKeys:e,hasUserPassword:e.get()&&!!e.get()[i.a.EncryptionKeys.UserPassword]}}},{key:"onClickSave",value:function(e,t){var n=this,a=this.refs.pass1.getValue(),r=this.refs.pass2.getValue(),s=i.a.EncryptionKeys.UserPassword;if(a){if(a!==r)this.error.set("Passwords do not match");else if(a.length<5)this.error.set("Password is too short. Please enter a longer password to make it secure.");else if(!o.default.isDemoMode())return l.default.menus.confirmEncrypt(a,(function(e){e?De.a.backupAuto().then((function(){(n.state.isChanging?l.default.crypto.updateKey:l.default.crypto.addKey)({name:s,password:a,sentinelSalt:G.a.getEncryptionUid()}).then((function(e){Ne.a.updateUserEncryption(e).then((function(){n.isChanging.set(!1),t()}))}))})):t()})),!0}else this.error.set("No password entered")}},{key:"onClickContact",value:function(){l.default.menus.openModal(i.a.Modals.ReportBug)}},{key:"onClickChange",value:function(){this.isChanging.set(!0)}},{key:"onClickRemove",value:function(e,t){l.default.menus.confirm("Are you sure you want to remove your encryption password?",(function(e){e?Ne.a.updateUserEncryption(l.default.crypto.getGlobalKeyInfo()).then((function(){t()})):t()}))}},{key:"render",value:function(){var e=this.state,t=!e.hasUserPassword||e.isChanging,n={marginTop:8,width:240};return c.createElement("div",{key:"content"},c.createElement("div",{className:"modal-row"},t?c.createElement(c.Fragment,null,c.createElement("div",null,c.createElement("div",{className:"settingsName ib bold"},"Encrypt data with a password"),c.createElement("div",{className:"modal-subtext c-foreground-faded"},"Your data is encrypted client-side before sending it to the database. For an extra level of security, you can enter your own password for the encryption. This makes it so that even the developers cannot read your data, and it cannot be recovered.")),c.createElement("div",{style:{marginTop:16}},c.createElement(ae.a,{type:"password",placeholder:"Password",ref:"pass1",style:n,onButtonClick:this.onClickSave}),c.createElement(ae.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:n,onButtonClick:this.onClickSave})),e.error&&c.createElement("div",{className:"error",style:{marginTop:8}},e.error),c.createElement("div",{className:"modal-warning flexbox c-warning"},c.createElement("i",{className:"icon-warning"}),c.createElement("div",null,"If you lose this password, all your data will be lost! For your security, Moo.do cannot recover your password, so keep your password safe. This is competely optional (see above).")),c.createElement("div",{style:{marginTop:8}},c.createElement(D.a,{raised:!0,primary:!0,onClick:this.onClickSave},"Save"))):c.createElement(c.Fragment,null,c.createElement("div",null,c.createElement("div",{className:"settingsName ib bold"},"Your data is encrypted with your password"),c.createElement("div",{style:{marginTop:16}},c.createElement(D.a,{raised:!0,primary:!0,onClick:this.onClickChange},"Change"),c.createElement(D.a,{raised:!0,cancel:!0,marginLeft:16,onClick:this.onClickRemove},"Remove"))))))}}]),n}(x.a),Ae=n(15),Re=Object(M.b)((function(){return u.a.createElement("div",{key:"content"},u.a.createElement("div",{className:"modal-row"},u.a.createElement("div",{style:{marginTop:8}},u.a.createElement(D.a,{raised:!0,onClick:function(){l.default.menus.confirm("This will clear your local data and sign you out. Are you sure?",(function(e){e&&Ae.a.clearLocalData()}))}},"Clear Local Data")),u.a.createElement(I,{checkedObservable:l.default.settings.showDebugInfo,title:"Show Extra Debug Info",description:"Only enable this if the developers asked you for help tracking down an issue."}),u.a.createElement(I,{checkedObservable:l.default.settings.disableAnimations,title:"Disable animations",description:"Disable pane and item animations."})))})),Le=i.a.KeyCode,Fe=Object(M.b)((function(e){var t=e.className,n=e.style,a=e.value,d=e.width,f=e.height,p=e.fontSize,m=e.border,h=e.onChange,g=e.backgroundTheme,y=e.disabled,v=e.requiresModifier,E=Object(c.useState)(a),C=r()(E,2),b=C[0],_=C[1],k=Object(c.useState)(),w=r()(k,2),x=w[0],D=w[1],S=Object(c.useRef)(),M=function(){o.default.batchRenderUpdates((function(){_(""),h("")})),S.current.blur()},T=b?l.default.hotkeys.printHotkey(b):"";return u.a.createElement(ae.a,{className:t,placeholder:"Enter a hotkey",width:d,value:T,onKeyDown:function(e){if(e.keyCode!==Le.Ctrl&&e.keyCode!==Le.LeftMeta&&e.keyCode!==Le.Alt&&e.keyCode!==Le.Shift&&(!v||e.metaKey||e.ctrlKey||e.altKey)){var t=function(e){var t=[],n=s.a.mac;(n&&e.metaKey||!n&&e.ctrlKey)&&t.push("Pr"),(n&&e.ctrlKey||!n&&e.altKey)&&t.push("Se"),n&&e.altKey&&t.push("Op"),e.shiftKey&&t.push("Sh");var a=e.nativeEvent.code.replace("Key","").replace("Digit","D");if("NumpadEnter"===a&&(a="Enter"),i.a.KeyCode[a])return t.push(a.capitalize()),t.join("+");l.default.toasts.pushMessage("Key unsupported: "+a+" "+e.keyCode)}(e);t&&(!1!==h(t)?_(t):_(""))}else e.keyCode===Le.Delete||e.keyCode===Le.Backspace?M():e.keyCode===Le.Escape?(_(a),S.current.blur()):_(a);e.preventDefault()},style:Object.assign({caretColor:"transparent"},n),onFocus:function(){D(!0)},onBlur:function(){o.default.batchRenderUpdates((function(){""===b&&_(a),D(!1)}))},border:m,backgroundTheme:g,height:f,fontSize:p,disabled:y,ref:S,buttonText:x?"X":void 0,onButtonClick:M,blurOnEscape:!0})})),je=n(143),He=Object(M.b)((function(){Object(c.useRef)();var e=Object(c.useState)(""),t=r()(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),i=r()(o,2),d=i[0],f=i[1],p=Object(T.a)(l.default.settings.appHotkeys),m=r()(p,1)[0];Object(c.useEffect)((function(){l.default.ElectronBridge.getPrefs((function(e){a(e.backupDir),f(e.docsDir)}))}),[]);var h=function(e){return function(t){if(t){if(m.newEmail===t||m.newItem===t)return!1;l.default.settings.appHotkeys.setProperty(e,t)}else l.default.settings.appHotkeys.deleteProperty(e)}};return u.a.createElement("div",{key:"content"},u.a.createElement(I,{checkedObservable:l.default.settings.backupLocal,title:"Enable automatic backups",description:"Backups saved in: ".concat(n)}),u.a.createElement(I,{checkedObservable:l.default.settings.appSystemDarkMode,title:"Use system dark mode setting",onChange:function(e){e&&l.default.DisplaySettings.setSystemDarkMode(l.default.ElectronBridge.getDarkMode())}}),s.a.supportLocalFiles()&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"modal-row mt-8"},u.a.createElement("div",{className:"settingsName ib bold",style:{marginBottom:8}},"Save local files in:"),u.a.createElement(ae.a,{readonly:!0,value:d,buttonText:"CHANGE",onButtonClick:function(){l.default.ElectronBridge.openDirectoryDialog((function(e){var t=e.filePaths[0];if(t){var n=!1,a=function(){console.log("setting docs folder to",t),l.default.ElectronBridge.setDocsFolder(t,n,(function(e){e||(f(t),je.a.reload())}))};je.a.numDocuments()>0?l.default.menus.confirm("Do you want move existing files to the new folder?",(function(e){n=e,a()})):a()}}))}})),u.a.createElement(I,{checkedObservable:l.default.settings.encryptLocalFiles,title:"Encrypt local files"})),u.a.createElement("div",{className:"mt-8"},u.a.createElement("div",{className:"text-xl font-bold"},"Global hotkeys"),u.a.createElement("div",{className:"flex my-4 items-center"},u.a.createElement("span",{className:"font-bold",style:{width:80}},"New Item:"),u.a.createElement(Fe,{className:"mx-4",value:m.newItem,width:150,requiresModifier:!0,onChange:h("newItem")})),u.a.createElement("div",{className:"flex my-4 items-center"},u.a.createElement("span",{className:"font-bold",style:{width:80}},"New Email:"),u.a.createElement(Fe,{className:"mx-4",value:m.newEmail,width:150,requiresModifier:!0,onChange:h("newEmail")}))))})),Ge=u.a.createContext([]),Ue=Object(M.b)((function(e){var t=e.className,n=e.columnOptions,a=e.header,r=e.borderLeft,i=e.borderRight,l=e.children,s=o.default.classNames(t,"border-b c-border-heavy borderBox",{"border-l":r},{"border-r":i},{f1:n.flex}),c={minWidth:n.width||n.minWidth,maxWidth:n.width};return(a||n.padded)&&(c.paddingLeft=12,c.paddingRight=12),u.a.createElement("div",{className:s,style:c},l)})),Ye=Object(M.a)(Object(c.forwardRef)((function(e,t){var n=e.className,a=e.header,r=e.children,i=Object(c.useContext)(Ge),l=o.default.classNames("flex",n),s=u.a.Children.toArray(r);return u.a.createElement("div",{className:l,ref:t},i.map((function(e,t){return s[t]?u.a.cloneElement(s[t],Object.assign({borderLeft:t>0,borderRight:s.length>1&&t<i.length-1,columnOptions:e,header:a},s[t].props)):u.a.createElement(Ue,{key:t,columnOptions:e})})))}))),ze=Object(M.b)((function(e){var t=e.className,n=e.columnOptions,a=e.children,r=o.default.classNames(t,"c-border-heavy");return u.a.createElement(Ge.Provider,{value:n},u.a.createElement("div",{className:r},a))})),Be=n(368),Ve=n.n(Be),We=n(84),Ke=["","Command","Key 1","Key 2","Key 3","Key 4"],qe=[{width:50},{minWidth:160,padded:!0,flex:!0},{width:100},{width:100},{width:100},{width:100}],Ze=function(e,t,n,a){var r=l.default.hotkeys.config,i=o.default.clone(r[e][t]);if(i[n]=a,i=i.filter((function(e){return!!e})),!1===l.default.hotkeys.setHotkey(e,t,i))return l.default.toasts.pushMessage("This hotkey is already taken"),!1},$e=function(e,t,n){l.default.hotkeys.resetHotkey(e,t)},Xe=Object(M.b)((function(e){var t=this,n=e.group,a=e.name,i=e.hasPremiumFeatures,s=e.requiresModifier,c=e.config,d=Object(We.a)(),f=r()(d,2),p=f[0],m=f[1];return u.a.createElement(Ye,{key:a,ref:p},u.a.createElement(Ue,null,c!==l.default.hotkeys.defaultConfig[n][a]&&u.a.createElement(D.a,{padding:0,width:50,height:30,cancel:!0,display:"block",onClick:$e.bind(this,n,a)},"Reset")),u.a.createElement(Ue,null,o.default.addSpacesToCamelCase(a)),c.map((function(e,r){return u.a.createElement(Ue,{key:e},u.a.createElement(Fe,{value:e,onChange:Ze.bind(t,n,a,r),border:!1,backgroundTheme:"c-bg-light",height:30,fontSize:13,disabled:!i,requiresModifier:s}))})),m&&i&&c.length<4&&u.a.createElement(Ue,null,u.a.createElement(Fe,{value:"",onChange:Ze.bind(this,n,a,c.length),border:!1,backgroundTheme:"c-bg-light",height:30,fontSize:13,requiresModifier:s})))})),Qe=Object(M.b)((function(e){var t=e.openSection,n=Object(T.a)(l.default.settings.hotkeys,l.default.billingManager.hasPremiumFeaturesObservable),a=r()(n,2),o=(a[0],a[1]),i=l.default.hotkeys.config;return u.a.createElement("div",{key:"content"},!o&&u.a.createElement("div",{className:"c-bg-autocomplete-highlight rounded-lg flex items-center mb-4 py-2 px-4"},u.a.createElement("div",{className:"flex-1"},"Custom Hotkeys is a Premium feature."),u.a.createElement(D.a,{raised:!0,primary:!0,onClick:function(){t("Account")}},"GO PREMIUM")),u.a.createElement("div",{className:"text-xl bold"},"Customize Hotkeys"),u.a.createElement("div",{className:"c-foreground-light text-xs pt-1 leading-tight pb-4 pt-2"},"Click on any key to change it."),u.a.createElement(ze,{columnOptions:qe,className:Ve.a.table},u.a.createElement(Ye,{header:!0},Ke.map((function(e,t){return u.a.createElement(Ue,{key:e},e)}))),Object.keys(i).map((function(e){return u.a.createElement(u.a.Fragment,{key:e},u.a.createElement(Ye,null,u.a.createElement(Ue,{className:"bold px-2 text-lg leading-loose"},e)),Object.keys(i[e]).map((function(t){return u.a.createElement(Xe,{key:t,group:e,name:t,requiresModifier:"Email"!==e,hasPremiumFeatures:o,config:i[e][t]})})))}))))})),Je=n(297),et=n(138);t.default=Object(M.b)((function(e){var t=e.section,n=Object(c.useState)(t||"General"),a=r()(n,2),p=a[0],m=a[1],h=T.a.apply(this,d.a.pluginsAvailable.map((function(e){return d.a.getPluginEnabledObservable(e)}))),g=function(e){return h[d.a.pluginsAvailable.indexOf(e)]},y=function(e){var t=!d.a.isSaveEnabled.get();t||l.default.menus.confirm("You have unsaved changes. Are you sure you want to cancel your changes?",(function(t){t&&(d.a.isSaveEnabled.set(!1),m(e))})),t&&m(e)},v=function(e){return function(){return y(e)}},E="General"===p&&H||"Plugins"===p&&K||"Invite"===p&&f.a||"Feedback"===p&&ne||"Account"===p&&te||"Calendar"===p&&le||"Contacts"===p&&ce||"Gmail"===p&&ue||"Agenda"===p&&_e||"Dates"===p&&xe||"Backups"===p&&Pe||"Security"===p&&Ie||"Debug"===p&&Re||"Desktop"===p&&He||"Hotkeys"===p&&Qe;var C=function(e){var t=("Plugins"===e?"Sync Plugins":"Account"===e&&"Moo.do Account")||"Feedback"===e&&"Send Feedback"||"Invite"===e&&"Invite Friends"||"Desktop"===e&&"Desktop App"||e;return u.a.createElement(et.a,{name:e,onClick:v(e)},u.a.createElement("span",null,t))},b=function(e,t){var n=l.default.pluginManager.getPlugin(e),a=n&&n.hasSettingsError(),r="Calendar"===t?"Google Calendar":t,o=u.a.createElement("span",null,r);return a&&(o=u.a.createElement("span",null,o,u.a.createElement("span",{className:"error icon-warning"}))),u.a.createElement(et.a,{name:t,onClick:v(t)},o)};return u.a.createElement(Je.a,{id:"modalSettings",width:900,height:900,sidebarWidth:180,modalID:i.a.Modals.Settings,scrollable:!0},u.a.createElement("div",{key:"sidebar"},u.a.createElement(et.b,{inset:!0,selected:p},u.a.createElement(et.a,{type:"header"},"SETTINGS"),C("General"),C("Dates"),C("Agenda"),s.a.isNativeApp()&&C("Desktop"),C("Backups"),!o.default.isDemoMode()&&C("Account"),C("Security"),C("Hotkeys"),u.a.createElement(et.a,{type:"header"},"PLUGINS"),C("Plugins"),g(i.a.PluginID.GCalendar)&&b(i.a.PluginID.GCalendar,"Calendar"),g(i.a.PluginID.Contacts)&&b(i.a.PluginID.Contacts,"Contacts"),g(i.a.PluginID.Gmail)&&b(i.a.PluginID.Gmail,"Gmail"),u.a.createElement(et.a,{type:"header"},"SUPPORT"),C("Feedback"),C("Debug"))),u.a.createElement("div",{key:"content"},o.default.isDemoMode()&&u.a.createElement("div",{className:"flex justify-center pb-6"},u.a.createElement("div",{className:"c-bg-lighter px-6 py-3 rounded-lg font-medium"},"Demo Mode: Settings will not be saved")),u.a.createElement(E,{openSection:y})))}))},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(7),i=n.n(o),l=n(8),s=n.n(l),c=n(17),u=n.n(c),d=n(18),f=n.n(d),p=n(9),m=n.n(p),h=n(1),g=n(0),y=n(3),v=n.n(y),E=n(330),C=n.n(E),b=n(40),_=n(299),k=n.n(_),w=n(303),x=n.n(w),D=n(400),S=n.n(D),M=n(401),T=n.n(M),P=n(334),N=n.n(P),O=n(316),I=n.n(O),A=n(306),R=n.n(A),L=n(403),F=n.n(L),j=n(404),H=n.n(j),G=n(307),U=n.n(G);function Y(e){var t=e.fromValue,n=e.toValue,a=e.onUpdate,r=e.onComplete,o=e.duration,i=void 0===o?600:o,l=performance.now();!function e(){var o=performance.now()-l;window.requestAnimationFrame((function(){return a(function(e,t,n,a){return n>a?t:e+(t-e)*(r=n/a,1- --r*r*r*r);var r}(t,n,o,i),o<=i?e:r)}))}()}var z={command:91,control:17,down:40,enter:13,escape:27,left:37,right:39,shift:16,up:38};function B(e,t,n){for(var a=[],r=new Date(e,t,1),o=T()(r),i=K(n),l=N()(new Date(e,t,1)),s=0,c=1;c<=o;c++)a[s]||(a[s]=[]),a[s].push(c),l===i&&s++,l=l<6?l+1:0;return{date:r,rows:a}}function V(e,t,n){var a="number"===typeof e?new Date(e,0,1):e;return Math.ceil((Math.round((t-a)/864e5)+a.getDay()+1-n)/7)}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getFullYear(),n=arguments[2],a=arguments[3],r=K(n),o=new Date(t,e,1),i=V(t,o,n),l=new Date(t,e+1,0),s=V(t,l,n),c=s-i;return(l.getDay()===r||a)&&c++,c}function K(e){return 0===e?6:e-1}var q=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clear=function(){t.lastPosition=null,t.delta=0}}return e.prototype.getScrollSpeed=function(e){return null!=this.lastPosition&&(this.delta=e-this.lastPosition),this.lastPosition=e,clearTimeout(this._timeout),this._timeout=setTimeout(this.clear,50),this.delta},e}(),Z=S()();function $(){}function X(e,t){var n=t.disabledDates,a=void 0===n?[]:n,r=t.disabledDays,o=void 0===r?[]:r,i=t.minDate,l=t.maxDate;return!e||a.some((function(t){return F()(t,e)}))||o&&-1!==o.indexOf(N()(e))||i&&R()(e,U()(i))||l&&I()(e,H()(l))?null:e}function Q(e,t,n){return e+"-"+("0"+(t+1)).slice(-2)+"-"+("0"+n).slice(-2)}var J=function(e){return x()((function(){return!1}),e)};function ee(e,t){var n=this,a=null,r=null,o=function(){return e.apply(n,r)};return function(){r=arguments,clearTimeout(a),a=setTimeout(o,t)}}function te(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=Math.max(Math.ceil((t-e)/n),0),r=Array(a),o=0;o<a;o++,e+=n)r[o]=e;return r}var ne=n(405),ae=n.n(ne),re=n(406),oe=n.n(re),ie=n(407),le=n.n(ie);function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var ue,de,fe="Cal__Today__root",pe="Cal__Today__show",me="Cal__Today__chevron",he="Cal__Today__chevronUp",ge="Cal__Today__chevronDown",ye=function(e){function t(){var n,a;se(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=ce(this,e.call.apply(e,[this].concat(o))),a.scrollToToday=function(){(0,a.props.scrollToDate)(new Date,-40,!0)},ce(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e,t=this.props,n=t.todayLabel,a=t.show,r=t.theme;return v.a.createElement("div",{className:k()(fe,(e={},e[pe]=a,e[he]=1===a,e[ge]=-1===a,e)),style:{backgroundColor:r.floatingNav.background,color:r.floatingNav.color},onClick:this.scrollToToday,ref:"node"},n,v.a.createElement("svg",{className:me,x:"0px",y:"0px",width:"14px",height:"14px",viewBox:"0 0 512 512"},v.a.createElement("path",{fill:r.floatingNav.chevron||r.floatingNav.color,d:"M256,298.3L256,298.3L256,298.3l174.2-167.2c4.3-4.2,11.4-4.1,15.8,0.2l30.6,29.9c4.4,4.3,4.5,11.3,0.2,15.5L264.1,380.9 c-2.2,2.2-5.2,3.2-8.1,3c-3,0.1-5.9-0.9-8.1-3L35.2,176.7c-4.3-4.2-4.2-11.2,0.2-15.5L66,131.3c4.4-4.3,11.5-4.4,15.8-0.2L256,298.3 z"})))},t}(y.PureComponent),ve=n(335),Ee=n.n(ve),Ce=n(296),be=n.n(Ce),_e=n(300),ke=n.n(_e),we={root:"Cal__Header__root",landscape:"Cal__Header__landscape",dateWrapper:"Cal__Header__dateWrapper",day:"Cal__Header__day",wrapper:"Cal__Header__wrapper",blank:"Cal__Header__blank",active:"Cal__Header__active",year:"Cal__Header__year",date:"Cal__Header__date",range:"Cal__Header__range"},xe={enter:"Cal__Animation__enter",enterActive:"Cal__Animation__enterActive",leave:"Cal__Animation__leave",leaveActive:"Cal__Animation__leaveActive"};function De(e,t){var n=t.display,a=t.key,r=t.locale.locale,o=t.dateFormat,i=t.onYearClick,l=t.scrollToDate,s=t.setDisplay,c=t.shouldAnimate,u=be()(e),d=u&&[{active:"years"===n,handleClick:function(e){i(u,e,a),s("years")},item:"year",title:"days"===n?"Change year":null,value:u.getFullYear()},{active:"days"===n,handleClick:function(e){"days"!==n?s("days"):u&&l(u,-40,!0)},item:"day",title:"days"===n?"Scroll to "+ke()(u,o,{locale:r}):null,value:ke()(u,o,{locale:r})}];return v.a.createElement("div",{key:a,className:we.wrapper,"aria-label":ke()(u,o+" YYYY",{locale:r})},d.map((function(e){var t,n=e.handleClick,a=e.item,r=(e.key,e.value),o=e.active,i=e.title;return v.a.createElement("div",{key:a,className:k()(we.dateWrapper,we[a],(t={},t[we.active]=o,t)),title:i},v.a.createElement(Ee.a,{transitionName:xe,transitionEnterTimeout:250,transitionLeaveTimeout:250,transitionEnter:c,transitionLeave:c},v.a.createElement("span",{key:a+"-"+r,className:we.date,"aria-hidden":!0,onClick:n},r)))})))}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Te="Cal__Header__root",Pe="Cal__Header__landscape",Ne="Cal__Header__wrapper",Oe="Cal__Header__blank",Ie=(de=ue=function(e){function t(){return Se(this,t),Me(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e,t=this.props,n=t.layout,a=t.locale.blank,r=t.selected,o=t.renderSelection,i=t.theme;return v.a.createElement("div",{className:k()(Te,(e={},e[Pe]="landscape"===n,e)),style:{backgroundColor:i.headerColor,color:i.textColor.active}},r&&o(r,this.props)||v.a.createElement("div",{className:k()(Ne,Oe)},a))},t}(y.PureComponent),ue.defaultProps={onYearClick:$,renderSelection:De},de),Ae=function(e,t){return(Ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var Re,Le,Fe,je=function(){return(je=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};!function(e){e.AUTO="auto",e.START="start",e.CENTER="center",e.END="end"}(Re||(Re={})),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(Le||(Le={})),function(e){e.OBSERVED="observed",e.REQUESTED="requested"}(Fe||(Fe={}));var He,Ge,Ue,Ye,ze,Be=((He={})[Le.VERTICAL]="scrollTop",He[Le.HORIZONTAL]="scrollLeft",He),Ve=((Ge={})[Le.VERTICAL]="height",Ge[Le.HORIZONTAL]="width",Ge),We=((Ue={})[Le.VERTICAL]="top",Ue[Le.HORIZONTAL]="left",Ue),Ke=((Ye={})[Le.VERTICAL]="marginTop",Ye[Le.HORIZONTAL]="marginLeft",Ye),qe=((ze={})[Le.VERTICAL]="marginBottom",ze[Le.HORIZONTAL]="marginRight",ze),Ze=function(){function e(e){var t=e.itemCount,n=e.itemSizeGetter,a=e.estimatedItemSize;this.itemSizeGetter=n,this.itemCount=t,this.estimatedItemSize=a,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1}return e.prototype.updateConfig=function(e){var t=e.itemCount,n=e.itemSizeGetter,a=e.estimatedItemSize;null!=t&&(this.itemCount=t),null!=a&&(this.estimatedItemSize=a),null!=n&&(this.itemSizeGetter=n)},e.prototype.getLastMeasuredIndex=function(){return this.lastMeasuredIndex},e.prototype.getSizeAndPositionForIndex=function(e){if(e<0||e>=this.itemCount)throw Error("Requested index "+e+" is outside of range 0.."+this.itemCount);if(e>this.lastMeasuredIndex){for(var t=this.getSizeAndPositionOfLastMeasuredItem(),n=t.offset+t.size,a=this.lastMeasuredIndex+1;a<=e;a++){var r=this.itemSizeGetter(a);if(null==r||isNaN(r))throw Error("Invalid size returned for index "+a+" of value "+r);this.itemSizeAndPositionData[a]={offset:n,size:r},n+=r}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]},e.prototype.getSizeAndPositionOfLastMeasuredItem=function(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}},e.prototype.getTotalSize=function(){var e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize},e.prototype.getUpdatedOffsetForIndex=function(e){var t=e.align,n=void 0===t?Re.START:t,a=e.containerSize,r=e.currentOffset,o=e.targetIndex;if(a<=0)return 0;var i,l=this.getSizeAndPositionForIndex(o),s=l.offset,c=s-a+l.size;switch(n){case Re.END:i=c;break;case Re.CENTER:i=s-(a-l.size)/2;break;case Re.START:i=s;break;default:i=Math.max(c,Math.min(s,r))}var u=this.getTotalSize();return Math.max(0,Math.min(u-a,i))},e.prototype.getVisibleRange=function(e){var t=e.containerSize,n=e.offset,a=e.overscanCount;if(0===this.getTotalSize())return{};var r=n+t,o=this.findNearestItem(n);if("undefined"===typeof o)throw Error("Invalid offset "+n+" specified");var i=this.getSizeAndPositionForIndex(o);n=i.offset+i.size;for(var l=o;n<r&&l<this.itemCount-1;)l++,n+=this.getSizeAndPositionForIndex(l).size;return a&&(o=Math.max(0,o-a),l=Math.min(l+a,this.itemCount-1)),{start:o,stop:l}},e.prototype.resetItem=function(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)},e.prototype.findNearestItem=function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredItem(),n=Math.max(0,this.lastMeasuredIndex);return t.offset>=e?this.binarySearch({high:n,low:0,offset:e}):this.exponentialSearch({index:n,offset:e})},e.prototype.binarySearch=function(e){for(var t=e.low,n=e.high,a=e.offset,r=0,o=0;t<=n;){if(r=t+Math.floor((n-t)/2),(o=this.getSizeAndPositionForIndex(r).offset)===a)return r;o<a?t=r+1:o>a&&(n=r-1)}return t>0?t-1:0},e.prototype.exponentialSearch=function(e){for(var t=e.index,n=e.offset,a=1;t<this.itemCount&&this.getSizeAndPositionForIndex(t).offset<n;)t+=a,a*=2;return this.binarySearch({high:Math.min(t,this.itemCount-1),low:Math.floor(t/2),offset:n})},e}(),$e={overflow:"auto",willChange:"transform",WebkitOverflowScrolling:"touch"},Xe={position:"relative",width:"100%",minHeight:"100%"},Qe={position:"absolute",top:0,left:0,width:"100%"},Je=je({},Qe,{position:"sticky"}),et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemSizeGetter=function(e){return function(n){return t.getSize(n,e)}},t.sizeAndPositionManager=new Ze({itemCount:t.props.itemCount,itemSizeGetter:t.itemSizeGetter(t.props.itemSize),estimatedItemSize:t.getEstimatedItemSize()}),t.state={offset:t.props.scrollOffset||null!=t.props.scrollToIndex&&t.getOffsetForIndex(t.props.scrollToIndex)||0,scrollChangeReason:Fe.REQUESTED},t.styleCache={},t.getRef=function(e){t.rootNode=e},t.handleScroll=function(e){var n=t.props.onScroll,a=t.getNodeOffset();a<0||t.state.offset===a||e.target!==t.rootNode||(t.setState({offset:a,scrollChangeReason:Fe.OBSERVED}),"function"===typeof n&&n(a,e))},t}return function(e,t){function n(){this.constructor=e}Ae(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.scrollOffset,n=e.scrollToIndex;this.rootNode.addEventListener("scroll",this.handleScroll,{passive:!0}),null!=t?this.scrollTo(t):null!=n&&this.scrollTo(this.getOffsetForIndex(n))},t.prototype.componentWillReceiveProps=function(e){var t=this.props,n=t.estimatedItemSize,a=t.itemCount,r=t.itemSize,o=t.scrollOffset,i=t.scrollToAlignment,l=t.scrollToIndex,s=e.scrollToIndex!==l||e.scrollToAlignment!==i,c=e.itemCount!==a||e.itemSize!==r||e.estimatedItemSize!==n;e.itemSize!==r&&this.sizeAndPositionManager.updateConfig({itemSizeGetter:this.itemSizeGetter(e.itemSize)}),e.itemCount===a&&e.estimatedItemSize===n||this.sizeAndPositionManager.updateConfig({itemCount:e.itemCount,estimatedItemSize:this.getEstimatedItemSize(e)}),c&&this.recomputeSizes(),e.scrollOffset!==o?this.setState({offset:e.scrollOffset||0,scrollChangeReason:Fe.REQUESTED}):"number"===typeof e.scrollToIndex&&(s||c)&&this.setState({offset:this.getOffsetForIndex(e.scrollToIndex,e.scrollToAlignment,e.itemCount),scrollChangeReason:Fe.REQUESTED})},t.prototype.componentDidUpdate=function(e,t){var n=this.state,a=n.offset,r=n.scrollChangeReason;t.offset!==a&&r===Fe.REQUESTED&&this.scrollTo(a)},t.prototype.componentWillUnmount=function(){this.rootNode.removeEventListener("scroll",this.handleScroll)},t.prototype.scrollTo=function(e){var t=this.props.scrollDirection,n=void 0===t?Le.VERTICAL:t;this.rootNode[Be[n]]=e},t.prototype.getOffsetForIndex=function(e,t,n){void 0===t&&(t=this.props.scrollToAlignment),void 0===n&&(n=this.props.itemCount);var a=this.props.scrollDirection,r=void 0===a?Le.VERTICAL:a;return(e<0||e>=n)&&(e=0),this.sizeAndPositionManager.getUpdatedOffsetForIndex({align:t,containerSize:this.props[Ve[r]],currentOffset:this.state&&this.state.offset||0,targetIndex:e})},t.prototype.recomputeSizes=function(e){void 0===e&&(e=0),this.styleCache={},this.sizeAndPositionManager.resetItem(e)},t.prototype.render=function(){var e,t=this,n=this.props,a=(n.estimatedItemSize,n.height),r=n.overscanCount,o=void 0===r?3:r,i=n.renderItem,l=(n.itemCount,n.itemSize,n.onItemsRendered),s=(n.onScroll,n.scrollDirection),c=void 0===s?Le.VERTICAL:s,u=(n.scrollOffset,n.scrollToIndex,n.scrollToAlignment,n.stickyIndices),d=n.style,f=n.width,p=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n}(n,["estimatedItemSize","height","overscanCount","renderItem","itemCount","itemSize","onItemsRendered","onScroll","scrollDirection","scrollOffset","scrollToIndex","scrollToAlignment","stickyIndices","style","width"]),m=this.state.offset,h=this.sizeAndPositionManager.getVisibleRange({containerSize:this.props[Ve[c]]||0,offset:m,overscanCount:o}),g=h.start,v=h.stop,E=[],C=je({},$e,d,{height:a,width:f}),b=je({},Xe,((e={})[Ve[c]]=this.sizeAndPositionManager.getTotalSize(),e));if(null!=u&&0!==u.length&&(u.forEach((function(e){return E.push(i({index:e,style:t.getStyle(e,!0)}))})),c===Le.HORIZONTAL&&(b.display="flex")),"undefined"!==typeof g&&"undefined"!==typeof v){for(var _=g;_<=v;_++)null!=u&&u.includes(_)||E.push(i({index:_,style:this.getStyle(_,!1)}));"function"===typeof l&&l({startIndex:g,stopIndex:v})}return Object(y.createElement)("div",je({ref:this.getRef},p,{style:C}),Object(y.createElement)("div",{style:b},E))},t.prototype.getNodeOffset=function(){var e=this.props.scrollDirection,t=void 0===e?Le.VERTICAL:e;return this.rootNode[Be[t]]},t.prototype.getEstimatedItemSize=function(e){return void 0===e&&(e=this.props),e.estimatedItemSize||"number"===typeof e.itemSize&&e.itemSize||50},t.prototype.getSize=function(e,t){return"function"===typeof t?t(e):Array.isArray(t)?t[e]:t},t.prototype.getStyle=function(e,t){var n=this.styleCache[e];if(n)return n;var a,r,o=this.props.scrollDirection,i=void 0===o?Le.VERTICAL:o,l=this.sizeAndPositionManager.getSizeAndPositionForIndex(e),s=l.size,c=l.offset;return this.styleCache[e]=t?je({},Je,((a={})[Ve[i]]=s,a[Ke[i]]=c,a[qe[i]]=-(c+s),a.zIndex=1,a)):je({},Qe,((r={})[Ve[i]]=s,r[We[i]]=c,r))},t.defaultProps={overscanCount:3,scrollDirection:Le.VERTICAL,width:"100%"},t.propTypes={estimatedItemSize:b.number,height:Object(b.oneOfType)([b.number,b.string]).isRequired,itemCount:b.number.isRequired,itemSize:Object(b.oneOfType)([b.number,b.array,b.func]).isRequired,onScroll:b.func,onItemsRendered:b.func,overscanCount:b.number,renderItem:b.func.isRequired,scrollOffset:b.number,scrollToIndex:b.number,scrollToAlignment:Object(b.oneOf)([Re.AUTO,Re.START,Re.CENTER,Re.END]),scrollDirection:Object(b.oneOf)([Le.HORIZONTAL,Le.VERTICAL]),stickyIndices:Object(b.arrayOf)(b.number),style:b.object,width:Object(b.oneOfType)([b.number,b.string])},t}(y.PureComponent),tt=n(429),nt=n.n(tt),at=n(430),rt=n.n(at),ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var st={rows:"Cal__Month__rows",row:"Cal__Month__row",partial:"Cal__Month__partial",label:"Cal__Month__label",partialFirstRow:"Cal__Month__partialFirstRow"},ct=function(e){function t(){return it(this,t),lt(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.renderRows=function(){for(var e=this.props,t=e.DayComponent,n=e.disabledDates,a=e.disabledDays,r=e.monthDate,o=e.locale,i=e.maxDate,l=e.minDate,s=e.rowHeight,c=e.rows,u=e.selected,d=e.today,f=e.theme,p=e.passThrough,m=d.getFullYear(),h=r.getFullYear(),g=r.getMonth(),y=ke()(r,"MMM",{locale:o.locale}),E=[],C=0,b=!1,_=!1,w=void 0,x=void 0,D=void 0,S=void 0,M=ke()(d,"YYYY-MM-DD"),T=ke()(l,"YYYY-MM-DD"),P=ke()(i,"YYYY-MM-DD"),O=0,I=c.length;O<I;O++){var A;S=c[O],x=[],D=N()(new Date(h,g,S[0]));for(var R=0,L=S.length;R<L;R++)_=(w=Q(h,g,C=S[R]))===M,b=l&&w<T||i&&w>P||a&&a.length&&-1!==a.indexOf(D)||n&&n.length&&-1!==n.indexOf(w),x[R]=v.a.createElement(t,ot({key:"day-"+C,currentYear:m,date:w,day:C,selected:u,isDisabled:b,isToday:_,locale:o,month:g,monthShort:y,theme:f,year:h},p.Day)),D+=1;E[O]=v.a.createElement("ul",{key:"Row-"+O,className:k()(st.row,(A={},A[st.partial]=7!==S.length,A)),style:{height:s},role:"row","aria-label":"Week "+(O+1)},x)}return E},t.prototype.render=function(){var e,t=this.props,n=t.locale.locale,a=t.monthDate,r=t.today,o=t.rows,i=t.rowHeight,l=t.showOverlay,s=t.style,c=t.theme,u=rt()(a,r)?"MMMM":"MMMM YYYY";return v.a.createElement("div",{className:st.root,style:ot({},s,{lineHeight:i+"px"})},v.a.createElement("div",{className:st.rows},this.renderRows(),l&&v.a.createElement("label",{className:k()(st.label,(e={},e[st.partialFirstRow]=7!==o[0].length,e)),style:{backgroundColor:c.overlayColor}},v.a.createElement("span",null,ke()(a,u,{locale:n})))))},t}(y.PureComponent),ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var pt="Cal__MonthList__root",mt="Cal__MonthList__scrolling",ht=function(e){function t(){var n,a;dt(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=ft(this,e.call.apply(e,[this].concat(o))),a.state={scrollTop:a.getDateOffset(a.props.scrollDate)},a.cache={},a.memoize=function(e){if(!this.cache[e]){var t=this.props.locale.weekStartsOn,n=e.split(":"),a=B(n[0],n[1],t);this.cache[e]=a}return this.cache[e]},a.monthHeights=[],a._getRef=function(e){a.VirtualList=e},a.getMonthHeight=function(e){if(!a.monthHeights[e]){var t=a.props,n=t.locale.weekStartsOn,r=t.months,o=t.rowHeight,i=r[e],l=W(i.month,i.year,n,e===r.length-1)*o;a.monthHeights[e]=l}return a.monthHeights[e]},a.scrollToDate=function(e){for(var t=arguments.length,n=Array(t>2?t-2:0),r=2;r<t;r++)n[r-2]=arguments[r];var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=a.getDateOffset(e);(o=a).scrollTo.apply(o,[l+i].concat(n))},a.scrollTo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$,r=function(){return setTimeout((function(){a.scrollEl.style.overflowY="auto",n()}))};a.scrollEl.style.overflowY="hidden",t?Y({fromValue:a.scrollEl.scrollTop,toValue:e,onUpdate:function(e,t){return a.setState({scrollTop:e},t)},onComplete:r}):window.requestAnimationFrame((function(){a.scrollEl.scrollTop=e,r()}))},a.renderMonth=function(e){var t=e.index,n=e.style,r=a.props,o=r.DayComponent,i=r.disabledDates,l=r.disabledDays,s=r.locale,c=r.maxDate,u=r.minDate,d=r.months,f=r.passThrough,p=r.rowHeight,m=r.selected,h=r.showOverlay,g=r.theme,y=r.today,E=d[t],C=E.month,b=E.year+":"+C,_=a.memoize(b),k=_.date,w=_.rows;return v.a.createElement(ct,ut({key:b,selected:m,DayComponent:o,monthDate:k,disabledDates:i,disabledDays:l,maxDate:c,minDate:u,rows:w,rowHeight:p,isScrolling:!1,showOverlay:h,today:y,theme:g,style:n,locale:s,passThrough:f},f.Month))},ft(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.scrollEl=this.VirtualList.rootNode},t.prototype.componentWillReceiveProps=function(e){var t=e.scrollDate;t!==this.props.scrollDate&&this.setState({scrollTop:this.getDateOffset(t)})},t.prototype.getDateOffset=function(e){var t=this.props,n=t.min,a=t.rowHeight,r=t.locale.weekStartsOn,o=t.height;return V(nt()(n),be()(e),r)*a-(o-a/2)/2},t.prototype.render=function(){var e,t=this.props,n=t.height,a=t.isScrolling,r=t.onScroll,o=t.overscanMonthCount,i=t.months,l=t.rowHeight,s=t.width,c=this.state.scrollTop;return v.a.createElement(et,{ref:this._getRef,width:s,height:n,itemCount:i.length,itemSize:this.getMonthHeight,estimatedItemSize:5*l,renderItem:this.renderMonth,onScroll:r,scrollOffset:c,className:k()(pt,(e={},e[mt]=a,e)),style:{lineHeight:l+"px"},overscanCount:o})},t}(y.Component);function gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var vt,Et,Ct="Cal__Weekdays__root",bt="Cal__Weekdays__day",_t=function(e){function t(){return gt(this,t),yt(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.weekdays,n=e.weekStartsOn,a=e.theme,r=[].concat(t.slice(n,7),t.slice(0,n));return v.a.createElement("ul",{className:Ct,style:{backgroundColor:a.weekdayColor,color:a.textColor.active,paddingRight:Z},"aria-hidden":!0},r.map((function(e,t){return v.a.createElement("li",{key:"Weekday-"+t,className:bt},e)})))},t}(y.PureComponent),kt=n(431),wt=n.n(kt);function xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var St={root:"Cal__Years__root",list:"Cal__Years__list",center:"Cal__Years__center",year:"Cal__Years__year",withMonths:"Cal__Years__withMonths",currentMonth:"Cal__Years__currentMonth",selected:"Cal__Years__selected",disabled:"Cal__Years__disabled",active:"Cal__Years__active",currentYear:"Cal__Years__currentYear",first:"Cal__Years__first",last:"Cal__Years__last"},Mt=(Et=vt=function(e){function t(){return xt(this,t),Dt(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.handleClick=function(e,t){var n=this.props,a=n.hideOnSelect,r=n.onSelect,o=n.setDisplay,i=n.scrollToDate;r(e,t,(function(e){return i(e)})),a&&window.requestAnimationFrame((function(){return o("days")}))},t.prototype.renderMonths=function(e){var t=this,n=this.props,a=n.locale.locale,r=n.selected,o=n.theme,i=n.today,l=n.min,s=n.max,c=n.minDate,u=n.maxDate,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Array.apply(null,Array(12)).map((function(n,a){return new Date(e,a,t)}))}(e,r.getDate());return v.a.createElement("ol",null,d.map((function(e,n){var d,f=wt()(e,r),p=wt()(e,i),m=R()(e,l)||R()(e,c)||I()(e,s)||I()(e,u),h=Object.assign({},f&&{backgroundColor:"function"===typeof o.selectionColor?o.selectionColor(e):o.selectionColor},p&&{borderColor:o.todayColor});return v.a.createElement("li",{key:n,onClick:function(n){n.stopPropagation(),m||t.handleClick(e,n)},className:k()(St.month,(d={},d[St.selected]=f,d[St.currentMonth]=p,d[St.disabled]=m,d)),style:h,title:"Set date to "+ke()(e,"MMMM Do, YYYY")},ke()(e,"MMM",{locale:a}))})))},t.prototype.render=function(){var e=this,t=this.props,n=t.height,a=t.selected,r=t.showMonths,o=t.theme,i=t.today,l=t.width,s=i.getFullYear(),c=this.props.years.slice(0,this.props.years.length),u=c.indexOf(a.getFullYear()),d=r?110:50,f=c.map((function(e,t){return 0===t||t===c.length-1?d+40:d})),p=c.length*d<n+50?c.length*d:n+50;return v.a.createElement("div",{className:St.root,style:{color:o.selectionColor,height:n+50}},v.a.createElement(et,{ref:"List",className:St.list,width:l,height:p,itemCount:c.length,estimatedItemSize:d,itemSize:function(e){return f[e]},scrollToIndex:-1!==u?u:null,scrollToAlignment:"center",renderItem:function(t){var n,i=t.index,l=t.style,d=c[i],f=i===u;return v.a.createElement("div",{key:i,className:k()(St.year,(n={},n[St.active]=!r&&f,n[St.currentYear]=!r&&d===s,n[St.withMonths]=r,n[St.first]=0===i,n[St.last]=i===c.length-1,n)),onClick:function(){return e.handleClick(new Date(a).setYear(d))},title:"Set year to "+d,"data-year":d,style:Object.assign({},l,{color:"function"===typeof o.selectionColor?o.selectionColor(new Date(d,0,1)):o.selectionColor})},v.a.createElement("label",null,v.a.createElement("span",{style:r||d!==s?null:{borderColor:o.todayColor}},d)),r&&e.renderMonths(d))}}))},t}(y.Component),vt.defaultProps={onSelect:$,showMonths:!0},Et),Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Ot="Cal__Day__root",It="Cal__Day__enabled",At="Cal__Day__highlighted",Rt="Cal__Day__today",Lt="Cal__Day__disabled",Ft="Cal__Day__selected",jt="Cal__Day__month",Ht="Cal__Day__year",Gt="Cal__Day__selection",Ut="Cal__Day__day",Yt=function(e){function t(){var n,a;Pt(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=Nt(this,e.call.apply(e,[this].concat(o))),a.handleClick=function(){var e=a.props,t=e.date,n=e.isDisabled,r=e.onClick;n||"function"!==typeof r||r(be()(t))},Nt(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.renderSelection=function(e){var t=this.props,n=t.day,a=t.date,r=t.isToday,o=t.locale.todayLabel,i=t.monthShort,l=t.theme.textColor,s=t.selectionStyle;return v.a.createElement("div",{className:Gt,"data-date":a,style:Tt({backgroundColor:this.selectionColor,color:l.active},s)},v.a.createElement("span",{className:jt},r?o.short||o.long:i),v.a.createElement("span",{className:Ut},n))},t.prototype.render=function(){var e,t=this.props,n=t.className,a=t.currentYear,r=t.date,o=t.day,i=t.handlers,l=t.isDisabled,s=t.isHighlighted,c=t.isToday,u=t.isSelected,d=t.monthShort,f=t.theme,p=f.selectionColor,m=f.todayColor,h=t.year,g=void 0;return u?g=this.selectionColor="function"===typeof p?p(r):p:c&&(g=m),v.a.createElement("li",Tt({style:g?{color:g}:null,className:k()(Ot,(e={},e[Rt]=c,e[At]=s,e[Ft]=u,e[Lt]=l,e[It]=!l,e),n),onClick:this.handleClick,"data-date":r},i),1===o&&v.a.createElement("span",{className:jt},d),c?v.a.createElement("span",null,o):o,1===o&&a!==h&&v.a.createElement("span",{className:Ht},h),u&&this.renderSelection())},t}(y.PureComponent),zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Wt={root:"Cal__Container__root",landscape:"Cal__Container__landscape",wrapper:"Cal__Container__wrapper",listWrapper:"Cal__Container__listWrapper"},Kt=C()({autoFocus:!0,DayComponent:Yt,display:"days",displayOptions:{},HeaderComponent:Ie,height:500,keyboardSupport:!0,max:new Date(2050,11,31),maxDate:new Date(2050,11,31),min:new Date(1980,0,1),minDate:new Date(1980,0,1),onHighlightedDateChange:$,onScroll:$,onScrollEnd:$,onSelect:$,passThrough:{},rowHeight:56,tabIndex:1,width:400,YearsComponent:Mt}),qt=function(e){function t(n){Bt(this,t);var a=Vt(this,e.apply(this,arguments));return a._displayOptions={},a._locale={},a._theme={},a.getCurrentOffset=function(){return a.scrollTop},a.getDateOffset=function(e){return a._MonthList&&a._MonthList.getDateOffset(e)},a.scrollTo=function(e){return a._MonthList&&a._MonthList.scrollTo(e)},a.scrollToDate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments[1],n=arguments[2],r=a.props.display;return a._MonthList&&a._MonthList.scrollToDate(e,t,n&&"days"===r,(function(){return a.setState({isScrolling:!1})}))},a.getScrollSpeed=(new q).getScrollSpeed,a.handleScroll=function(e,t){var n=a.props,r=n.onScroll,o=n.rowHeight,i=a.state.isScrolling,l=a.getDisplayOptions(),s=l.showTodayHelper,c=l.showOverlay,u=a.scrollSpeed=Math.abs(a.getScrollSpeed(e));a.scrollTop=e,c&&u>o&&!i&&a.setState({isScrolling:!0}),s&&a.updateTodayHelperPosition(u),r(e,t),a.handleScrollEnd()},a.handleScrollEnd=ee((function(){var e=a.props.onScrollEnd,t=a.state.isScrolling,n=a.getDisplayOptions().showTodayHelper;t&&a.setState({isScrolling:!1}),n&&a.updateTodayHelperPosition(0),e(a.scrollTop)}),150),a.updateTodayHelperPosition=function(e){var t=a.today,n=a.scrollTop,r=a.state.showToday,o=a.props,i=o.height,l=o.rowHeight,s=a.getDisplayOptions().todayHelperRowOffset,c=void 0;a._todayOffset||(a._todayOffset=a.getDateOffset(t)),n>=a._todayOffset+(i-l)/2+l*s?1!==r&&(c=1):n<=a._todayOffset-i/2-l*(s+1)?-1!==r&&(c=-1):r&&e<=1&&(c=!1),0===n&&(c=!1),null!=c&&a.setState({showToday:c})},a.setDisplay=function(e){a.setState({display:e})},a.updateYears(n),a.state={display:n.display},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.autoFocus&&this.node.focus()},t.prototype.componentWillUpdate=function(e,t){var n=this.props,a=n.min,r=n.minDate,o=n.max,i=n.maxDate;e.min===a&&e.minDate===r&&e.max===o&&e.maxDate===i||this.updateYears(e),e.display!==this.props.display&&this.setState({display:e.display})},t.prototype.updateYears=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this._min=be()(e.min),this._max=be()(e.max),this._minDate=be()(e.minDate),this._maxDate=be()(e.maxDate);var t=this._min.getFullYear(),n=this._min.getMonth(),a=this._max.getFullYear(),r=this._max.getMonth(),o=[],i=void 0,l=void 0;for(i=t;i<=a;i++)for(l=0;l<12;l++)i===t&&l<n||i===a&&l>r||o.push({month:l,year:i});this.months=o},t.prototype.getDisabledDates=function(e){return e&&e.map((function(e){return ke()(be()(e),"YYYY-MM-DD")}))},t.prototype.getDisplayOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.displayOptions;return Object.assign(this._displayOptions,ae.a,e)},t.prototype.getLocale=function(){return Object.assign(this._locale,oe.a,this.props.locale)},t.prototype.getTheme=function(){return Object.assign(this._theme,le.a,this.props.theme)},t.prototype.render=function(){var e,t=this,n=this.props,a=n.className,r=n.passThrough,o=n.DayComponent,i=n.disabledDays,l=n.displayDate,s=n.height,c=n.HeaderComponent,u=n.rowHeight,d=n.scrollDate,f=n.selected,p=n.tabIndex,m=n.width,h=n.YearsComponent,g=this.getDisplayOptions(),y=g.hideYearsOnSelect,E=g.layout,C=g.overscanMonthCount,b=g.shouldHeaderAnimate,_=g.showHeader,w=g.showMonthsForYears,x=g.showOverlay,D=g.showTodayHelper,S=g.showWeekdays,M=this.state,T=M.display,P=M.isScrolling,N=M.showToday,O=this.getDisabledDates(this.props.disabledDates),I=this.getLocale(),A=this.getTheme(),R=this.today=U()(new Date);return v.a.createElement("div",zt({tabIndex:p,className:k()(a,Wt.root,(e={},e[Wt.landscape]="landscape"===E,e)),style:{color:A.textColor.default,width:m},"aria-label":"Calendar",ref:function(e){t.node=e}},r.rootNode),_&&v.a.createElement(c,zt({selected:f,shouldAnimate:Boolean(b&&"years"!==T),layout:E,theme:A,locale:I,scrollToDate:this.scrollToDate,setDisplay:this.setDisplay,dateFormat:I.headerFormat,display:T,displayDate:l},r.Header)),v.a.createElement("div",{className:Wt.wrapper},S&&v.a.createElement(_t,{weekdays:I.weekdays,weekStartsOn:I.weekStartsOn,theme:A}),v.a.createElement("div",{className:Wt.listWrapper},D&&v.a.createElement(ye,{scrollToDate:this.scrollToDate,show:N,today:R,theme:A,todayLabel:I.todayLabel.long}),v.a.createElement(ht,{ref:function(e){t._MonthList=e},DayComponent:o,disabledDates:O,disabledDays:i,height:s,isScrolling:P,locale:I,maxDate:this._maxDate,min:this._min,minDate:this._minDate,months:this.months,onScroll:this.handleScroll,overscanMonthCount:C,passThrough:r,theme:A,today:R,rowHeight:u,selected:f,scrollDate:d,showOverlay:x,width:m})),"years"===T&&v.a.createElement(h,zt({ref:function(e){t._Years=e},height:s,hideOnSelect:y,locale:I,max:this._max,maxDate:this._maxDate,min:this._min,minDate:this._minDate,scrollToDate:this.scrollToDate,selected:f,setDisplay:this.setDisplay,showMonths:w,theme:A,today:R,width:m,years:te(this._min.getFullYear(),this._max.getFullYear()+1)},r.Years))))},t}(y.Component),Zt=n(308),$t=n.n(Zt),Xt=n(309),Qt=n.n(Xt),Jt=n(311),en=n.n(Jt);var tn=x()(["selected"],(function(e){return{isSelected:e.selected===e.date}})),nn=x()(["selected"],(function(e){var t=e.selected;return{selected:be()(t)}})),an=en()(Kt,J((function(e){var t=e.DayComponent,n=(e.onSelect,e.setScrollDate,e.YearsComponent);return{DayComponent:tn(t),YearsComponent:nn(n)}})),$t()("scrollDate","setScrollDate",(function(e){return e.selected||new Date})),Qt()((function(e){var t=e.onSelect,n=e.setScrollDate,a=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["onSelect","setScrollDate"]),r=X(a.selected,a);return{passThrough:{Day:{onClick:t},Years:{onSelect:function(e){return function(e,t){var n=t.setScrollDate,a=(t.selected,t.onSelect),r=be()(e);a(r),n(r)}(e,{onSelect:t,selected:r,setScrollDate:n})}}},selected:r&&ke()(r,"YYYY-MM-DD")}})));var rn=n(338),on=n.n(rn),ln=n(432),sn=n.n(ln),cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},un=Qt()((function(e){return{isHighlighted:e.highlightedDate===e.date}}));en()($t()("highlightedDate","setHighlight"),J((function(e){var t=e.DayComponent;return{DayComponent:un(t)}})),on()({onKeyDown:function(e){return function(t){return function(e,t){var n=t.minDate,a=t.maxDate,r=t.passThrough.Day.onClick,o=t.setScrollDate,i=t.setHighlight,l=function(e){var t=e.highlightedDate,n=e.selected,a=e.displayDate;return t||n.start||a||n||new Date}(t),s=0;[z.left,z.up,z.right,z.down].indexOf(e.keyCode)>-1&&"function"===typeof e.preventDefault&&e.preventDefault();switch(e.keyCode){case z.enter:return void(r&&r(l));case z.left:s=-1;break;case z.right:s=1;break;case z.down:s=7;break;case z.up:s=-7;break;default:s=0}if(s){var c=sn()(l,s);R()(c,n)?c=new Date(n):I()(c,a)&&(c=new Date(a)),o(c),i(c)}}(t,e)}}}),Qt()((function(e){var t=e.highlightedDate,n=e.onKeyDown,a=(e.onSelect,e.passThrough),r=e.setHighlight;return{passThrough:cn({},a,{Day:cn({},a.Day,{highlightedDate:ke()(t,"YYYY-MM-DD"),onClick:function(e){r(null),a.Day.onClick(e)}}),rootNode:{onKeyDown:n}})}})));function dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var pn="Cal__Slider__root",mn="Cal__Slider__slide",hn="Cal__Slider__wrapper",gn="Cal__Slider__arrow",yn="Cal__Slider__arrowRight",vn="Cal__Slider__arrowLeft",En={enter:"Cal__transition__enter",enterActive:"Cal__transition__enterActive",leave:"Cal__transition__leave",leaveActive:"Cal__transition__leaveActive"},Cn=0,bn=1,_n=function(e){var t,n=e.direction,a=e.onClick;return v.a.createElement("div",{className:k()(gn,(t={},t[vn]=n===Cn,t[yn]=n===bn,t)),onClick:function(){return a(n)}},v.a.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 26 46"},v.a.createElement("path",{d:"M31.232233,34.767767 C32.2085438,35.7440777 33.7914562,35.7440777 34.767767,34.767767 C35.7440777,33.7914562 35.7440777,32.2085438 34.767767,31.232233 L14.767767,11.232233 C13.7914562,10.2559223 12.2085438,10.2559223 11.232233,11.232233 L-8.767767,31.232233 C-9.7440777,32.2085438 -9.7440777,33.7914562 -8.767767,34.767767 C-7.7914562,35.7440777 -6.2085438,35.7440777 -5.232233,34.767767 L12.9997921,16.5357418 L31.232233,34.767767 Z",id:"Shape",fill:"#FFF",transform:"translate(13.000000, 23.000000) rotate(90.000000) translate(-13.000000, -23.000000) "})))},kn=function(e){function t(){var n,a;dn(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=fn(this,e.call.apply(e,[this].concat(o))),a.handleClick=function(e){var t=a.props,n=t.children,r=t.index,o=t.onChange;switch(e){case Cn:r=Math.max(0,r-1);break;case bn:r=Math.min(r+1,n.length);break;default:return}o(r)},fn(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.index;return v.a.createElement("div",{className:pn},0!==n&&v.a.createElement(_n,{onClick:this.handleClick,direction:Cn}),v.a.createElement(Ee.a,{className:hn,component:"div",style:{transform:"translate3d(-"+100*n+"%, 0, 0)"},transitionName:En,transitionEnterTimeout:300,transitionLeaveTimeout:300},y.Children.map(t,(function(e,t){return v.a.createElement("div",{key:t,className:mn,style:{transform:"translateX("+100*t+"%)"}},e)}))),n!==t.length-1&&v.a.createElement(_n,{onClick:this.handleClick,direction:bn}))},t}(y.PureComponent),wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};var xn=J((function(e){e.renderSelection;var t=e.setDisplayDate;return{renderSelection:function(e,n){var a=n.scrollToDate,r=n.displayDate,o=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(n,["scrollToDate","displayDate"]);if(!e.length)return null;var i=e.sort(),l=e.indexOf(ke()(be()(r),"YYYY-MM-DD"));return v.a.createElement(kn,{index:-1!==l?l:i.length-1,onChange:function(e){return t(i[e],(function(){return setTimeout((function(){return a(i[e],0,!0)}),50)}))}},i.map((function(e){return De(e,wn({},o,{key:l,scrollToDate:a,shouldAnimate:!1}))})))}}}));var Dn=x()(["selected"],(function(e){return{isSelected:-1!==e.selected.indexOf(e.date)}})),Sn=Qt()((function(e){var t=e.displayDate;return{selected:t?be()(t):null}}));en()(Kt,$t()("scrollDate","setScrollDate",Mn),$t()("displayDate","setDisplayDate",Mn),J((function(e){var t=e.DayComponent,n=e.HeaderComponent,a=e.YearsComponent;return{DayComponent:Dn(t),HeaderComponent:xn(n),YearsComponent:Sn(a)}})),Qt()((function(e){var t=e.displayDate,n=e.onSelect,a=e.setDisplayDate,r=(e.scrollToDate,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["displayDate","onSelect","setDisplayDate","scrollToDate"]));return{passThrough:{Day:{onClick:function(e){return function(e,t){var n=t.onSelect,a=t.setDisplayDate;n(e),a(e)}(e,{onSelect:n,setDisplayDate:a})}},Header:{setDisplayDate:a},Years:{displayDate:t,onSelect:function(e,t,n){return function(e,t){t(be()(e))}(e,n)},selected:t}},selected:r.selected.filter((function(e){return X(e,r)})).map((function(e){return ke()(e,"YYYY-MM-DD")}))}})));function Mn(e){var t=e.selected;return t.length?t[0]:new Date}var Tn=n(433),Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nn="Cal__Header__range",On=J((function(e){e.renderSelection;return{renderSelection:function(e,t){if(!e||!e.start&&!e.end)return null;if(e.start===e.end)return De(e.start,t);var n=t.locale&&t.locale.headerFormat||"MMM Do";return v.a.createElement("div",{className:Nn,style:{color:t.theme.headerColor}},De(e.start,Pn({},t,{dateFormat:n,key:"start",shouldAnimate:!1})),De(e.end,Pn({},t,{dateFormat:n,key:"end",shouldAnimate:!1})))}}}));function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){Rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ln(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Fn="Cal__Day__range",jn="Cal__Day__start",Hn="Cal__Day__end",Gn="Cal__Day__betweenRange";let Un=!1,Yn=void 0;const zn=2,Bn=1;let Vn=e=>"[object Array]"===Object.prototype.toString.call(e);const Wn=Object(Tn.withPropsOnChange)(["selected"],({date:e,selected:t,theme:n})=>{let a,r,o;if(Vn(t))a=-1!==t.indexOf(e);else{a=e>=t.start&&e<=t.end;const i=e===t.start,l=e===t.end,s=!(i&&l);o=s&&(i&&{backgroundColor:n.accentColor}||l&&{borderColor:n.accentColor}),r=a&&s&&k()(Fn,{[jn]:i,[Gn]:!i&&!l,[Hn]:l})}return{className:r,isSelected:a,selectionStyle:o}}),Kn=Object(Tn.compose)(Kt,Object(Tn.withState)("scrollDate","setScrollDate",Zn),Object(Tn.withState)("displayKey","setDisplayKey",Zn),Object(Tn.withState)("selectionStart","setSelectionStart",null),J(({DayComponent:e,HeaderComponent:t,YearsComponent:n})=>({DayComponent:Wn(e),HeaderComponent:On(t)})),Object(Tn.withProps)(e=>{let{displayKey:t,passThrough:n,selected:a,setDisplayKey:r}=e,o=Ln(e,["displayKey","passThrough","selected","setDisplayKey"]);return{passThrough:An(An({},n),{},{Day:{onClick:e=>function(e,{onSelect:t,selected:n,selectionStart:a,setSelectionStart:r}){t({eventType:Bn,start:e,end:e}),r(e)}(e,An({selected:a},o)),handlers:{onMouseDown:e=>{const t=("SPAN"===e.target.nodeName?e.target.parentElement:e.target).getAttribute("data-date"),n=t&&be()(t);Yn=n,o.onSelect({eventType:Bn,start:n,end:n}),o.setSelectionStart(n)},onMouseUp:e=>{Yn=void 0},onMouseOver:!Un&&o.selectionStart?e=>function(e,{onSelect:t,selectionStart:n}){const a=e.target.getAttribute("data-date"),r=a&&be()(a);if(!r)return;Yn&&t(An({eventType:zn},qn({start:Yn,end:r})))}(e,An({selected:a},o)):null}},Years:{selected:a&&a[t],onSelect:e=>function(e,{displayKey:t,onSelect:n,selected:a,setScrollDate:r}){r(e),n(qn(Object.assign({},a,{[t]:be()(e)})))}(e,An({displayKey:t,selected:a},o))},Header:{onYearClick:(e,t,n)=>r(n||"start")}}),selected:Vn(a)?a.filter(e=>X(e,o)).map(e=>ke()(e,"YYYY-MM-DD")):{start:a&&ke()(a.start,"YYYY-MM-DD"),end:a&&ke()(a.end,"YYYY-MM-DD")}}}));function qn({start:e,end:t}){return R()(e,t)?{start:e,end:t}:{start:t,end:e}}function Zn({selected:e}){return e&&e.start||new Date}"undefined"!==typeof window&&window.addEventListener("touchstart",(function e(){Un=!0,window.removeEventListener("touchstart",e,!1)}));var $n,Xn,Qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function Jn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ea(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var ta=(Xn=$n=function(e){function t(){var n,a;Jn(this,t);for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n=a=ea(this,e.call.apply(e,[this].concat(o))),a.state={selected:"undefined"!==typeof a.props.selected?a.props.selected:new Date},a.handleSelect=function(e){var t=a.props,n=t.onSelect,r=t.interpolateSelection;"function"===typeof n&&n(e),a.setState({selected:r(e,a.state.selected)})},ea(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillReceiveProps=function(e){var t=e.selected;t!==this.props.selected&&this.setState({selected:t})},t.prototype.render=function(){var e=this.props,t=e.Component,n=(e.interpolateSelection,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["Component","interpolateSelection"]));return v.a.createElement(t,Qn({},n,{onSelect:this.handleSelect,selected:this.state.selected}))},t}(y.Component),$n.defaultProps={Component:an(qt),interpolateSelection:function(e){return e}},Xn),na=(n(343),n(4)),aa=n(151),ra=n(25),oa=n(62),ia=n(34),la=n(20),sa=n(127),ca=n(65),ua=n(81),da=0;function fa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}for(var pa=Kn(qt),ma=["All day"],ha=0;ha<24;ha++){if(da++>5e3&&__infLoop&&__infLoop(da))throw new RangeError;var ga=ha%12===0?"12":ha>12?ha-12:ha,ya=ha>=12?"pm":"am";ma.push(ga+":00 "+ya),ma.push(ga+":30 "+ya)}var va=function(e){u()(n,e);var t=fa(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"init",value:function(){var e;this.refInput=y.createRef(),this.refTimes=y.createRef(),this.mooDate=null===(e=this.props.item)||void 0===e?void 0:e.getMooDate();var t=na.default.pluginManager.getPluginGCalendar();if(t.isEnabled()&&!this.mooDate&&t.getSetting("syncPopup")&&(this.pendingCalendarID=t.getDefaultExportCalendarID()),this.createObservables({selectedDate:{start:void 0,end:void 0},selectedTimes:[],text:void 0}),this.updateText(),this.textOffset=this.props.textOffset,void 0===this.textOffset&&this.props.item){var n=this.props.item.getParsedText(),a=n.indexOf(h.a.CharDate);this.textOffset=a>=0?a:n.length}}},{key:"onMount",value:function(){this.updateDateTime(),na.default.onIntroAction("Date")}},{key:"onUnmount",value:function(){g.default.clearTimeoutOnce("ctxMenuDateUpdateDate");var e=this.props,t=e.onSelect,n=e.onUnmount,a=this.mooDate;this.setMooDateOnItem(a),a&&t&&t(a.getDate()),n&&n()}},{key:"setMooDate",value:function(e){this.mooDate=e,g.default.timeoutOnce("ctxMenuDateUpdateDate",this._onInputChangeTimeout,200)}},{key:"setMooDateOnItem",value:function(e){var t=this.props,n=t.paneObject,a=t.item;if(a){var r=this.textOffset,o=n?n.getDisplayText():a.getDisplayText(!1);if(a.setMooDate(e,h.a.ChangeType.Local,(null===e||void 0===e?void 0:e.duration)?["duration"]:[]),e&&void 0!==r&&a.getRawText().indexOf(h.a.CharDate)<0){var i=r,l=0,s="";o[r-1]&&o[r-1]!==h.a.PrefixDate&&" "!==o[i]&&(s=" "),o[r-1]===h.a.PrefixDate&&(i--,l++);var c=n||{item:a,showMarkdown:function(){return na.default.settings.showMarkdown.get()}},u=a.elsNew.spliceText(s+h.a.CharDate+" ",i,l,c);if(u[r-1]===h.a.PrefixDate&&(u=g.default.stringRemove(u,i-1,1)),a.setText(u,h.a.ChangeType.Local),this.pendingCalendarID)na.default.pluginManager.getPluginGCalendar().setCalendarForItem(a,this.pendingCalendarID),delete this.pendingCalendarID}}}},{key:"_onInputChangeTimeout",value:function(){this.setMooDateOnItem(this.mooDate)}},{key:"getMooDateOnItem",value:function(){var e=this.props.item;return null===e||void 0===e?void 0:e.getMooDate()}},{key:"onInputChange",value:function(e){if(e){var t=ra.a.parseText(e);this.setMooDate(t)}else this.setMooDate(void 0);this.updateDateTime(),this.text.set(e)}},{key:"onClickClearDate",value:function(){this.onInputChange("")}},{key:"onClickSave",value:function(){na.default.menus.closeContextMenu("ReactContextMenuDate")}},{key:"updateDateTime",value:function(){var e=this.mooDate;if(e){var t=e.getTime();if(t){var n=0;t=Math.round(t/36e4);for(var a=2*Math.floor(t/10)+(t%10>0?1:0),r=e.getDuration()/(30*h.a.MSPerMinute)||2,o=[],i=a;i<a+r;i++){if(n++>5e3&&__infLoop&&__infLoop(n))throw new RangeError;o.push(i+1)}this.selectedTimes.set(o),this.refTimes.current&&(this.refTimes.current.scrollTop=28*(a-3))}else this.selectedTimes.set([]);if(e.isRange()){var l=e.getStart(),s=e.getEnd();l||(l=new Date),s||(s=new Date(l).addMonths(3)),this.selectedDate.set({start:l,end:s})}else this.selectedDate.set(e.getAllDates())}else this.selectedDate.set(void 0)}},{key:"onMouseDownTime",value:function(e){this._mouseDownOnTime=e,this.selectedTimes.set([e]);var t=this.mooDate;if(t||(t=oa.a.now(),this.setMooDate(t)),0===e)t.clearTime(),t.setDuration(void 0);else{var n=e-1;t.setHours(n/2),t.setDuration(30*h.a.MSPerMinute)}this.updateText(),document.addEventListener("mouseup",this.onMouseUpTime)}},{key:"onMouseMoveTime",value:function(e){if(void 0!==this._mouseDownOnTime){var t,n,a=0,r=this.selectedTimes.get();e<=this._mouseDownOnTime?(t=e,n=this._mouseDownOnTime):(t=this._mouseDownOnTime,n=e),r=[];for(var o=t;o<=n;o++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;r.push(o)}this.duration=r.length>0?30*r.length*h.a.MSPerMinute:void 0,this.mooDate.setDuration(this.duration),this.updateText(),this.selectedTimes.set(r)}}},{key:"onMouseUpTime",value:function(){this._mouseDownOnTime=void 0,document.removeEventListener("mouseup",this.onMouseUpTime)}},{key:"onSelectDate",value:function(e){var t;this.selectedDate.set(e);var n=null===(t=this.mooDate)||void 0===t?void 0:t.getTime(),a=n?n/h.a.MSPerHour:0;this.setMooDate(e.start&&e.end?oa.a.fromRange(e.start,e.end,a):void 0),this.updateText()}},{key:"onChangeRepeatComplete",value:function(e){var t=this.mooDate;if(t){var n=this.props.item;t.setRepeatOnComplete(e),n.onMooDateUpdated(h.a.ChangeType.Local)}}},{key:"onInputEnter",value:function(){na.default.menus.closeContextMenu("ReactContextMenuDate")}},{key:"updateText",value:function(){var e=this.mooDate;this.text.set(e?e.toText():""),this.refInput.current&&this.refInput.current.selectEnd()}},{key:"onChangeCalendar",value:function(e){var t=this.props.item,n=na.default.pluginManager.getPluginGCalendar();t.getMooDate()?n.setCalendarForItem(t,e):this.pendingCalendarID=e}},{key:"renderCalendarSelector",value:function(){var e=this.props.item,t=na.default.pluginManager.getPluginGCalendar(),n=e.hasPluginAttachment(h.a.PluginID.GCalendar),a=t.getWriteableCalendarsForItem(e),r=a.calendars,o=a.selected;return this.pendingCalendarID&&(o=this.pendingCalendarID),r?y.createElement(aa.a,{defaultValue:o,style:{height:26,marginTop:2},ref:this.refSelectCalendar,onChange:this.onChangeCalendar,noPadding:!0},y.createElement("option",{value:""},(n?"Remove from":"Add to")+" calendar"),r.map((function(e){return y.createElement("option",{key:e.id,value:e.id},e.summary)}))):void 0}},{key:"render",value:function(){var e=this,t=this.state,n=t.text,a=t.selectedTimes,o=t.selectedDate,i=this.props.item,l=this.mooDate,s=l&&l.repeatComplete||!1,c=ma.map((function(t,n){var r=a.indexOf(n)>=0,o=g.default.classNames({"c-popup-item":!r},{selected:r});return y.createElement("div",{key:t,className:o,onMouseDown:e.onMouseDownTime.bind(e,n),onMouseMove:e.onMouseMoveTime.bind(e,n)},t)}));return y.createElement(ca.a,r()({},this.props,{id:"contextMenuDate",width:352,maxHeight:1800}),y.createElement("div",{className:"flexbox"},y.createElement(ua.a,{className:"f1",placeholder:"Type or select a date",onChange:this.onInputChange,onEnter:this.onInputEnter,value:n,focused:!0,border:!1,ref:this.refInput}),i&&y.createElement(la.a,{height:40,onClick:this.onClickClearDate},"Clear"),!i&&y.createElement(la.a,{height:40,onClick:this.onInputEnter},"Save")),i&&y.createElement("div",{className:"flexbox",style:{padding:"0 8px"}},y.createElement(sa.a,{className:"f1",initialChecked:s,onChange:this.onChangeRepeatComplete},"Repeat from completion"),this.renderCalendarSelector()),y.createElement("div",{className:"calendarContainer flexbox c-border-heavy",style:{width:352,height:200}},y.createElement(ta,{Component:pa,autoFocus:!1,width:252,height:200,rowHeight:36,selected:o,onSelect:this.onSelectDate,locale:{weekStartsOn:na.default.settings.dayWeekStart.get()},displayOptions:{showHeader:!1,showOverlay:!1}}),y.createElement("div",{className:"times c-border-heavy scrollable f1",ref:this.refTimes},c)))}}]),n}(ia.a);t.default=va},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(6),i=n.n(o),l=n(13),s=n.n(l),c=n(19),u=n.n(c),d=n(61),f=n.n(d),p=n(1),m=n(3),h=n.n(m),g=n(4),y=n(20),v=n(81),E=n(297),C=n(33),b=n(66);function _(e){var t=Object(m.useState)({}),n=u()(t,2),a=n[0],r=n[1],o=function(){var e=Object(m.useRef)(!1),t=Object(m.useCallback)((function(){return e.current}),[]);return Object(m.useEffect)((function(){return e.current=!0,function(){e.current=!1}})),t}();return Object(m.useEffect)((function(){s()(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(var a=0;;){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;switch(t.prev=t.next){case 0:if(!o()){t.next=11;break}return t.prev=1,t.next=4,e();case 4:n=t.sent,o()&&r(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r({error:t.t0});case 11:case"end":return t.stop()}}}),t,null,[[1,8]])})))()}),[]),a}var k=n(21),w=n(90);t.default=Object(k.b)((function(e){var t,n,a=e.folder,o=f()(e,["folder"]),l=_((function(){return b.a.getTemplateProperties(a.id)})),c=l.value,d=l.error,k=Object(m.useState)(),x=u()(k,2),D=x[0],S=x[1],M=Object(m.useState)(),T=u()(M,2),P=T[0],N=T[1],O=Object(m.useRef)();if((c||P)&&(t=h.a.createElement(h.a.Fragment,null,h.a.createElement("div",null,"You can share the template created from this board folder with the following URL:"),h.a.createElement("div",{className:"mt-4"},h.a.createElement(v.a,{readonly:!0,value:"".concat(window.location.origin,"/template/?").concat(a.id)})))),void 0===c&&void 0===d)n=h.a.createElement(w.a,{center:!0},"Checking for existing template");else if(d){var I;I="auth/network-request-failed"===(null===d||void 0===d?void 0:d.code)?"Error communicating with server. Please ensure you are online and try again.":"Error: "+JSON.stringify(d),n=h.a.createElement("div",null,I)}else P||(n=h.a.createElement(h.a.Fragment,null,c?h.a.createElement("div",{className:"mb-4 mt-4"},"Clicking SAVE will update the documents and boards in this saved template."):h.a.createElement("div",{className:"mb-8"},"This will create a new template that you can share publicly or with your friends. All data in the documents open in these boards will be copied into the template, but it will not continue to sync. If you'd like to update the template you can open this menu again."),h.a.createElement(v.a,{focused:!0,ref:O,placeholder:"Enter a name for your template",value:null===c||void 0===c?void 0:c.name}),D&&h.a.createElement("div",{className:"error mt-4"},D)));return h.a.createElement(E.a,r()({},o,{id:"modalCreateTemplate",title:"Create template",small:!0,minHeight:200,width:500,scrollable:!1,modalID:p.a.Modals.CreateTemplate}),h.a.createElement("div",{key:"content"},t,n,P&&h.a.createElement("div",{className:"mt-4 center"},"SAVED")),void 0!==c&&!P&&h.a.createElement("div",{key:"buttons"},h.a.createElement(y.a,{primary:!0,width:100,onClick:function(e,t){var n=O.current.getValue();if(n||c){S(void 0);var r=function(){var e=s()(i.a.mark((function e(){var r,o;return i.a.wrap((function(e){for(var i=0;;){if(i++>5e3&&__infLoop&&__infLoop(i))throw new RangeError;switch(e.prev=e.next){case 0:return e.next=2,C.a.getBoardFolderAsTemplate(a);case 2:return r=e.sent,e.next=5,b.a.createTemplate(a.id,n,null===c||void 0===c?void 0:c.created,JSON.stringify(r));case 5:(o=e.sent).value?(console.log("updated"),N(!0)):S("Error creating template: "+o.error),t();case 8:case"end":return e.stop()}}}),e)})));return function(){return e.apply(this,arguments)}}();c?g.default.menus.confirm("Are you sure you want to overwrite the existing template?",(function(e){e&&r()})):r()}else S("Please enter a template name");return!0}},"SAVE"),h.a.createElement(y.a,{cancel:!0,width:100,onClick:function(){return g.default.menus.closeModal(p.a.Modals.CreateTemplate)}},"CANCEL")))}))},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(61),i=n.n(o),l=n(7),s=n.n(l),c=n(8),u=n.n(c),d=n(17),f=n.n(d),p=n(18),m=n.n(p),h=n(9),g=n.n(h),y=n(0),v=n(1),E=n(4),C=n(15),b=n(3),_=n.n(b),k=n(34),w=n(10),x=n(27),D=n(107),S=n(329);function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var T=function(e){f()(n,e);var t=M(n);function n(){return s()(this,n),t.apply(this,arguments)}return u()(n,[{key:"onFocus",value:function(){var e=this.props.component.refs[this.props.target];e&&e.focus()}},{key:"render",value:function(){return _.a.createElement("input",{className:"fancyFocusGuard",onFocus:this.onFocus,tabIndex:this.props.tabIndex})}}]),n}(k.a),P=n(127),N=n(81),O=n(20),I=n(65),A=n(151);function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var L=function(e){f()(n,e);var t=R(n);function n(){return s()(this,n),t.apply(this,arguments)}return u()(n,[{key:"init",value:function(){var e=this.props.item,t=E.default.pluginManager.getPlugin(v.a.PluginID.GCalendar);this.createObservables({canSyncDate:e&&!!e.getMooDate(),addingLocal:!t.isActive()||E.default.pluginManager.getSetting(v.a.PluginID.GCalendar,v.a.PluginSettingsID.GCalendar.CreateLocalEvents),addingRemote:t.isActive()&&E.default.pluginManager.getSetting(v.a.PluginID.GCalendar,v.a.PluginSettingsID.GCalendar.SyncNewEvents),selectedDocument:e&&e.getDocumentOwner()?e.getDocumentOwner():C.a.getDefaultDocument()}),this.refSelectCalendar=Object(b.createRef)(),this.refSelectDocument=Object(b.createRef)(),this.refMenu=Object(b.createRef)(),this.refItem=Object(b.createRef)(),this.refAddTo=Object(b.createRef)(),this.refNoteText=Object(b.createRef)(),this.refCheckAddLocal=Object(b.createRef)(),this.refCheckAddCalendar=Object(b.createRef)(),this.refSave=Object(b.createRef)()}},{key:"getHotkeys",value:function(){return[E.default.hotkeys.create(v.a.KeyCode.Escape,!0,v.a.Primary.Either,v.a.Shift.Either,this.onEscape),E.default.hotkeys.create(v.a.KeyCode.D,!0,v.a.Primary.Yes,v.a.Shift.Yes,this.onHotkeyDate),E.default.hotkeys.create(v.a.KeyCode.C,!0,v.a.Primary.Never,v.a.Shift.No,this.onHotkeyCreateEvent)]}},{key:"getState",value:function(){var e=this.props.item;return{flags:e.flags,maxWidth:this.props.pane?Math.min(this.props.pane.getWidth()-20,400):400,isStarred:e.isStarred(),priority:e.getPriority()}}},{key:"onMount",value:function(){this.props.item.itemChanged.listen(this.onItemChanged),w.a.windowSize.listen(this.onResize),x.a.listen("panesChanged",this.onResize)}},{key:"onResize",value:function(){var e=this;this.updateState(),setTimeout((function(){e.refMenu&&e.refMenu.current.updateState()}),300)}},{key:"onUnmount",value:function(){this.props.item.itemChanged.unlisten(this.onItemChanged);var e=this.props;if(e.addOnSave&&this.needsSave){var t=this.addItem(),n=t.item,a=t.parent,r=t.insertIndex;e.beginSave&&e.beginSave();try{var o=e.options;if(o)for(var i=0,l=0;l<o.length;l++){if(i++>5e3&&__infLoop&&__infLoop(i))throw new RangeError;var s=o[l],c=this.refs[s.text];if(c&&c.getValue())try{s.cb(n)}catch(g){y.default.reportError(g)}}if(e.children)for(var u=0,d=0;d<e.children.length;d++){if(u++>5e3&&__infLoop&&__infLoop(u))throw new RangeError;var f=e.children[d].clone(n,v.a.ChangeType.Local);n.insertItem(f)}var p=E.default.pluginManager.getPluginGCalendar(),m=this.refCheckAddCalendar.current;if(p&&p.isAvailable()&&m&&m.getValue()&&this.refSelectCalendar.current){var h=this.refSelectCalendar.current.getValue();p.createEventForItem(n,h),p.forceRemoteEventSync()}isNaN(r)||a.insertItem(n,r)}catch(C){y.default.reportError(C)}e.endSave&&e.endSave(n)}w.a.windowSize.unlisten(this.onResize),x.a.unlisten("panesChanged",this.onResize)}},{key:"onItemChanged",value:function(){var e=this.props.item;this.canSyncDate.set(!!e.getMooDate())}},{key:"onHotkeyDate",value:function(){E.default.menus.openDate({element:this.refItem.current.getElement(),item:this.props.item,pane:this.props.pane})}},{key:"onHotkeyCreateEvent",value:function(){var e=E.default.pluginManager.getPluginGCalendar(),t=this.props.item;e&&(this.props.addOnSave?this.state.canSyncDate&&this.refCheckAddCalendar.current&&this.refCheckAddCalendar.current.setValue(!0):(e.createEventForItem(t),t.itemChanged.notify()))}},{key:"onKeyDownItem",value:function(e){w.a.getKeyCode(e)===v.a.KeyCode.Enter?(this.save(),e.preventDefault()):this.wasAKeyPressed=!0}},{key:"save",value:function(){this.props.item.hasText()?(this.needsSave=!0,E.default.menus.closeContextMenu()):E.default.toasts.pushMessage({text:"Please enter text for the item before adding it.",timeout:2e3})}},{key:"addItem",value:function(){var e=this.props.item,t=!0,n=E.default.pluginManager.getPluginGCalendar();if(n&&n.isAvailable()&&this.refCheckAddLocal.current&&(t=this.refCheckAddLocal.current.getValue()),e.getRawText().length>0){if(t){var a=this.props.parent,r=this.refAddTo.current.getItem();if(r&&(a=r.item),this.props.selectDocument&&!r)a=C.a.getDocumentById(this.refSelectDocument.current.getValue()).getRootItem();var o=e.clone(a,v.a.ChangeType.AllLocal),i=this.refNoteText.current.getValue();if(i){var l=o.createNote();l&&l.setText(i,v.a.ChangeType.Local)}return{item:o,parent:a,insertIndex:0}}return{item:e}}return{}}},{key:"onEscape",value:function(){this.wasEscapeKeyPressed=!0,E.default.menus.closeContextMenu()}},{key:"onNoteValueSet",value:function(){this.refMenu.current.updateState()}},{key:"onKeyDownNote",value:function(e){w.a.getKeyCode(e)===v.a.KeyCode.Enter&&(w.a.mac&&e.metaKey||!w.a.mac&&e.ctrlKey)&&this.save()}},{key:"onClickStar",value:function(){var e=this.props.item;e.setStarred(!e.isStarred(),v.a.ChangeType.Local)}},{key:"setPriority",value:function(e){var t=this.props.item;t.getPriority()===e&&(e=v.a.VMLIFlag.None),t.setPriority(e,v.a.ChangeType.Local)}},{key:"onChangeAddToCalendar",value:function(e){!e&&this.refCheckAddLocal.current&&this.refCheckAddLocal.current.setValue(!0),this.addingRemote.set(e)}},{key:"onChangeAddLocal",value:function(e){!e&&this.refCheckAddCalendar&&this.refCheckAddCalendar.current.setValue(!0),this.addingLocal.set(e)}},{key:"onChangeCalendar",value:function(e){if(!this.props.addOnSave){var t=this.props.item;E.default.pluginManager.getPluginGCalendar().setCalendarForItem(t,e)}}},{key:"onChangeDocument",value:function(e){this.selectedDocument.set(C.a.getDocumentById(e))}},{key:"renderCalendarSelector",value:function(){var e=this.props,t=e.item,n=e.addOnSave,a=this.state.addingRemote,r=E.default.pluginManager.getPluginGCalendar().getWriteableCalendarsForItem(t),o=r.calendars,i=r.selected;!i&&n&&(i=E.default.pluginManager.getSetting(v.a.PluginID.GCalendar,v.a.PluginSettingsID.GCalendar.ExportCalendar));var l=y.default.classNames("c-foreground-faded",{disabled:!a});return o?_.a.createElement("div",{className:"detailsSection flexbox"},_.a.createElement("span",{className:l},"Calendar:"),_.a.createElement(A.a,{defaultValue:i,style:{marginLeft:16,height:32},ref:this.refSelectCalendar,onChange:this.onChangeCalendar,disabled:!a},_.a.createElement("option",{value:""},"None"),o.map((function(e){return _.a.createElement("option",{key:e.id,value:e.id},e.summary)})))):void 0}},{key:"render",value:function(){var e,t=this.props,n=t.addOnSave,a=t.pane,o=t.item,l=t.selectDocument,s=i()(t,["addOnSave","pane","item","selectDocument"]),c=this.state,u=c.addingLocal,d=c.addingRemote,f=c.canSyncDate,p=c.priority,m=c.isStarred,h=c.selectedDocument,g=this.state.maxWidth,b=y.default.parentTextForItem(o),k=s.children||(a?a.getSubItems(o,!0):[]),w=o.allowTextEditing(),x=w&&(o.canHaveNote()||o.hasNote()),M=(f=f,E.default.pluginManager.getPlugin(v.a.PluginID.GCalendar)),R=M&&M.isAvailable()&&M.isEnabled(),L=R&&(f||s.showCalendarButtons),F=o.hasPluginAttachment(v.a.PluginID.GCalendar);if(k.length>0){var j=0;e=[];for(var H=0;H<k.length;H++){if(j++>5e3&&__infLoop&&__infLoop(j))throw new RangeError;var G=k[H];e.push(_.a.createElement(D.a,{key:G.id,item:G,pane:a,padded:!0,allowDrag:!1}))}}var U,Y=10,z=y.default.classNames("c-foreground-faded",{disabled:!u});return l&&(U=C.a.getDocumentsArray()),_.a.createElement(I.a,r()({},s,{key:o.id+"_Edit",id:"contextMenuItemDetails",className:"flexbox flexvert",width:400,maxWidth:g,onEscape:this.onEscape,ref:this.refMenu}),_.a.createElement(T,{component:this,target:"buttonSave",tabIndex:Y++}),b&&_.a.createElement("div",{className:"detailsSection flexbox itemContext c-foreground-faded"},_.a.createElement("div",{className:"c-foreground-faded"},"Parents"),_.a.createElement("div",null,b)),_.a.createElement("div",{className:"detailsSection flexbox noShrink"},_.a.createElement("div",{className:"c-foreground-faded"},"Item text"),_.a.createElement(D.a,{ref:this.refItem,className:"detailsItem c-background c-border",item:o,onKeyDown:this.onKeyDownItem,selectIndex:s.selectIndex,showPriority:!0,shouldSave:!n,autocompleteMode:"all",tabIndex:Y,inItemDetails:!0,allowDrag:!n,pane:a,editable:w})),l&&_.a.createElement("div",{className:"detailsSection flexbox"},_.a.createElement("div",{className:z},"Document"),_.a.createElement(A.a,{className:"f1",ref:this.refSelectDocument,style:{height:32},defaultValue:h.id,onChange:this.onChangeDocument},U.map((function(e){return _.a.createElement("option",{key:e.id,value:e.id},e.text.get())})))),n&&_.a.createElement("div",{className:"detailsSection flexbox"},_.a.createElement("div",{className:z},"Add to"),_.a.createElement(N.a,{autocompleteMode:"item",autocompleteItem:h.getRootItem(),height:33,placeholder:"Select item to add to",tabIndex:Y++,ref:this.refAddTo,pane:this.props.pane,disabled:!u,onKeyDown:this.onKeyDownItem})),x&&_.a.createElement("div",{className:"detailsSection flexbox"},_.a.createElement("div",{className:"c-foreground-faded"},"Note"),_.a.createElement(S.a,{className:"c-border",ref:this.refNoteText,item:o,heightEmpty:34,heightValue:150,onValueSet:this.onNoteValueSet,onKeyDown:this.onKeyDownNote,tabIndex:Y++,shouldSave:!n})),_.a.createElement("div",{className:"detailsSection flexbox"},_.a.createElement("div",{className:"c-foreground-faded"},"Options"),_.a.createElement("span",{className:"itemDetailOption c-border pointer",onClick:this.onClickStar},_.a.createElement("span",{className:"c-foreground-super-faded"},"Star:"),_.a.createElement("i",{className:y.default.classNames("starButton icon-star c-foreground-super-faded",{selected:m})})),_.a.createElement("span",{className:"itemDetailOption c-border"},_.a.createElement("span",{className:"c-foreground-super-faded"},"Priority:"),_.a.createElement("span",{className:y.default.classNames("searchPriority searchP0",{selected:p===v.a.VMLIFlag.P0}),onClick:this.setPriority.bind(this,v.a.VMLIFlag.P0)}),_.a.createElement("span",{className:y.default.classNames("searchPriority searchP1",{selected:p===v.a.VMLIFlag.P1}),onClick:this.setPriority.bind(this,v.a.VMLIFlag.P1)}),_.a.createElement("span",{className:y.default.classNames("searchPriority searchP2",{selected:p===v.a.VMLIFlag.P2}),onClick:this.setPriority.bind(this,v.a.VMLIFlag.P2)}))),n&&(R||s.options)&&_.a.createElement("div",{className:"detailsSection"},L&&_.a.createElement(P.a,{key:"addLocal",initialChecked:u,ref:this.refCheckAddLocal,onChange:this.onChangeAddLocal,disabled:!L,tabIndex:L?Y++:void 0},"Add to document"),L&&_.a.createElement(P.a,{key:"addToCalendar",initialChecked:d,ref:this.refCheckAddCalendar,onChange:this.onChangeAddToCalendar,disabled:!L,tabIndex:L?Y++:void 0},"Add to Google Calendar"),s.options&&s.options.map((function(e){return _.a.createElement(P.a,{key:e.text,initialChecked:e.value,ref:e.text,tabIndex:Y++},e.text)}))),(L||F)&&this.renderCalendarSelector(),e&&_.a.createElement("div",{className:"detailsSection"},_.a.createElement("div",{className:"c-foreground-faded"},"Subitems"),_.a.createElement("div",{className:"children c-border"},e)),n&&_.a.createElement("div",{className:"bottomRow flexbox"},_.a.createElement(O.a,{onClick:this.onEscape},"CANCEL"),_.a.createElement(O.a,{primary:!0,marginLeft:8,onClick:this.save,tabIndex:Y++,ref:this.refSave},"SAVE")),_.a.createElement(T,{component:this,target:"item",tabIndex:Y++}))}}]),n}(k.a);t.default=L},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(61),i=n.n(o),l=n(0),s=n(3),c=n(4),u=n(15),d=n(21);var f=function(e,t){var n=Object(s.useRef)();n.current||(n.current=null===e||void 0===e?void 0:e.listen(t)),Object(s.useEffect)((function(){return function(){var e;null===(e=n.current)||void 0===e||e.dispose(),n.current=void 0}}),[])},p=n(20),m=n(65),h=n(167);t.default=Object(d.b)((function(e){var t=e.pane,n=e.componentName,a=e.isAddPane,o=i()(e,["pane","componentName","isAddPane"]),d=s.useRef(),g=function(){c.default.menus.isContextMenuOpen(n)&&c.default.menus.closeContextMenu(n)};t&&f(t.onDestroyed,g);var y=function(){if(a){var e=d.current.getCreationProps(),t=e.pane,n=e.type;n?c.default.PaneManager.addPaneByButton(n):(t.setDocument(u.a.getDefaultDocument(),{forLoad:!0}),c.default.PaneManager.addPaneAtIndex(t)),c.default.onIntroAction("AddPane"),l.default.sendEvent("Menu","AddPane_"+n)}g()};return s.createElement(m.a,r()({},o,{id:"contextMenuPaneView",key:"contextMenuPaneView"+a,maxWidth:500,minWidth:0}),s.createElement(h.a,{pane:t,isAddPane:a,supportHotkeys:!0,onSelected:y,ref:d}),a&&s.createElement("div",{className:"center"},s.createElement(p.a,{className:"addButton",raised:!0,primary:!0,width:240,onClick:y},"Add Pane (Enter)")))}))},function(e,t,n){"use strict";n.r(t);var a=n(54),r=n.n(a),o=n(7),i=n.n(o),l=n(8),s=n.n(l),c=n(17),u=n.n(c),d=n(18),f=n.n(d),p=n(9),m=n.n(p),h=n(0),g=n(1),y=n(4),v=n(3),E=n(34),C=n(55),b=n(70),_=n(152),k=n(327);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var x=function(e){u()(n,e);var t=w(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"init",value:function(){this.DISABLE_LISTENER_ASSERT=!0}},{key:"getState",value:function(e){for(var t=0,n=e.pane,a=n.search,r={hasFilter:!1,showHelp:y.default.settings.shouldShowHelp("searchHelp"),viewState:n.viewState,viewMode:n.getViewMode(),sortModeBlocks:n.supportsSortBlocks()&&n.getSortModeBlocks(),sortModeItems:n.supportsSortItems()&&n.getSortModeItems(),calendars:b.a.GCalendarsAvailable,displayCalendars:n.displayCalendars,displayLocalItems:n.displayLocalItems,closedHelps:y.default.settings.closedHelps},o=0;o<a.filters.length;o++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var i=a.filters[o];r[i.name]=i.value,r[i.name+"Enabled"]=i.enabled,0!==i.value.get()&&(r.hasFilter=!0)}return r}},{key:"onMount",value:function(){this.listenTo(this.props.pane.search.onChanged)}},{key:"componentWillReceiveProps",value:function(e){e.pane!==this.props.pane&&(this.refreshListeners(e),this.updateState(e))}},{key:"onClickSelectCalendars",value:function(e){y.default.menus.openContextMenu({componentName:"ReactContextMenuCalendars",element:e.target,pane:this.props.pane})}},{key:"saveScrollOfTop",value:function(){this.props.pane}},{key:"onToggleButton",value:function(e){this.saveScrollOfTop(),this.props.pane.search.toggleFilter(e)}},{key:"setPriority",value:function(e){this.saveScrollOfTop();var t=this.props.pane.search;t.getFilterValue("priority")===e&&(e=0),t.setFilter("priority",e)}},{key:"onClickCloseHelp",value:function(){y.default.settings.closeHelp("searchHelp")}},{key:"onClickShowHelp",value:function(){y.default.settings.uncloseHelp("searchHelp")}},{key:"renderSearchButton",value:function(e){var t=this.props.pane,n="showOnlyMatches"===e.name&&t.isViewFlatList()?1:e.value.get();return v.createElement(_.a,{key:e.name,filter:e,filterValue:n,search:t.search,hasBorder:!0})}},{key:"renderSearchPriority",value:function(){var e=this.props.pane.search.filter_priority.value.get(),t=h.default.classNames("searchPriorities c-border-light",{hasSelected:!!e}),n=h.default.classNames("searchPriority searchP0",{selected:e===g.a.VMLIFlag.P0}),a=h.default.classNames("searchPriority searchP1",{selected:e===g.a.VMLIFlag.P1}),r=h.default.classNames("searchPriority searchP2",{selected:e===g.a.VMLIFlag.P2});return v.createElement("span",{key:"priority",className:t},v.createElement("span",{className:n,"data-tooltip":"Show only high priority",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P0)}),v.createElement("span",{className:a,"data-tooltip":"Show medium priority and higher",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P1)}),v.createElement("span",{className:r,"data-tooltip":"Show low priority and higher",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P2)}))}},{key:"render",value:function(){for(var e=0,t=this.state,n=this.props.pane,a=n.search,r=t.showHelp,o=[],i=[],l=h.default.classNames("filterSection flexbox",{showHelp:r}),s=0;s<a.filters.length;s++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var c=a.filters[s];c.enabled.get()&&(c.isOption?c.hideInView||i.push(this.renderSearchButton(c)):c.icon?o.push(this.renderSearchButton(c)):"priority"===c.name&&o.push(this.renderSearchPriority()))}if(n.isViewDates()){var u=n.isCalFilterActive(),d=h.default.classNames("buttonCalendars searchButton icon-calendar c-border-light c-button",{selected:u});i.push(v.createElement("div",{key:"calendars",className:d,onClick:this.onClickSelectCalendars,"data-tooltip":"Select calendars to display in this pane"}))}return v.createElement("div",{className:l},o.length>0&&v.createElement("div",null,v.createElement("div",{className:"searchFilters c-border-light"},o)),i.length>0&&v.createElement("div",null,v.createElement("div",{className:"searchFilters c-border-light"},i)))}}]),n}(E.a),D=n(20),S=n(65),M=n(91);function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var P=function(e){u()(n,e);var t=T(n);function n(){return i()(this,n),t.apply(this,arguments)}return s()(n,[{key:"getState",value:function(){var e=0,t=this.props.pane,n=t.search,a={closedHelps:y.default.settings.closedHelps,hasFilter:!1,matches:C.a.matches,showHelp:y.default.settings.shouldShowHelp("searchHelp"),viewState:t.viewState,viewMode:t.getViewMode()};t.isViewDates()&&(a.calendars=b.a.GCalendarsAvailable,a.displayCalendars=t.displayCalendars,a.displayLocalItems=t.displayLocalItems);for(var r=0;r<n.filters.length;r++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var o=n.filters[r];a[o.name]=o.value,a[o.name+"Enabled"]=o.enabled,0!==o.value.get()&&(a.hasFilter=!0)}return a}},{key:"onMount",value:function(){this.listenTo(this.props.pane.search.onChanged),this.props.pane.onDestroyed.listen(this.close)}},{key:"onUnmount",value:function(){C.a.onClosed(),this.props.pane.onDestroyed.unlisten(this.close)}},{key:"close",value:function(){y.default.menus.isContextMenuOpen("ReactContextMenuSearch")&&y.default.menus.closeContextMenu("ReactContextMenuSearch")}},{key:"onSettingChanged",value:function(){this.updateState()}},{key:"onClickSelectCalendars",value:function(e){y.default.menus.openContextMenu({componentName:"ReactContextMenuCalendars",element:e.target,pane:this.props.pane})}},{key:"saveScrollOfTop",value:function(){this.props.pane}},{key:"onToggleButton",value:function(e){this.saveScrollOfTop(),this.props.pane.search.toggleFilter(e)}},{key:"setPriority",value:function(e){this.saveScrollOfTop();var t=this.props.pane.search;t.getFilterValue("priority")===e&&(e=0),t.setFilter("priority",e)}},{key:"onClickToggleHelp",value:function(){this.state.showHelp?y.default.settings.closeHelp("searchHelp"):y.default.settings.uncloseHelp("searchHelp")}},{key:"renderSearchButton",value:function(e){var t=this.props.pane;return v.createElement(_.a,{key:e.name,filter:e,filterValue:e.value.get(),search:t.search,hasBorder:!0})}},{key:"renderSearchPriority",value:function(){var e=this.props.pane.search.filter_priority.value.get(),t=h.default.classNames("searchPriorities",{hasSelected:!!e}),n=h.default.classNames("searchPriority searchP0",{selected:e===g.a.VMLIFlag.P0}),a=h.default.classNames("searchPriority searchP1",{selected:e===g.a.VMLIFlag.P1}),r=h.default.classNames("searchPriority searchP2",{selected:e===g.a.VMLIFlag.P2});return v.createElement("span",{key:"priority",className:t},v.createElement("span",{className:n,"data-tooltip":"Show only high priority",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P0)}),v.createElement("span",{className:a,"data-tooltip":"Show medium priority and higher",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P1)}),v.createElement("span",{className:r,"data-tooltip":"Show low priority and higher",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P2)}))}},{key:"render",value:function(){for(var e=0,t=this.props,n=this.props.pane,a=this.state,o=n.search,i=[],l=[],s=0;s<o.filters.length;s++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var c=o.filters[s];c.enabled.get()&&(c.isOption?l.push(this.renderSearchButton(c)):c.icon?i.push(this.renderSearchButton(c)):"priority"===c.name&&i.push(this.renderSearchPriority()))}if(n.isViewDates()){var u=n.isCalFilterActive(),d=h.default.classNames("buttonCalendars",{selected:u});l.push(v.createElement(D.a,{key:"calendars",height:g.a.SearchHeight,className:d,onClick:this.onClickSelectCalendars,padding:8,tooltip:"Select calendars to display in this pane"},"Calendars"))}return v.createElement("div",null,v.createElement(S.a,r()({},t,{key:"contextMenuSearch"+n.id,id:"contextMenuSearch",maxHeight:400,element:t.element}),a.matches.length>0&&v.createElement(k.default,{onlyMatches:!0,matches:a.matches}),0===a.matches.length&&v.createElement("div",{className:"flexbox"},!1!==t.showFilters&&v.createElement(x,{pane:n}),v.createElement("div",{className:"f1"}),v.createElement(D.a,{className:"searchHelpButton",icon:"icon-question",iconSize:12,width:32,height:32,color:a.showHelp?g.a.ColorBrand:void 0,onClick:this.onClickToggleHelp}))),a.showHelp&&v.createElement(S.a,r()({},t,{key:"contextMenuSearchHelp"+n.id,id:"contextMenuSearchHelp",maxHeight:500,element:t.element,positionOffset:{top:40}}),v.createElement("div",{className:"rel"},v.createElement(M.a,null,"Hints"),v.createElement(D.a,{className:"searchHintsClose",icon:"icon-close",iconSize:14,width:36,height:28,onClick:this.onClickToggleHelp}),v.createElement("div",{className:"searchHints c-foreground-light"},v.createElement("div",null,v.createElement("span",null,"-",v.createElement("b",null,"word")),"hide items including ",v.createElement("b",null,"word")),v.createElement("div",null,v.createElement("span",null,v.createElement("b",null,"a")," or ",v.createElement("b",null,"b")),"show items matching ",v.createElement("b",null,"a")," or ",v.createElement("b",null,"b")),v.createElement("div",null,v.createElement("span",null,"#",v.createElement("b",null,"tag")),"show items with #",v.createElement("b",null,"tag")),v.createElement("div",null,v.createElement("span",null,"+",v.createElement("b",null,"name")),"show items with +",v.createElement("b",null,"name")),v.createElement("div",null,v.createElement("span",null,"date:",v.createElement("b",null,"date")),"show items on ",v.createElement("b",null,"date")),v.createElement("div",null,v.createElement("span",null,"date:today+",v.createElement("b",null,"num")),"show items ",v.createElement("b",null,"num")," days in the future"),v.createElement("div",null,v.createElement("span",null,"before:",v.createElement("b",null,"date")),"show items before ",v.createElement("b",null,"date")),v.createElement("div",null,v.createElement("span",null,"after:",v.createElement("b",null,"date")),"show items after ",v.createElement("b",null,"date")),v.createElement("div",null,v.createElement("span",null,"between:",v.createElement("b",null,"date1,date2")),"show items between ",v.createElement("b",null,"date1")," and ",v.createElement("b",null,"date2")),v.createElement("div",null,v.createElement("span",null,"date:overdue"),"show overdue items"),v.createElement("div",null,v.createElement("span",null,"date:any"),"show items with a date"),v.createElement("div",null,v.createElement("span",null,"date:none"),"show items with no date"),v.createElement("div",null,v.createElement("span",null,g.a.Prefix.Header," or ",g.a.Prefix.Header2),"show project items"),v.createElement("div",null,v.createElement("span",null,g.a.Prefix.Task),"show task items"),v.createElement("div",null,v.createElement("span",null,g.a.Prefix.Bullet),"show bullet items"),v.createElement("div",null,v.createElement("span",null,g.a.SearchFilterTexts.Star),"show starred items"),v.createElement("div",null,v.createElement("span",null,g.a.SearchFilterTexts.Pri2," or ",g.a.SearchFilterTexts.Pri1," or ",g.a.SearchFilterTexts.Pri0),"show priority items"),v.createElement("div",null,v.createElement("span",null,'"',v.createElement("b",null,"word1 word2"),'"'),"show the phrase ",v.createElement("b",null,'"word1 word2"')),v.createElement("div",null,v.createElement("span",null,g.a.PrefixItemAutocomplete,v.createElement("b",null,"item")),"zoom into ",v.createElement("b",null,"item"))))))}}]),n}(E.a);t.default=P},,function(e,t,n){"use strict";n.r(t);var a=n(19),r=n.n(a),o=n(1),i=n(0),l=n(3),s=n.n(l),c=n(4),u=n(21),d=n(24),f={},p=o.a.Modals;f[p.Lightbox]=n(363),f[p.Prompt]=n(364),f[p.Settings]=n(464),f[p.Alert]=n(370),f[p.Billing]=n(371),f[p.Confirm]=n(372),f[p.Options]=n(373),f[p.ExportData]=n(374),f[p.ImportData]=n(375),f[p.Backups]=n(376),f[p.ReportProblem]=n(377),f[p.DeleteAccount]=n(378),f[p.Invoices]=n(379),f[p.ShareDoc]=n(380),f[p.ReportBug]=n(381),f[p.EnterCode]=n(382),f[p.ConfirmEncrypt]=n(383),f[p.ModalPane]=n(384),f[p.ErrorCookies]=n(385),f[p.CreateTemplate]=n(466);var m=f;t.default=Object(u.b)((function(){var e=Object(d.a)(c.default.menus.modalStack),t=r()(e,1)[0],n=i.default.classNames("modals",{none:0===t.length});return s.a.createElement("div",{className:n},t.map((function(e){return s.a.createElement(m[e.id].default,Object.assign({key:e.id},e))})))}),(function(){return c.default.menus.modalStack.clear()}))},function(e,t,n){"use strict";n.r(t);var a=n(19),r=n.n(a),o=n(0),i=n(3),l=n.n(i),s=n(4),c=n(21),u=n(24),d={ReactAutocomplete:n(327),ReactContextMenuOverviewOptions:n(386),ReactContextMenuGmailSort:n(387),ReactContextMenuSearch:n(469),ReactContextMenuCalendars:n(388),ReactContextMenuInsertLink:n(389),ReactContextMenuContactDetails:n(390),ReactNotePopup:n(391),ReactItemDetailsPopup:n(467),ReactContextMenuEmailDetails:n(392),ReactContextMenuItem:n(393),ReactContextMenuOnlineStatus:n(394),ReactContextMenuShare:n(395),ReactContextMenuOptions:n(396),ReactContextMenuUpsell:n(397),ReactContextMenuDropZone:n(398),ReactContextMenuDate:n(465),ReactContextMenuDocumentPassword:n(460),ReactContextMenuPaneView:n(468),ReactContextMenuSlashHelp:n(461),ReactContextMenuInboxItem:n(462)};t.default=Object(c.b)((function(){for(var e=0,t=Object(u.a)(s.default.menus.contextMenuStack),n=r()(t,1)[0],a=function(e){var t=s.default.menus.getTopContextMenu();t&&s.default.menus.closeContextMenu(t),o.default.preventAndStop(e)},i=[],c=0;c<n.length;c++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var f=n[c];if(f.noBackdrop||i.push(l.a.createElement("div",{key:"backdrop_"+c,className:"contextMenusBackdrop",onMouseDown:a})),f.fn)i.push(f.fn(f));else if(f.componentName){f.key=f.key||f.componentName,f.id=f.id||f.key;var p=d[f.componentName].default;i.push(l.a.createElement(p,f))}}var m=o.default.classNames("contextMenusReact",{open:i.length>0},{takeClick:i.length>0&&!f.noBackdrop},{none:0===i.length});return l.a.createElement("div",{className:m},i)}),(function(){return s.default.menus.contextMenuStack.clear()}))}])]);

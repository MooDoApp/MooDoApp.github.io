(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{787:function(e,t,a){"use strict";var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(3),f=a(2),g=a.n(f),v=a(21),y=a(75),k=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"close",value:function(e){this.props.onClose&&this.props.onClose(),p.default.menus.closeModal(this.props.modalID,e)}},{key:"onCloseButton",value:function(e){this.props.onCloseButton?this.props.onCloseButton():this.close()}},{key:"onEscapeKey",value:function(){this.props.noCancel||this.close()}},{key:"render",value:function(){var e,t=this.props,a=this.getChildByKey("sidebar"),n=this.getChildByKey("content"),i=this.getChildByKey("buttons"),r={maxHeight:t.height?"85%":null},l=h.default.classNames("fancyModal c-bg-app popup c-shadow-popup",t.className,{small:t.small},{hasSidebar:!!a},{hasButtons:!!i}),o=h.default.classNames("fancyModalWrapper",{"small flexbox":t.small}),s=h.default.classNames("fancyModalContent c-border c-background f1",n.props.className),c=g.a.createElement(t.scrollable?y.a:"div",{className:s},n.props.children||n);if(t.small||(r.width=t.width,r.height=t.height,r.minWidth=t.minWidth),a){var u={width:t.sidebarWidth||180};e=g.a.createElement("div",{className:"fancyModalSidebar",style:u},a.props.children)}return g.a.createElement("span",{className:o},!t.noBackdrop&&g.a.createElement("div",{className:"fancyModalBackdrop",onClick:!1!==t.backdropClose?this.close.bind(this,!1):void 0}),g.a.createElement("div",{className:l,style:r,id:t.id},g.a.createElement("div",{className:"fancyModalInside flexbox flex1"},e,g.a.createElement("div",{className:"fancyModalContentArea c-border-light c-background flexbox flexvert f1"},c,i&&g.a.createElement("div",{className:h.default.classNames("fancyModalButtons c-background")},i)))))}}]),t}(v.a);t.a=k},788:function(e,t,a){"use strict";var n=a(68),i=a.n(n),r=a(81),l=a.n(r),o=a(5),s=a.n(o),c=a(6),u=a.n(c),d=a(10),m=a.n(d),h=a(9),p=a.n(h),f=a(11),g=a.n(f),v=a(0),y=a(2),k=a.n(y),E=function(e){function t(){return s()(this,t),m()(this,p()(t).apply(this,arguments))}return g()(t,e),u()(t,[{key:"getValue",value:function(){return this.refs.select.value}},{key:"setValue",value:function(e){this.refs.select.value=e}},{key:"onChange",value:function(e){this.props.onChange&&this.props.onChange(this.getValue())}},{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.className,n=e.children,r=l()(e,["onChange","className","children"]),o=v.default.classNames(a,"fancySelect c-background c-border");return k.a.createElement("select",i()({},r,{className:o,ref:"select",onChange:t?this.onChange:void 0}),n)}}]),t}(a(21).a);t.a=E},789:function(e,t,a){"use strict";var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(2),f=a.n(p),g=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"render",value:function(){var e=h.default.classNames("fancyTable c-border-heavy",this.props.className);return f.a.createElement("div",{className:e,id:this.props.id},this.props.children)}}]),t}(a(21).a);t.a=g},790:function(e,t,a){"use strict";var n=a(68),i=a.n(n),r=a(81),l=a.n(r),o=a(5),s=a.n(o),c=a(6),u=a.n(c),d=a(10),m=a.n(d),h=a(9),p=a.n(h),f=a(11),g=a.n(f),v=a(0),y=a(2),k=a.n(y),E=a(88),C=function(e){function t(){return s()(this,t),m()(this,p()(t).apply(this,arguments))}return g()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.header,a=(e.clickable,e.subtext,l()(e,["header","clickable","subtext"])),n=v.default.classNames("fancyListItem",{"header c-foreground-very-faded":e.header},{clickable:!e.header&&!1!==e.clickable},{"selected c-background c-border-light":e.selected},{subtext:e.subtext},e.className);return!1!==e.ripple&&!t&&!1!==e.clickable?k.a.createElement(E.a,i()({},a,{className:n}),e.children):k.a.createElement("div",i()({},a,{className:n}),this.props.children)}}]),t}(a(21).a);t.a=C},791:function(e,t,a){"use strict";var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(2),f=a.n(p),g=a(21),v=a(45),y=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.createObservables({isFocused:this.props.focused||!1})}},{key:"onMount",value:function(){var e=this,t=this.refs.input;this.props.value&&(t.value=this.props.value),this.props.focused&&requestAnimationFrame(function(){t&&(t.focus(),void 0!==e.props.selectionStart&&(t.selectionStart=e.props.selectionStart),void 0!==e.props.selectionEnd&&(t.selectionEnd=e.props.selectionEnd),t.scrollTop=0)})}},{key:"onUnmount",value:function(){this.isFocused.get()&&this.onBlur()}},{key:"focus",value:function(){this.refs.input.focus()}},{key:"blur",value:function(){this.refs.input.blur()}},{key:"getValue",value:function(){return this.refs.input.value}},{key:"setValue",value:function(e){this.refs.input.value=e}},{key:"getSelectionStart",value:function(){return this.refs.input.selectionStart}},{key:"getSelectionEnd",value:function(){return this.refs.input.selectionEnd}},{key:"onFocus",value:function(e){h.default.activeInput.set(this),this.isFocused.set(!0),this.props.onEscape&&(this.__hotkeyEscape=v.a.pushStackEscape(this.handleEscapeKey)),this.props.onFocus&&this.props.onFocus(e)}},{key:"onBlur",value:function(e){h.default.activeInput.set(null),this.isFocused.set(!1),this.__hotkeyEscape&&(v.a.popStack(this.__hotkeyEscape),this.__hotkeyEscape=void 0),this.props.onBlur&&this.props.onBlur(e)}},{key:"onKeyPress",value:function(e){this.props.onKeyPress&&this.props.onKeyPress(e)}},{key:"handleEscapeKey",value:function(){this.props.onEscape&&this.props.onEscape()}},{key:"render",value:function(){var e=this.props,t=h.default.classNames("fancyTextarea c-background c-foreground",e.className),a=!!e.spellCheck||null,n={fontSize:e.fontSize,height:e.height||150,margin:void 0!==e.margin?e.margin:"16px 0",overflow:e.height<=34&&"hidden"};return f.a.createElement("textarea",{className:t,style:n,ref:"input",readOnly:!!e.isReadOnly,spellCheck:a,onClick:e.onClick,onChange:e.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:e.onKeyDown,onKeyPress:e.onKeyPress,placeholder:e.placeholder,tabIndex:e.tabIndex})}}]),t}(g.a);t.a=y},792:function(e,t,a){"use strict";var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(3),f=a(2),g=a.n(f),v=a(21),y=a(27),k=a(20),E=a(63),C=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.refInputEmails=g.a.createRef()}},{key:"getState",value:function(){var e=p.default.billingManager;return{validBilling:e._hasValidBillingData,premiumStatus:e._premiumStatus,inviteEmailSuccess:e.inviteEmailSuccess,inviteEmailError:e.inviteEmailError,inviteCodeError:e.inviteCodeError}}},{key:"onTapInviteUrl",value:function(e){var t=e.target;t!==document.activeElement&&(y.default.selectElement(t),e.preventDefault(),h.default.sendEvent("Billing","TapInviteUrl"))}},{key:"inviteEmails",value:function(){for(var e=0,t=this.refInputEmails.current.getTokens(),a=[],n=0;n<t.length;n++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;a.push(t[n].email)}p.default.billingManager.sendInviteEmail(a)}},{key:"render",value:function(){var e=p.default.billingManager,t=this.state;return g.a.createElement("span",{className:"new-modal-group"},g.a.createElement("div",{className:"new-modal-title"},g.a.createElement("div",{className:"title"},"Share Moo.do with your friends"),g.a.createElement("div",{className:"subtext center"},"Thank you for spreading the ",g.a.createElement("i",{className:"icon-heart red"}))),g.a.createElement("div",{className:"new-modal-center"},g.a.createElement("div",null,g.a.createElement("div",{className:"subtitle"},"Social"),g.a.createElement("span",{className:"shareIcons"},g.a.createElement(k.a,{iconSize:22,icon:"icon-twitter",tooltip:"@MooDoApp",onClick:e.shareTwitter.bind(e)}),g.a.createElement(k.a,{iconSize:22,marginLeft:16,marginRight:16,icon:"icon-facebook",tooltip:"@MooDoApp",onClick:e.shareFacebook.bind(e)}),g.a.createElement(k.a,{iconSize:22,icon:"icon-google-plus",tooltip:"@MooDoApp",onClick:e.shareGoogle.bind(e)})),g.a.createElement("br",null),g.a.createElement("br",null),g.a.createElement("div",{className:"subtitle"},"Share Link"),g.a.createElement("div",{className:"subtext"},e.getSelectText()),g.a.createElement(E.a,{display:"inline-block",width:280,height:36,value:e.getInviteUrl(),onMouseDown:this.onTapInviteUrl,readonly:!0}),g.a.createElement("br",null),g.a.createElement("br",null),g.a.createElement("div",{className:"subtitle"},"Share by email"),g.a.createElement("div",{className:"subtext"},"Separate multiple email addresses with commas."),g.a.createElement(E.a,{ref:this.refInputEmails,width:350,buttonWidth:70,height:36,autocompleteMode:"email",placeholder:"Add friends' email addresses",buttonText:"SEND",onButtonClick:this.inviteEmails}),(t.inviteEmailSuccess||t.inviteEmailError)&&g.a.createElement("div",{id:"inviteEmailMessage",className:h.default.classNames({success:t.inviteEmailSuccess},{error:t.inviteEmailError})},t.inviteEmailSuccess||t.inviteEmailError))))}}]),t}(v.a);t.a=C},793:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(1),f=a(3),g=a(2),v=a.n(g),y=a(87),k=a.n(y),E=a(21),C=a(53),b=a(107),S=a(794),x=a(20),w=a(63),N=a(75),M=a(57),D=a(44),P=a(788),I=a(19),T=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){var e=this.props;this.createObservables({selectedIndex:e.elementInput||e.fromPane||e.onlyMatches?0:-1,expanded:-1,selectedDocument:I.a.getDefaultDocument()})}},{key:"onMount",value:function(){if(this.hasOwnInput()){var e=this.props,t=this.refs.input;t&&(t.focus(),t.updateAutocomplete(e.item||e.items&&e.items[0]))}document.addEventListener("keydown",this.onInputKeyDown,!0)}},{key:"componentWillReceiveProps",value:function(e){this.props.matches!==e.matches&&this.updateState(e)}},{key:"onUnmount",value:function(){document.removeEventListener("keydown",this.onInputKeyDown,!0)}},{key:"onBeforeChanged",value:function(e,t){var a=this.refs;if(e.matches!==t.matches&&!e.hasSpecialMatches){this.expanded.set(-1,!1),e.expanded=-1;var n=!a.input||!this.props.allowCustom&&a.input.getValue()&&this.state.matches.length>0?0:-1;this.selectedIndex.set(n,!1),e.selectedIndex=n}}},{key:"onAfterChanged",value:function(e,t){e.matches.length>t.matches.length&&setTimeout(function(){this.refs.contextMenu&&this.refs.contextMenu.updateState()}.bind(this),0)}},{key:"getState",value:function(e){var t=this.getSpecialMatches();return{matches:e.matches||t||C.a.matches,hasSpecialMatches:!!t,owner:C.a.owner}}},{key:"updateTextFromIndex",value:function(){if(this.hasOwnInput()){var e=this.refs.input,t=this.selectedIndex.get(),a="";if(t>=0){var n=this.state.matches[t];a=this.getInsertText(n)}e.setValue(a),e.selectEnd()}}},{key:"onInputKeyDown",value:function(e){var t=this.state,a=this.props;if(a.allowCustom&&e.keyCode===p.a.KeyCode.Enter)this.onSelected(),h.default.preventDefault(e),h.default.stopPropagation(e);else if(t.matches.length>0){var n=this.selectedIndex.get();if(t.matches.length>1&&(e.keyCode===p.a.KeyCode.DownArrow||e.keyCode===p.a.KeyCode.UpArrow)){if(e.keyCode===p.a.KeyCode.UpArrow?--n<(a.allowCustom?-1:0)&&(n=t.matches.length-1):e.keyCode===p.a.KeyCode.DownArrow&&++n>t.matches.length-1&&(n=a.allowCustom?-1:0),n!==this.selectedIndex.get()&&(this.selectedIndex.set(n),this.updateTextFromIndex(),n>=0)){var i=this.refs["item_"+this.selectedIndex.get()];try{h.default.PAssert(654,i,"Item must exist in autocomplete to be scrolled to")}catch(l){h.default.reportError(l)}if(i){var r=k.a.findDOMNode(i);h.default.scrollIntoView(r,p.a.ScrollDuration.Default)}}h.default.preventDefault(e)}else e.keyCode===p.a.KeyCode.RightArrow?this.expanded.set(n):e.keyCode===p.a.KeyCode.Enter&&n>=0&&(this.onSelected(),h.default.preventDefault(e),h.default.stopPropagation(e))}}},{key:"onEscapeKey",value:function(){this.hide()}},{key:"hide",value:function(){C.a.hide()}},{key:"onMouseOver",value:function(e){this.selectedIndex.set(e)}},{key:"onClick",value:function(e){this.selectedIndex.set(e),this.updateTextFromIndex(),this.onSelected()}},{key:"onButtonClick",value:function(){this.onSelected()}},{key:"hasOwnInput",value:function(){return!this.props.elementInput&&!this.props.fromPane&&!this.props.onlyMatches}},{key:"onSelected",value:function(){var e,t,a=this.props,n=this.state,i=this.refs.input,r={owner:n.owner,index:a.indexInPane};if(a.allowCustom)(a.allowEmpty||i.getValue())&&(t={text:i.getValue()});else{var l=this.selectedIndex.get();t=this.state.matches[l]}t&&("contact"===t.type&&"email"===this.props.mode?(e=C.a.insertMatch(""),r.token=t):"item"===t.type?(e=C.a.insertMatch(""),r.item=t.item):e=C.a.insertMatch(this.getInsertText(t)),e&&(r.value=e.text,r.offset=e.offset),a.onSelected?a.onSelected(r):n.owner&&n.owner.onAutocompleteSelected&&n.owner.onAutocompleteSelected(r),this.hide())}},{key:"getInsertText",value:function(e){return"email"===this.props.mode?e.text+" <"+e.email+">":"snooze"===e.type?e.insertText:e.text}},{key:"insertHighlight",value:function(e){var t=[],a=C.a.getText(),n=e.toUpperCase().indexOf(a.toUpperCase());return n>=0&&a.length>0?(n>0&&t.push(e.substr(0,n)),t.push(v.a.createElement("span",{key:"match",className:"ac-match c-bg-autocomplete-highlight"},e.substr(n,a.length))),e.length>n+a.length&&t.push(e.substr(n+a.length))):t=e,t}},{key:"onClickExpand",value:function(e,t){this.expanded.set(e),t.stopPropagation()}},{key:"onClickExpandedInput",value:function(e){e.stopPropagation()}},{key:"onSelectedAddChild",value:function(){var e=this.props,t=this.state,a=t.expanded,n=t.matches[a];if(e.onSelected){var i={item:n.item,subItemText:this.refs.inputAdd.getValue()};e.onSelected(i)}}},{key:"getSpecialMatches",value:function(){if("snooze"===this.props.mode){var e=new Date,t=e.getHours(),a=e.getDay(),n=e.clone().clearTime().addHours(Math.min(t+3,23+59/60)),i=e.clone().clearTime();t<18?i.addHours(19):i.addHours(Math.min(t+2,23+59/60));var r=e.clone().clearTime();a<6?r.addDays(6-e.getDay()).addHours(9):6===a?r.addDays(1).addHours(9):r.addHours(Math.min(t+3,23+59/60));var l=e.clone().clearTime();a>0?l.addDays(8-e.getDay()).addHours(9):l.addDays(1).addHours(9);var o=e.clone().clearTime().addDays(1).addHours(9),s=e.clone().clearTime().addDays(1).addHours(19);return[{type:"snooze",icon:"icon-access_time",iconColor:"#f30",text:"Later Today",insertText:"Today "+n.toString(f.default.International.getFormat(p.a.DFormat.ShortTime)),date:n,showDay:!1},{type:"snooze",icon:"icon-access_time",iconColor:"#fa0",text:"Tonight",insertText:"Today "+i.toString(f.default.International.getFormat(p.a.DFormat.ShortTime)),date:i,showDay:!1},{type:"snooze",icon:"icon-access_time",iconColor:"#fd0",text:"Tomorrow Morning",insertText:"Tomorrow "+o.toString(f.default.International.getFormat(p.a.DFormat.ShortTime)),date:o,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:"#2a6",text:"Tomorrow Night",insertText:"Tomorrow "+s.toString(f.default.International.getFormat(p.a.DFormat.ShortTime)),date:s,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:h.default.colorBlue,text:"This Weekend",insertText:r.toString(f.default.International.getFormat(p.a.DFormat.NoPadShortDayTime)),date:r,showDay:!0},{type:"snooze",icon:"icon-access_time",iconColor:"#b0d",text:"Next Week",insertText:l.toString(f.default.International.getFormat(p.a.DFormat.NoPadShortDayTime)),date:l,showDay:!0}]}}},{key:"onCloseButton",value:function(){f.default.menus.closeContextMenu()}},{key:"setText",value:function(e){this.refs.input.setValue(e)}},{key:"onAutocompleteDateChange",value:function(e){this.setText(e),this.refs.input.selectEnd()}},{key:"onChangeDocument",value:function(e){this.selectedDocument.set(I.a.getDocumentById(e))}},{key:"renderRightContent",value:function(){var e=this.state;if(e.matches.length>0&&e.selectedIndex>=0){var t,a=e.matches[e.selectedIndex];if("contact"===a.type&&(t=v.a.createElement(S.a,{contact:a})),t)return v.a.createElement("div",{className:"newAutocompleteRightContent c-border"},t)}}},{key:"renderObject",value:function(e,t){var a;switch(e.type){case"contact":if(e.text&&e.email){a=this.insertHighlight(e.text);var n=this.insertHighlight(" <"+e.email+">");return v.a.createElement("span",null,v.a.createElement("span",{className:"contact c-contact"},a),n)}if(e.email)return e.email;if(e.text)return a=this.insertHighlight(e.text),v.a.createElement("span",{className:"contact c-contact"},a);break;case"tag":return a=this.insertHighlight(e.text),v.a.createElement(v.a.Fragment,null,v.a.createElement("span",{className:"tag c-tag"},a),v.a.createElement("span",{className:"number c-foreground-faded"},e.count));case"date":return a=this.insertHighlight(e.text),v.a.createElement("span",{className:"date c-date"},a);case"snooze":var i=(e.showDay?e.date.toString("dddd")+" ":"")+e.date.toString("h:mm tt");return v.a.createElement(v.a.Fragment,null,v.a.createElement("span",{className:"snoozeDate"},e.text),v.a.createElement("span",{className:"snoozeDetail"},i));case"item":var r=e.item,l=h.default.parentTextForItem(r),o=t===this.state.expanded,s=h.default.classNames("autocompleteItem flexbox",{hasParent:!!l},{itemExpanded:o}),c=this.props.mode===p.a.AutocompleteMode.Move;return v.a.createElement("div",{className:s},v.a.createElement("div",{className:"autocompleteItemInside f1"},l&&v.a.createElement("div",{className:"parentPath c-foreground-very-faded"},l),v.a.createElement(b.a,{key:r.id,item:r}),c&&o&&v.a.createElement(w.a,{ref:"inputAdd",placeholder:"Add subitem",buttonText:"MOVE TO CHILD",focused:!0,onButtonClick:this.onSelectedAddChild,onClick:this.onClickExpandedInput})),c&&v.a.createElement(x.a,{icon:o?"icon-angle-down":"icon-angle-right",className:"autocompleteExpand",width:46,height:46,onClick:this.onClickExpand.bind(this,t),tooltip:"Add sub-item"}));case p.a.AutocompleteMode.GmailLabel:return a=this.insertHighlight(e.text),v.a.createElement("span",null,a);default:try{h.default.PAssert(655,!1,"Invalid insert text",e.type)}catch(u){h.default.reportError(u)}}}},{key:"render",value:function(){for(var e=0,t=this.state,a=this.props,n=[],i=0;i<t.matches.length;i++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var r=t.matches[i],l=h.default.classNames("c-border-light autocomplete_"+r.type,{selected:i===t.selectedIndex});n.push(v.a.createElement(D.a,{key:i,ref:"item_"+i,icon:r.icon,iconColor:r.iconColor,className:l,onMouseOver:this.onMouseOver.bind(this,i),canClose:!1,noMouseUp:!0,onClick:this.onClick.bind(this,i)},this.renderObject(r,i)))}var o,s=a.text,c=a.buttonText;this.hasOwnInput()&&(o=!!a.allowEmpty||(a.allowCustom?void 0:t.selectedIndex>=0));var u,d=h.default.classNames("newAutocomplete flexbox",a.className,{flexvert:this.hasOwnInput()},{hasOwnInput:this.hasOwnInput()},{expanded:-1!==t.expanded});if(this.hasOwnInput()){var m=a.documentSelector&&t.selectedDocument.getRootItem()||a.item||a.items&&a.items[0];u=v.a.createElement("div",{className:"newAutocompleteTopBar c-border-heavy"},a.documentSelector&&v.a.createElement("div",{className:"flexbox",style:{padding:8}},v.a.createElement("div",{style:{paddingRight:16}},"Document:"),v.a.createElement(P.a,{className:"f1",defaultValue:t.selectedDocument.id,onChange:this.onChangeDocument},I.a.documentsArray.get().map(function(e){return v.a.createElement("option",{key:e.id,value:e.id},e.text.get())}))),v.a.createElement(w.a,{ref:"input",display:"block",className:"f1",placeholder:s,autocompleteMode:a.mode,padding:{left:16,right:16},tokens:a.tokens,onTokenRemoved:a.onTokenRemoved,border:!1,buttonText:c,onEscape:this.onEscapeKey,buttonEnabled:o,onButtonClick:this.onButtonClick,autocompleteItem:m}))}var p=v.a.createElement(N.a,{className:"autocompleteMatches f1",style:{minWidth:260,maxWidth:320}},n);return a.onlyMatches?p:v.a.createElement(M.a,{className:d,id:a.id,element:a.elementDisplay,maxWidth:"none",positionOffset:a.positionOffset,position:a.position,useElementPosition:!0,overflowHeight:"shrink",ref:"contextMenu"},u,p,this.renderRightContent())}}]),t}(E.a);t.default=T},794:function(e,t,a){"use strict";var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(3),f=a(2),g=a.n(f),v=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"onClickNumber",value:function(e,t){p.default.menus.closeContextMenu(),h.default.openUrl(e.link,t,!0)}},{key:"onClickEmail",value:function(e,t){var a=p.default.pluginManager.getPluginGmail();if(a.isActive()){p.default.menus.closeContextMenu();var n={to:[{text:"",email:e.address}]};p.default.menus.openComposeEmail(a,void 0,void 0,n)}else h.default.openUrl(e.link,t,!0)}},{key:"render",value:function(){var e=this,t=this.props.contact;return g.a.createElement("div",{className:"contactPreview"},g.a.createElement("div",{className:"contactName c-border"},t.text),t.phoneNumbers&&t.phoneNumbers.map(function(t){return g.a.createElement("div",{className:"contactRow contactPhone",key:t.number},g.a.createElement("i",{className:"contactButton icon-phone c-foreground-super-faded"}),g.a.createElement("span",{className:"contactNumber link",onClick:e.onClickNumber.bind(e,t)},t.number),g.a.createElement("span",{className:"phoneType c-foreground-faded"},t.type))}),t.emails&&t.emails.map(function(t){return g.a.createElement("div",{className:"contactRow contactEmail",key:t.address},g.a.createElement("i",{className:"icon-mail_outline contactButton c-foreground-super-faded"}),g.a.createElement("span",{className:"contactEmail link",onClick:e.onClickEmail.bind(e,t)},t.address))}))}}]),t}(a(21).a);t.a=v},795:function(e,t,a){"use strict";var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(1),p=a(3),f=a(2),g=a.n(f),v=a(21),y=a(8),k=a(469),E=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){var e=this.props,t=e.item.hasNote()&&e.item.getNote(),a=t?t.getParsedText():void 0;this.createObservables({hasValue:!!a}),this.refNoteText=g.a.createRef()}},{key:"onUnmount",value:function(){clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=void 0,this._saveNote()}},{key:"getValue",value:function(){return this.refNoteText.current.getValue()}},{key:"_saveNote",value:function(){if(this.props.shouldSave){y.d.beginAction(),p.default.PaneUpdateBatcher.beginUpdateItems();var e=this.props.item,t=e.hasNote()&&e.getNote(),a=this.refNoteText.current.getValue();!t&&a&&(t=e.createNote()),t&&(a!==t.getRawText()&&t.setText(a,h.a.ChangeType.Local),a||e.setNote(void 0,h.a.ChangeType.Local)),p.default.PaneUpdateBatcher.commitUpdateItems(),y.d.endAction()}}},{key:"onChange",value:function(){var e=this,t=this.refNoteText.current.getValue().length>0;t!==this.hasValue.get()&&(this.hasValue.set(t),t&&this.props.onValueSet&&requestAnimationFrame(function(){return e.props.onValueSet})),clearTimeout(this._noteUpdateTimeout),this._noteUpdateTimeout=setTimeout(this._saveNote,8e3)}},{key:"render",value:function(){var e=this.props,t=p.default.DisplaySettings.fontSize(),a=e.item.hasNote()&&e.item.getNote(),n=a?a.getParsedText():void 0,i=a?void 0:"Add note",r=this.state.hasValue?e.heightValue:e.heightEmpty,l=!e.item.canHaveNote();return g.a.createElement(k.a,{ref:this.refNoteText,className:e.className,value:n,placeholder:i,focused:e.focused,onChange:this.onChange,onKeyDown:e.onKeyDown,onKeyPress:e.onKeyPress,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,fontSize:t,margin:0,height:r,tabIndex:e.tabIndex,richText:!!e.richText,onMaximize:e.richText&&e.onMaximize,isMaximized:e.richText&&e.isMaximized,onClickClose:e.onClickClose,isReadOnly:l})}}]),t}(v.a);t.a=E},796:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(1),f=a(7),g=a(2),v=a.n(g),y=a(21),k=a(787),E=a(20),C=a(98),b=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.createObservables({isLoaded:!1,error:!1}),this.refModal=v.a.createRef()}},{key:"onLoaded",value:function(){this.isLoaded.set(!0)}},{key:"onError",value:function(){this.isLoaded.set(!0,!1),this.error.set("Could not load image")}},{key:"openExternal",value:function(){this.props.buttonAction?this.props.buttonAction():h.default.openUrl(this.props.src),this.close()}},{key:"close",value:function(){this.refModal.current.close()}},{key:"render",value:function(){var e=this.props,t=this.state,a=e.src,n={maxWidth:Math.min(.95*f.a.windowWidth(),900),maxHeight:Math.min(.95*f.a.windowHeight()-30,900),visibility:!t.isLoaded&&"hidden"},i=h.default.classNames({loaded:t.isLoaded});return v.a.createElement(k.a,{id:"modalLightbox",className:i,closeButton:!1,scrollable:!1,modalID:p.a.Modals.Lightbox,ref:this.refModal},v.a.createElement("div",{key:"content"},!t.isLoaded&&v.a.createElement(C.a,{center:!0}),!t.error&&v.a.createElement("img",{src:a,style:n,onLoad:this.onLoaded,onError:this.onError,onClick:this.close,ref:"image"}),t.error&&v.a.createElement("div",{className:"lightboxText"},t.error),t.isLoaded&&v.a.createElement(E.a,{id:"lightboxOpen",className:"c-border-heavy",primary:!0,height:30,onClick:this.openExternal},e.buttonText||(f.a.app?"Open in browser":"Open in new tab"))))}}]),t}(y.a);t.default=b},797:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(2),g=a.n(f),v=a(21),y=a(45),k=a(1),E=a(20),C=a(63),b=a(787),S=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){this.refModal=g.a.createRef(),this.refInput=g.a.createRef()}},{key:"getHotkeys",value:function(){return[y.a.create(k.a.KeyCode.Enter,!0,k.a.Primary.Either,k.a.Shift.Either,this.onClickYes)]}},{key:"onClickYes",value:function(){this.refModal.current.close(this.refInput.current.getValue())}},{key:"onClickNo",value:function(){this.refModal.current.close(!1)}},{key:"render",value:function(){return g.a.createElement(b.a,i()({},this.props,{id:"modalPrompt",title:this.props.text,small:!0,scrollable:!1,modalID:k.a.Modals.Prompt,ref:this.refModal}),g.a.createElement("div",{key:"content"},g.a.createElement(C.a,{focused:!0,ref:this.refInput})),g.a.createElement("div",{key:"buttons"},g.a.createElement(E.a,{primary:!0,width:100,onClick:this.onClickYes},"OK"),g.a.createElement(E.a,{width:100,onClick:this.onClickNo},"NO")))}}]),t}(v.a);t.default=S},798:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(2),p=a.n(h),f=a(21),g=a(45),v=a(1),y=a(20),k=a(787),E=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.refModal=p.a.createRef()}},{key:"getHotkeys",value:function(){return[g.a.create(v.a.KeyCode.Enter,!0,v.a.Primary.Either,v.a.Shift.Either,this.onClickButton)]}},{key:"onClickButton",value:function(){this.refModal.current.close()}},{key:"render",value:function(){var e=this.props.actionText||"OKAY";return p.a.createElement(k.a,{id:"modalAlert",closeButton:!1,small:!0,backdropClose:!1,scrollable:!1,modalID:v.a.Modals.Alert,ref:this.refModal},p.a.createElement("div",{key:"content",dangerouslySetInnerHTML:{__html:this.props.text}}),p.a.createElement("div",{key:"buttons"},p.a.createElement(y.a,{primary:!0,onClick:this.onClickButton},e)))}}]),t}(f.a);t.default=E},799:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(1),p=a(0),f=a(3),g=a(2),v=a.n(g),y=a(21),k=a(20),E=a(98),C=a(787),b=a(65),S=null,x=1,w=2,N=3,M=null,D=1,P=2,I=3,T=4,A=5,L=6,F=7,R=8,_=9,O=10,G=["2m4b","gjgm","pmjw","5pm2"],B=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this._braintreeRequested=!1,this._braintreeLoaded=!1,this._clientTokenRequested=!1,this._clientToken=void 0,this._btClient=void 0,this._btIntegration=void 0,this.createObservables({isSubmitting:!1,isLoading:!0,billingFailureCode:S,signupFailureCode:M,signupErrorMessage:void 0}),this._ensureBraintreeLib(),this._ensureClientToken()}},{key:"onUnmount",value:function(){this._btIntegration&&(this._btIntegration.teardown(),this._btIntegration=void 0)}},{key:"_handlePaymentMethodUpdate",value:function(e){this.props.isUpdate?e&&e.nonce?this._processUpdateNonce(void 0,e.nonce):this._processUpdateNonce({error:!0},void 0):e&&e.nonce?this._processPaymentNonce(void 0,e.nonce):this._processPaymentNonce({error:!0},void 0)}},{key:"_notifyDependencyLoaded",value:function(){var e=this;this._braintreeLoaded&&this._clientToken&&(this._btClient=new braintree.api.Client({clientToken:this._clientToken}),braintree.setup(this._clientToken,"dropin",{container:"braintreeDropin",onPaymentMethodReceived:this._handlePaymentMethodUpdate,onError:function(e){p.default.reportError(e)},onReady:function(t){e.isLoading.set(!1),e._btIntegration=t}}))}},{key:"_notifyDependencyLoadError",value:function(e){this.billingFailureCode.set(e),p.default.reportError(new Error("Client hit error in billing: "+e)),f.default.billingManager.setLastSignupError(e),p.default.sendEvent("Billing","SignupError_"+e)}},{key:"_ensureBraintreeLib",value:function(){var e=this;this._braintreeRequested||(window.braintree?(this._braintreeLoaded=!0,this._notifyDependencyLoaded()):(this._braintreeRequested=!0,p.default.addScriptHack("https://js.braintreegateway.com/v2/braintree.js","braintreeScript",function(){window.braintree?(e._braintreeLoaded=!0,e._notifyDependencyLoaded()):(e._braintreeRequested=!1,e._notifyDependencyLoadError(x))},function(){e._braintreeRequested=!1,e._notifyDependencyLoadError(w)})))}},{key:"_ensureClientToken",value:function(){var e=this;this._clientTokenRequested||(this._clientTokenRequested=!0,b.a.getBillingToken().then(function(t){t.value?(e._clientToken=t.value.token,e._notifyDependencyLoaded()):e._notifyDependencyLoadError(N)}))}},{key:"_setPaymentResponse",value:function(e){switch(e.code){case h.a.PrivateAPIErrorCodes.UnauthorizedUser:this.signupFailureCode.set(T),this.signupErrorMessage.set(void 0);break;case h.a.PrivateAPIErrorCodes.InvalidParameter:this.signupFailureCode.set(A),this.signupErrorMessage.set(void 0);break;case h.a.PrivateAPIErrorCodes.MissingParameter:this.signupFailureCode.set(L),this.signupErrorMessage.set(void 0);break;case h.a.PrivateAPIErrorCodes.BraintreePaypalBlock:this.signupFailureCode.set(R),this.signupErrorMessage.set(e.data);break;case h.a.PrivateAPIErrorCodes.BraintreeInvalidCCN:this.signupFailureCode.set(_),this.signupErrorMessage.set(e.data);break;case h.a.PrivateAPIErrorCodes.BraintreeUnknown:this.signupFailureCode.set(F),this.signupErrorMessage.set(e.data);break;case h.a.PrivateAPIErrorCodes.AlreadyPremium:this.signupFailureCode.set(O),this.signupErrorMessage.set('Our database shows you as already being a Premium member. Please contact <a href="mailto:support@moo.do">support@moo.do</a>. Sorry for the trouble!');break;default:this.signupFailureCode.set(I),this.signupErrorMessage.set(void 0)}}},{key:"_processUpdateNonce",value:function(e,t){var a=this;p.default.sendEvent("Billing","PremiumUpdate"),!e&&t&&(this.isSubmitting.get()||(this.isSubmitting.set(!0),b.a.updatePlan({nonce:t}).then(function(e){a.isSubmitting.set(!1),e.error?(void 0!==e.errorCode?a._setPaymentResponse({code:e.errorCode}):a.signupErrorMessage.set(e.error),p.default.sendEvent("Billing","PremiumUpdateFAILURE")):(f.default.menus.isModalOpen(a.id)&&a.onClickClose(),f.default.menus.alert({text:"Your payment information has been updated.",actionText:"OKAY"}),p.default.sendEvent("Billing","PremiumUpdateSUCCESS"))})))}},{key:"_processPaymentNonce",value:function(e,t){var a=this;if(p.default.sendEvent("Billing","PremiumSignup"),!e&&t){this.signupFailureCode.set(M),this.signupErrorMessage.set(void 0);var n=G[f.default.billingManager.getBillingPeriod()];try{p.default.PAssert(945,n,"Must have selected a valid plan to signup")}catch(i){p.default.reportError(i)}n?this.isSubmitting.get()||(this.isSubmitting.set(!0),b.a.purchasePlan({nonce:t,planID:n}).then(function(e){if(a.isSubmitting.set(!1),e.error)void 0!==e.errorCode?a._setPaymentResponse({code:e.errorCode}):a.signupErrorMessage.set(e.error),p.default.sendEvent("Billing","PremiumSignupFAILURE");else{f.default.menus.isModalOpen(a.id)&&a.onClickClose(),f.default.menus.alert({text:"Thank you for signing up for <b>Moo.do</b> Premium!",actionText:"OKAY"}),p.default.sendEvent("Billing","PremiumSignupSUCCESS");var t=p.default.parseInt(f.default.billingManager.getPlanPrice(G.indexOf(n)));p.default.reportAdConversion(h.a.ConversionID.Purchase,t)}})):(this.signupFailureCode.set(P),this.signupErrorMessage.set(void 0),p.default.sendEvent("Billing","PremiumSignupFAILURE"))}else this.signupFailureCode.set(D),this.signupErrorMessage.set(void 0),p.default.sendEvent("Billing","PremiumSignupFAILURE")}},{key:"onClickSubmit",value:function(){this.refs.form.submit()}},{key:"onClickClose",value:function(){this.refs.modal.close()}},{key:"render",value:function(){var e=this.state,t=e.billingFailureCode||e.signupFailureCode?200:400,a=p.default.classNames("billingSubmit loading20 right",{loading:e.isSubmitting},{disabled:e.isLoading}),n=e.signupErrorMessage?e.signupErrorMessage:"There was an error processing your payment. We will follow up with you shortly.";return v.a.createElement(C.a,{id:"modalBilling",title:"Enter Billing Info",width:400,height:t,scrollable:!1,modalID:h.a.Modals.Billing,ref:"modal"},v.a.createElement("div",{key:"content"},!e.billingFailureCode&&!e.signupFailureCode&&v.a.createElement("form",{id:"billingForm",method:"post",action:"javascript:void(0);",ref:"form"},v.a.createElement("div",{id:"braintreeDropin"}),e.isLoading&&v.a.createElement(E.a,{center:!0},"Loading billing system..."),!e.billingFailureCode&&v.a.createElement("div",{className:a},v.a.createElement("input",{type:"submit",className:"new-modal-button mat-button-raised mat-button-blue",value:"SUBMIT"}))),e.signupFailureCode&&v.a.createElement("div",{id:"billingSignupError",dangerouslySetInnerHTML:{__html:n}}),e.billingFailureCode&&v.a.createElement("div",{id:"billingError"},"There was an error loading our payment system. Please contact support@moo.do with code "+e.billingFailureCode+" or try again in a few minutes.")),v.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},e.billingFailureCode&&v.a.createElement(k.a,{primary:!0,onClick:this.onClickClose},"OK")))}}]),t}(y.a);t.default=B},800:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(2),g=a.n(f),v=a(21),y=a(45),k=a(1),E=a(20),C=a(787),b=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){this.refModal=g.a.createRef()}},{key:"getHotkeys",value:function(){return[y.a.create(k.a.KeyCode.Escape,!0,k.a.Primary.Either,k.a.Shift.Either,this.onClickNo),y.a.create(k.a.KeyCode.N,!0,k.a.Primary.Either,k.a.Shift.Either,this.onClickNo),y.a.create(k.a.KeyCode.Enter,!0,k.a.Primary.Either,k.a.Shift.Either,this.onClickYes),y.a.create(k.a.KeyCode.Y,!0,k.a.Primary.Either,k.a.Shift.Either,this.onClickYes)]}},{key:"onClickYes",value:function(){this.refModal.current.close(!0)}},{key:"onClickNo",value:function(){this.refModal.current.close(!1)}},{key:"render",value:function(){return g.a.createElement(C.a,i()({},this.props,{id:"modalConfirm",small:!0,backdropClose:!1,scrollable:!1,closeButton:!1,modalID:k.a.Modals.Confirm,ref:this.refModal}),g.a.createElement("div",{key:"content"},this.props.text),g.a.createElement("div",{key:"buttons"},g.a.createElement(E.a,{primary:!0,width:100,onClick:this.onClickYes},"YES"),g.a.createElement(E.a,{width:100,onClick:this.onClickNo},"NO")))}}]),t}(v.a);t.default=b},801:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(1),g=a(2),v=a.n(g),y=a(21),k=a(20),E=a(787),C=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){this.refModal=v.a.createRef()}},{key:"onClickOption",value:function(e){this.refModal.current.close(e)}},{key:"onClickClose",value:function(){this.refModal.current.close()}},{key:"render",value:function(){var e=this;return v.a.createElement(E.a,i()({},this.props,{id:"modalOptions",title:"Please Choose",small:!0,backdropClose:!1,scrollable:!1,modalID:f.a.Modals.Options,ref:this.refModal}),v.a.createElement("div",{key:"content"},this.props.text),v.a.createElement("div",{key:"buttons"},this.props.options.map(function(t,a){return v.a.createElement(k.a,{key:a,raised:!0,width:120,margin:"0 8px",onClick:e.onClickOption.bind(e,t)},t)}),v.a.createElement(k.a,{cancel:!0,raised:!0,width:100,margin:"0 8px",onClick:this.onClickClose},"Cancel")))}}]),t}(y.a);t.default=C},802:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(1),f=a(19),g=a(7),v=a(2),y=a(21),k=a(27),E=a(20),C=a(790),b=a(80),S=a(787),x=a(788),w=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.createObservables({exportedContent:""}),this.exportArchived=!1,this.includeNotes=!0,this.includePrefixes=!0,this.dataType="json",this.document=f.a.getDocumentsArray()[0]}},{key:"getState",value:function(){return{documents:f.a.documentsArray}}},{key:"onMount",value:function(){this.exportData()}},{key:"exportData",value:function(){var e=this,t=this.document,a=this.exportArchived,n=this.includeNotes;this.includePrefixes;"html"===this.dataType?this.exportedContent.set("HTML export is not ready yet"):"text"===this.dataType?this.exportedContent.set("Text export is not ready yet"):"json"===this.dataType&&t.toJSON({exportArchived:a,includeNotes:n}).then(function(t){e.exportedContent.set(t)})}},{key:"setDataType",value:function(e){this.dataType=e,this.exportData()}},{key:"onChangeArchiveItems",value:function(e){this.exportArchived=e,this.exportData()}},{key:"onChangeIncludePrefixes",value:function(e){this.includePrefixes=e,this.exportData()}},{key:"onChangeIncludeNotes",value:function(e){this.includeNotes=e,this.exportData()}},{key:"onChangeDocument",value:function(e){var t=this.state.documents.find(function(t){return t.id===e});this.document=t,this.exportData()}},{key:"onTapOpen",value:function(){open("url").document.write(this.exportedContent.get())}},{key:"onTapSelect",value:function(){var e=k.default.createSelectionRange();e.selectNodeContents(this.refs.exportedContent),k.default.setSelectionRange(e)}},{key:"onTapSaveExport",value:function(){var e="";"html"===this.dataType?e="html":"text"===this.dataType?e="txt":"json"===this.dataType&&(e="json");try{h.default.saveFile(this.state.exportedContent,"moodo."+e)}catch(t){h.default.reportError(t)}}},{key:"onKeyDown",value:function(e){var t=g.a.getKeyCode(e);(g.a.mac&&e.metaKey||!g.a.mac&&e.ctrlKey)&&t===p.a.KeyCode.A&&this.onTapSelect(),e.preventDefault(),e.stopPropagation()}},{key:"render",value:function(){var e=this.state.documents,t=this.dataType,a=h.default.classNames("exportedContent",t),n=this.state.exportedContent;return v.createElement(S.a,{id:"modalExport",title:"Export Data",width:860,height:900,sidebarWidth:160,modalID:p.a.Modals.ExportData},v.createElement("div",{key:"sidebar"},v.createElement(C.a,{header:!0},"Select document"),v.createElement(x.a,{style:{marginLeft:16,height:32},ref:"selectCalendar",onChange:this.onChangeDocument},e.map(function(e){return v.createElement("option",{key:e.id,value:e.id},e.text.get())})),v.createElement(C.a,{header:!0},"Data Type"),v.createElement(C.a,{selected:"html"===t,onClick:this.setDataType.bind(this,"html")},"HTML"),v.createElement(C.a,{selected:"text"===t,onClick:this.setDataType.bind(this,"text")},"Plain Text"),v.createElement(C.a,{selected:"json"===t,onClick:this.setDataType.bind(this,"json")},"Moo.do Backup (JSON)"),v.createElement(C.a,{header:!0},"Options"),v.createElement(C.a,null,v.createElement(b.a,{checked:this.includePrefixes,onChange:this.onChangeIncludePrefixes},"Include Prefixes")),v.createElement(C.a,null,v.createElement(b.a,{checked:this.includeNotes,onChange:this.onChangeIncludeNotes},"Include Notes")),v.createElement(C.a,null,v.createElement(b.a,{checked:this.exportArchived,onChange:this.onChangeArchiveItems},"Archived Items")),v.createElement(C.a,{header:!0},"Export"),!g.a.app&&v.createElement(E.a,{onClick:this.onTapOpen},"OPEN IN TAB"),v.createElement(E.a,{onClick:this.onTapSelect},"SELECT"),v.createElement(E.a,{onClick:this.onTapSaveExport},"SAVE")),v.createElement("div",{key:"content"},v.createElement("div",{className:a,onKeyDown:this.onKeyDown,contentEditable:!0,dangerouslySetInnerHTML:{__html:n},ref:"exportedContent"})))}}]),t}(y.a);t.default=w},803:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(1),f=a(3),g=a(2),v=a.n(g),y=a(21),k=a(787),E=a(790),C=a(20),b=a(63),S=a(791),x=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){var e=this,t=this.props.importer;a.e(3).then(a.bind(null,834)).then(function(t){var a=t.default;e.importer=new a,e.dimportLoaded.set(!0)}),"GTasks"===t&&(t="Google Tasks"),this.createObservables({isImporting:!1,preloadDisable:0,currentImporter:t||"Moo.do Backup",importMessage:"",dimportLoaded:!1}),this.refWorkflowy=v.a.createRef()}},{key:"getImporterFromName",value:function(e){var t;switch(e){case"Wunderlist":t=this.importer.wunderlist;break;case"Workflowy":t=this.importer.workflowy;break;case"OPML":t=this.importer.opml;break;case"Moo.do Backup":t=this.importer.json;break;case"Google Tasks":t=this.importer.gtasks;break;case"Trello":t=this.importer.trello;break;case"Todoist":t=this.importer.todoist;break;default:try{h.default.PAssert(943,!1,"Must add valid importer: ",e)}catch(a){h.default.reportError(a)}}return t}},{key:"selectImporter",value:function(e){var t=this,a=this.getImporterFromName(e);this.currentImporter.set(e),this.importMessage.set(""),this.isImporting.set(!1),a&&a.preload&&!a.isLoaded&&(this.preloadDisable.set(this.preloadDisable.get()+1),this.importMessage.set("Loading Trello login..."),a.preload(function(){t.preloadDisable.set(t.preloadDisable.get()-1);var e=t.getImporterFromName(t.currentImporter.get());0===t.preloadDisable.get()&&e&&e.preload&&t.importMessage.set("")},function(e){t.preloadDisable.set(t.preloadDisable.get()-1),t.importMessage.set("Error loading Trello. Please try again.")}))}},{key:"onImportError",value:function(e,t){!1!==e?(e&&h.default.isString(e)||(t||(t=e),e="Moo.do encountered an error importing your data. The developers have been notified with details of the error."),h.default.reportError(t||new Error(e),e),this.importMessage.set(e)):this.importMessage.set(""),this.isImporting.set(!1)}},{key:"runImport",value:function(e,t,a){var n=this;if(!(this.isImporting.get()||this.preloadDisable.get()>0)){var i=function(){n.importMessage.set(""),f.default.menus.alert({text:"Your data has been imported successfully!",actionText:"OK",callback:function(){f.default.menus.closeModal(p.a.Modals.ImportData)}}),h.default.sendEvent("ImportSuccess",e)};if("Workflowy"===e){var r=this.refWorkflowy.current.getValue(),l=this.importer.opmlToDocument(r,"Workflowy Import");!0===l?i():this.importMessage.set(l)}else{var o=this.getImporterFromName(e);if(o){h.default.sendEvent("Menu","Import"+e),this.isImporting.set(!0),this.importMessage.set("Importing...");try{this.importer.runImport(o,t,a,function(){n.isImporting.set(!1),i()},this.onImportError)}catch(s){this.onImportError("There was an issue importing your data. Please try again later.",s)}}}}}},{key:"onTapSelect",value:function(e){this.selectImporter(e)}},{key:"whichArea",value:function(){switch(this.state.currentImporter){case"Wunderlist":return"disabled";case"Workflowy":return"WorkflowyArea";case"OPML":case"Moo.do Backup":return"UploadArea";case"Google Tasks":case"Trello":case"Todoist":return"OAuthArea";default:try{h.default.PAssert(944,!1,"Must add valid importer")}catch(e){h.default.reportError(e)}}return!1}},{key:"onClickSupport",value:function(){f.default.menus.openModal(p.a.Modals.ReportBug)}},{key:"onClickImport",value:function(){if(!this.isImporting.get()){var e=this.refs.email&&this.refs.email.getValue(),t=this.refs.password&&this.refs.password.getValue();this.runImport(this.state.currentImporter,e,t)}}},{key:"renderListItem",value:function(e){return v.a.createElement(E.a,{selected:this.state.currentImporter===e,onClick:this.onTapSelect.bind(this,e)},e)}},{key:"renderContent",value:function(){var e,t=this.state,a=this.state.currentImporter,n=this.whichArea(),i=v.a.createElement(C.a,{primary:!0,enabled:0===t.preloadDisable&&!t.isImporting,onClick:this.onClickImport},"IMPORT");return"LoginArea"===n?e=v.a.createElement("div",null,v.a.createElement("div",{className:"importTitle"},"Import data from ",a),v.a.createElement(b.a,{floatingText:"Email",display:"block",ref:"email"}),v.a.createElement(b.a,{type:"password",floatingText:"Password",display:"block",ref:"password"}),v.a.createElement("br",null)):"UploadArea"===n?e=v.a.createElement("div",{id:"importUploadArea"},v.a.createElement("div",{className:"importTitle"},"Upload ",a," file"),v.a.createElement("div",null,"Select a","OPML"===a?"n":""," ",a," file to upload"),v.a.createElement("form",{name:"importFileUpload"},v.a.createElement("input",{id:"importFileUploadButton",type:"file",required:!0,name:"importFile"}))):"OAuthArea"===n?e=v.a.createElement("div",null,v.a.createElement("div",{className:"importTitle"},"Import data from ",a),v.a.createElement("div",null,"Click to login to your account")):"disabled"===n?(e=v.a.createElement("div",null,v.a.createElement("div",null,"Importing data from ",a," is not yet migrated to the new backend. Sorry about that! Please contact support.")),i=v.a.createElement(C.a,{style:{marginLeft:0},raised:!0,onClick:this.onClickSupport},"Contact support")):"WorkflowyArea"===n&&(e=v.a.createElement("div",null,v.a.createElement("div",{className:"importTitle",style:{marginBottom:24}},"Import data from Workflowy"),v.a.createElement("div",null,"In Workflowy, click the gear icon in the top right and select Export All. Select OPML and copy it, and paste it in the box below."),v.a.createElement(S.a,{height:300,ref:this.refWorkflowy}))),v.a.createElement("div",{className:"importInside"},e,i,v.a.createElement("div",{className:"importMessage"},t.importMessage))}},{key:"render",value:function(){var e,t="Loading...";return this.state.dimportLoaded&&(e=v.a.createElement(v.a.Fragment,null,v.a.createElement(E.a,{header:!0},"Import from app"),this.renderListItem("Wunderlist"),this.renderListItem("Google Tasks"),this.renderListItem("Workflowy"),this.renderListItem("Trello"),this.renderListItem("Todoist"),v.a.createElement(E.a,{header:!0},"Import from data"),this.renderListItem("Moo.do Backup"),this.renderListItem("OPML")),t=this.renderContent()),v.a.createElement(k.a,{id:"modalImport",title:"Import Data",width:700,height:540,sidebarWidth:160,modalID:p.a.Modals.ImportData},v.a.createElement("div",{key:"sidebar"},e),v.a.createElement("div",{key:"content"},t))}}]),t}(y.a);t.default=x},804:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(1),f=a(3),g=a(7),v=a(2),y=a.n(v),k=a(21),E=a(122),C=a(787),b=a(790),S=a(80),x=a(788),w=a(28),N=a(109),M=a(19),D=a(58),P=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.createObservables({documents:M.a.getDocumentsArray(),selectedDoc:this.props.doc||M.a.getDocumentsArray()[0],selectedTime:void 0,showRaw:!1,showCompleted:!1,backupData:void 0,previewText:""})}},{key:"getState",value:function(){var e=M.a.getDocumentsArray(),t={};return e.forEach(function(e){t[e.id]=e.backups}),t}},{key:"onKeyDown",value:function(e){g.a.getKeyCode(e);(g.a.mac&&e.metaKey||!g.a.mac&&e.ctrlKey)&&p.a.KeyCode.A}},{key:"onChangeDocument",value:function(e){var t=this.state.documents.find(function(t){return t.id===e});this.selectedDoc.set(t)}},{key:"onClickBackup",value:function(e){var t=this,a=this.state.selectedDoc;e!==this.selectedTime.get()&&(this.previewText.set("Loading..."),this.backupData.set(void 0),this.selectedTime.set(e),E.a.downloadBackup(a,e).then(function(n){if(t.selectedDoc.get()===a&&t.selectedTime.get()===e&&n){var i=function(e){var a=N.a.transformItems(e),i=n.doc;t.backupData.set({raw:n,rootItem:a[i.root]})},r=f.default.crypto.getKeyBySentinel(n.sentinel),l=function(){Promise.all(n.items.map(function(e){return f.default.crypto.decryptText(r,e.t,e.id).then(function(t){return e.t=t,e})})).then(i)};r?l():f.default.menus.openModal(p.a.Modals.EnterCode,{isPassword:!0,text:"This document was backed up with an encryption password. Please enter the password to unlock this backup.",onSelect:function(e){return new Promise(function(t,i){var o="backuptemp"+a.id;e&&f.default.crypto.addKey({name:o,password:e,sentinelSalt:w.a.getEncryptionUid()}).then(function(e){n.sentinel===e.sentinel?(t(),r=e.key,l()):(i("Incorrect password. Please try again."),f.default.crypto.removeKey(o))})})}})}}))}},{key:"onChangeShowRaw",value:function(e){this.showRaw.set(e)}},{key:"onChangeShowCompleted",value:function(e){this.showCompleted.set(e)}},{key:"renderItems",value:function(e,t){var a=this;if(this.state.showCompleted||!(e.flags&p.a.VMLIFlag.Complete)){var n=e.text;if(n.includes(p.a.CharDate)){var i=D.a.fromData(e.date);i&&(n=n.replace(p.a.CharDate,"!"+i.toText()))}n=t?"":"<li>".concat(h.default.escape(n),"</li>");var r=e.noteItem,l=e.items;return(r||l)&&(n+="<ul>",r&&(n+='<li class="note c-foreground-faded">'.concat(h.default.escape(r.text),"</li>")),l&&l.forEach(function(e){return n+=a.renderItems(e,!1)}),n+="</ul>"),n}return""}},{key:"renderBackup",value:function(){var e=this.state.backupData;return this.state.showRaw?JSON.stringify(e.raw,null,2):"<ul>".concat(this.renderItems(e.rootItem,!0),"</ul>")}},{key:"renderBackups",value:function(){var e,t=this,a=this.state,n=a.selectedTime,i=a.selectedDoc,r=this.state[i.id];return r&&(e=Object.keys(r).sort(function(e,t){return+t-+e})),y.a.createElement(y.a.Fragment,null,r&&e.map(function(e){var a=+e,i=new Date(a);return y.a.createElement(b.a,{key:a,className:"backupItem c-border",onClick:t.onClickBackup.bind(t,a),selected:n===a},i.toString("MMMM d, hh:mm tt"))}),!r&&y.a.createElement(b.a,null,"No backups..."))}},{key:"render",value:function(){var e=this.state,t=h.default.classNames("flexbox flexvert"),a=e.backupData?this.renderBackup():"<ul><ul><li>".concat(e.previewText,"</li></ul></ul>");return y.a.createElement(C.a,{id:"modalBackups",title:"Backups",width:1e3,height:900,sidebarWidth:200,modalID:p.a.Modals.Backups},y.a.createElement("div",{key:"sidebar"},y.a.createElement(x.a,{style:{margin:"0 16px 8px 16px",height:32},defaultValue:this.props.doc?this.props.doc.id:void 0,ref:"selectCalendar",onChange:this.onChangeDocument},e.documents.map(function(e){return y.a.createElement("option",{key:e.id,value:e.id},e.text.get())})),e.selectedDoc&&this.renderBackups()),y.a.createElement("div",{key:"content",className:t},y.a.createElement("div",{className:"exportHeader"},y.a.createElement(S.a,{checked:e.showRaw,onChange:this.onChangeShowRaw},"Show raw"),y.a.createElement(S.a,{checked:e.showCompleted,onChange:this.onChangeShowCompleted},"Show completed")),y.a.createElement("div",{className:"exportedContent f1 scrollable c-border",onKeyDown:this.onKeyDown,contentEditable:!0,dangerouslySetInnerHTML:{__html:a},ref:"exportedContent"})))}}]),t}(k.a);t.default=P},805:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(1),g=a(3),v=a(2),y=a.n(v),k=a(21),E=a(20),C=a(791),b=a(787),S=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"onMount",value:function(){this.refText.current.focus()}},{key:"sendReport",value:function(e){var t=this.props;g.default.EmailPreview.reportMessage(t.accountID,t.threadID,t.msgID,this.refText.current.getValue(),e),this.refModal.current.close()}},{key:"onClickSend",value:function(){this.sendReport(!0)}},{key:"onClickCancel",value:function(){this.sendReport(!1)}},{key:"render",value:function(){return y.a.createElement(b.a,i()({},this.props,{id:"modalReportProblem",title:"Report Problem",scrollable:!1,modalID:f.a.Modals.ReportProblem,ref:this.refModal}),y.a.createElement("div",{key:"content"},y.a.createElement("div",{className:"fancyModalText"},"Please describe the display problem."),y.a.createElement(C.a,{ref:this.refText}),y.a.createElement("div",{className:"fancyModalText"},"This will send the content of your email to the developers to fix display errors.")),y.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},y.a.createElement(E.a,{width:100,onClick:this.onClickCancel},"CANCEL"),y.a.createElement(E.a,{primary:!0,width:100,onClick:this.onClickSend},"SEND")))}}]),t}(k.a);t.default=S},806:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(1),g=a(3),v=a(2),y=a.n(v),k=a(21),E=a(20),C=a(791),b=a(787),S=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"onMount",value:function(){this.refs.textarea.focus()}},{key:"onClickCancel",value:function(){this.refs.modal.close(!1)}},{key:"onClickDelete",value:function(e,t){var a=this;return g.default.sendFeedback("Moo.do Deleted Account",this.refs.textarea.getValue()).then(function(){t(),a.refs.modal.close(!0)}),!0}},{key:"render",value:function(){return y.a.createElement(b.a,i()({},this.props,{id:"modalDeleteAccount",title:"Please Confirm",scrollable:!1,modalID:f.a.Modals.DeleteAccount,ref:"modal"}),y.a.createElement("div",{key:"content"},y.a.createElement("div",{className:"fancyModalText"},"It would be very helpful if you could describe how Moo.do could be more useful to you. Your feedback will help us improve Moo.do for you and others. Thanks!"),y.a.createElement(C.a,{ref:"textarea"})),y.a.createElement("div",{key:"buttons",style:{textAlign:"right"}},y.a.createElement(E.a,{width:100,onClick:this.onClickCancel},"CANCEL"),y.a.createElement(E.a,{primary:!0,width:100,onClick:this.onClickDelete},"DELETE")))}}]),t}(k.a);t.default=S},807:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(0),g=a(1),v=a(3),y=a(2),k=a.n(y),E=a(21),C=a(20),b=a(789),S=a(787),x=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"onTransactionClick",value:function(e){var t=f.default.clone(e),a=v.default.billingManager.userProperties;t.company=a.invoiceCompany,t.address=a.invoiceAddress;var n=window.btoa(JSON.stringify(t));f.default.openUrl(window.location.protocol+"//"+window.location.host+"/invoice#d="+n)}},{key:"render",value:function(){var e=this;return k.a.createElement(S.a,i()({},this.props,{id:"modalInvoices",title:"Account Invoices",scrollable:!1,modalID:g.a.Modals.Invoices,ref:"modal"}),k.a.createElement("div",{key:"content"},this.props.transactions.length>0&&k.a.createElement(b.a,{className:"transactionsTable"},k.a.createElement("div",{key:"header"},k.a.createElement("div",null,"Transaction Date"),k.a.createElement("div",null,"Amount"),k.a.createElement("div",null)),this.props.transactions.map(function(t){var a=new Date(t.date).toString(v.default.International.getFormat(g.a.DFormat.LongStrDate));return k.a.createElement("div",{key:t.id},k.a.createElement("div",null,a),k.a.createElement("div",null,t.amount),k.a.createElement(C.a,{primary:!0,onClick:e.onTransactionClick.bind(e,t),height:"auto"},"VIEW"))})),0===this.props.transactions.length&&k.a.createElement("div",null,"There are not transactions available for this account.")))}}]),t}(E.a);t.default=x},808:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(2),p=a.n(h),f=a(1),g=a(0),v=a(3),y=a(28),k=a(21),E=a(63),C=a(20),b=a(787),S=a(789),x=a(788),w=a(75),N=a(62),M=a(122),D=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.createObservables({page:0,error:!1,invites:[],defaultAcl:f.a.DocumentAccessRoles.Write})}},{key:"getState",value:function(){var e=v.default.settings.encryptionKeys,t=this.props.doc;return{acl:t.acl,isShared:t.isShared(),encryptionKeys:e,hasDocPassword:e.get()&&!!e.get()[t.id]}}},{key:"onClickShare",value:function(e,t){var a=this,n=this.refs.invite,i=n.getTokens().map(function(e){return e.email});if(this.error.set(""),i&&i.length>0)return this.props.doc.shareWithUser(i,this.state.defaultAcl).then(function(e){if(t(),e.error)a.error.set(e.error);else if(e.value){var n=e.value;!0!==n&&g.default.isArray(n)&&n.forEach(function(e){var t=e.email;e.error,e.shared;e.invited&&!a.invites.includes(t)&&a.invites.push(t)})}}),n.clearValue(),n.clearTokens(),!0}},{key:"onChangeSelectRole",value:function(e,t){var a=+t;this.props.doc.shareWithUser([e.email],a)}},{key:"onChangeDefaultRole",value:function(e){this.defaultAcl.set(+e.target.value)}},{key:"onClickRemovePermission",value:function(e,t,a){var n=this;return this.props.doc.shareWithUser([e.email],null).then(function(e){a(),e.error&&n.error.set(e.error)}),!0}},{key:"onClickCancel",value:function(){v.default.menus.closeModal(f.a.Modals.ShareDoc)}},{key:"onClickSkip",value:function(e,t){var a=this;if(v.default.settings.hasUserPassword()){var n=this.props.doc;return N.a.updateDocumentEncryption(n,v.default.crypto.getGlobalKeyInfo()).then(function(){a.page.set(1),t()}),!0}this.page.set(1)}},{key:"onClickEncrypt",value:function(e,t){var a=this.props.doc,n=this.refs.pass1.getValue(),i=this.refs.pass2.getValue(),r=a.id;if(n===i)return M.a.backupDocumentAll(a).then(function(){v.default.crypto.addKey({name:r,password:n,sentinelSalt:a.id}).then(function(e){N.a.updateDocumentEncryption(a,e).then(function(){t()})})}),!0;this.error.set("Passwords do not match")}},{key:"renderSelect",value:function(e,t){return p.a.createElement(x.a,{value:e,onChange:t,style:{height:28,marginTop:6,marginRight:8}},p.a.createElement("option",{value:f.a.DocumentAccessRoles.Admin},"Admin"),p.a.createElement("option",{value:f.a.DocumentAccessRoles.Write},"Write"))}},{key:"renderPageEncryption",value:function(){var e={marginTop:8,width:240};return p.a.createElement("div",null,p.a.createElement("div",{className:"font-big4 bold"},"Make this document extra secure?"),p.a.createElement("div",{className:"modal-subtitle font-small1 c-foreground-light",style:{marginTop:16}},"This document will be encrypted using this password for an extra level of security. You will need to give this password to anyone you share the document with. For your security, Moo.do cannot recover your password, so keep your password safe!"),p.a.createElement("div",{className:"flexbox flex-center"},p.a.createElement("div",{style:{marginTop:16}},p.a.createElement(E.a,{type:"password",placeholder:"Password",ref:"pass1",style:e}),p.a.createElement(E.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:e}))),p.a.createElement("div",{className:"flexbox flex-center"},p.a.createElement("div",{style:{marginTop:20}},p.a.createElement(C.a,{raised:!0,onClick:this.onClickSkip},"SKIP"),p.a.createElement(C.a,{primary:!0,raised:!0,style:{marginLeft:24},onClick:this.onClickEncrypt},"ENCRYPT"))))}},{key:"renderPageShare",value:function(){var e=this,t=this.props.doc,a=this.state,n=a.acl,i=a.error,r=a.invites,l=Object.keys(n).filter(function(e){return e!==y.a.getEncryptionUid()}).map(function(e){return{uid:e,name:n[e].t,email:n[e].e,role:n[e].r}});return p.a.createElement(w.a,{style:{height:"100%"}},p.a.createElement(S.a,null,p.a.createElement("div",{className:"fancyTableHeader font-big4 bold",style:{marginBottom:8}},"Share ",t.text.get()),l.map(function(a){var n=a.name?"".concat(a.name," <").concat(a.email,">"):a.email;return p.a.createElement("div",{key:a.uid,className:"flexbox"},p.a.createElement("div",{className:"f1"},n),e.renderSelect(a.role,e.onChangeSelectRole.bind(e,a)),t.isAdmin()&&p.a.createElement(C.a,{icon:"icon-close",width:40,height:40,onClick:e.onClickRemovePermission.bind(e,a)}))}),r.map(function(e){return p.a.createElement("div",{key:e,className:"flexbox"},p.a.createElement("div",{className:"f1"},e),p.a.createElement("div",null,"Invited"))})),t.isAdmin()&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"flexbox",style:{marginTop:24}},p.a.createElement(E.a,{id:"inputShareInvite",className:"f1",placeholder:"Enter an mail address",autocompleteMode:"email",ref:"invite",style:{marginRight:8}}),this.renderSelect(this.state.defaultAcl,this.onChangeDefaultRole)),p.a.createElement(C.a,{primary:!0,raised:!0,onClick:this.onClickShare,style:{marginTop:16}},"INVITE")),i&&p.a.createElement("div",{className:"error"},i),!t.isAdmin()&&p.a.createElement("div",{className:"modal-group"},p.a.createElement("div",{className:"shareNotOwned gd"},"Only the creator of this file can share it with others. Please contact the creator to share it with others."),p.a.createElement(C.a,{id:"shareOkay",raised:!0,onClick:this.onClickCancel},"OKAY")))}},{key:"render",value:function(){var e=this.props,t=this.state;e.doc;return p.a.createElement(b.a,{id:"shareDoc",modalID:f.a.Modals.ShareDoc,ref:"modal",title:"Share File",width:500,height:320},p.a.createElement("div",{key:"content"},t.hasDocPassword||t.isShared||1===t.page?this.renderPageShare():this.renderPageEncryption()))}}]),t}(k.a);t.default=D},809:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(2),p=a.n(h),f=a(1),g=a(0),v=a(3),y=a(21),k=a(20),E=a(791),C=a(787),b=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"onClickUV",value:function(e){g.default.openUrl("https://feedback.moo.do/",e),g.default.sendEvent("Menu","FeedbackUserVoice")}},{key:"onClickTwitter",value:function(e){g.default.openUrl("https://www.twitter.com/MooDoApp",e),g.default.sendEvent("Menu","FeedbackTwitter")}},{key:"onClickFacebook",value:function(e){g.default.openUrl("https://www.facebook.com/MooDoApp",e),g.default.sendEvent("Menu","FeedbackFacebook")}},{key:"onClickGooglePlus",value:function(e){g.default.openUrl("https://www.google.com/+MooDoApp",e),g.default.sendEvent("Menu","FeedbackGoogle")}},{key:"onClickCancel",value:function(e){v.default.menus.closeModal(f.a.Modals.ReportBug)}},{key:"onClickSend",value:function(e){var t=this.refs.description.getValue();if(t&&t.length>2){v.default.sendFeedback("Moo.do Feedback",t),v.default.menus.closeModal(f.a.Modals.ReportBug),v.default.toasts.pushMessage({text:"Thanks for taking the time to send us feedback!"}),g.default.sendEvent("Menu","SendFeedback")}}},{key:"render",value:function(){return p.a.createElement(C.a,{id:"reportBug",modalID:f.a.Modals.ReportBug,ref:"modal",title:"Contact Support",width:450,height:500},p.a.createElement("div",{key:"content"},p.a.createElement("div",{className:"c-foreground-light"},"If you're requesting a feature, it's often easier to vote it up (or add it) on our UserVoice page."),p.a.createElement("div",{className:"center"},p.a.createElement(k.a,{className:"mc",primary:!0,onClick:this.onClickUV},"Open UserVoice")),p.a.createElement("br",null),p.a.createElement("div",{className:"c-foreground-light"},"Or talk to us on your favorite social network."),p.a.createElement("div",{className:"feedbackIcons marginCenter flexbox flex-center",style:{width:150}},p.a.createElement(k.a,{width:50,height:50,icon:"icon-twitter",tooltip:"@MooDoApp",onClick:this.onClickTwitter}),p.a.createElement(k.a,{width:50,height:50,marginLeft:16,icon:"icon-facebook",tooltip:"MooDoApp",onClick:this.onClickFacebook}),p.a.createElement(k.a,{width:50,height:50,marginLeft:16,icon:"icon-google-plus",tooltip:"+MooDoApp",onClick:this.onClickGooglePlus})),p.a.createElement("div",{className:"mat-subheader c-foreground-light"},"Or send us a message directly."),p.a.createElement(E.a,{focused:!0,id:"bugDescription",height:200,ref:"description",margin:0})),p.a.createElement("div",{key:"buttons"},p.a.createElement(k.a,{raised:!0,onClick:this.onClickCancel},"CANCEL"),p.a.createElement(k.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSend},"SEND")))}}]),t}(y.a);t.default=b},810:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(1),g=a(3),v=a(2),y=a.n(v),k=a(21),E=a(20),C=a(63),b=a(787),S=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){this.createObservables({errorText:""})}},{key:"onMount",value:function(){this.refs.code.focus()}},{key:"onClickConfirm",value:function(){var e=this,t=this.refs.code.getValue();this.errorText.set(""),this.props.onSelect(t).then(function(){g.default.menus.closeModal(f.a.Modals.EnterCode)}).catch(function(t){e.errorText.set(t)})}},{key:"onClickCancel",value:function(){!1!==this.props.noCancel&&g.default.menus.closeModal(f.a.Modals.EnterCode)}},{key:"render",value:function(){var e=this.props,t=e.text,a=e.noCancel,n=e.isPassword;return y.a.createElement(b.a,i()({},this.props,{id:"modalEnterCode",closeButton:!1,width:360,scrollable:!1,modalID:f.a.Modals.EnterCode,backdropClose:!1,ref:"modal"}),y.a.createElement("div",{key:"content"},y.a.createElement("div",{className:"mb16 c-foreground"},t),y.a.createElement(C.a,{ref:"code",type:n&&"password",onEnter:this.onClickConfirm}),y.a.createElement("div",{className:"red",style:{marginTop:8}},this.state.errorText),y.a.createElement("div",{style:{marginTop:24,textAlign:"right"}},!a&&y.a.createElement(E.a,{width:100,onClick:this.onClickCancel},"CANCEL"),y.a.createElement(E.a,{primary:!0,width:100,onClick:this.onClickConfirm},"CONFIRM"))))}}]),t}(k.a);t.default=S},811:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(0),g=a(1),v=a(3),y=a(34),k=a(2),E=a.n(k),C=a(21),b=a(787),S=a(20),x=a(80),w=a(75),N=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){}},{key:"getState",value:function(){var e=this.props.importer;return{waitingText:e.waitingText,documents:e.documentsObs,showTryAgain:e.showTryAgain}}},{key:"close",value:function(){y.a.createDefaultState(),v.default.menus.closeModal(g.a.Modals.ImportMoodo)}},{key:"sortCmpDocs",value:function(e,t){return t.date.getTime()-e.date.getTime()}},{key:"onClickTryAgain",value:function(){this.props.tryAgain()}},{key:"onClickCancel",value:function(){this.close()}},{key:"onClickImport",value:function(e,t){var a=this,n=Object.keys(this.refs).filter(function(e){return e.startsWith("checkbox_")&&a.refs[e].getValue()}).map(function(e){return a.refs[e].props.itemID});return this.props.importer.importWithDocuments(n),this.close(),!0}},{key:"render",value:function(){var e=this.props.withDocuments,t=this.state,a=t.waitingText,n=t.documents,r=t.showTryAgain,l=!a&&f.default.objectValues(n);return l&&l.sort(this.sortCmpDocs),E.a.createElement(b.a,i()({},this.props,{id:"modalImport",title:"Import Data",width:400,height:e?600:300,modalID:g.a.Modals.ImportMoodo,ref:"modal"}),E.a.createElement("div",{key:"content"},E.a.createElement("div",{className:"flexbox flexvert",style:{height:"100%"}},E.a.createElement("div",{className:"setupTitle"},"Import from Moo.do"),E.a.createElement(w.a,{className:"importMoodoWrapper f1"},a&&E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"c-foreground-light",dangerouslySetInnerHTML:{__html:a}}),r&&E.a.createElement("div",{className:"center"},E.a.createElement(S.a,{marginTop:24,raised:!0,onClick:this.onClickTryAgain},"Try again"))),!a&&l.map(function(e){var t=e.id;return E.a.createElement(x.a,{key:t,itemID:t,ref:"checkbox_"+t,style:{marginBottom:24}},E.a.createElement("div",{className:"mooDocText bold"},e.text),E.a.createElement("div",{className:"mooDocDate c-foreground-faded"},e.date.toString(v.default.International.getFormat(g.a.DFormat.MonthDayYearLong))))})),e&&E.a.createElement("div",{style:{marginTop:32,textAlign:"right"}},E.a.createElement(S.a,{raised:!0,onClick:this.onClickCancel},"CANCEL"),E.a.createElement(S.a,{raised:!0,primary:!0,marginLeft:16,enabled:!a,onClick:this.onClickImport},"IMPORT")))))}}]),t}(C.a);t.default=N},812:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(3),f=a(2),g=a.n(f),v=a(21),y=a(1),k=a(20),E=a(787),C=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"onClickCancel",value:function(){this.props.onCancel(),p.default.menus.closeModal(y.a.Modals.ConfirmEncrypt)}},{key:"onClickDownload",value:function(){h.default.saveFile(this.props.password,"moodo encryption password.txt")}},{key:"onClickYes",value:function(){this.props.onYes(),p.default.menus.closeModal(y.a.Modals.ConfirmEncrypt)}},{key:"render",value:function(){return g.a.createElement(E.a,{id:"modalConfirmEncrypt",closeButton:!1,small:!0,backdropClose:!1,scrollable:!1,modalID:y.a.Modals.ConfirmEncrypt},g.a.createElement("div",{key:"content"},g.a.createElement("p",null,"It is very important that you remember this password."),g.a.createElement("p",{style:{color:"red",fontWeight:"bold"}},"It cannot be reset."),g.a.createElement("p",null,"Are you sure you want to set an encryption password?")),g.a.createElement("div",{key:"buttons"},g.a.createElement(k.a,{raised:!0,cancel:!0,onClick:this.onClickCancel},"Cancel"),g.a.createElement(k.a,{raised:!0,marginLeft:16,onClick:this.onClickDownload},"Download Password"),g.a.createElement(k.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickYes},"Yes")))}}]),t}(v.a);t.default=C},813:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(2),p=a.n(h),f=a(21),g=a(4),v=a(57),y=a(44),k=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"onClickAddSubproject",value:function(){var e=this.props;e.pane.zoomIn(e.item),e.pane.addProject()}},{key:"onClickZoom",value:function(){this.props.item.canZoom()&&(g.a.setFocusedPane(this.props.pane),this.props.pane.zoomIn(this.props.item))}},{key:"render",value:function(){this.props.pane;return p.a.createElement(v.a,{key:"contextMenuGmailSort",id:"contextMenuGmailSort",element:this.props.element},p.a.createElement(y.a,{icon:"icon-unfold_less",onClick:this.onClickZoom},"Zoom to item"),p.a.createElement(y.a,{icon:"icon-add",onClick:this.onClickAddSubproject},"Add subproject"),p.a.createElement(y.a,{icon:"icon-zoom-in",onClick:this.onClickZoom},"Zoom In"))}}]),t}(f.a);t.default=k},814:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(1),p=a(2),f=a.n(p),g=a(21),v=a(57),y=a(44),k=a(89),E=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"setViewMode",value:function(e){this.props.onSelected(e)}},{key:"render",value:function(){this.props.pane;return f.a.createElement(v.a,{key:"contextMenuGmailSort",id:"contextMenuGmailSort",element:this.props.element},f.a.createElement(k.a,null,"Sort by"),f.a.createElement(y.a,{icon:"icon-access_time",onClick:this.setViewMode.bind(this,h.a.GmailViewMode.Date)},h.a.GmailViewMode.Date),f.a.createElement(y.a,{icon:"icon-exclamation",onClick:this.setViewMode.bind(this,h.a.GmailViewMode.Priority)},h.a.GmailViewMode.Priority))}}]),t}(g.a);t.default=E},815:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(81),l=a.n(r),o=a(5),s=a.n(o),c=a(6),u=a.n(c),d=a(10),m=a.n(d),h=a(9),p=a.n(h),f=a(11),g=a.n(f),v=a(1),y=a(3),k=a(2),E=a.n(k),C=a(21),b=a(45),S=a(34),x=a(20),w=a(57),N=a(89),M=a(63),D=function(e){function t(){return s()(this,t),m()(this,p()(t).apply(this,arguments))}return g()(t,e),u()(t,[{key:"init",value:function(){this.refInput=E.a.createRef()}},{key:"getHotkeys",value:function(){return[b.a.create(v.a.KeyCode.Escape,!0,v.a.Primary.Either,v.a.Shift.Either,this.onClickCancel),b.a.create(v.a.KeyCode.Enter,!0,v.a.Primary.Either,v.a.Shift.Either,this.onClickSave)]}},{key:"onClickSave",value:function(){var e=this.refInput.current.getValue();!this.props.board?y.default.menus.closeContextMenu("ReactContextMenuNameBoard",e):S.a.renameBoard(this.props.board,e)?(y.default.tooltip.hideTip(),y.default.menus.closeContextMenu("ReactContextMenuNameBoard"),this.updateState()):y.default.tooltip.displayTip({text:"Please give this board a unique name.",element:this.refs.menu})}},{key:"onClickCancel",value:function(){y.default.menus.closeContextMenu("ReactContextMenuNameBoard",!1)}},{key:"render",value:function(){var e=this.props,t=e.board,a=l()(e,["board"]),n=(t?"Rename":"Name new")+" board";return E.a.createElement(w.a,i()({},a,{key:"contextMenuEditBoard",id:"contextMenuEditBoard",width:400}),E.a.createElement(N.a,{padding:0,border:!1},n),E.a.createElement(M.a,{value:t?this.props.board.name.get():"",focused:!0,ref:this.refInput}),E.a.createElement("div",{className:"fancyModalButtons center"},E.a.createElement(x.a,{primary:!0,width:100,onClick:this.onClickSave},"SAVE"),E.a.createElement(x.a,{width:100,onClick:this.onClickCancel},"CANCEL")))}}]),t}(C.a);t.default=D},816:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(3),g=a(2),v=a.n(g),y=a(21),k=a(57),E=a(44),C=a(89),b=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"addPane",value:function(e){this.props.onSelected(e)}},{key:"render",value:function(){var e=this,t=this.props,a=f.default.pluginManager.getPluginGmail(),n=a.getSyncAccounts();return v.a.createElement(k.a,i()({},t,{key:"contextMenuTitle",id:"contextMenuTitle",maxHeight:400}),t.showHeader&&v.a.createElement(C.a,{topHeader:!0},"Open Gmail Account"),n.map(function(t){var n=a.getDefaultDisplayItem(t);return v.a.createElement(E.a,{key:t,onClick:e.addPane.bind(e,n)},t)}))}}]),t}(y.a);t.default=b},817:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(1),p=a(3),f=a(2),g=a.n(f),v=a(21),y=a(4),k=a(57),E=a(44),C=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.refMenu=g.a.createRef()}},{key:"onClickPrefix",value:function(e){y.a.applyPrefixToSelection(e,this.props.item),this.selectEnd()}},{key:"onClickHR",value:function(){this.props.item.setText(h.a.TextMDHR,h.a.ChangeType.Local),this.selectEnd()}},{key:"onClickFile",value:function(e,t){var a=this.props,n=this.refMenu.current.state,i=n.left,r=n.top;p.default.menus.openContextMenu({componentName:"ReactContextMenuDropZone",element:t.target,pane:a.pane,item:a.item,image:e,pos:{left:i,top:r},paneObject:a.paneObject})}},{key:"selectEnd",value:function(){var e=this.props.item,t=e.getParsedText();y.a.selectItem(e,t.length)}},{key:"render",value:function(){return g.a.createElement(k.a,{key:"contextMenuAddItem",id:"contextMenuAddItem",element:this.props.element,ref:this.refMenu},g.a.createElement(E.a,{icon:"icon-project",hotkey:h.a.Prefix.Header+" Space",iconSize:18,onClick:this.onClickPrefix.bind(this,h.a.Prefix.Header)},"Project"),g.a.createElement(E.a,{icon:"icon-check",hotkey:h.a.Prefix.Task+" Space",onClick:this.onClickPrefix.bind(this,h.a.Prefix.Task)},"Task"),g.a.createElement(E.a,{icon:"icon-bullet",hotkey:h.a.Prefix.Bullet+" Space",iconSize:24,onClick:this.onClickPrefix.bind(this,h.a.Prefix.Bullet)},"Bullet"),g.a.createElement(E.a,{icon:"icon-numlist",hotkey:h.a.Prefix.NumList+" Space",iconSize:14,onClick:this.onClickPrefix.bind(this,h.a.Prefix.NumList)},"Numbered List"),g.a.createElement(E.a,{icon:"icon-drive-file",iconSize:14,onClick:this.onClickFile.bind(this,!1)},"File"),g.a.createElement(E.a,{icon:"icon-image",iconSize:13,onClick:this.onClickFile.bind(this,!0)},"Image"),g.a.createElement(E.a,{icon:"icon-hr",hotkey:h.a.TextMDHR,iconSize:14,onClick:this.onClickHR},"Horizontal Line"))}}]),t}(v.a);t.default=C},818:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(1),p=a(3),f=a(2),g=a.n(f),v=a(21),y=a(8),k=a(20),E=a(80),C=a(57),b=a(89),S=a(44),x=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.createObservables({anyCalendarsSync:this.computeAnyCalendarsSync()}),y.d.miscAction({type:y.b.Misc,misc:y.a.OpenCalendarsMenu})}},{key:"getState",value:function(){var e=this.props.pane;return{displayCalendars:e.displayCalendars,displayLocalItems:e.displayLocalItems}}},{key:"getSyncCalendars",value:function(){return p.default.pluginManager.getPluginGCalendar().getImportCalendarList()}},{key:"computeAnyCalendarsSync",value:function(){var e=this.props.pane.displayCalendars.get(),t=this.getSyncCalendars(),a=0;if(t)for(var n=0,i=0;i<t.length;i++){if(n++>5e3&&__infLoop&&__infLoop(n))throw new RangeError;!1!==e[t[i].id]&&a++}return a>0}},{key:"onChangeDisplayCalendar",value:function(e,t){var a=this.props.pane;a.setDisplayCalendar(e,t),a.saveState(),this.anyCalendarsSync.set(this.computeAnyCalendarsSync())}},{key:"onChangeDisplayLocal",value:function(e){this.props.pane.setDisplayLocal(e)}},{key:"onChangeAllCalendars",value:function(e){var t=0,a=this.props.pane,n=this.getSyncCalendars(),i=this.state.displayCalendars;p.default.PaneUpdateBatcher.beginUpdateItems();for(var r=0;r<n.length;r++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var l=n[r];i[l.id]!==e&&a.setDisplayCalendar(l,e)}a.saveState(),p.default.PaneUpdateBatcher.commitUpdateItems()}},{key:"onClickAdd",value:function(){p.default.menus.closeContextMenu(),p.default.menus.openSettings(h.a.SettingsSections.GoogleCalendar)}},{key:"onClickSettings",value:function(){p.default.menus.closeContextMenu(),p.default.menus.openSettings(h.a.SettingsSections.Plugins)}},{key:"render",value:function(){var e=this,t=this.state,a=this.props,n=p.default.pluginManager.getPluginGCalendar(),i=n.isEnabled(),r=this.getSyncCalendars(),l=t.displayCalendars;return g.a.createElement(C.a,{key:"contextMenuSelectCalendars",id:"contextMenuSelectCalendars",element:a.element},g.a.createElement(S.a,null,g.a.createElement(E.a,{checked:t.displayLocalItems,onChange:this.onChangeDisplayLocal},"Display local events")),i&&g.a.createElement(g.a.Fragment,null,g.a.createElement(b.a,null,g.a.createElement(E.a,{checked:t.anyCalendarsSync,onChange:this.onChangeAllCalendars,size:14},"Google Calendars")),r&&r.map(function(t){var a=n.getCalendarBackgroundColor(t.id);return g.a.createElement(S.a,{key:t.id},g.a.createElement(E.a,{checked:!1!==l[t.id],checkedColor:a,onChange:e.onChangeDisplayCalendar.bind(e,t)},t.summary||t.id))}),(!r||0===r.length)&&g.a.createElement("div",{className:"center",style:{marginTop:8}},g.a.createElement(k.a,{raised:!0,primary:!0,onClick:this.onClickAdd},"ADD CALENDARS"))),!i&&g.a.createElement("div",{className:"center",style:{marginTop:24}},g.a.createElement(k.a,{raised:!0,primary:!0,onClick:this.onClickSettings},"ENABLE CALENDARS")))}}]),t}(v.a);t.default=x},819:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(1),g=a(3),v=a(2),y=a.n(v),k=a(21),E=a(45),C=a(63),b=a(57),S=a(20),x=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){var e=this.props.text,t=f.a.Regexp.MDLink,a=new RegExp(/\S{2,}\.[^0-9.\s]{2,}\S*$/);t.lastIndex=0;var n=t.exec(e);n?(this.text=n[2],this.link=n[3]):null===a.exec(e)?this.text=e:this.link=e,this.refText=y.a.createRef(),this.refLink=y.a.createRef()}},{key:"getHotkeys",value:function(){return[E.a.create(f.a.KeyCode.Enter,!0,f.a.Primary.Either,f.a.Shift.Either,this.onClick),E.a.create(f.a.KeyCode.Escape,!0,f.a.Primary.Either,f.a.Shift.Either,this.close)]}},{key:"onMount",value:function(){var e;(e=this.link||!this.text?this.refText.current:this.refLink.current).focus(),e.selectAll()}},{key:"close",value:function(){g.default.menus.closeContextMenu("ReactContextMenuInsertLink")}},{key:"onClickRemove",value:function(){var e=this.refText.current.getValue();this.props.onInsertLink({text:e,url:""})}},{key:"onClick",value:function(){var e=this.refText.current.getValue(),t=this.refLink.current.getValue();(e||t)&&g.default.menus.isContextMenuOpen("ReactContextMenuInsertLink")&&(this.close(),t&&!t.startsWith("http")&&(t="http://"+t),this.props.onInsertLink({text:e,url:t}))}},{key:"render",value:function(){return y.a.createElement(b.a,i()({},this.props,{key:"contextMenuInsertLink",id:"contextMenuInsertLink"}),y.a.createElement("div",{className:"flexbox"},y.a.createElement("span",null,"Text"),y.a.createElement(C.a,{className:"f1",ref:this.refText,height:28,width:260,value:this.text||this.link,onEnter:this.onClick,onEscape:this.close})),y.a.createElement("div",{className:"flexbox"},y.a.createElement("span",null,"Link"),y.a.createElement(C.a,{className:"f1",ref:this.refLink,height:28,width:260,value:this.link,onEnter:this.onClick,onEscape:this.close})),y.a.createElement("div",{className:"flexbox",style:{marginTop:16}},this.link&&y.a.createElement(S.a,{cancel:!0,height:32,onClick:this.onClickRemove},"REMOVE"),y.a.createElement("div",{className:"f1"}),y.a.createElement(S.a,{primary:!0,height:32,onClick:this.onClick},"INSERT")))}}]),t}(k.a);t.default=x},820:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(3),p=a(2),f=a.n(p),g=a(21),v=a(794),y=a(57),k=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"onClose",value:function(){h.default.menus.closeContextMenu("ReactContextMenuContactDetails")}},{key:"render",value:function(){return f.a.createElement(y.a,{key:"contextMenuContactDetails",id:"contextMenuContactDetails",element:this.props.element,position:this.props.position},f.a.createElement(v.a,{contact:this.props.contact}))}}]),t}(g.a);t.default=k},821:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(1),g=a(3),v=a(2),y=a.n(v),k=a(21),E=a(4),C=a(7),b=a(24),S=a(795),x=a(57),w=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){this.createObservables({isMaximized:!1}),this.refMenu=y.a.createRef()}},{key:"getState",value:function(){return{maxWidth:Math.max(this.props.pane.getWidth()-20,400)}}},{key:"onMount",value:function(){b.a.listen("windowResize",this.onResize)}},{key:"onResize",value:function(){var e=this;this.updateState(),setTimeout(function(){e.refMenu.current.updateState()},300)}},{key:"onUnmount",value:function(){var e=this.props.item;b.a.unlisten("windowResize",this.onResize),E.a.selectIndex(this.props.index-1,e.getParsedText().length)}},{key:"onKeyPress",value:function(e){C.a.getKeyCode(e)!==f.a.KeyCode.Enter||!e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||(g.default.menus.closeContextMenu(),e.preventDefault(),e.stopPropagation())}},{key:"onClickClose",value:function(){g.default.menus.closeContextMenu()}},{key:"onMaximize",value:function(e){this.isMaximized.set(e)}},{key:"render",value:function(){var e=this.props,t=this.state,a=this.state.maxWidth;return y.a.createElement(x.a,i()({},this.props,{key:e.note.id+"_Note",id:"contextMenuNote",width:600,height:300,maxWidth:a,ref:this.refMenu,canMaximize:!0,isMaximized:t.isMaximized,border:!0}),y.a.createElement(S.a,{ref:"noteText",item:e.item,focused:!0,onKeyPress:this.onKeyPress,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,richText:!0,onMaximize:this.onMaximize,isMaximized:t.isMaximized,onClickClose:this.onClickClose,shouldSave:!0}))}}]),t}(k.a);t.default=w},822:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(1),p=a(2),f=a.n(p),g=a(21),v=a(3),y=a(57),k=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"_generateParticipantTextExpanded",value:function(e){return e.text?f.a.createElement("span",null,f.a.createElement("b",null,e.text)," <"+e.email+">"):e.email}},{key:"renderLabels",value:function(){for(var e=0,t=v.default.pluginManager.getPluginGmail(),a=this.props.accountID,n=this.props.message.labelIds,i=[],r=0;r<n.length;r++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var l=t._getLabelByID(a,n[r]);i.push(f.a.createElement("div",{key:r},l.getName()))}return this.renderLine("labels",i)}},{key:"renderParticipants",value:function(e){var t=this.props.message[e].map(function(e,t){return f.a.createElement("div",{key:t},this._generateParticipantTextExpanded(e))}.bind(this));return this.renderLine(e,t)}},{key:"renderLine",value:function(e,t){return f.a.createElement("div",{className:"emailDetailsLine flexbox"},f.a.createElement("div",null,e+":"),f.a.createElement("span",{className:"f1"},t))}},{key:"render",value:function(){var e=this.props.message,t=e.date,a=t.toString(v.default.International.getFormat(h.a.DFormat.DayMonthDateYear))+" at "+t.toString(v.default.International.getFormat(h.a.DFormat.ShortTime));return f.a.createElement(y.a,{key:"contextMenuEmailDetails",id:"contextMenuEmailDetails",element:this.props.element},this.renderLine("from",this._generateParticipantTextExpanded(e.from)),e.to&&this.renderParticipants("to"),e.cc&&this.renderParticipants("cc"),e.bcc&&this.renderParticipants("bcc"),this.renderLine("date",a),this.renderLine("subject",e.subject),e.labelIds&&this.renderLabels())}}]),t}(g.a);t.default=k},823:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(7),f=a(1),g=a(3),v=a(2),y=a.n(v),k=a(21),E=a(67),C=a(4),b=a(50),S=a(20),x=a(57),w=a(89),N=a(44),M=a(47),D=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){var e=this,t=this.props,a=!1;this.mod=p.a.secModKey,this.priMod=p.a.priModKey,this.items=[],t.pane.applyToSelection(function(n){t.item===n&&(a=!0),e.item||(e.item=n),e.hasSelection=!0,e.items.push(n)}),a||(this.item=void 0,this.hasSelection=!1),this.item||(this.item=t.item,this.items=[this.item],this.hasSelection=!1);try{h.default.PAssert(669,this.item,"Must have a valid item")}catch(n){h.default.reportError(n)}}},{key:"onClickComplete",value:function(){this.hasSelection?h.default.focusedPane.applyFnToSelection("setComplete",{toggle:"isComplete",value2:f.a.ChangeType.Local}):this.item.setComplete(!this.item.isComplete(),f.a.ChangeType.Local)}},{key:"onClickStar",value:function(){this.hasSelection?h.default.focusedPane.applyFnToSelection("setStarred",{toggle:"isStarred",value2:f.a.ChangeType.Local}):this.item.setStarred(!this.item.isStarred(),f.a.ChangeType.Local)}},{key:"onClickPriority",value:function(e){this.hasSelection?this.props.pane.applyPriorityToSelection(e):this.item.setPriority(e,f.a.ChangeType.Local),g.default.menus.closeContextMenu()}},{key:"onClickIndent",value:function(e){C.a.fireKeyEvent(void 0,{normCode:f.a.KeyCode.Tab,shiftKey:e})}},{key:"onClickMove",value:function(){this.props.pane.autocompleteMove()}},{key:"onClickCreateTask",value:function(){this.props.pane.autocompleteCreateTask()}},{key:"onClickNote",value:function(){C.a.editNote(this.item)}},{key:"onClickCollapse",value:function(){this.item.toggleCollapsed(this.props.pane)}},{key:"onClickZoom",value:function(){this.item.canZoom()&&(C.a.setFocusedPane(this.props.pane),this.props.pane.zoomIn(this.item))}},{key:"onClickZoomNewPane",value:function(){var e=this.props.pane;if(this.item.canZoom()){var t=g.default.PaneManager.getPaneIndex(e)+1,a=e.getSaveInfo();a.item=this.item,a.document=e.getDocument(),delete a.id;var n=E.a.createPane(f.a.PaneMode.Task,a);return g.default.PaneManager.addPaneAtIndex(n,t),C.a.setFocusedPane(n),n.onAdded(),!1}}},{key:"onClickGoto",value:function(){g.default.PaneManager.scrollToAndHighlightItem(this.item,this.props.pane)}},{key:"onClickArchive",value:function(){var e=this.props.pane;e.isWriteable&&(this.hasSelection?e.archiveSelected(!0):this.props.item.archiveSelf(f.a.ChangeType.Local))}},{key:"onClickUnarchive",value:function(){this.item.unArchive(f.a.ChangeType.Local)}},{key:"onClickUndelete",value:function(){this.item.unDelete(f.a.ChangeType.Local)}},{key:"onClickDelete",value:function(){var e=this.item,t=this.props.pane;if(e.isNote()){var a=C.a.getStartIndex(),n=e.parent();e.parent().setNote(void 0,f.a.ChangeType.Local),C.a.selectIndex(a-1,n.getParsedText().length)}else if(t.isWriteable)if(t.isViewDates()&&!e.hasAttachmentType(f.a.PluginType.Calendar)&&e.hasChildren()){g.default.menus.options("The item you are deleting has children.",["Remove Date","Delete All"],function(t){if("Remove Date"===t){e.setMooDate(void 0,f.a.ChangeType.Local);var a=e.getParsedText().replace(f.a.CharDate,"");e.setText(a,f.a.ChangeType.Local)}else"Delete All"===t&&e.deleteSelf(f.a.ChangeType.Local)})}else this.hasSelection?(M.a.saveDeleteSelection(),t.deleteSelected()):(e.hasAttachmentType(f.a.PluginType.Calendar)&&this.onClickDeleteCalendar(),this.props.item.deleteSelf(f.a.ChangeType.Local))}},{key:"onClickAddCalendar",value:function(){var e=g.default.pluginManager.getPluginGCalendar(),t=this.item;e&&(e.createEventForItem(t),t.itemChanged.notify())}},{key:"onClickDeleteCalendar",value:function(){for(var e=0,t=this.props.pane,a=0,n=function(e,n){a--,n?0===a&&t.updateItems():g.default.toasts.pushMessage({text:"There was an error removing the event from your Google Calendar.",action:f.a.MessageAction.Okay})},i=0;i<this.items.length;i++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var r=this.items[i];if(r.hasAttachmentType(f.a.PluginType.Calendar)){var l=r.getAttachmentByPlugin(f.a.PluginID.GCalendar);try{h.default.PAssert(670,l,"Must be able to get a valid attachment")}catch(s){h.default.reportError(s)}try{h.default.PAssert(671,this.item,"Must have a valid item")}catch(s){h.default.reportError(s)}var o=l.getPlugin();o.hasWritePermissionForAttach(l)?(a++,C.a.reset(),o.deleteCalendarEventForItem(r,l,h.default.newEmptyFn(),h.default.newEmptyFn(),n)):g.default.toasts.pushMessage(f.a.MessageID.ReadOnlyCalendar)}}}},{key:"onClickReply",value:function(){this.hasSelection?this.props.pane.replySelected():this.props.pane.openEmailByItem(this.item,f.a.EmailResponseMode.Reply)}},{key:"onClickReplyAll",value:function(){this.hasSelection?this.props.pane.replyAllSelected():this.props.pane.openEmailByItem(this.item,f.a.EmailResponseMode.ReplyAll)}},{key:"onClickForward",value:function(){this.hasSelection?this.props.pane.forwardSelected():this.props.pane.openEmailByItem(this.item,f.a.EmailResponseMode.Forward)}},{key:"onClickRead",value:function(){var e=this.item,t=e.getAttachmentByType(f.a.PluginType.Email),a=t.getPlugin(),n=a.isItemUnread(e);this.hasSelection?this.props.pane.markReadSelected(n):n?a.performAction(f.a.PluginAction.Gmail.MarkRead,!1,t):a.performAction(f.a.PluginAction.Gmail.MarkUnread,!1,t)}},{key:"onClickStarGmail",value:function(){if(this.hasSelection)this.props.pane.toggleStarSelected();else{var e=this.item.getAttachmentByType(f.a.PluginType.Email),t=e.getPlugin();t.isItemStarred(this.item)?t.performAction(f.a.PluginAction.Gmail.Unstar,!1,e):t.performAction(f.a.PluginAction.Gmail.Star,!1,e)}}},{key:"onClickLabel",value:function(){this.props.pane.autocompleteLabel()}},{key:"onClickSchedule",value:function(){this.props.pane.autocompleteSchedule()}},{key:"onClickArchiveGmail",value:function(){var e=this.item,t=e.getAttachmentByType(f.a.PluginType.Email),a=t.getPlugin(),n=a.isItemArchived(e);"PaneGmail"===this.props.pane.type&&this.hasSelection?this.props.pane.archiveSelected(!n):n?a.performAction(f.a.PluginAction.Gmail.Unarchive,!1,t):a.performAction(f.a.PluginAction.Gmail.Archive,!1,t)}},{key:"onClickDeleteGmail",value:function(){var e=this.item,t=this.props.pane,a=e.getAttachmentByType(f.a.PluginType.Email).getPlugin(),n=a.isItemFullTrashed(e);t.type===f.a.PaneMode.Gmail?this.hasSelection?t.deleteSelected(a.isGmailItem,!n):a.isGmailItem(e)&&(this.onClickDeleteCalendar(),e.deleteSelf(f.a.ChangeType.Local)):n?a.undeleteItem(e):a.deleteItem(e)}},{key:"onClickPrefix",value:function(e){C.a.applyPrefixToSelection(e,!this.hasSelection&&this.item)}},{key:"onClickShowMDImageText",value:function(e){this.props.pane.search.clearStickyMatches();var t=this.item.getRawText(),a=e.substr(1);t=t.replace(e,a),this.item.setText(t,f.a.ChangeType.Local)}},{key:"onClickShowDriveImageText",value:function(e){this.props.pane.search.clearStickyMatches();var t=this.item,a=t.getAttachmentByPlugin(f.a.PluginID.Drive);a.getPlugin().setShowInline(t,a,e),b.a.itemTextChanged(this.item)}},{key:"onClickMakeLinkImage",value:function(e){var t=0;this.props.pane.search.clearStickyMatches();var a,n,i=this.item.getRawText();for(f.a.Regexp.MDLink.lastIndex=0;null!==(a=f.a.Regexp.MDLink.exec(i));){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;a[3]===e&&(e=a[0],n="!["+a[2]+"]("+a[3]+(a[4]?a[4]:"")+")")}n||(n=e.startsWith("[")?"!"+e:"!["+e+"]("+e+")"),i=i.replace(e,n),this.item.setText(i,f.a.ChangeType.Local)}},{key:"onViewInDrive",value:function(){var e=this.item,t=e.getAttachmentByPlugin(f.a.PluginID.Drive);t.getPlugin().openAttach(t,e,this.props.pane)}},{key:"renderMenuItemMDImage",value:function(e){var t=e.getAttribute("data-original-text");return y.a.createElement(y.a.Fragment,null,y.a.createElement(N.a,{onClick:this.onClickShowMDImageText.bind(this,t)},"Show as text"),y.a.createElement("hr",null))}},{key:"renderMenuLinkImage",value:function(e){var t=e.getAttribute("data-original-text")||e.getAttribute("data-href")||e.textContent;return y.a.createElement(y.a.Fragment,null,y.a.createElement(N.a,{onClick:this.onClickMakeLinkImage.bind(this,t)},"Show as image"),y.a.createElement("hr",null))}},{key:"renderMenuDate",value:function(){return y.a.createElement("span",null,y.a.createElement(N.a,{icon:"icon-calendar",hotkey:{name:"AddToCalendar"},onClick:this.onClickAddCalendar},"Add to Google Calendar"))}},{key:"renderMenuNote",value:function(){return y.a.createElement("span",null,y.a.createElement(N.a,{icon:"icon-edit",hotkey:{name:"EditNote"},onClick:this.onClickNote},"Edit"),y.a.createElement(N.a,{icon:"icon-delete",onClick:this.onClickDelete},"Delete"))}},{key:"renderMenuDefault",value:function(){var e,t,a=this.props.pane,n=this.item,i=(this.mod,this.priMod),r=a.isViewCalendar(),l=!r,o=a.supportIndent&&!n.isNote()&&0!==n.getIndex()&&!a.search.isFlatSearchResult(n),s=a.supportIndent&&!n.isNote()&&n.parent()!==h.default.focusedItem&&!(a.search.isFlatSearchResult(n)||a.search.isFlatSearchResult(n.parent())),c=g.default.pluginManager.getPluginGCalendar();if(c&&n.getDate())if(n.hasAttachmentType(f.a.PluginType.Calendar)){var u=n.getAttachmentByType(f.a.PluginType.Calendar);e=y.a.createElement(N.a,{icon:"icon-delete",disabled:!c.hasWritePermissionForAttach(u),onClick:this.onClickDeleteCalendar},"Remove from Google Calendar")}else e=y.a.createElement(N.a,{icon:"icon-calendar",hotkey:l&&{name:"AddToCalendar"},onClick:this.onClickAddCalendar},"Add to Google Calendar");if(n.hasAttachmentType(f.a.PluginType.Email)){var d=n.getAttachmentByType(f.a.PluginType.Email).getPlugin(),m=d.isItemArchived(n),p=d.isItemFullTrashed(n);t=y.a.createElement(y.a.Fragment,null,y.a.createElement("hr",null),y.a.createElement(N.a,{disabled:p,icon:"icon-task",onClick:this.onClickArchiveGmail},"".concat(m?"Unarchive":"Archive"," email")),y.a.createElement(N.a,{icon:"icon-delete",onClick:this.onClickDeleteGmail},"".concat(p?"Undelete":"Delete"," email")))}return y.a.createElement(y.a.Fragment,null,y.a.createElement(N.a,{icon:"icon-check",hotkey:l&&{name:"Complete"},onClick:this.onClickComplete},n.isComplete()?"Uncomplete":"Complete"),y.a.createElement(N.a,{icon:"icon-zoom-in",hotkey:l&&{name:"ZoomIn"},onClick:this.onClickZoom},"Zoom In"),y.a.createElement(N.a,{icon:"icon-star",hotkey:l&&{name:"Star"},onClick:this.onClickStar},n.isStarred()?"Unstar":"Star"),y.a.createElement(w.a,{hotkey:l&&i+" + #"},"Priority"),y.a.createElement("div",{className:"horizontalMenu"},y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityNone",width:24,height:24,tooltipHotkey:l&&{name:"PriorityNone"},onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.None)}),y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityLow",width:24,height:24,tooltipHotkey:l&&{name:"Priority1"},onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.P2)}),y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityMed",width:24,height:24,tooltipHotkey:l&&{name:"Priority2"},onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.P1)}),y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityHigh",width:24,height:24,tooltipHotkey:l&&{name:"Priority3"},onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.P0)})),y.a.createElement(w.a,null,"Item Type"),y.a.createElement("div",{className:"horizontalMenu"},y.a.createElement(S.a,{className:"c-border-heavy",iconSize:14,width:24,height:24,tooltip:"None",onClick:this.onClickPrefix.bind(this,null)}),y.a.createElement(S.a,{className:"c-border-heavy",icon:"icon-project",iconSize:18,width:24,height:24,tooltip:"Project",onClick:this.onClickPrefix.bind(this,f.a.Prefix.Header)}),y.a.createElement(S.a,{className:"c-border-heavy",icon:"icon-check",iconSize:15,width:24,height:24,tooltip:"Task",onClick:this.onClickPrefix.bind(this,f.a.Prefix.Task)}),y.a.createElement(S.a,{className:"c-border-heavy",icon:"icon-bullet",iconSize:22,width:24,height:24,tooltip:"Bullet",onClick:this.onClickPrefix.bind(this,f.a.Prefix.Bullet)}),y.a.createElement(S.a,{className:"c-border-heavy",icon:"icon-numlist",iconSize:13,width:24,height:24,tooltip:"Numbered List",onClick:this.onClickPrefix.bind(this,f.a.Prefix.NumList)})),e&&y.a.createElement(y.a.Fragment,null,y.a.createElement("hr",null),e),y.a.createElement("hr",null),o&&y.a.createElement(N.a,{icon:"icon-format_indent_increase",hotkey:{name:"Indent"},onClick:this.onClickIndent.bind(this,!1)},"Indent"),s&&y.a.createElement(N.a,{icon:"icon-format_indent_decrease",hotkey:{name:"Unindent"},onClick:this.onClickIndent.bind(this,!0)},"Unindent"),!r&&y.a.createElement(N.a,{icon:"icon-align-left",hotkey:{name:"MoveAutocomplete"},onClick:this.onClickMove},"Move"),y.a.createElement("hr",null),!r&&y.a.createElement(N.a,{icon:"icon-sticky-note-o",hotkey:{name:"EditNote"},onClick:this.onClickNote},"Add Note"),y.a.createElement(N.a,{icon:"icon-zoom-in-plus",onClick:this.onClickZoomNewPane},"Open in New Pane"),y.a.createElement(N.a,{icon:"icon-keyboard-tab",hotkey:{name:"Goto"},onClick:this.onClickGoto},"Go to in all panes"),t,y.a.createElement("hr",null),y.a.createElement(N.a,{icon:"icon-task",onClick:this.onClickArchive},"Archive Item"),y.a.createElement(N.a,{icon:"icon-delete",hotkey:{name:"DeleteItem"},onClick:this.onClickDelete},"Delete"))}},{key:"renderMenuArchived",value:function(){return y.a.createElement(y.a.Fragment,null,y.a.createElement(N.a,{icon:"icon-task",onClick:this.onClickUnarchive},"Unarchive"),y.a.createElement(N.a,{icon:"icon-delete",onClick:this.onClickDelete},"Delete"))}},{key:"renderMenuDeleted",value:function(){return y.a.createElement(y.a.Fragment,null,y.a.createElement(N.a,{icon:"icon-task",onClick:this.onClickUndelete},"Undelete"))}},{key:"renderMenuDrive",value:function(){var e=this.props.pane,t=this.item,a=t.isCollapsed(e,!1),n=e.supportCollapsing&&(t.isHeader()||t.hasChildren()),i=t.isHeader()||t.hasChildren(),r=t.getAttachmentByPlugin(f.a.PluginID.Drive),l=r.getPlugin().isImage(r),o=r.getField("showInline");return y.a.createElement(y.a.Fragment,null,!e.plugin&&l&&y.a.createElement(N.a,{onClick:this.onClickShowDriveImageText.bind(this,!o)},"Show as "+(o?"text":"image")),e.plugin&&y.a.createElement(N.a,{disabled:!n,icon:a?"icon-add":"icon-minus",hotkey:{name:"Collapse"},onClick:this.onClickCollapse},a?"Expand":"Collapse"),e.plugin&&y.a.createElement(N.a,{disabled:!i,icon:"icon-zoom-in",hotkey:{name:"ZoomIn"},onClick:this.onClickZoom},"Zoom In"),y.a.createElement(N.a,{onClick:this.onViewInDrive},"View in Drive"),!e.plugin&&y.a.createElement("hr",null))}},{key:"renderMenuGCalendar",value:function(e){return e.getPlugin().hasWritePermissionForAttach(e)?y.a.createElement(y.a.Fragment,null,y.a.createElement(N.a,{icon:"icon-check",onClick:this.onClickComplete},e.getField("isComplete")?"Uncomplete":"Complete"),y.a.createElement(N.a,{icon:"icon-task",onClick:this.onClickArchive},e.getField("isArchived")?"Unarchive":"Archive"),y.a.createElement("hr",null),y.a.createElement(N.a,{className:"mat-subheader"},"Priority"),y.a.createElement("div",{id:"contextMenuPriority",className:"horizontalMenu"},y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityNone",onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.None)}),y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityLow",onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.P2)}),y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityMed",onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.P1)}),y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityHigh",onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.P0)})),y.a.createElement("hr",null),y.a.createElement(N.a,{icon:"icon-delete",onClick:this.onClickDeleteCalendar},"Remove from Google Calendar")):y.a.createElement(y.a.Fragment,null,y.a.createElement(N.a,{icon:"icon-warning"},"Read-Only Event"))}},{key:"renderMenuGmail",value:function(e){var t=this.item,a=this.mod,n="PaneGmail"===this.props.pane.type,i=e.getPlugin(),r=i.isItemUnread(t),l=i.isItemStarred(t),o=i.isItemArchived(t),s=i.isItemFullTrashed(t),c=y.a.createElement(y.a.Fragment,null,y.a.createElement(N.a,{icon:"icon-reply",hotkey:n&&{name:"Reply",group:"Email"},onClick:this.onClickReply},"Reply"),y.a.createElement(N.a,{icon:"icon-reply-all",hotkey:n&&{name:"ReplyAll",group:"Email"},onClick:this.onClickReplyAll},"Reply All"),y.a.createElement(N.a,{icon:"icon-forward",hotkey:n&&{name:"Forward",group:"Email"},onClick:this.onClickForward},"Forward"),y.a.createElement("hr",null));return y.a.createElement(y.a.Fragment,null,c,n&&y.a.createElement(y.a.Fragment,null,y.a.createElement(N.a,{icon:r?"icon-drafts":"icon-unread",iconSize:14,hotkey:r?"":{name:"MarkUnread",group:"Email"},onClick:this.onClickRead},r?"Mark as read":"Mark as unread"),y.a.createElement(N.a,{icon:"icon-star",hotkey:{name:"Star",group:n?"Email":"Pane"},onClick:this.onClickStarGmail},l?"Unstar":"Star"),y.a.createElement("hr",null),y.a.createElement(N.a,{className:"mat-subheader",hotkey:a+" + #"},"Priority"),y.a.createElement("div",{id:"contextMenuPriority",className:"horizontalMenu"},y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityNone",onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.None)}),y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityLow",onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.P2)}),y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityMed",onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.P1)}),y.a.createElement(S.a,{className:"c-border-heavy",id:"itemPriorityHigh",onClick:this.onClickPriority.bind(this,f.a.VMLIFlag.P0)})),y.a.createElement("hr",null),y.a.createElement(N.a,{icon:"icon-tag",hotkey:{name:"Label",group:"Email"},onClick:this.onClickLabel},"Label"),y.a.createElement(N.a,{icon:"icon-check",hotkey:{name:"Task",group:"Email"},onClick:this.onClickCreateTask},"Create Task"),y.a.createElement(N.a,{icon:"icon-align-left",hotkey:{name:"Move",group:"Email"},onClick:this.onClickMove},"Add to Outline"),y.a.createElement(N.a,{icon:"icon-calendar",hotkey:{name:"Schedule",group:"Email"},onClick:this.onClickSchedule},"Add To Calendar"),y.a.createElement("hr",null),y.a.createElement(N.a,{disabled:s,icon:"icon-task",hotkey:{name:"Archive",group:"Email"},onClick:this.onClickArchiveGmail},o?"Unarchive":"Archive"),y.a.createElement(N.a,{icon:"icon-delete",hotkey:{name:"Delete",group:"Email"},onClick:this.onClickDeleteGmail},s?"Undelete":"Delete")))}},{key:"render",value:function(){var e,t,a=this.props,n=a.pane,i=this.item,r=a.element,l=h.default.getPluginForElement(r);if(l){var o=l.getAttribute("plugin");if(i.hasPluginAttachment(o))switch(o){case f.a.PluginID.Drive:t=this.renderMenuDrive();break;case f.a.PluginID.GCalendar:t=this.renderMenuGCalendar(i.getAttachmentByPlugin(o));break;case f.a.PluginID.Gmail:t=this.renderMenuGmail(i.getAttachmentByPlugin(o))}n.plugin||(e=t,t=void 0)}else if(h.default.hasClass(r,"linkImage"))e=this.renderMenuLinkImage(r);else if(h.default.hasClass(r,"mdImage"))e=this.renderMenuItemMDImage(r);else if(h.default.hasClass(r,"driveImage"))e=this.renderMenuDrive();else if(h.default.hasClass(r,"date")){g.default.pluginManager.getPluginGCalendar()&&(t=i.hasAttachmentType(f.a.PluginType.Calendar)?this.renderMenuGCalendar(i.getAttachmentByPlugin(f.a.PluginID.GCalendar)):this.renderMenuDate())}else i.isNote()&&(t=this.renderMenuNote());if(!t){var s=n.getContextMenuMode();switch(s){case"Normal":t=this.renderMenuDefault();break;case"Archived":t=this.renderMenuArchived();break;case"Deleted":t=this.renderMenuDeleted();break;case"Gmail":t=this.renderMenuGmail(i.getAttachmentByPlugin(f.a.PluginID.Gmail));break;default:try{h.default.PAssert(672,!1,"Unknown context menu mdoe: "+s)}catch(c){h.default.reportError(c)}}}return y.a.createElement(x.a,{id:"contextMenuItem",element:a.element,supportArrows:!0,pos:a.pos,noBackdrop:a.noBackdrop},e,t)}}]),t}(k.a);t.default=D},824:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(0),g=a(1),v=a(7),y=a(3),k=a(19),E=a(2),C=a.n(E),b=a(21),S=a(122),x=a(57),w=a(44),N=a(20),M=a(61),D=a(40),P=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){this.createObservables({syncTimes:{},isBackingUp:!1,updateMessage:void 0});var e=y.default.pluginManager.getPlugin(g.a.PluginID.Gmail);e.isEnabled()&&this.syncTimes.set(e.getAllLastSyncTimes()),this.listenTo(D.a.onAccountsUpdated)}},{key:"getState",value:function(){var e=k.a.onlineStatus.get(),t={onlineStatus:k.a.onlineStatus,lastSync:y.default.settings.lastSync,lastSyncText:this.getLastSyncText(),lastBackupText:this.getLastBackupText(),isOnline:"Offline"!==e,isConnected:"Online"===e,supportsOffline:!!window.applicationCache,nearQuota:v.a.isNearStorageQuota,hasUnsavedData:!1,cacheRatioWarning:parseFloat(y.default.pluginManager.getCacheSizeRatio())<.6,backupFrequency:y.default.settings.backupFrequency,isBackupEnabled:y.default.settings.isBackupEnabled(),hasUpdate:y.default.AppCache.hasUpdate};return t.hasWarning=t.nearQuota||t.hasUnsavedData||t.cacheRatioWarning||!t.supportsOffline,t}},{key:"getLastSyncText",value:function(){var e=y.default.settings.lastSync.get();return e>0?new Date(e).toString(y.default.International.getFormat(g.a.DFormat.LongDayTime)):"Not synced"}},{key:"getLastBackupText",value:function(){var e,t=S.a.getLastBackup();if(this.isBackingUp.get())e="Backing up...";else if(t>0){var a=new Date(t);e=M.a.toHumanText(a)}else e="Not backed up";return e}},{key:"_handleQuotaOverClick",value:function(){y.default.toasts.pushMessage({text:"Your computer's offline storage quota has been exceeded. Please try freeing space on your device. Offline access will not work.",action:g.a.MessageAction.Okay})}},{key:"_handleQuotaNearClick",value:function(){y.default.toasts.pushMessage({text:"Your computer's offline storage quota is almost exceeded. Please try freeing space on your device, running out will cause offline access to not work.",action:g.a.MessageAction.Okay})}},{key:"_handleUnsavedClick",value:function(){y.default.toasts.pushMessage({text:"Your local changes have been unable to be persisted to disk and have not been saved remotely. You must reconnect to the internet to save them. Free up disk space to prevent this happening.",action:g.a.MessageAction.Okay})}},{key:"_handleRatioClick",value:function(){y.default.toasts.pushMessage({text:"Due to low disk space your cache size was restricted. View your General Settings to reset your cache size.",action:g.a.MessageAction.OpenGeneralSettings})}},{key:"_handleBlockClick",value:function(){}},{key:"_handleCookiesClick",value:function(){}},{key:"onClickBackup",value:function(){var e=this;this.isBackingUp.set(!0),S.a.backupAll().then(function(){return e.isBackingUp.set(!1)})}},{key:"onClickEnableBackups",value:function(){S.a.enable()}},{key:"onClickCheckUpdates",value:function(e,t){var a=this;this.state.hasUpdate?f.default.reload():y.default.AppCache.update(function(e){a.updateMessage.set(e?"Installing...":"Up to date")})}},{key:"_handleIconWarningClick",value:function(e){D.a.authAccount(e,y.default.pluginManager.getPlugin(g.a.PluginID.Gmail).googleScopes(),f.default.emptyFn)}},{key:"componentDidUpdate",value:function(){this.refs.menu.updateState()}},{key:"_renderAccounts",value:function(){var e,t,a,n,i=this.state,r=[];for(var l in i.syncTimes)if(i.syncTimes.hasOwnProperty(l)){var o=i.syncTimes[l];if(e=void 0,t=void 0,a=void 0,n=o?l+": "+o.toString(y.default.International.getFormat(g.a.DFormat.ShortDayTime)):l+": Not synced",D.a.isLoaded){var s=D.a.getError(l);if(s)e="icon-warning",t=s,a=this._handleIconWarningClick.bind(this,l);else y.default.pluginManager.getPlugin(g.a.PluginID.Gmail).verifyAuthorization(l)||(e="icon-warning",t="Missing authorization",a=this._handleIconWarningClick.bind(this,l))}r.push(C.a.createElement(w.a,{key:l,icon:e,iconTooltip:t,onClickIcon:a},n))}return r.length>0&&C.a.createElement(C.a.Fragment,null,C.a.createElement("hr",null),C.a.createElement(w.a,{className:"onlineStatusHeader"},"Email accounts"),r)}},{key:"render",value:function(){var e=this.state,t=+g.a.jsVersion,a="".concat(t,": ").concat(new Date(t).toString("MMMM d, h:mm tt")),n=this._renderAccounts();return C.a.createElement(x.a,i()({},this.props,{ref:"menu",key:"contextMenuOnlineStatus",id:"contextMenuOnlineStatus",element:this.props.element}),C.a.createElement(w.a,{className:"onlineStatusHeader"},"Last Sync"),C.a.createElement(w.a,null,e.lastSyncText),C.a.createElement("hr",null),C.a.createElement(w.a,{className:"onlineStatusHeader",height:36},"Last Backup",C.a.createElement(N.a,{primary:!0,onClick:this.onClickBackup},"Backup now")),C.a.createElement(w.a,null,e.lastBackupText),e.hasWarning&&C.a.createElement("div",null,C.a.createElement("hr",null),C.a.createElement(w.a,{className:"onlineStatusHeader"},"Warnings"),!e.supportsOffline&&C.a.createElement(w.a,{clickCloses:!1,tooltip:"Learn More"},"Your browser does not support offline access"),e.nearQuota&&C.a.createElement(w.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleQuotaNearClick},"Nearly out of disk space"),e.hasUnsavedData&&C.a.createElement(w.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleUnsavedClick},"Unsaved changes will be lost"),e.cacheRatioWarning&&C.a.createElement(w.a,{clickCloses:!1,tooltip:"Learn More",onClick:this._handleRatioClick},"Your data is not efficiently being cached")),n,C.a.createElement("hr",null),C.a.createElement(w.a,{className:"onlineStatusHeader",height:36},"App version",e.updateMessage&&!e.hasUpdate?C.a.createElement("div",{style:{paddingLeft:48}},e.updateMessage):C.a.createElement(N.a,{primary:!0,onClick:this.onClickCheckUpdates},e.hasUpdate?"Update":"Check for updates")),v.a.isBeta&&C.a.createElement(w.a,null,"Beta"),C.a.createElement(w.a,null,a))}}]),t}(b.a);t.default=P},825:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(3),g=a(2),v=a.n(g),y=a(21),k=a(66),E=a(57),C=a(20),b=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"onClickEnable",value:function(){k.a.refresh(),k.a.enableOfflineFeatures(!1,this.onEnable)}},{key:"onEnable",value:function(e){e&&f.default.menus.closeContextMenu()}},{key:"render",value:function(){return v.a.createElement(E.a,i()({},this.props,{key:"contextMenuAuthorize",id:"contextMenuAuthorize"}),v.a.createElement("div",null,this.props.message),v.a.createElement("div",{className:"center"},v.a.createElement(C.a,{primary:!0,raised:!0,onClick:this.onClickEnable},"AUTHORIZE")))}}]),t}(y.a);t.default=b},826:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(0),g=a(1),v=a(3),y=a(2),k=a.n(y),E=a(21),C=a(24),b=a(57),S=a(44),x=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"onMount",value:function(){C.a.fireEvent("helpOpened",[])}},{key:"onClickVideo",value:function(){var e="https://www.youtube.com/watch?v="+g.a.IntroVideoID;f.default.openUrl(e)}},{key:"onClickGetStarted",value:function(){var e=f.default.createPath("help/basics");f.default.openUrl(e)}},{key:"onClickGTDEmail",value:function(){var e=f.default.createPath("help/email");f.default.openUrl(e)}},{key:"onClickAdvancedHelp",value:function(){v.default.intro.toggle(g.a.HelpMode.Normal)}},{key:"onClickHotkeys",value:function(){v.default.intro.toggle(g.a.HelpMode.Hotkeys)}},{key:"render",value:function(){return k.a.createElement(b.a,i()({},this.props,{key:"contextMenuHelp",id:"contextMenuHelp"}),k.a.createElement(S.a,{className:"helpVideoLink",onClick:this.onClickVideo},k.a.createElement("i",{className:"icon-youtube-play"}),k.a.createElement("div",null,"Introduction Video")),k.a.createElement("hr",null),k.a.createElement(S.a,{onClick:this.onClickGetStarted},"How to get started"),k.a.createElement(S.a,{onClick:this.onClickGTDEmail},"How to GTD your email"),k.a.createElement("hr",null),k.a.createElement(S.a,{onClick:this.onClickAdvancedHelp},"Advanced Help"),k.a.createElement(S.a,{onClick:this.onClickHotkeys},"Hotkeys"))}}]),t}(E.a);t.default=x},827:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(2),g=a.n(f),v=a(21),y=a(792),k=a(57),E=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"render",value:function(){return g.a.createElement(k.a,i()({},this.props,{key:"contextMenuHeart",id:"contextMenuHeart",element:this.props.element}),g.a.createElement(y.a,null))}}]),t}(v.a);t.default=E},828:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(0),g=a(1),v=a(3),y=a(28),k=a(7),E=a(116),C=a(2),b=a.n(C),S=a(21),x=a(8),w=a(57),N=a(44),M=a(40),D=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){M.a.ensureGapi()}},{key:"onClickSettings",value:function(){v.default.menus.openSettings()}},{key:"onClickDisplaySettings",value:function(){v.default.menus.openDisplaySettings()}},{key:"onClickImport",value:function(){x.d.miscAction({type:x.b.Misc,misc:x.a.OpenImport}),v.default.menus.openModal(g.a.Modals.ImportData)}},{key:"onClickExport",value:function(){x.d.miscAction({type:x.b.Misc,misc:x.a.OpenExport}),v.default.menus.openModal(g.a.Modals.ExportData)}},{key:"onClickRevision",value:function(){v.default.menus.openModal(g.a.Modals.Backups)}},{key:"onClickFeedback",value:function(){v.default.menus.openModal(g.a.Modals.ReportBug)}},{key:"onClickBlog",value:function(){f.default.openUrl("https://www.moo.do/blog/")}},{key:"onClickLogout",value:function(){v.default.setup.logoutClicked()}},{key:"onClickShare",value:function(){v.default.menus.openContextMenu({componentName:"ReactContextMenuShare",element:this.props.element})}},{key:"onClickDownloadApp",value:function(){f.default.openUrl(k.a.getAppDownloadURL())}},{key:"onClickTrial",value:function(){v.default.menus.openSettings(g.a.SettingsSections.Account)}},{key:"onClickHelp",value:function(){v.default.menus.openContextMenu({componentName:"ReactContextMenuHelp",element:this.props.element})}},{key:"onClickImportMoodo",value:function(){(new E.a).authAndImportDocuments()}},{key:"render",value:function(){var e=v.default.billingManager,t=y.a.getAccountName(),a=e.isTrialState()&&!v.default.settings.trialOverHidden.get(),n=e.isTrialOver(),r=e.daysLeftInTrial.get();g.a.jsVersion;return b.a.createElement(w.a,i()({},this.props,{key:"contextMenuOptions",id:"contextMenuOptions",supportArrows:!0}),b.a.createElement(N.a,{onClick:this.onClickSettings},"Settings"),b.a.createElement(N.a,{onClick:this.onClickDisplaySettings},"Display Settings"),b.a.createElement("hr",null),b.a.createElement(N.a,{onClick:this.onClickHelp},"Help"),b.a.createElement("hr",null),b.a.createElement(N.a,{onClick:this.onClickImport},"Import Data"),b.a.createElement(N.a,{onClick:this.onClickExport},"Export Data"),b.a.createElement(N.a,{onClick:this.onClickRevision},"Revision History"),b.a.createElement(N.a,{onClick:this.onClickImportMoodo},"Import old Moo.do"),b.a.createElement("hr",null),b.a.createElement(N.a,{onClick:this.onClickFeedback},"Contact Support"),b.a.createElement(N.a,{onClick:this.onClickBlog},"Moo.do Blog"),k.a.canDownloadNativeApp()&&b.a.createElement(N.a,{onClick:this.onClickDownloadApp},"Get "+k.a.getPlatformName()+" app"),b.a.createElement("hr",null),a&&b.a.createElement(N.a,{className:n?"error":"",onClick:this.onClickTrial},n?"Trial over":"Trial: "+r+" days"),b.a.createElement(N.a,{onClick:this.onClickLogout},"Logout"),b.a.createElement(N.a,{className:"username",faded:!0},t),b.a.createElement(N.a,{className:"useremail",faded:!0},v.default.settings.getUserIdentifier()))}}]),t}(S.a);t.default=D},829:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(1),g=a(3),v=a(2),y=a.n(v),k=a(21),E=a(57),C=a(20),b=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"onClickUpsell",value:function(){var e=!g.default.billingManager.isTrialOver();g.default.menus.closeContextMenu(),e?g.default.billingManager.startTrial():g.default.menus.openSettings(f.a.SettingsSections.Account)}},{key:"render",value:function(){var e=this.props,t=!g.default.billingManager.isTrialOver();return y.a.createElement(E.a,i()({},e,{id:"contextMenuBoardsUpsell"}),y.a.createElement("div",null,y.a.createElement("div",null,e.premiumMessage),y.a.createElement("br",null),t&&y.a.createElement("div",null,"Start your "+f.a.TrialDuration+" day free trial to enable "+e.enableMessage+"."),!t&&y.a.createElement("div",null,"Go Premium to enable "+e.enableMessage+".")),y.a.createElement("br",null),y.a.createElement("div",{className:"center"},y.a.createElement(C.a,{primary:!0,raised:!0,onClick:this.onClickUpsell},t?"Start Trial":"Go Premium")))}}]),t}(k.a);t.default=b},830:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(1),f=a(3),g=a(2),v=a.n(g),y=a(21),k=a(8),E=a(57),C=a(63),b=a(4),S=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){var e=f.default.pluginManager.getPlugin(p.a.PluginID.Drive);this.createObservables({isHovered:!1,isDriveEnabled:e.isEnabled()}),this.refMenu=v.a.createRef(),this.refPicker=v.a.createRef(),this.refInputUrl=v.a.createRef()}},{key:"doUpload",value:function(e){for(var t=0,a=f.default.pluginManager.getPluginDrive(),n=0;n<e.length;n++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;a.handleDropFile(e[n],this.props.pane,void 0,this.onUploadComplete.bind(this,0===n))}this.refMenu.current.close()}},{key:"onUploadComplete",value:function(e,t){k.d.beginAction();var a=this.props,n=a.item,i=a.itemParent,r=a.pane,l=isNaN(a.insertIndex)?a.paneObject.index+1:a.insertIndex;if(e&&n)n.setText(t,p.a.ChangeType.Local);else{var o=i||n.parent(),s=r.createVMLI({text:t},{parent:o,changeType:p.a.ChangeType.AllLocal});o.insertItem(s,l)}return k.d.endAction(),n}},{key:"onChangeFile",value:function(e){return e.target.files&&e.target.files.length>0&&this.doUpload(e.target.files),!1}},{key:"onDragEnter",value:function(){this.isHovered.set(!0)}},{key:"onDragLeave",value:function(){this.isHovered.set(!1)}},{key:"onDrop",value:function(e){var t=e.dataTransfer;t.files&&t.files.length>0&&this.doUpload(t.files)}},{key:"onClickEnableDrive",value:function(){this.refMenu.current.close(),f.default.menus.openSettings(p.a.SettingsSections.Plugins)}},{key:"onClick",value:function(){this.refPicker.current.click()}},{key:"onClickAddUrl",value:function(){this.refMenu.current.close();var e=this.props,t=this.refInputUrl.current.getValue();if(e.pane.setIgnoreRestoreScroll(),this.props.item)b.a.selectIndex(this.props.paneObject.index,0,0),this.props.item.onInsertLink({url:t},f.default.settings.showImagesInline.get());else{k.d.beginAction();var a=e.itemParent,n=e.pane.createVMLI({text:f.default.settings.getDefaultItemText()},{parent:a,changeType:p.a.ChangeType.AllLocal});a.insertItem(n,e.insertIndex),b.a.selectIndex(e.insertIndex,n.getParsedText().length),n.onInsertLink({url:t},f.default.settings.showImagesInline.get()),k.d.endAction()}}},{key:"render",value:function(){var e=this.props,t=this.state,a=this.state.isHovered,n=e.image,i=h.default.classNames("uploadDropZone",{"hovered c-bg-light":a}),r=n?"image":"file";return v.a.createElement(E.a,{key:"contextMenuDropZone",id:"contextMenuDropZone",name:"ReactContextMenuDropZone",element:e.element,pos:e.pos,ref:this.refMenu},n&&v.a.createElement(C.a,{focused:!0,placeholder:"Enter an image address",height:32,buttonText:"ADD",onButtonClick:this.onClickAddUrl,ref:this.refInputUrl}),n&&v.a.createElement("div",{className:"dropOr center c-foreground-faded"},"or"),t.isDriveEnabled&&v.a.createElement("div",{className:i,onClick:this.onClick,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop},(a?"Drop file(s)":"Drag files here or click")+" to add "+r+".",v.a.createElement("input",{type:"file",ref:this.refPicker,className:"hidden",multiple:!0,onChange:this.onChangeFile})),!t.isDriveEnabled&&v.a.createElement("div",{className:i,onClick:this.onClickEnableDrive},"Enable the Google Drive plugin to upload files"))}}]),t}(y.a);t.default=S},831:function(e,t,a){"use strict";a.r(t);for(var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(0),g=a(1),v=a(3),y=a(2),k=a(21),E=a(786),C=(a(785),a(63)),b=a(57),S=a(61),x=a(20),w=a(788),N=a(58),M=a(80),D=0,P=Object(E.c)(E.a),I=["All day"],T=0;T<24;T++){if(D++>5e3&&__infLoop&&__infLoop(D))throw new RangeError;var A=T%12===0?"12":T>12?T-12:T,L=T>=12?"pm":"am";I.push(A+":00 "+L),I.push(A+":30 "+L)}var F=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){if(this.refInput=y.createRef(),this.refTimes=y.createRef(),this.createObservables({selectedDate:{start:void 0,end:void 0},selectedTimes:[],text:void 0}),this.updateText(),this.textOffset=this.props.textOffset,void 0===this.textOffset){var e=this.props.item.getParsedText(),t=e.indexOf(g.a.CharDate);this.textOffset=t>=0?t:e.length}}},{key:"onMount",value:function(){this.updateDateTime()}},{key:"setMooDate",value:function(e){var t=this.props.item,a=this.textOffset,n=t.getParsedText();if(t.setMooDate(e,g.a.ChangeType.Local),e&&void 0!==a&&t.getRawText().indexOf(g.a.CharDate)<0){var i=a,r="";n[a-1]===g.a.PrefixDate?i--:" "!==n[i]&&(r=" ");var l=n.substr(a);l=l?" "+l:" ",n=(n.substr(0,i)+r+g.a.CharDate+l).replace(/  /g," "),t.setText(n,g.a.ChangeType.Local)}}},{key:"getMooDate",value:function(){return this.props.item.getMooDate()}},{key:"onInputChange",value:function(e){f.default.timeoutOnce("ctxMenuDateUpdateDate",this._onInputChangeTimeout.bind(this,e),200)}},{key:"_onInputChangeTimeout",value:function(e){var t=S.a.parseText(e);this.setMooDate(t),this.updateDateTime(),this.text.set(e)}},{key:"onClickClearDate",value:function(){this.onInputChange("")}},{key:"onClickSave",value:function(){v.default.menus.closeContextMenu("ReactContextMenuDate")}},{key:"updateDateTime",value:function(){var e=this.getMooDate();if(e){var t=e.getTime();if(t){var a=0;t=Math.round(t/36e4);for(var n=2*Math.floor(t/10)+(t%10>0?1:0),i=e.getDuration()/(30*g.a.MSPerMinute)||2,r=[],l=n;l<n+i;l++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;r.push(l+1)}this.selectedTimes.set(r),this.refTimes.current.scrollTop=28*(n-3)}else this.selectedTimes.set([]);if(e.isRange()){var o=e.getStart(),s=e.getEnd();o||(o=new Date),s||(s=new Date(o).addMonths(3)),this.selectedDate.set({start:o,end:s})}else this.selectedDate.set(e.getAllDates())}else this.selectedDate.set(void 0)}},{key:"onMouseDownTime",value:function(e){this._mouseDownOnTime=e,this.selectedTimes.set([e]);var t=this.getMooDate();if(t||(t=N.a.now(),this.setMooDate(t)),0===e)t.clearTime(),t.setDuration(void 0);else{var a=e-1;t.setHours(a/2),t.setDuration(30*g.a.MSPerMinute)}this.updateText(),document.addEventListener("mouseup",this.onMouseUpTime)}},{key:"onMouseMoveTime",value:function(e){if(void 0!==this._mouseDownOnTime){var t,a,n=0,i=this.selectedTimes.get();e<=this._mouseDownOnTime?(t=e,a=this._mouseDownOnTime):(t=this._mouseDownOnTime,a=e),i=[];for(var r=t;r<=a;r++){if(n++>5e3&&__infLoop&&__infLoop(n))throw new RangeError;i.push(r)}this.duration=i.length>0?30*i.length*g.a.MSPerMinute:void 0,this.getMooDate().setDuration(this.duration),this.updateText(),this.selectedTimes.set(i)}}},{key:"onMouseUpTime",value:function(){this.setMooDate(this.getMooDate()),this._mouseDownOnTime=void 0,document.removeEventListener("mouseup",this.onMouseUpTime)}},{key:"onSelectDate",value:function(e){this.selectedDate.set(e),this.setMooDate(e.start&&e.end?N.a.fromRange(e.start,e.end,(this.state.selectedTimes[0]||0)/2,this.duration):void 0),this.updateText()}},{key:"onChangeRepeatComplete",value:function(e){var t=this.getMooDate();if(t){var a=this.props.item;t.setRepeatOnComplete(e),a.onMooDateUpdated(g.a.ChangeType.Local)}}},{key:"onInputEnter",value:function(){v.default.menus.closeContextMenu("ReactContextMenuDate")}},{key:"updateText",value:function(){var e=this.getMooDate();this.text.set(e?e.toText():""),this.refInput.current&&this.refInput.current.selectEnd()}},{key:"onChangeCalendar",value:function(e){var t=this.props.item;v.default.pluginManager.getPluginGCalendar().setCalendarForItem(t,e)}},{key:"renderCalendarSelector",value:function(){var e=this.props.item,t=v.default.pluginManager.getPluginGCalendar(),a=e.hasPluginAttachment(g.a.PluginID.GCalendar),n=t.getWriteableCalendarsForItem(e),i=n.calendars,r=n.selected;return i?y.createElement(w.a,{defaultValue:r,style:{height:26,marginTop:2},ref:"selectCalendar",onChange:this.onChangeCalendar},y.createElement("option",{value:""},(a?"Remove from":"Add to")+" calendar"),i.map(function(e){return y.createElement("option",{key:e.id,value:e.id},e.summary)})):void 0}},{key:"render",value:function(){var e=this,t=this.state,a=this.getMooDate(),n=a&&a.repeatComplete,r=I.map(function(a,n){var i=t.selectedTimes.indexOf(n)>=0,r=f.default.classNames({"c-popup-item":!i},{selected:i});return y.createElement("div",{key:a,className:r,onMouseDown:e.onMouseDownTime.bind(e,n),onMouseMove:e.onMouseMoveTime.bind(e,n)},a)});return y.createElement(b.a,i()({},this.props,{id:"contextMenuDate",width:352,maxHeight:1800}),y.createElement("div",{className:"flexbox"},y.createElement(C.a,{className:"f1",placeholder:"Type or select a date",onChange:this.onInputChange,onEnter:this.onInputEnter,value:t.text,focused:!0,border:!1,ref:this.refInput}),y.createElement(x.a,{height:40,onClick:this.onClickClearDate},"Clear")),y.createElement("div",{className:"flexbox",style:{padding:"0 8px"}},y.createElement(M.a,{className:"f1",initialChecked:n,onChange:this.onChangeRepeatComplete},"Repeat from completion"),this.renderCalendarSelector()),y.createElement("div",{className:"calendarContainer flexbox c-border-heavy",style:{width:352,height:200}},y.createElement(E.b,{Component:P,autoFocus:!1,width:252,height:200,rowHeight:36,selected:t.selectedDate,onSelect:this.onSelectDate,locale:{weekStartsOn:v.default.settings.dayWeekStart.get()},displayOptions:{showHeader:!1,showOverlay:!1}}),y.createElement("div",{className:"times c-border-heavy scrollable f1",ref:this.refTimes},r)))}}]),t}(k.a);t.default=F},832:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(2),p=a(21),f=a(20),g=a(63),v=a(57),y=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){}},{key:"onClickSavePassword",value:function(){this.refs.pass1.getValue(),this.refs.pass2.getValue()}},{key:"render",value:function(){var e=this.props,t={marginTop:8,width:240};return h.createElement(v.a,{key:"contextMenuDocumentPassword",id:"contextMenuDocumentPassword",className:"padded",element:e.element},h.createElement("div",{className:"bold"},"Enter a password"),h.createElement("div",null,h.createElement(g.a,{type:"password",placeholder:"Password",ref:"pass1",style:t,onEnter:this.onClickSavePassword}),h.createElement(g.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:t,onEnter:this.onClickSavePassword})),h.createElement("div",{style:{marginTop:8}},h.createElement(f.a,{raised:!0,primary:!0,onClick:this.onClickSavePassword},"Save")))}}]),t}(p.a);t.default=y},833:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(81),l=a.n(r),o=a(5),s=a.n(o),c=a(6),u=a.n(c),d=a(10),m=a.n(d),h=a(9),p=a.n(h),f=a(11),g=a.n(f),v=a(1),y=a(3),k=a(2),E=a(21),C=a(57),b=a(470),S=a(20),x=a(19),w=(v.a.TaskViewMode,v.a.TaskSortMode,function(e){function t(){return s()(this,t),m()(this,p()(t).apply(this,arguments))}return g()(t,e),u()(t,[{key:"init",value:function(){this.refPaneView=k.createRef()}},{key:"onMount",value:function(){this.props.pane&&this.props.pane.onDestroyed.listen(this.close)}},{key:"onUnmount",value:function(){this.props.pane&&this.props.pane.onDestroyed.unlisten(this.close)}},{key:"close",value:function(){y.default.menus.closeContextMenu(this.props.componentName)}},{key:"onSelected",value:function(){if(this.props.isAddPane){var e=this.refPaneView.current.getCreationProps(),t=e.pane,a=e.type;a?y.default.PaneManager.addPaneByButton(a):(t.setDocument(x.a.getDefaultDocument(),!0),y.default.PaneManager.addPaneAtIndex(t))}this.close()}},{key:"render",value:function(){var e=this.props,t=e.isAddPane,a=l()(e,["isAddPane"]);return k.createElement(C.a,i()({},a,{id:"contextMenuPaneView",ref:"menu",key:"contextMenuPaneView",maxWidth:500,minWidth:0}),k.createElement(b.a,{pane:this.props.pane,isAddPane:t,supportHotkeys:!0,onSelected:this.onSelected,ref:this.refPaneView}),t&&k.createElement("div",{className:"center"},k.createElement(S.a,{className:"addButton",raised:!0,primary:!0,width:240,onClick:this.onSelected},"Add Pane (Enter)")))}}]),t}(E.a));t.default=w},835:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(1),f=a(3),g=a(7),v=a(2),y=a.n(v),k=a(21),E=a(66),C=a(792),b=a(80),S=a(20),x=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){var e=this;this.createObservables({isStoragePersisted:!1,usage:NaN,quota:NaN}),g.a.isStoragePersisted(function(t){e.isStoragePersisted.set(t)}),g.a.estimateAvailableStorage(function(t){e.usage.set(t.usage),e.quota.set(t.quota)},function(){}),this.refSelectItemPrefix=y.a.createRef()}},{key:"onCacheRatioClick",value:function(){this.getCacheRatio()<.98&&(f.default.settings.cacheSizeRatio.set(1),h.default.sendEvent("CacheRatio","Changed",1),f.default.toasts.pushMessage({text:"Success!",action:p.a.MessageAction.Okay}))}},{key:"onSettingChanged",value:function(e,t){e===f.default.settings.showFormattingToolbar&&(t=t?1:-1),e.set(t)}},{key:"parseFn",value:function(e){return parseFloat(e.toFixed(2))}},{key:"getCacheRatio",value:function(){return this.parseFn(f.default.pluginManager.getCacheSizeRatio())}},{key:"onPersistClick",value:function(e){!this.state.isStoragePersisted&&e&&g.a.requestStoragePersistence(function(){this.isStoragePersisted.set(!0)}.bind(this),function(){this.isStoragePersisted.set(!1)}.bind(this))}},{key:"onChangeDefaultItemPrefix",value:function(){f.default.settings.defaultItemPrefix.set(this.refSelectItemPrefix.current.value)}},{key:"renderCheckbox",value:function(e,t){var a=e===f.default.settings.showFormattingToolbar?f.default.settings.showFormattingToolbar.get()>=0:e.get();return y.a.createElement(b.a,{checked:a,onChange:this.onSettingChanged.bind(this,e)},t)}},{key:"render",value:function(){var e=this.getCacheRatio()<.98,t=!g.a.app&&g.a.supportsPersistedStorage(),a=g.a.supportsEstimatedStorage(),n=f.default.settings.defaultItemPrefix.get(),i=+(this.usage.get()/1024/1024).toFixed(2),r=+(this.quota.get()/1024/1024).toFixed(2);return y.a.createElement("div",{key:"content"},y.a.createElement("div",{className:"modal-row"},y.a.createElement("div",{className:"settingsName bold ib"},"Default item type:"),y.a.createElement("select",{defaultValue:n,ref:this.refSelectItemPrefix,onChange:this.onChangeDefaultItemPrefix},y.a.createElement("option",{value:""},"None"),y.a.createElement("option",{value:p.a.Prefix.Task},"Task"),y.a.createElement("option",{value:p.a.Prefix.Bullet},"Bullet")),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"The default prefix for all new items. If you prefer the bulleted look of an Outliner, choose Bullet. If you prefer a checklist, choose Task. If you prefer the flat look of a document, choose None.")),y.a.createElement("div",{className:"modal-row"},this.renderCheckbox(f.default.settings.showMarkdown,"Show Markdown formatting"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Show the raw Markdown formatting characters in selected items")),y.a.createElement("div",{className:"modal-row"},this.renderCheckbox(f.default.settings.openEvernoteApp,"Open Evernote links in Evernote app"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"If not enabled, Evernote links will open the Evernote website")),y.a.createElement("div",{className:"modal-row"},this.renderCheckbox(f.default.settings.selectFullItems,"Select full items"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Expand selection to cover the full items when selecting multiple items")),y.a.createElement("div",{className:"modal-row"},this.renderCheckbox(f.default.settings.showFormattingToolbar,"Enable Formatting Toolbar"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Show a toolbar with formatting hotkeys when text is selected")),y.a.createElement("div",{className:"modal-row"},this.renderCheckbox(f.default.settings.showImagesInline,"Show Images Inline"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Show images inline by default when inserting a link to an image, dragging a file from the Drive pane, or uploading an image from your computer. If disabled, it will show a link to the image.")),g.a.isBeta&&y.a.createElement("div",{className:"modal-row"},this.renderCheckbox(f.default.settings.testBetaFeatures,"Test beta features"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Beta test new UI features that may be unstable. See ",y.a.createElement("a",{href:"https://www.moo.do/beta/",target:"_blank"},"the Slack community")," for details.")),y.a.createElement("hr",null),t&&y.a.createElement("div",{className:"modal-row"},y.a.createElement(b.a,{checked:this.state.isStoragePersisted,onChange:this.onPersistClick,canChange:!this.state.isStoragePersisted},"Enable Persistent Storage"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Allow Moo.do to store your data offline without potential for the browser to delete it. This can help Moo.do's performance if your disk is low on free-space.")),e&&y.a.createElement("div",{className:"modal-row"},y.a.createElement(S.a,{raised:!0,onClick:this.onCacheRatioClick},"Reset Cache Ratio"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"If you have run out of disk space in the past, we may not be efficiently caching your data. If you have resolved any disk space issues, click this button to efficiently cache your data again.")),a&&y.a.createElement("div",{className:"modal-row"},y.a.createElement("div",{className:"modal-row-title"},"Estimated disk usage"),y.a.createElement("div",{className:"modal-subtext"},y.a.createElement("b",null,"Usage: "),Math.round(i)," MB / ",y.a.createElement("b",null,"Quota: "),Math.round(r)," MB")))}}]),t}(k.a),w=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.pluginsEnabled={},this.pluginOptions={},E.a.refresh()}},{key:"onMount",value:function(){this.checkTiers()}},{key:"getState",value:function(){for(var e=0,t={isSaveEnabled:E.a.isSaveEnabled,premiumStatus:f.default.billingManager._premiumStatus},a=E.a.pluginsAvailable,n=0;n<a.length;++n){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var i=a[n];this.pluginsEnabled[i]=t[i+"Enabled"]=E.a.getPluginEnabledObservable(i);var r=E.a.getPluginOptions(i);for(var l in r)if(r.hasOwnProperty(l)){var o=i+"_"+l;this.pluginOptions[o]=t[o]=r[l]}}return t}},{key:"openSection",value:function(e){this.props.openSection(e)}},{key:"onChangeFree",value:function(e){this.refs[p.a.PluginID.Contacts].setValue(e),this.refs[p.a.PluginID.Gmail].setValue(e),this.onChangeFeature()}},{key:"onChangePremium",value:function(e){this.refs[p.a.PluginID.GCalendar].setValue(e),this.refs[p.a.PluginID.Drive].setValue(e),this.refs.DriveShared.setValue(e),this.onChangeFeature()}},{key:"checkTier",value:function(e,t){for(var a=0,n=0,i=0;i<t.length;i++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;this.refs[t[i]].getValue()?n++:n--}n===t.length&&e.setValue(!0),n===-t.length&&e.setValue(!1)}},{key:"checkTiers",value:function(){this.checkTier(this.refs.free,[p.a.PluginID.Contacts,p.a.PluginID.Gmail]),this.checkTier(this.refs.premium,[p.a.PluginID.GCalendar,p.a.PluginID.Drive,"DriveShared"])}},{key:"onChangeFeature",value:function(){E.a.isSaveEnabled.set(!0),this.checkTiers()}},{key:"onClickFixError",value:function(){E.a.enableOfflineFeatures(!0,function(){E.a.refresh(),this.updateState()}.bind(this))}},{key:"onClickCancel",value:function(e){for(var t in this.refs)if(this.refs.hasOwnProperty(t)){var a=this.refs[t];a.checked&&a.resetValue()}this.checkTiers()}},{key:"onClickSave",value:function(e,t){var a=this,n=!0,i=[p.a.PluginID.Contacts,p.a.PluginID.GCalendar,p.a.PluginID.Gmail,p.a.PluginID.Drive].map(function(e){var t=!!a.refs[e].getValue(),i=f.default.pluginManager.getPlugin(e),r={id:e,enable:t};return t&&(i&&!i.isAvailable()&&(n=!1),e===p.a.PluginID.Drive&&(r.shared=!!a.refs.DriveShared.getValue())),r});if(!n){if(f.default.billingManager.isTrialOver())return this.openSection(p.a.SettingsSections.Account),!1;f.default.billingManager.startTrial()}var r=!1;return E.a.setEnabledPlugins(i,function(e){r=!0,t(),e&&E.a.isSaveEnabled.set(!1)}),!r}},{key:"renderPluginOptionCheckbox",value:function(e,t,a,n,i){return y.a.createElement(b.a,{className:"subcheckbox",ref:t,initialChecked:!!this.state[e+"_"+a],disabled:i,onChange:this.onChangeFeature},n)}},{key:"renderPluginCheckbox",value:function(e,t,a,n){return y.a.createElement(b.a,{ref:e,initialChecked:!!this.state[e+"Enabled"],disabled:n,onChange:this.onChangeFeature},a,t)}},{key:"render",value:function(){var e=f.default.billingManager,t=this.state,a=e.hasPremiumFeatures(),n=e.isTrialOver();return y.a.createElement("div",{key:"content",className:"new-modal-group"},y.a.createElement("div",{className:"new-modal-title"},y.a.createElement("div",{className:"title"},"Integrate with your other services"),y.a.createElement("div",{className:"subtext center c-foreground-light"},"Use ",y.a.createElement("b",null,"Moo.do")," to organize everything in one place")),y.a.createElement("div",{className:"setupFeatures featureCheckboxes"},!1,y.a.createElement("div",{className:"featureTier c-border"},y.a.createElement("div",{className:"tierTitleWrapper"},y.a.createElement(b.a,{ref:"free",className:"tierTitle c-background",initialChecked:!1,onChange:this.onChangeFree},"Free Plugins")),y.a.createElement("div",{className:"flexbox"},y.a.createElement("div",{className:"setupFeatureHalf"},this.renderPluginCheckbox(p.a.PluginID.Contacts,"Google Contacts",y.a.createElement("img",{src:"/img/plugin-gcontacts.png"}))),y.a.createElement("div",{className:"setupFeatureHalf"},this.renderPluginCheckbox(p.a.PluginID.Gmail,"Gmail",y.a.createElement("img",{src:"/img/plugin-gmail.png"}))))),y.a.createElement("div",{className:"featureTier c-border"},y.a.createElement("div",{className:"tierTitleWrapper"},y.a.createElement(b.a,{ref:"premium",className:"tierTitle c-background",initialChecked:!1,onChange:this.onChangePremium},"Premium Plugins")),!a&&n&&y.a.createElement("div",{className:"featureTierDesc error"},"Your free trial of Premium has ended. Please signup to continue using premium features or contact support@moo.do to extend."),!a&&!n&&y.a.createElement("div",{className:"featureTierDesc c-foreground-light"},"Enabling Premium features will start a free "+p.a.TrialDuration+" day trial of Moo.do Premium."),y.a.createElement("div",{className:"flexbox"},y.a.createElement("div",{className:"setupFeature setupFeatureHalf"},this.renderPluginCheckbox(p.a.PluginID.GCalendar,"Google Calendar",y.a.createElement("img",{src:"/img/plugin-gcal.png"}),n)),y.a.createElement("div",{className:"setupFeature setupFeatureHalf"},this.renderPluginCheckbox(p.a.PluginID.Drive,"Google Drive",y.a.createElement("img",{src:"/img/plugin-gdrive.png"}),n),this.renderPluginOptionCheckbox(p.a.PluginID.Drive,"DriveShared",p.a.PluginSettingsID.Drive.WriteAccess,"Share files with collaborators",n)))),y.a.createElement("div",{className:"setupSubtext"},y.a.createElement("b",null,"Moo.do")," connects with your Google services to integrate everything together. Plugin data is cached locally on your device and is never sent to any server. See our ",y.a.createElement("span",{className:"link"},"Privacy Policy")," for more details."),y.a.createElement("div",{className:"setupButtons center"},y.a.createElement(S.a,{raised:!0,primary:!0,onClick:this.onClickSave,enabled:t.isSaveEnabled},"SAVE"),y.a.createElement(S.a,{raised:!0,marginLeft:24,onClick:this.onClickCancel,enabled:t.isSaveEnabled},"RESET"))))}}]),t}(k.a),N=a(28),M=a(116),D=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"getState",value:function(){var e=f.default.billingManager,t=e.userProperties;return{validBilling:e._hasValidBillingData,premiumStatus:e._premiumStatus,daysLeftInTrial:e.daysLeftInTrial,trialOverHidden:f.default.settings.trialOverHidden.get(),monthlyInvoice:t.monthlyInvoice,invoiceEmail:t.invoiceEmail,invoiceCompany:t.invoiceCompany,invoiceAddress:t.invoiceAddress,isUnsubscribed:t.isUnsubscribed,hasImportedMoodo:!!e.userProperties.gid}}},{key:"onClickDismissTrial",value:function(){f.default.settings.trialOverHidden.set(!0),this.updateState()}},{key:"onClickRestoreMoodo",value:function(e,t){return(new M.a).authAndImportServer(function(e){t()}),!0}},{key:"onUnsubscribedChanged",value:function(e){this.state.isUnsubscribed;f.default.menus.alert({text:"Unsubscribing from emails is not working in the new backend yet. If you need this immediately please contact support."})}},{key:"render",value:function(){var e=f.default.billingManager,t=this.state,a=N.a.getAccountName(),n=N.a.getDefaultAccountID(),i=e.getMonthlyPrice(),r=e.getYearlyPrice();return y.a.createElement("div",{key:"content",className:"new-modal-group"},e.isTrialOver()&&!t.trialOverHidden&&y.a.createElement("div",{className:"new-modal-row-1c"},y.a.createElement("div",{className:"new-modal-row trialEnd"},y.a.createElement("div",null,"Your trial has ended. Please sign up to continue using Premium features."),y.a.createElement("div",{className:"center",style:{marginTop:16}},y.a.createElement(S.a,{raised:!0,onClick:this.onClickDismissTrial},"DISMISS"))),y.a.createElement("hr",null)),y.a.createElement("div",{className:"new-modal-title"},y.a.createElement("div",{className:"title"},a&&"Hi "+a),t.validBilling&&e.isTrialState()&&y.a.createElement("div",{className:"subtext center"},"We hope your trial of Premium is going well."),t.validBilling&&e.hasPremium()&&y.a.createElement("div",{className:"subtext center"},"We are very happy to have you as a Premium Member."),t.validBilling&&!e.hasPremium()&&!e.isTrialState()&&y.a.createElement("div",{className:"subtext center"},"We hope Moo.do is helping you be productive.")),y.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},y.a.createElement("div",{className:"left-header"},"ACCOUNT STATUS"),y.a.createElement("div",{className:"right-content"},y.a.createElement("div",{className:"new-modal-subrow"},y.a.createElement("div",null,y.a.createElement("div",{className:"subtitle"},"Account email"),y.a.createElement("div",{className:"subtext"},n)),y.a.createElement("div",null,y.a.createElement("div",{className:"subtitle"},"Member since"),y.a.createElement("div",{className:"subtext"},e.getJoinDate().toString(f.default.International.getFormat(p.a.DFormat.LongStrDate)))),e.isTrialState()&&!e.isTrialOver()&&y.a.createElement("div",null,y.a.createElement("div",{className:"subtitle"},"Days left in trial"),y.a.createElement("div",{className:"subtext"},t.daysLeftInTrial)),e.hasPremium()&&y.a.createElement("div",null,y.a.createElement("div",{className:"subtitle"},"Premium since"),y.a.createElement("div",{className:"subtext"},e.getPremiumStartDate().toString(f.default.International.getFormat(p.a.DFormat.LongStrDate)))),e.canceledUserHasPremiumAccess()&&y.a.createElement("div",null,y.a.createElement("div",{className:"subtitle"},"Premium end"),y.a.createElement("div",{className:"subtext"},e.premiumEndDateText())),e.hasPremium()&&e.hasSubscription()&&y.a.createElement("div",null,y.a.createElement("div",{className:"subtitle"},"Next billing cycle"),y.a.createElement("div",{className:"subtext"},e.nextBillingDateText()))))),y.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},y.a.createElement("div",{className:"left-header"},"MANAGE ACCOUNT"),y.a.createElement("div",{className:"right-content"},y.a.createElement("div",{className:"new-modal-subrow"},!e.hasPremium()&&y.a.createElement("div",null,y.a.createElement(S.a,{raised:!0,onClick:e.onTapDeleteAccount},"DELETE ACCOUNT")),e.hasPremium()&&e.hasSubscription()&&y.a.createElement("div",null,y.a.createElement(S.a,{raised:!0,onClick:e.onTapUpdatePaymentMethod},"UPDATE PAYMENT METHOD")),e.hasPremium()&&e.hasSubscription()&&y.a.createElement("div",null,y.a.createElement(S.a,{raised:!0,onClick:e.cancelSubscription},"CANCEL PREMIUM")),y.a.createElement("div",null,y.a.createElement(b.a,{checked:e.userProperties.isUnsubscribed,onChange:this.onUnsubscribedChanged},"Unsubscribe from emails"))))),e.hasPremium()&&e.hasSubscription()&&y.a.createElement("div",{className:"new-modal-row new-modal-row-2c"},y.a.createElement("div",{className:"left-header"},"INVOICES"),y.a.createElement("div",{className:"right-content"},y.a.createElement("div",{className:"new-modal-subrow"},y.a.createElement("div",null,"Invoice emails are still being worked on for the new backend. If you need this immediately please contact support."),y.a.createElement("div",null,y.a.createElement(S.a,{raised:!0,onClick:e.onTapViewInvoices},"VIEW INVOICES"))))),!e.hasPremium()&&y.a.createElement("span",{id:"accountSettingsPremium"},y.a.createElement("hr",null),y.a.createElement("div",{className:"new-modal-title",style:{marginTop:24}},y.a.createElement("div",{className:"title"},"Moo.do Premium"),y.a.createElement("div",{className:"subtext center"},"Integrate more of your services together and unlock advanced organization and customization features."),y.a.createElement("div",{className:"center",style:{marginTop:24}},!t.hasImportedMoodo&&y.a.createElement("div",null,y.a.createElement(S.a,{fontSize:14,raised:!0,onClick:this.onClickRestoreMoodo},"Restore from old Moo.do")),y.a.createElement("div",{style:{marginTop:16}},y.a.createElement(S.a,{fontSize:14,raised:!0,primary:!0,onClick:e.onTapSignupMonth},"$"+i+" / month"),y.a.createElement(S.a,{fontSize:14,raised:!0,primary:!0,marginLeft:16,onClick:e.onTapSignupYear},"$"+r+" / year"),y.a.createElement(S.a,{fontSize:14,raised:!0,primary:!0,marginLeft:16,onClick:e.onTapCodeSignup},"Enter Code")))),y.a.createElement("div",{id:"premiumFeatures"},y.a.createElement("div",{className:"flexbox c-border"},y.a.createElement("div",{className:"premiumImg premiumShadow"},y.a.createElement("img",{src:"/img/about/DrivePane.png"})),y.a.createElement("div",{className:"premiumDesc"},y.a.createElement("div",{className:"premiumTitle"},"Google Drive Pane"),y.a.createElement("div",{className:"premiumText"},"Attach documents to your tasks. Dragging a file from your computer into Moo.do automatically uploads it to Drive."))),y.a.createElement("div",{className:"flexbox c-border"},y.a.createElement("div",{className:"premiumImg premiumShadow"},y.a.createElement("img",{src:"/img/about/GCalSettings.jpg"})),y.a.createElement("div",{className:"premiumDesc"},y.a.createElement("div",{className:"premiumTitle"},"Google Calendar Sync"),y.a.createElement("div",{className:"premiumText"},"Two way sync: Manage your Google Calendar in Moo.do and/or sync your Moo.do events with your Google Calendar."))),y.a.createElement("div",{className:"flexbox c-border"},y.a.createElement("div",{className:"premiumImg premiumShadow"},y.a.createElement("img",{src:"/blog/img/update-workspaces.png"})),y.a.createElement("div",{className:"premiumDesc"},y.a.createElement("div",{className:"premiumTitle"},"More than 5 Boards"),y.a.createElement("div",{className:"premiumText"},"Save sets of panes to easily switch between workflows."))),y.a.createElement("div",{className:"flexbox c-border"},y.a.createElement("div",{className:"premiumImg premiumShadow"},y.a.createElement("img",{src:"/img/about/DisplaySettings-Small.jpg"})),y.a.createElement("div",{className:"premiumDesc"},y.a.createElement("div",{className:"premiumTitle"},"Advanced Display Settings"),y.a.createElement("div",{className:"premiumText"},"Customize Moo.do's look and feel to your liking."))),y.a.createElement("div",{className:"flexbox c-border"},y.a.createElement("div",{className:"premiumImg"},y.a.createElement("img",{src:"/img/about/GmailCache.jpg"})),y.a.createElement("div",{className:"premiumDesc"},y.a.createElement("div",{className:"premiumTitle"},"Gmail Sync Time"),y.a.createElement("div",{className:"premiumText"},"Cache emails for up to ",p.a.MaxGmailSyncTime.Premium," days for access while offline and quicker load time.")))),y.a.createElement("table",{id:"pricingTable"},y.a.createElement("tbody",null,y.a.createElement("tr",{className:"c-border c-bg-faded"},y.a.createElement("td",null),y.a.createElement("td",null,"Free"),y.a.createElement("td",null,"Premium")),y.a.createElement("tr",{className:"empty"},y.a.createElement("td",null),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",{className:"header price"},y.a.createElement("td",null,"Price"),y.a.createElement("td",null,"$0"),y.a.createElement("td",null,y.a.createElement("div",null,"$"+i+" / month"),y.a.createElement("div",null,"$"+r+" / year"))),y.a.createElement("tr",{className:"header"},y.a.createElement("td",null,"Core Features"),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",null,y.a.createElement("td",null,"Unlimited items"),y.a.createElement("td",{className:"icon-check"}),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",null,y.a.createElement("td",null,"Powerful search"),y.a.createElement("td",{className:"icon-check"}),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",null,y.a.createElement("td",null,"Realtime collaboration"),y.a.createElement("td",{className:"icon-check"}),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",null,y.a.createElement("td",null,"Multiple Boards"),y.a.createElement("td",null),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",null,y.a.createElement("td",null,"Day, Week, Month views"),y.a.createElement("td",null),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",{className:"empty"},y.a.createElement("td",null),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",{className:"header"},y.a.createElement("td",null,"Plugins"),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",null,y.a.createElement("td",null,y.a.createElement("img",{src:"/img/plugin-gcontacts.png"}),"Google Contacts"),y.a.createElement("td",{className:"icon-check"}),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",null,y.a.createElement("td",null,y.a.createElement("img",{src:"/img/plugin-mailbird.png"}),"Mailbird"),y.a.createElement("td",{className:"icon-check"}),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",null,y.a.createElement("td",null,y.a.createElement("img",{src:"/img/plugin-gdrive.png"}),"Google Drive"),y.a.createElement("td",null),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",{className:"empty"},y.a.createElement("td",null),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",{className:"header"},y.a.createElement("td",null,y.a.createElement("img",{src:"/img/plugin-gmail.png"}),"Gmail"),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",null,y.a.createElement("td",null,"Standard email features"),y.a.createElement("td",{className:"icon-check"}),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",null,y.a.createElement("td",null,"Offline sync"),y.a.createElement("td",null,"5 days"),y.a.createElement("td",null,"120 days")),y.a.createElement("tr",{className:"empty"},y.a.createElement("td",null),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",{className:"header"},y.a.createElement("td",null,y.a.createElement("img",{src:"/img/plugin-gcal.png"}),"Google Calendar"),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",null,y.a.createElement("td",null,"Sync Moo.do tasks"),y.a.createElement("td",null),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",null,y.a.createElement("td",null,"Manage Calendar in Moo.do"),y.a.createElement("td",null),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",{className:"empty"},y.a.createElement("td",null),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",{className:"header"},y.a.createElement("td",null,"Customization"),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",null,y.a.createElement("td",null,"Display settings presets"),y.a.createElement("td",{className:"icon-check"}),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",null,y.a.createElement("td",null,"Advanced display settings"),y.a.createElement("td",null),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",{className:"empty"},y.a.createElement("td",null),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",{className:"header"},y.a.createElement("td",null,"We love you",y.a.createElement("i",{className:"icon-heart"})),y.a.createElement("td",null),y.a.createElement("td",null)),y.a.createElement("tr",null,y.a.createElement("td",null,"Early access to new features"),y.a.createElement("td",null),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",null,y.a.createElement("td",null,"Premium support"),y.a.createElement("td",null),y.a.createElement("td",{className:"icon-check"})),y.a.createElement("tr",{className:"empty"},y.a.createElement("td",null),y.a.createElement("td",null),y.a.createElement("td",null))))))}}]),t}(k.a),P=a(98),I=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.createObservables({isSendingFeedback:!1}),this.refText=y.a.createRef()}},{key:"openSection",value:function(e){this.props.openSection(e)}},{key:"onClickDiscard",value:function(){this.refText.current.value="",this.refText.current.focus()}},{key:"onClickSend",value:function(e,t){var a=this,n=this.refText.current.value;if(n&&n.length>2){this.isSendingFeedback.set(!0);return f.default.sendFeedback("Moo.do Feedback",n).then(function(){a.refText.current.value="",a.isSendingFeedback.set(!1),t&&h.default.isFunction(t)&&t()}),!0}}},{key:"render",value:function(){f.default.billingManager,this.props;var e=this.state;return y.a.createElement("div",{key:"content",className:"new-modal-group"},y.a.createElement("div",{className:"new-modal-title"},y.a.createElement("div",{className:"title"},"Send Feedback"),y.a.createElement("div",{className:"subtext middle"},"Send the developers bug reports, feedback, or suggestions. Your feedback is very helpful in planning what to do next.")),y.a.createElement("div",{className:"earlyAccessFeedback"},y.a.createElement("textarea",{className:"feedbackTextArea c-background c-foreground",ref:this.refText,style:{marginBottom:16,color:e.isSendingFeedback?"#aaa":null}}),e.isSendingFeedback&&y.a.createElement(P.a,{top:100}),y.a.createElement("div",{style:{textAlign:"right"}},y.a.createElement(S.a,{raised:!0,onClick:this.onClickDiscard},"DISCARD"),y.a.createElement(S.a,{raised:!0,primary:!0,marginLeft:16,onClick:this.onClickSend},"SEND"))))}}]),t}(k.a),T=a(35),A=a.n(T),L=a(40),F=a(63),R=a(789),_=(a(784),{width:50,height:40,textAlign:"center"}),O=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.createObservables({addingAccount:!1,errorMessage:"",linkingAccount:void 0,isAddEnabled:!1}),E.a.refresh(),this.listenTo(L.a.onAccountsUpdated)}},{key:"getState",value:function(){var e=f.default.settings.syncAccounts,t=N.a.getDefaultAccountID(),a=e.get()||A()({},t,{}),n=Object.keys(a),i={authTokens:L.a.authTokens,syncAccountsObs:e,syncAccounts:a,accountsList:n};return n.remove(t),n.splice(0,0,t),i}},{key:"onClickAddAccount",value:function(){var e=this;this.errorMessage.set(""),setTimeout(function(){e.refs.addAccount.focus()},0)}},{key:"onClickAddButton",value:function(e,t){var a=this;this.errorMessage.set("");var n=this.refs.addAccount.getValue();if(!this.state.syncAccounts||!this.state.syncAccounts[n]){var i=h.default.clone(f.default.settings.syncAccounts.get()||{}),r=[];i[n]={},this.refs.addGmail.getValue()?(r.push(p.a.PluginID.Gmail),i[n][p.a.PluginID.Gmail]=!0):this.refs.addCalendar.getValue()&&(r.push(p.a.PluginID.GCalendar),i[n][p.a.PluginID.GCalendar]=!0);var l=r.map(function(e){return f.default.pluginManager.getPlugin(e).googleScopes()}).flat();L.a.authAccount(n,l,function(e){e&&(f.default.settings.syncAccounts.set(i),a.refs.addAccount.clearValue()),t()})}return!0}},{key:"onClickFixEmail",value:function(e){}},{key:"onClickRemoveEmail",value:function(e){L.a.removeAccount(e);var t=h.default.clone(f.default.settings.syncAccounts.get());delete t[e],f.default.settings.syncAccounts.set(t)}},{key:"onClickCheckbox",value:function(e,t,a){var n=f.default.pluginManager.getPlugin(t).googleScopes(),i=h.default.cloneDeep(f.default.settings.syncAccounts.get());i[e]||(i[e]={}),a?L.a.authAccount(e,n,function(n){i[e][t]=a,f.default.settings.syncAccounts.set(i)}):(i[e][t]=!1,f.default.settings.syncAccounts.set(i))}},{key:"onChangeAdd",value:function(){var e=this.refs.addAccount.getValue();this.isAddEnabled.set(e&&e.includes("@")&&e.includes(".")&&!(!this.refs.addGmail.getValue()&&!this.refs.addCalendar.getValue()))}},{key:"renderAccountCheckbox",value:function(e,t){var a=this.state.syncAccounts,n=f.default.pluginManager.getPlugin(t).isEnabled();return y.a.createElement("div",{style:_},y.a.createElement(b.a,{disabled:!n,initialChecked:!a[e]||a[e][t],onClick:this.onClickCheckbox.bind(this,e,t)}))}},{key:"renderAccount",value:function(e){var t=N.a.getDefaultAccountID()===e,a=this.state.linkingAccount===e,n=h.default.classNames("accountRow c-border flexbox",{linking:a});return y.a.createElement("div",{key:"row"+e,className:n},y.a.createElement("div",{className:"f1"},a?"":e),this.renderAccountCheckbox(e,p.a.PluginID.Gmail),this.renderAccountCheckbox(e,p.a.PluginID.GCalendar),y.a.createElement("div",{style:_},!t&&!a&&y.a.createElement(y.a.Fragment,null,y.a.createElement(S.a,{icon:"icon-close",iconSize:20,width:40,height:40,onClick:this.onClickRemoveEmail.bind(this,e)}),!1)))}},{key:"renderAddAccount",value:function(){var e=h.default.classNames("accountRow c-border flexbox");return y.a.createElement("div",{key:"rowAdding",className:e},y.a.createElement(F.a,{className:"addAccount f1",ref:"addAccount",floatingText:"Add Account Email",padding:{left:16,right:16},height:40,onChange:this.onChangeAdd}),y.a.createElement("div",{style:_},y.a.createElement(b.a,{ref:"addGmail",onChange:this.onChangeAdd})),y.a.createElement("div",{style:_},y.a.createElement(b.a,{ref:"addCalendar",onChange:this.onChangeAdd})),y.a.createElement("div",{style:_},y.a.createElement(S.a,{padding:8,primary:!0,raised:!0,enabled:this.state.isAddEnabled,onClick:this.onClickAddButton},"ADD")))}},{key:"render",value:function(){var e=this,t=this.state.accountsList,a=y.a.createElement(R.a,{className:"gmailAccountTable"},y.a.createElement("div",{key:"header",className:"flexbox"},y.a.createElement("div",{className:"f1"},"Account"),y.a.createElement("div",{style:_},"Gmail"),y.a.createElement("div",{style:_},"Calendar"),y.a.createElement("div",{style:_})),t.map(function(t){return e.renderAccount(t)}),this.renderAddAccount());return y.a.createElement("div",{key:"content",className:"new-modal-group"},y.a.createElement("div",{className:"new-modal-title"},y.a.createElement("div",{className:"title"},"Sync Accounts"),y.a.createElement("div",{className:"subtext center"},"Manage syncing with multiple Google accounts")),a,this.state.errorMessage&&y.a.createElement("div",{key:"errorMessage",style:{textAlign:"center"}},this.state.errorMessage))}}]),t}(k.a),G=a(204),B=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.hadCalendarSyncUpdated=!1,this.createObservables({addingCalendar:!1}),this.refAddCalendar=y.a.createRef(),E.a.refresh()}},{key:"openSection",value:function(e){this.props.openSection(e)}},{key:"onUnmount",value:function(){if(this.hadCalendarSyncUpdated){var e=f.default.pluginManager.getPlugin(p.a.PluginID.GCalendar);e.isActive()&&e.forceRemoteEventSync()}}},{key:"getState",value:function(){var e=f.default.pluginManager.getPluginGCalendar(),t={premiumStatus:f.default.billingManager._premiumStatus,hasAccounts:e.getSyncAccounts().length>0,GCalendarsAvailable:E.a.GCalendarsAvailable,GCalendarSyncErrors:E.a.GCalendarSyncErrors,GCalendarAddFailure:E.a.GCalendarAddFailure,GCalendarListFailure:E.a.GCalendarListFailure,GCalendarListLoading:E.a.GCalendarListLoading},a=E.a.getPluginOptions(p.a.PluginID.GCalendar);for(var n in a){if(a.hasOwnProperty(n))t[p.a.PluginID.GCalendar+"_"+n]=a[n]}return t}},{key:"toggleCalendarImport",value:function(e){var t=p.a.PluginSettingsID.GCalendar.ImportCalendars,a=(this.state[p.a.PluginID.GCalendar+"_"+t]||[]).slice(0),n=this.isExportCalendar(e);n&&this.disableCalendarExport();var i=a.indexOfWithProperty("id",e.id);if(i>=0)a.removeAt(i);else{try{h.default.PAssert(1163,!n,"Export calendar state must be matching with import calendar state")}catch(r){h.default.reportError(r)}try{h.default.PAssert(1164,e.accountID,"Calendar should have an accountID")}catch(r){h.default.reportError(r)}a.push({id:e.id,summary:e.summary,accessRole:e.accessRole,accountID:e.accountID})}E.a.setPluginOption(p.a.PluginID.GCalendar,t,a,!1),this.hadCalendarSyncUpdated=!0}},{key:"enableCalendarExport",value:function(e){E.a.setPluginOption(p.a.PluginID.GCalendar,p.a.PluginSettingsID.GCalendar.ExportCalendar,e.id,!1),this.hadCalendarSyncUpdated=!0,this.isImportCalendar(e)||this.toggleCalendarImport(e)}},{key:"disableCalendarExport",value:function(){E.a.setPluginOption(p.a.PluginID.GCalendar,p.a.PluginSettingsID.GCalendar.ExportCalendar,null,!1)}},{key:"toggleCalendarExport",value:function(e){this.isExportCalendar(e)?this.disableCalendarExport():this.enableCalendarExport(e)}},{key:"onAddCalendarClick",value:function(e){var t=this;this.addingCalendar.set(e),setTimeout(function(){t.refAddCalendar.current.focus()},0)}},{key:"onAddButtonClick",value:function(e,t){E.a.addCalendar(e,t),this.addingCalendar.set(!1)}},{key:"isImportCalendar",value:function(e){var t=!1;if(this.state.GCalendar_importCalendars)for(var a=0,n=0;n<this.state.GCalendar_importCalendars.length;++n){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var i=this.state.GCalendar_importCalendars[n];if(h.default.isObject(i)||(i={id:i}),i.id===e.id){t=!0;break}}return t}},{key:"isExportCalendar",value:function(e){var t=!1;return this.state.GCalendar_exportCalendar&&(t=this.state.GCalendar_exportCalendar===e.id),t}},{key:"onDisplayOverdueChange",value:function(e){f.default.pluginManager.setSetting(p.a.PluginID.GCalendar,p.a.PluginSettingsID.GCalendar.DisplayOverdueInAgenda,e)}},{key:"onSyncNewEventsChange",value:function(e){f.default.pluginManager.setSetting(p.a.PluginID.GCalendar,p.a.PluginSettingsID.GCalendar.SyncNewEvents,e)}},{key:"onSyncDraggedEventsChange",value:function(e){f.default.pluginManager.setSetting(p.a.PluginID.GCalendar,p.a.PluginSettingsID.GCalendar.SyncDraggedEvents,e)}},{key:"onCreateLocalChange",value:function(e){f.default.pluginManager.setSetting(p.a.PluginID.GCalendar,p.a.PluginSettingsID.GCalendar.CreateLocalEvents,e)}},{key:"updateCalendarEvents",value:function(){var e=f.default.pluginManager.getPlugin(p.a.PluginID.GCalendar);try{h.default.PAssert(1165,e,"GCalendar plugin does not exist. HOW?")}catch(t){h.default.reportError(t)}e&&e.runCalendarSync()}},{key:"onChangeWeeksPast",value:function(e){f.default.pluginManager.setSetting(p.a.PluginID.GCalendar,p.a.PluginSettingsID.GCalendar.WeeksPast,e),clearTimeout(this.timeoutUpdateCalendarEvents),this.timeoutUpdateCalendarEvents=setTimeout(this.updateCalendarEvents,5e3)}},{key:"onChangeWeeksFuture",value:function(e){f.default.pluginManager.setSetting(p.a.PluginID.GCalendar,p.a.PluginSettingsID.GCalendar.WeeksFuture,e),clearTimeout(this.timeoutUpdateCalendarEvents),this.timeoutUpdateCalendarEvents=setTimeout(this.updateCalendarEvents,5e3)}},{key:"comparatorCalendar",value:function(e,t){var a=e.accountID&&t.accountID?e.accountID.localeCompare(t.accountID):0;if(0===a)return e.summary.localeCompare(t.summary);var n=f.default.settings.getUserIdentifier();return e.accountID===n&&(a=-1),t.accountID===n&&(a=1),a}},{key:"onClickSyncAccounts",value:function(){this.openSection(p.a.SettingsSections.Linked)}},{key:"renderTableRows",value:function(){var e=this,t=this.state,a=t.GCalendarsAvailable,n=t.GCalendarSyncErrors,i=f.default.settings.syncAccounts.get(),r=f.default.pluginManager.getPlugin(p.a.PluginID.GCalendar),l=!r.getSetting(p.a.PluginSettingsID.GCalendar.WriteAccess)&&this.state.GCalendar_exportCalendar,o={},s=[];a.sort(this.comparatorCalendar),a.forEach(function(e){o[e.accountID]||(o[e.accountID]=[]),o[e.accountID].push(e)});var c=N.a.getDefaultAccountID(),u=Object.keys(i);return u.includes(c)&&(u.remove(c),u.splice(0,0,c)),Object.keys(i).forEach(function(a){var i=o[a];if(s.push(y.a.createElement("div",{className:"calendarAccount bold c-blue",key:"account_"+a},y.a.createElement("div",null,"Account: "+a),!i&&y.a.createElement(S.a,{raised:!0,style:{width:"auto"},onClick:e.onClickSyncAccounts},"Sync this account"))),i){i.forEach(function(t){var i=e.isImportCalendar(t),o=e.isExportCalendar(t),c="owner"===t.accessRole||"writer"===t.accessRole,u=h.default.classNames("calendarSettingsName",{import:i},{export:o});if(n){var d=n.indexOfWithProperty("id",t.id),m=null,f=null;if(d>=0){var g=n[d];g.result===p.a.SyncResult.FailureNoRead?m=!0:g.result===p.a.SyncResult.FailureNoRead&&(f=!0)}}var v=r.getCalendarBackgroundColor(t.id);s.push(y.a.createElement("div",{key:t.id+a},y.a.createElement("div",{className:u},t.summary||t.id),y.a.createElement(b.a,{checked:i,error:m,checkedColor:v,onChange:e.toggleCalendarImport.bind(e,t)}),c?y.a.createElement(b.a,{checked:o,checkedColor:v,error:m||f||o&&l,radio:!0,onChange:e.toggleCalendarExport.bind(e,t)}):y.a.createElement("div",null)))});var c=t.addingCalendar===a;s.push(y.a.createElement(y.a.Fragment,{key:"add"+a},t.GCalendarAddFailure&&y.a.createElement("div",{key:"footerError"},y.a.createElement("div",{style:{textAlign:"center"}},"There was an error creating your new calendar. Please try again.")),c&&y.a.createElement("div",{key:"footer"},y.a.createElement(F.a,{ref:e.refAddCalendar,floatingText:"New calendar name",padding:{left:0,right:24},height:50,buttonText:"ADD",onButtonClick:e.onAddButtonClick.bind(e,a)})),!c&&y.a.createElement("div",{key:"footer"},y.a.createElement("div",{style:{textAlign:"center"}},y.a.createElement(S.a,{height:"auto",onClick:e.onAddCalendarClick.bind(e,a)},"ADD NEW CALENDAR")))))}}),s}},{key:"renderCalendarSettings",value:function(){var e,t,a,n,i=this.state,r=0,l=i.GCalendarSyncErrors,o=!1;if(l)for(var s=0,c=0;c<l.length;c++){if(s++>5e3&&__infLoop&&__infLoop(s))throw new RangeError;var u=l[c].result;u===p.a.SyncResult.FailureOAuth?o=!0:u!==p.a.SyncResult.FailureNoRead&&u!==p.a.SyncResult.FailureNoWrite||r++}var d=f.default.pluginManager.getPlugin(p.a.PluginID.GCalendar),m=d.getSetting(p.a.PluginSettingsID.GCalendar.WeeksPast),h=d.getSetting(p.a.PluginSettingsID.GCalendar.WeeksFuture),g=d.getSetting(p.a.PluginSettingsID.GCalendar.DisplayOverdueInAgenda),v=d.getSetting(p.a.PluginSettingsID.GCalendar.SyncNewEvents),k=d.getSetting(p.a.PluginSettingsID.GCalendar.SyncDraggedEvents),C=d.getSetting(p.a.PluginSettingsID.GCalendar.CreateLocalEvents);return f.default.billingManager.hasPremiumFeatures()?o&&0===i.GCalendarsAvailable.length?n=y.a.createElement("div",{className:"center"},y.a.createElement("div",{className:"error"},"We encountered a sync error. Please allow access to your calendar."),y.a.createElement("br",null),y.a.createElement(S.a,{raised:!0,primary:!0,onClick:E.a.enablePlugin.bind(E.a,p.a.PluginID.GCalendar)},"ALLOW")):i.GCalendarListFailure?n=y.a.createElement("div",{className:"center"},y.a.createElement("div",{className:"error"},"There was an error syncing your calendar list. Please try again."),y.a.createElement("br",null),y.a.createElement(S.a,{raised:!0,primary:!0,onClick:E.a.updateCalendarList.bind(E.a)},"RETRY")):i.GCalendarListLoading?n=y.a.createElement(P.a,null,"Loading Google Calendars..."):(r>0&&(n=y.a.createElement("div",{className:"center"},y.a.createElement("div",{style:{maxWidth:600,lineHeight:1.5,marginBottom:16},className:"error"},"There was an error reading or saving to your calendars. Please check your Google Calendar settings. The affected calendars are marked with a ",y.a.createElement(b.a,{checked:!0,error:!0,style:{marginLeft:5,marginRight:5}})," below."))),e=y.a.createElement(R.a,{className:"calendarSettingsTable new-modal-row"},y.a.createElement("div",{key:"header",className:"fancyTableHeader"},y.a.createElement("div",null,"Calendar Name"),y.a.createElement("div",null,"Sync"),y.a.createElement("div",null,"Default Save")),this.renderTableRows())):n=y.a.createElement("div",{className:"center"},y.a.createElement("div",{className:"error"},"You must have an active Premium subscription or Trial to use Google Calendar."),y.a.createElement("br",null),y.a.createElement(S.a,{raised:!0,primary:!0,onClick:this.openSection.bind(this,p.a.SettingsSections.Account)},"ABOUT PREMIUM")),t=y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},y.a.createElement("span",{style:{display:"inline-block",width:140}},"Weeks in the past"),y.a.createElement(G.a,{value:m,minValue:0,maxValue:-p.a.CalendarMinSyncWeeks,onChange:this.onChangeWeeksPast}),y.a.createElement("span",{style:{display:"inline-block",marginLeft:32,width:140}},"Weeks in the future"),y.a.createElement(G.a,{value:h,minValue:0,maxValue:p.a.CalendarMaxSyncWeeks,onChange:this.onChangeWeeksFuture})),a=y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},y.a.createElement(b.a,{ref:"displayoverdue",checked:g,onChange:this.onDisplayOverdueChange},"Display overdue Google Calendar events in agenda"),y.a.createElement("div",{className:"subtext"},"In the Agenda view of the Calendar Pane, display events from Google Calendar that happened in the past.")),y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},y.a.createElement(b.a,{ref:"syncDraggedEvents",checked:k,onChange:this.onSyncDraggedEventsChange},"Sync dragged events"),y.a.createElement("div",{className:"subtext"},"Add events to Google Calendar when dragging onto the Calendar pane.")),y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},y.a.createElement(b.a,{ref:"syncNewEvents",checked:v,onChange:this.onSyncNewEventsChange},"Sync new events created in add item popup by default"),y.a.createElement("div",{className:"subtext"},"When adding events in the New Item popup, an event will be created in the selected Google Calendar.")),y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},y.a.createElement(b.a,{ref:"createLocalEvents",checked:C,onChange:this.onCreateLocalChange},"Create a local item for new calendar events by default"),y.a.createElement("div",{className:"subtext"},"When adding events in the New Item popup, a Moo.do item will be created in the current document."))),y.a.createElement("div",{className:"calendarSettings"},n,e,t,a)}},{key:"render",value:function(){var e=this.state.hasAccounts;return y.a.createElement("div",{className:"new-modal-group"},e&&y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},this.renderCalendarSettings()),!e&&y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},y.a.createElement("div",{className:"subtext"},"No sync accounts available. Please check the Sync Accounts settings."),y.a.createElement("div",{style:{marginTop:24}},y.a.createElement(S.a,{raised:!0,primary:!0,onClick:this.onClickSyncAccounts},"Sync Accounts Settings"))))}}]),t}(k.a),U=a(56),V=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"getState",value:function(){return{contacts:U.a._contacts}}},{key:"render",value:function(){var e=this.state;return y.a.createElement("div",{className:"settingPluginOptions"},y.a.createElement("div",{className:"subtext"},y.a.createElement("span",null,"We will not send emails or otherwise communicate with your contacts unless you ask us to."),y.a.createElement("span",null," If you need instant access to contacts you just added you can sync them by pressing the button below, otherwise your contacts will appear automatically after a few hours.")),y.a.createElement("div",{className:"center"},y.a.createElement(S.a,{id:"refreshContacts",raised:!0,primary:!0,onClick:E.a.onTapRefreshContacts},"REFRESH CONTACTS"),y.a.createElement("div",{id:"numContacts"},e.contacts.length+" contacts loaded")))}}]),t}(k.a),H=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.hadGmailSyncUpdated=!1}},{key:"onUnmount",value:function(){if(this.hadGmailSyncUpdated){var e=f.default.pluginManager.getPluginGmail();e.isActive()&&e._forceThreadSync()}}},{key:"getState",value:function(){return{GmailNumSyncd:E.a.GmailNumSyncd,GmailCacheSize:E.a.GmailCacheSize,GmailSyncAccounts:E.a.GmailSyncAccounts}}},{key:"onSyncTimeChanged",value:function(e){f.default.pluginManager.setSetting(p.a.PluginID.Gmail,p.a.PluginSettingsID.Gmail.SyncTime,e),this.hadGmailSyncUpdated=!0}},{key:"onScheduleChange",value:function(e){f.default.pluginManager.setSetting(p.a.PluginID.Gmail,p.a.PluginSettingsID.Gmail.ArchiveOnSchedule,e)}},{key:"onOrganizeChange",value:function(e){f.default.pluginManager.setSetting(p.a.PluginID.Gmail,p.a.PluginSettingsID.Gmail.ArchiveOnOrganize,e)}},{key:"onSignatureChange",value:function(e){f.default.pluginManager.setSetting(p.a.PluginID.Gmail,p.a.PluginSettingsID.Gmail.InsertSignatureAboveReplies,e)}},{key:"onClickSetupAccounts",value:function(){this.props.openSection(p.a.SettingsSections.Linked)}},{key:"onClickFullSync",value:function(e,t){return f.default.pluginManager.getPluginGmail().syncAllAccountsFull(t),!0}},{key:"render",value:function(){var e=f.default.pluginManager.getPlugin(p.a.PluginID.Gmail),t=e.getSetting(p.a.PluginSettingsID.Gmail.SyncTime),a=e.getSetting(p.a.PluginSettingsID.Gmail.ArchiveOnSchedule),n=e.getSetting(p.a.PluginSettingsID.Gmail.ArchiveOnOrganize),i=e.getSetting(p.a.PluginSettingsID.Gmail.InsertSignatureAboveReplies),r=f.default.billingManager.hasPremium()?p.a.MaxGmailSyncTime.Premium:p.a.MaxGmailSyncTime.Free;return y.a.createElement("div",{className:"new-modal-group gmailSettings"},y.a.createElement("div",{className:"new-modal-row new-modal-row-1c center"},y.a.createElement(S.a,{raised:!0,onClick:this.onClickSetupAccounts},"SETUP ACCOUNTS")),y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},y.a.createElement("span",{style:{width:160}},"Offline sync days\xa0\xa0"),y.a.createElement(G.a,{value:t,minValue:0,maxValue:r,onChange:this.onSyncTimeChanged}),y.a.createElement("div",{className:"subtext"},"The number of days in the past that your email will be saved for offline access (0 - ".concat(r,")."))),y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},y.a.createElement(b.a,{ref:"archiveOnSchedule",checked:a,onChange:this.onScheduleChange},"Archive emails when scheduled"),y.a.createElement("div",{className:"subtext"},"If enabled, when you use the 'Schedule' feature to put an email on your calendar it will be archived.")),y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},y.a.createElement(b.a,{ref:"archiveOnOrganize",checked:n,onChange:this.onOrganizeChange},"Archive emails when organized"),y.a.createElement("div",{className:"subtext"},"If enabled, when you drag an email to your outline it will be archived and marked as Moo.do/Handled.")),y.a.createElement("div",{className:"new-modal-row new-modal-row-1c"},y.a.createElement(b.a,{ref:"insertSignatureAboveReplies",checked:i,onChange:this.onSignatureChange},"Insert signature before quoted text in replies"),y.a.createElement("div",{className:"subtext"},"If enabled, your signature will be inserted above the quoted text in replies and will remove the '--' line that precedes it.")),y.a.createElement("div",{className:"new-modal-row new-modal-row-1c center"},y.a.createElement(S.a,{raised:!0,onClick:this.onClickFullSync},"Force Full Sync")))}}]),t}(k.a),W=a(224),K=a(156),z=["overdue","starred","important","#next","#soon","#later","#someday"],Y=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){for(var e=0,t=0,a=0,n=f.default.timeline.agendaSort.get(),i=[],r=Object.keys(n).map(function(e){return{key:e,value:n[e]}}),l=0;l<15;l++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;r.push(l)}for(r.sort(this.sortComparator),l=0;l<z.length;l++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var o=z[l];r.indexOfWithProperty("key",o)<0&&i.push({key:o,value:0})}var s=W.a.getAll();for(l=0;l<s.length;l++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;var c="#"+s[l].text;r.indexOfWithProperty("key",c)<0&&i.push({key:c,value:0})}i.sort(this.sortComparatorNonSort),this.createObservables({sortArray:r,nonSortArray:i,selected:{array:"sort",index:0}})}},{key:"sortComparatorNonSort",value:function(e,t){var a=e.key[0],n=t.key[0];return"#"===a&&"#"!==n?1:"#"===n&&"#"!==a?-1:e.key.localeCompare(t.key)}},{key:"sortComparator",value:function(e,t){return(isNaN(e)?e.value:100*e)-(isNaN(t)?t.value:100*t)}},{key:"moveChild",value:function(e,t,a,n){var i=this.state,r=a&&a!==this.refs.sortList?"nonSort":"sort",l=n&&n!==this.refs.nonSortList?"sort":"nonSort",o=i[r+"Array"],s=i[l+"Array"],c=o===s,u="sort"===r?i.nonSortArray:i.sortArray,d=o[e];c?o.splice(e,1):d.isDragging=!0;var m=u.indexOfWithProperty("key",d.key);m>=0&&u.splice(m,1),s.splice(t,0,d),this[r+"Array"].set(o,!1),this[l+"Array"].set(s,!0)}},{key:"onDragOut",value:function(e,t){var a=t&&t!==this.refs.sortList?"nonSort":"sort",n=this.state[a+"Array"],i="sort"===a?this.nonSortArray:this.sortArray,r=n[e],l=i.indexOfWithProperty("key",r.key);l>=0&&i.splice(l,1)}},{key:"onDragEnd",value:function(e,t,a){var n=e.props.owner,i=e.props.index,r=n&&n!==this.refs.sortList?"nonSort":"sort",l=this.state[r+"Array"][i];if(l.isDragging=!1,t){var o=e.props.owner;(o&&o!==this.refs.nonSortList?this.sortArray:this.nonSortArray).splice(e.props.index,1)}this.sortArray.indexOf(l)<0&&this.nonSortArray.indexOf(l)<0&&this.nonSortArray.push(l),this.sortArray.notify(),a&&this.saveAfterTimeout()}},{key:"saveAfterTimeout",value:function(){this._saveTimeout&&clearTimeout(this._saveTimeout),this._saveTimeout=setTimeout(this.saveToSettings,200)}},{key:"saveToSettings",value:function(){for(var e,t=0,a=this.state.sortArray,n={},i=-1,r=0;r<a.length;r++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var l=a[r];if(isNaN(l)){var o=100*i,s=e&&e>o?e+1:o+1;n[l.key]=s,e=s}else i=l}f.default.timeline.saveAgendaSort(n)}},{key:"getDragTargetFromElement",value:function(e){var t=h.default.findParent(e,"fancySortableList"),a=this.refs;return t===a.sortList.getElement()?a.sortList:t===a.nonSortList.getElement()?a.nonSortList:void 0}},{key:"onClickMoveToOtherList",value:function(){var e=this.state.selected,t=e.array,a=e.index,n="sort"===t?"nonSort":"sort",i=this.state[t+"Array"][a];isNaN(i)&&(this[t+"Array"].splice(a,1),this[n+"Array"].splice(0,0,i)),this.saveAfterTimeout()}},{key:"onClickListItem",value:function(e,t){this.selected.set({array:e,index:t})}},{key:"renderListItem",value:function(e,t,a,n){var i=this.state,r=this.onClickListItem.bind(this,n,t);if(isNaN(e)){var l=e.key.capitalize(),o=h.default.classNames(a,{"tag c-tag":l.startsWith("#")},{"selected c-popup-item":i.selected.array===n&&i.selected.index===t});return y.a.createElement("div",{key:l,className:o,onClick:r,"data-isdragging":e.isDragging},l)}return y.a.createElement("div",{key:e,className:a+" date c-date","data-nodrag":!0},y.a.createElement("span",{className:"icon-calendar"}),y.a.createElement("span",null,"Today"+(e>0?" + "+e+" days":"")))}},{key:"render",value:function(){var e,t=0,a=0,n=this.state,i=n.sortArray,r=n.nonSortArray,l=[],o=[],s=n.selected.array,c=h.default.classNames("agendaSortSettingsItem c-background"),u=h.default.classNames({"icon-arrow_forward":"sort"===s},{"icon-arrow_back":"nonSort"===s});for(e=0;e<i.length;e++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;l.push(this.renderListItem(i[e],e,c,"sort"))}for(e=0;e<r.length;e++){if(a++>5e3&&__infLoop&&__infLoop(a))throw new RangeError;o.push(this.renderListItem(r[e],e,c,"nonSort"))}return y.a.createElement("div",{className:"agendaSortListsContainer modal-row flexbox flexvert",style:{height:"100%"}},y.a.createElement("div",{className:"modal-row-title"},"Change agenda sort"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Customize the sort order of the Agenda. Drag and drop tags and blocks to arrange them relative to dates."),y.a.createElement("div",{className:"modal-row agendaSortLists flexbox f1"},y.a.createElement("div",{className:"agendaSortListWrapper flexbox flexvert f1"},y.a.createElement("div",{className:"bold"},"Order on Agenda"),y.a.createElement(K.a,{className:"agendaSortList f1 c-border-light",moveChild:this.moveChild,onDragEnd:this.onDragEnd,onDragOut:this.onDragOut,ref:"sortList",getDragTargetFromElement:this.getDragTargetFromElement,classDragging:"c-foreground-very-faded"},l)),y.a.createElement("div",{className:"flexbox flexvert height100"},y.a.createElement(S.a,{raised:!0,round:!1,icon:u,onClick:this.onClickMoveToOtherList})),y.a.createElement("div",{className:"agendaSortListWrapper flexbox flexvert f1"},y.a.createElement("div",{className:"bold"},"Not on Agenda"),y.a.createElement(K.a,{className:"agendaSortList agendaSortList f1 c-border-light",moveChild:this.moveChild,onDragEnd:this.onDragEnd,onDragOut:this.onDragOut,ref:"nonSortList",getDragTargetFromElement:this.getDragTargetFromElement,classDragging:"c-foreground-very-faded"},o))))}}]),t}(k.a),j=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){}},{key:"onChangeDateFormat",value:function(){var e=this.refs.selectDateFormat.value;f.default.settings.dateFormat.set(e)}},{key:"onChangeDayWeekStart",value:function(){f.default.settings.dayWeekStart.set(+this.refs.selectDayWeekStart.value)}},{key:"onNotificationsChanged",value:function(e){var t=this;f.default.settings.disableNotifications.set(!e),e?g.a.usesHTML5Notifications()?g.a.hasNotificationPermission()||Notification.requestPermission(function(e){"granted"===e?f.default.timeline.updateNotifications():(f.default.settings.disableNotifications.set(!0),t.refs.notifications.setValue(!1),f.default.toasts.pushMessage({text:"To enable notifications in the future, you must first give permission in your browser.",action:p.a.MessageAction.OpenURL,actionText:"LEARN MORE",data:{url:"https://support.google.com/chrome/answer/6148059"}}))}):f.default.timeline.updateNotifications():f.default.timeline.clearNotifications()}},{key:"onDelayChanged",value:function(e){f.default.settings.notificationDelay.set(e),h.default.sendEvent("NotificationDelay","Changed",e)}},{key:"onCustomDaysChanged",value:function(e){f.default.settings.calendarCustomDays.set(e)}},{key:"render",value:function(){var e=f.default.International.getCurrentDateFormat(),t=f.default.settings.dayWeekStart.get(),a=f.default.settings.calendarCustomDays.get(),n=f.default.settings.notificationDelay.get(),i=!f.default.settings.disableNotifications.get()&&g.a.hasNotificationPermission();return y.a.createElement("div",{key:"content"},y.a.createElement("div",{className:"modal-row"},y.a.createElement("div",{className:"settingsName ib bold"},"Date Format:"),y.a.createElement("select",{defaultValue:e,ref:"selectDateFormat",onChange:this.onChangeDateFormat},y.a.createElement("option",{value:p.a.DateFormat.MDY},"M/D/Y"),y.a.createElement("option",{value:p.a.DateFormat.DMY},"D/M/Y"),y.a.createElement("option",{value:p.a.DateFormat.DMYDot},"D.M.Y"),y.a.createElement("option",{value:p.a.DateFormat.YMD},"Y/M/D"),y.a.createElement("option",{value:p.a.DateFormat.YMDDot},"Y.M.D"))),y.a.createElement("div",{className:"modal-row"},y.a.createElement("div",{className:"settingsName ib bold"},"Start week on:"),y.a.createElement("select",{defaultValue:t,ref:"selectDayWeekStart",onChange:this.onChangeDayWeekStart},y.a.createElement("option",{value:0},"Sunday"),y.a.createElement("option",{value:1},"Monday"))),y.a.createElement("div",{className:"modal-row"},y.a.createElement("div",{className:"settingsName ib bold"},"Number of days in custom calendar view (Premium):"),y.a.createElement(G.a,{value:a,minValue:1,maxValue:14,readonly:!f.default.billingManager.hasPremiumFeatures(),onChange:this.onCustomDaysChanged})),g.a.supportsNotifications()&&y.a.createElement(y.a.Fragment,null,y.a.createElement("hr",null),y.a.createElement("div",{className:"modal-row"},y.a.createElement(b.a,{ref:"notifications",checked:i,onChange:this.onNotificationsChanged},"Enable notifications"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Display native notifications for items that use a specific @date and time in their text. These are only displayed for the currently open document on this device.")),y.a.createElement("div",{className:"modal-row"},y.a.createElement("span",{className:"settingsName ib bold"},"Notification Time"),y.a.createElement(G.a,{value:n,minValue:0,maxValue:120,interval:5,onChange:this.onDelayChanged}),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Time in minutes before event to display a notification about the event."))))}}]),t}(k.a),q=a(122),Z=a(788),Q=a(61),J=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.createObservables({backupText:""})}},{key:"getState",value:function(){return{backupFrequency:f.default.settings.backupFrequency,lastBackupText:this.getLastBackupText()}}},{key:"getLastBackupText",value:function(){var e,t=q.a.getLastBackup();if(t>0){var a=new Date(t);e=Q.a.toHumanText(a)}else e="Not backed up";return e}},{key:"onToggleEnable",value:function(){var e,t=this,a=f.default.settings.backupFrequency;if(this.state.backupFrequency>0)e=0,a.set(e);else{var n=function(){e=p.a.DefaultBackupFrequency,t.refs.selectTimeframe.setValue("Hours"),a.set(e)};q.a.isDriveBackupAuthorized()?n():q.a.authorize(function(e){e&&n()})}}},{key:"onChangeFrequency",value:function(){var e=this.refs.frequency.getValue(),t=this.refs.selectTimeframe.getValue(),a="Days"===t&&p.a.MSPerDay||"Hours"===t&&p.a.MSPerHour||"Minutes"===t&&p.a.MSPerMinute;f.default.settings.backupFrequency.set(e*a)}},{key:"onClickBackupNow",value:function(){var e=this;this.backupText.set("Backing up..."),q.a.backupAll().then(function(){return e.backupText.set("Backup complete")})}},{key:"onClickBackupList",value:function(){f.default.menus.closeModal(p.a.Modals.Settings),f.default.menus.openModal(p.a.Modals.Backups)}},{key:"render",value:function(){var e=this.state,t=this.state.backupFrequency||0,a="Hours";return t>=p.a.MSPerDay?(a="Days",t/=p.a.MSPerDay):t>=p.a.MSPerHour?(a="Hours",t/=p.a.MSPerHour):t>=0&&(a="Minutes",t/=p.a.MSPerMinute),t=Math.floor(t),y.a.createElement("div",{key:"content"},y.a.createElement("div",{className:"modal-row"},y.a.createElement(b.a,{checked:t>0,onChange:this.onToggleEnable},"Enable Drive backups"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},'Automatically backup all data into the "Moo.do Backups" folder in your Google Drive. Backups will run on the following frequency, only if there are any new changes to back up. Moo.do keeps its own encrypted revision history, but this gives you an extra level of security that your data is safe. Note that backups to Drive are not encrypted.')),y.a.createElement("div",{className:"modal-row"},y.a.createElement("div",{className:"settingsName ib bold"},"Every:"),y.a.createElement(G.a,{value:t,ref:"frequency",minValue:0,maxValue:60,interval:1,onChange:this.onChangeFrequency}),y.a.createElement(Z.a,{defaultValue:a,style:{marginLeft:16,height:32},ref:"selectTimeframe",onChange:this.onChangeFrequency},y.a.createElement("option",{value:"Minutes"},"Minutes"),y.a.createElement("option",{value:"Hours"},"Hours"),y.a.createElement("option",{value:"Days"},"Days"))),y.a.createElement("div",{className:"modal-row"},"Last backup: "+e.lastBackupText),y.a.createElement("div",{className:"modal-row"},y.a.createElement(S.a,{raised:!0,onClick:this.onClickBackupNow},"BACKUP NOW"),e.backupText&&y.a.createElement("div",{className:"modal-subtext"},e.backupText)),y.a.createElement("div",{className:"modal-row"},y.a.createElement(S.a,{raised:!0,onClick:this.onClickBackupList},"SEE BACKUP HISTORY")))}}]),t}(k.a),$=a(62),X=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.createObservables({error:"",isChanging:!1})}},{key:"getState",value:function(){var e=f.default.settings.encryptionKeys;return{encryptionKeys:e,hasUserPassword:e.get()&&!!e.get()[p.a.EncryptionKeys.UserPassword]}}},{key:"onClickSave",value:function(e,t){var a=this,n=this.refs.pass1.getValue(),i=this.refs.pass2.getValue(),r=p.a.EncryptionKeys.UserPassword;if(n)if(n!==i)this.error.set("Passwords do not match");else{if(!(n.length<5))return f.default.menus.confirmEncrypt(n,function(e){e?q.a.backupAuto().then(function(){(a.state.isChanging?f.default.crypto.updateKey:f.default.crypto.addKey)({name:r,password:n,sentinelSalt:N.a.getEncryptionUid()}).then(function(e){$.a.updateUserEncryption(e).then(function(){a.isChanging.set(!1),t()})})}):t()}),!0;this.error.set("Password is too short. Please enter a longer password to make it secure.")}else this.error.set("No password entered")}},{key:"onClickContact",value:function(){f.default.menus.openModal(p.a.Modals.ReportBug)}},{key:"onClickChange",value:function(){this.isChanging.set(!0)}},{key:"onClickRemove",value:function(e,t){f.default.menus.confirm("Are you sure you want to remove your encryption password?",function(e){e?$.a.updateUserEncryption(f.default.crypto.getGlobalKeyInfo()).then(function(){t()}):t()})}},{key:"render",value:function(){var e=this.state,t=!e.hasUserPassword||e.isChanging,a={marginTop:8,width:240};return v.createElement("div",{key:"content"},v.createElement("div",{className:"modal-row"},t?v.createElement(v.Fragment,null,v.createElement("div",null,v.createElement("div",{className:"settingsName ib bold"},"Encrypt data with a password"),v.createElement("div",{className:"modal-subtext c-foreground-faded"},"Your data is encrypted client-side before sending it to the database. For an extra level of security, you can enter your own password for the encryption. This makes it so that even the developers cannot read your data, and it cannot be recovered.")),v.createElement("div",{style:{marginTop:16}},v.createElement(F.a,{type:"password",placeholder:"Password",ref:"pass1",style:a,onButtonClick:this.onClickSave}),v.createElement(F.a,{type:"password",placeholder:"Confirm Password",ref:"pass2",style:a,onButtonClick:this.onClickSave})),v.createElement("div",{className:"modal-warning flexbox c-warning"},v.createElement("i",{className:"icon-warning"}),v.createElement("div",null,"If you lose this password, all your data will be lost! For your security, Moo.do cannot recover your password, so keep your password safe. This is competely optional (see above).")),e.error&&v.createElement("div",{className:"error",style:{marginTop:8}},e.error),v.createElement("div",{style:{marginTop:8}},v.createElement(S.a,{raised:!0,primary:!0,onClick:this.onClickSave},"Save"))):v.createElement(v.Fragment,null,v.createElement("div",null,v.createElement("div",{className:"settingsName ib bold"},"Your data is encrypted with your password"),v.createElement("div",{style:{marginTop:16}},v.createElement(S.a,{raised:!0,primary:!0,onClick:this.onClickChange},"Change"),v.createElement(S.a,{raised:!0,cancel:!0,marginLeft:16,onClick:this.onClickRemove},"Remove"))))))}}]),t}(k.a),ee=a(19),te=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"onClickClearLocal",value:function(){ee.a.clearLocalData()}},{key:"render",value:function(){return v.createElement("div",{key:"content"},v.createElement("div",{className:"modal-row"},v.createElement("div",{style:{marginTop:8}},v.createElement(S.a,{raised:!0,onClick:this.onClickClearLocal},"Clear Local Data"))))}}]),t}(k.a),ae=a(195),ne=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){var e=this;this.createObservables({backupDir:"",docsDir:"",error:""}),f.default.ElectronBridge.getPrefs(function(t){e.backupDir.set(t.backupDir),e.docsDir.set(t.docsDir)})}},{key:"getState",value:function(){return{backupLocal:f.default.settings.backupLocal,encryptLocalFiles:f.default.settings.encryptLocalFiles}}},{key:"onChangeBackups",value:function(e){f.default.settings.backupLocal.set(e)}},{key:"onChangeEncryption",value:function(e){f.default.settings.encryptLocalFiles.set(e)}},{key:"onChangeFilesFolder",value:function(e){this.refs.picker.click()}},{key:"onPickerChange",value:function(e){var t=this,a=e.target.files;if(a){var n=a[0];if(n){var i=n.path;if(i){var r=!1,l=function(){f.default.ElectronBridge.setDocsFolder(i,r,function(e){e||(t.docsDir.set(i),ae.a.reload())})};ae.a.numDocuments()>0?f.default.menus.confirm("Do you want move existing files to the new folder?",function(e){r=e,l()}):l()}}}}},{key:"render",value:function(){var e=this.state,t=e.backupLocal,a=e.backupDir,n=e.docsDir,i=e.error,r=e.encryptLocalFiles;return y.a.createElement("div",{key:"content"},y.a.createElement("div",{className:"modal-row"},y.a.createElement(b.a,{checked:t,onChange:this.onChangeBackups},"Enable automatic backups"),y.a.createElement("div",{className:"modal-subtext c-foreground-faded"},"Backups saved in: ".concat(a))),g.a.supportLocalFiles()&&y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"modal-row"},y.a.createElement("div",{className:"settingsName ib bold",style:{marginBottom:8}},"Save local files in:"),y.a.createElement(F.a,{readonly:!0,value:n,buttonText:"CHANGE",onButtonClick:this.onChangeFilesFolder}),y.a.createElement("input",{type:"file",ref:"picker",className:"hidden",webkitdirectory:"",directory:"",onChange:this.onPickerChange})),y.a.createElement("div",{className:"modal-row"},y.a.createElement(b.a,{checked:r,onChange:this.onChangeEncryption},"Encrypt local files"))),y.a.createElement("div",{className:"modal-row"},y.a.createElement("div",{className:"error"},i)))}}]),t}(k.a),ie=a(787),re=a(790),le=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"init",value:function(){this.createObservables({sectionOpened:this.props.section||p.a.SettingsSections.General}),E.a.getPluginEnabledObservable(p.a.PluginID.GCalendar).listen(this.onToggleGCal)}},{key:"getState",value:function(){for(var e=0,t={},a=E.a.pluginsAvailable,n=0;n<a.length;++n){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var i=a[n];t[i+"Enabled"]=E.a.getPluginEnabledObservable(i)}return t}},{key:"onToggleGCal",value:function(e){e&&setTimeout(function(){this.openSection(p.a.SettingsSections.GoogleCalendar)}.bind(this),0)}},{key:"openSection",value:function(e){var t=!E.a.isSaveEnabled.get();t||f.default.menus.confirm("You have unsaved changes. Are you sure you want to cancel your changes?",function(t){t&&(E.a.isSaveEnabled.set(!1),this.openSection(e))}.bind(this)),t&&this.sectionOpened.set(e)}},{key:"showEarlyAndAccount",value:function(){return!h.default.isDemoMode()||!1}},{key:"_checkLinkedAccountErrors",value:function(){for(var e=0,t=f.default.pluginManager.getPluginGmail().getSyncAccounts(),a=0;a<t.length;++a){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;t[a]}return!1}},{key:"_checkSectionError",value:function(e){var t=!1;switch(e){case p.a.SettingsSections.Linked:t=this._checkLinkedAccountErrors()}return t}},{key:"renderListItem",value:function(e){var t=this._checkSectionError(e),a=y.a.createElement("span",null,e);return t&&(a=y.a.createElement("span",null,y.a.createElement("span",null,a),y.a.createElement("span",{className:"error icon-warning"}))),y.a.createElement(re.a,{selected:this.state.sectionOpened===e,onClick:this.openSection.bind(this,e)},a)}},{key:"renderPluginListItem",value:function(e,t){var a=f.default.pluginManager.getPlugin(e),n=a&&a.hasSettingsError(),i=y.a.createElement("span",null,t);return n&&(i=y.a.createElement("span",null,i,y.a.createElement("span",{className:"error icon-warning"}))),y.a.createElement(re.a,{selected:this.state.sectionOpened===t,onClick:this.openSection.bind(this,t)},i)}},{key:"isPluginEnabled",value:function(e){return this.state[e+"Enabled"]}},{key:"render",value:function(){f.default.billingManager;var e,t,a=this.state.sectionOpened;switch(a){case p.a.SettingsSections.General:t=x;break;case p.a.SettingsSections.Plugins:t=w;break;case p.a.SettingsSections.Invite:t=C.a;break;case p.a.SettingsSections.EarlyAccess:t=I;break;case p.a.SettingsSections.Account:t=D;break;case p.a.SettingsSections.Linked:t=O;break;case p.a.SettingsSections.GoogleCalendar:t=B;break;case p.a.SettingsSections.Contacts:t=V;break;case p.a.SettingsSections.Gmail:t=H;break;case p.a.SettingsSections.Agenda:t=Y;break;case p.a.SettingsSections.Dates:t=j;break;case p.a.SettingsSections.Backups:t=J;break;case p.a.SettingsSections.Security:t=X;break;case p.a.SettingsSections.Debug:t=te;break;case p.a.SettingsSections.DesktopApp:t=ne;break;default:try{h.default.PAssert(948,!1,"Unknown settings sections requested: ",a)}catch(i){h.default.reportError(i)}}e=y.a.createElement(t,{key:"content",openSection:this.openSection});var n="Settings - "+this.sectionOpened.get();return y.a.createElement(ie.a,{id:"modalSettings",title:n,width:800,height:900,sidebarWidth:180,modalID:p.a.Modals.Settings,scrollable:!0},y.a.createElement("div",{key:"sidebar"},y.a.createElement(re.a,{header:!0},"SETTINGS"),this.renderListItem(p.a.SettingsSections.General),this.renderListItem(p.a.SettingsSections.Dates),this.renderListItem(p.a.SettingsSections.Agenda),g.a.isNativeApp()&&this.renderListItem(p.a.SettingsSections.DesktopApp),this.renderListItem(p.a.SettingsSections.Backups),this.showEarlyAndAccount()&&this.renderListItem(p.a.SettingsSections.Account),this.renderListItem(p.a.SettingsSections.Security),y.a.createElement(re.a,{header:!0},"PLUGINS"),this.renderListItem(p.a.SettingsSections.Plugins),(this.isPluginEnabled(p.a.PluginID.Gmail)||this.isPluginEnabled(p.a.PluginID.GCalendar))&&this.showEarlyAndAccount()&&this.renderListItem(p.a.SettingsSections.Linked),this.isPluginEnabled(p.a.PluginID.GCalendar)&&this.renderPluginListItem(p.a.PluginID.GCalendar,p.a.SettingsSections.GoogleCalendar),this.isPluginEnabled(p.a.PluginID.Contacts)&&this.renderPluginListItem(p.a.PluginID.Contacts,p.a.SettingsSections.Contacts),this.isPluginEnabled(p.a.PluginID.Gmail)&&this.renderPluginListItem(p.a.PluginID.Gmail,p.a.SettingsSections.Gmail),y.a.createElement(re.a,{header:!0},"SUPPORT"),this.renderListItem(p.a.SettingsSections.EarlyAccess),this.renderListItem(p.a.SettingsSections.Debug)),e)}}]),t}(k.a);t.default=le},836:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(0),g=a(1),v=a(3),y=a(2),k=a(21),E=a(53),C=a(66),b=a(205),S=a(793),x=a(89),w=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){this.DISABLE_LISTENER_ASSERT=!0}},{key:"getState",value:function(e){for(var t=0,a=e.pane,n=a.search,i={hasFilter:!1,showHelp:v.default.settings.shouldShowHelp("searchHelp"),viewState:a.viewState,viewMode:a.getViewMode(),sortModeBlocks:a.supportsSortBlocks()&&a.getSortModeBlocks(),sortModeItems:a.supportsSortItems()&&a.getSortModeItems(),calendars:C.a.GCalendarsAvailable,displayCalendars:a.displayCalendars,displayLocalItems:a.displayLocalItems,closedHelps:v.default.settings.closedHelps},r=0;r<n.filters.length;r++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var l=n.filters[r];i[l.name]=l.value,i[l.name+"Enabled"]=l.enabled,0!==l.value.get()&&(i.hasFilter=!0)}return i}},{key:"onMount",value:function(){this.listenTo(this.props.pane.search.onChanged)}},{key:"componentWillReceiveProps",value:function(e){e.pane!==this.props.pane&&(this.refreshListeners(e),this.updateState(e))}},{key:"onClickSelectCalendars",value:function(e){v.default.menus.openContextMenu({componentName:"ReactContextMenuCalendars",element:e.target,pane:this.props.pane})}},{key:"saveScrollOfTop",value:function(){this.props.pane.getInfiniteList().saveScrollOfTop(!0)}},{key:"onToggleButton",value:function(e){this.saveScrollOfTop(),this.props.pane.search.toggleFilter(e)}},{key:"setPriority",value:function(e){this.saveScrollOfTop();var t=this.props.pane.search;t.getFilterValue("priority")===e&&(e=0),t.setFilter("priority",e)}},{key:"onClickCloseHelp",value:function(){v.default.settings.closeHelp("searchHelp")}},{key:"onClickShowHelp",value:function(){v.default.settings.uncloseHelp("searchHelp")}},{key:"renderSearchButton",value:function(e){var t=this.props.pane,a="showOnlyMatches"===e.name&&t.isViewFlatList()?1:e.value.get();return y.createElement(b.a,{key:e.name,filter:e,filterValue:a,search:t.search,hasBorder:!0})}},{key:"renderSearchPriority",value:function(){var e=this.props.pane.search.filter_priority.value.get(),t=f.default.classNames("searchPriorities c-border-light",{hasSelected:!!e}),a=f.default.classNames("searchPriority searchP0",{selected:e===g.a.VMLIFlag.P0}),n=f.default.classNames("searchPriority searchP1",{selected:e===g.a.VMLIFlag.P1}),i=f.default.classNames("searchPriority searchP2",{selected:e===g.a.VMLIFlag.P2});return y.createElement("span",{key:"priority",className:t},y.createElement("span",{className:a,"data-tooltip":"Show only high priority",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P0)}),y.createElement("span",{className:n,"data-tooltip":"Show medium priority and higher",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P1)}),y.createElement("span",{className:i,"data-tooltip":"Show low priority and higher",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P2)}))}},{key:"render",value:function(){for(var e=0,t=this.state,a=this.props.pane,n=a.search,i=t.showHelp,r=[],l=[],o=f.default.classNames("filterSection flexbox",{showHelp:i}),s=0;s<n.filters.length;s++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var c=n.filters[s];c.enabled.get()&&(c.isOption?c.hideInView||l.push(this.renderSearchButton(c)):c.icon?r.push(this.renderSearchButton(c)):"priority"===c.name&&r.push(this.renderSearchPriority()))}if(a.isViewDates()){var u=a.isCalFilterActive(),d=f.default.classNames("buttonCalendars searchButton icon-calendar c-border-light c-button",{selected:u});l.push(y.createElement("div",{key:"calendars",className:d,onClick:this.onClickSelectCalendars,"data-tooltip":"Select calendars to display in this pane"}))}return y.createElement("div",{className:o},r.length>0&&y.createElement("div",null,i&&y.createElement(x.a,null,"Filters"),y.createElement("div",{className:"searchFilters c-border-light"},r)),l.length>0&&y.createElement("div",null,i&&y.createElement(x.a,null,"Options"),y.createElement("div",{className:"searchFilters c-border-light"},l)))}}]),t}(k.a),N=a(20),M=a(57),D=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"getState",value:function(){var e=0,t=this.props.pane,a=t.search,n={closedHelps:v.default.settings.closedHelps,hasFilter:!1,matches:E.a.matches,showHelp:v.default.settings.shouldShowHelp("searchHelp"),viewState:t.viewState,viewMode:t.getViewMode(),sortModeBlocks:t.supportsSortBlocks()&&t.getSortModeBlocks(),sortModeItems:t.supportsSortItems()&&t.getSortModeItems()};t.isViewDates()&&(n.calendars=C.a.GCalendarsAvailable,n.displayCalendars=t.displayCalendars,n.displayLocalItems=t.displayLocalItems);for(var i=0;i<a.filters.length;i++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var r=a.filters[i];n[r.name]=r.value,n[r.name+"Enabled"]=r.enabled,0!==r.value.get()&&(n.hasFilter=!0)}return n}},{key:"onMount",value:function(){this.listenTo(this.props.pane.search.onChanged),this.props.pane.onDestroyed.listen(this.close)}},{key:"onUnmount",value:function(){E.a.onClosed(),this.props.pane.onDestroyed.unlisten(this.close)}},{key:"close",value:function(){v.default.menus.isContextMenuOpen("ReactContextMenuSearch")&&v.default.menus.closeContextMenu("ReactContextMenuSearch")}},{key:"onSettingChanged",value:function(){this.updateState()}},{key:"onClickSelectCalendars",value:function(e){v.default.menus.openContextMenu({componentName:"ReactContextMenuCalendars",element:e.target,pane:this.props.pane})}},{key:"saveScrollOfTop",value:function(){this.props.pane.getInfiniteList().saveScrollOfTop(!0)}},{key:"onToggleButton",value:function(e){this.saveScrollOfTop(),this.props.pane.search.toggleFilter(e)}},{key:"setPriority",value:function(e){this.saveScrollOfTop();var t=this.props.pane.search;t.getFilterValue("priority")===e&&(e=0),t.setFilter("priority",e)}},{key:"onClickCloseHelp",value:function(){v.default.settings.closeHelp("searchHelp")}},{key:"onClickShowHelp",value:function(){v.default.settings.uncloseHelp("searchHelp")}},{key:"renderSearchButton",value:function(e){var t=this.props.pane;return y.createElement(b.a,{key:e.name,filter:e,filterValue:e.value.get(),search:t.search,hasBorder:!0})}},{key:"renderSearchPriority",value:function(){var e=this.props.pane.search.filter_priority.value.get(),t=f.default.classNames("searchPriorities",{hasSelected:!!e}),a=f.default.classNames("searchPriority searchP0",{selected:e===g.a.VMLIFlag.P0}),n=f.default.classNames("searchPriority searchP1",{selected:e===g.a.VMLIFlag.P1}),i=f.default.classNames("searchPriority searchP2",{selected:e===g.a.VMLIFlag.P2});return y.createElement("span",{key:"priority",className:t},y.createElement("span",{className:a,"data-tooltip":"Show only high priority",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P0)}),y.createElement("span",{className:n,"data-tooltip":"Show medium priority and higher",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P1)}),y.createElement("span",{className:i,"data-tooltip":"Show low priority and higher",onClick:this.setPriority.bind(this,g.a.VMLIFlag.P2)}))}},{key:"render",value:function(){for(var e=0,t=this.props,a=this.props.pane,n=this.state,r=a.search,l=[],o=[],s=0;s<r.filters.length;s++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var c=r.filters[s];c.enabled.get()&&(c.isOption?o.push(this.renderSearchButton(c)):c.icon?l.push(this.renderSearchButton(c)):"priority"===c.name&&l.push(this.renderSearchPriority()))}if(a.isViewDates()){var u=a.isCalFilterActive(),d=f.default.classNames("buttonCalendars",{selected:u});o.push(y.createElement(N.a,{key:"calendars",height:g.a.SearchHeight,className:d,onClick:this.onClickSelectCalendars,padding:8,tooltip:"Select calendars to display in this pane"},"Calendars"))}return y.createElement(M.a,i()({},t,{key:"contextMenuSearch"+a.id,id:"contextMenuSearch",maxHeight:400,element:t.element}),n.matches.length>0&&y.createElement(S.default,{onlyMatches:!0,matches:n.matches}),0===n.matches.length&&y.createElement(y.Fragment,null,y.createElement("div",{className:"flexbox"},!1!==t.showFilters&&y.createElement(w,{pane:a}),y.createElement("div",{className:"f1"}),!n.showHelp&&y.createElement(N.a,{className:"searchHelpButton",icon:"icon-question",iconSize:12,width:32,height:32,onClick:this.onClickShowHelp})),n.showHelp&&y.createElement(y.Fragment,null,!1!==t.showFilters&&y.createElement("hr",null),y.createElement("div",{className:"rel"},y.createElement(x.a,null,"Hints"),y.createElement(N.a,{className:"searchHintsClose",icon:"icon-close",iconSize:14,width:36,height:28,onClick:this.onClickCloseHelp}),y.createElement("div",{className:"searchHints c-foreground-light"},y.createElement("div",null,y.createElement("span",null,y.createElement("b",null,"-word")),"hide items including word"),y.createElement("div",null,y.createElement("span",null,"a ",y.createElement("b",null,"or")," b"),"show items matching a or b"),y.createElement("div",null,y.createElement("span",null,y.createElement("b",null,"#tag")),"show items with #tag"),y.createElement("div",null,y.createElement("span",null,y.createElement("b",null,"+name")),"show items with +name"),y.createElement("div",null,y.createElement("span",null,"date:",y.createElement("b",null,"<date>")),"show items on date"),y.createElement("div",null,y.createElement("span",null,"date:today+",y.createElement("b",null,"<num>")),"show items <num> days in the future"),y.createElement("div",null,y.createElement("span",null,"before:",y.createElement("b",null,"<date>")),"show items before date"),y.createElement("div",null,y.createElement("span",null,"after:",y.createElement("b",null,"<date>")),"show items after date"),y.createElement("div",null,y.createElement("span",null,"date:overdue"),"show overdue items"),y.createElement("div",null,y.createElement("span",null,g.a.Prefix.Header," or ",g.a.Prefix.Header2),"show project items"),y.createElement("div",null,y.createElement("span",null,g.a.Prefix.Task),"show task items"),y.createElement("div",null,y.createElement("span",null,g.a.Prefix.Bullet2),"show bullet items"),y.createElement("div",null,y.createElement("span",null,g.a.SearchFilterTexts.Star),"show starred items"),y.createElement("div",null,y.createElement("span",null,g.a.SearchFilterTexts.Pri2," or ",g.a.SearchFilterTexts.Pri1," or ",g.a.SearchFilterTexts.Pri0),"show priority items"),y.createElement("div",null,y.createElement("span",null,y.createElement("b",null,g.a.PrefixItemAutocomplete+"item")),"zoom into item"))))))}}]),t}(k.a);t.default=D},837:function(e,t,a){"use strict";a.r(t);var n=a(68),i=a.n(n),r=a(5),l=a.n(r),o=a(6),s=a.n(o),c=a(10),u=a.n(c),d=a(9),m=a.n(d),h=a(11),p=a.n(h),f=a(0),g=a(1),v=a(3),y=a(19),k=a(2),E=a.n(k),C=a(21),b=a(8),S=a(7),x=a(24),w=a(45),N=a(107),M=a(795),D=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"onFocus",value:function(){var e=this.props.component.refs[this.props.target];e&&e.focus()}},{key:"render",value:function(){return E.a.createElement("input",{className:"fancyFocusGuard",onFocus:this.onFocus,tabIndex:this.props.tabIndex})}}]),t}(C.a),P=a(80),I=a(63),T=a(20),A=a(57),L=a(788),F=function(e){function t(){return l()(this,t),u()(this,m()(t).apply(this,arguments))}return p()(t,e),s()(t,[{key:"init",value:function(){var e=this.props.item,t=v.default.pluginManager.getPlugin(g.a.PluginID.GCalendar);this.createObservables({canSyncDate:e&&!!e.getMooDate(),addingLocal:!t.isActive()||v.default.pluginManager.getSetting(g.a.PluginID.GCalendar,g.a.PluginSettingsID.GCalendar.CreateLocalEvents),addingRemote:t.isActive()&&v.default.pluginManager.getSetting(g.a.PluginID.GCalendar,g.a.PluginSettingsID.GCalendar.SyncNewEvents),selectedDocument:e&&e.getDocumentOwner()?e.getDocumentOwner():y.a.getDefaultDocument()})}},{key:"getHotkeys",value:function(){return[w.a.create(g.a.KeyCode.Escape,!0,g.a.Primary.Either,g.a.Shift.Either,this.onEscape),w.a.create(g.a.KeyCode.D,!0,g.a.Primary.Yes,g.a.Shift.Yes,this.onHotkeyDate),w.a.create(g.a.KeyCode.C,!0,g.a.Primary.Never,g.a.Shift.No,this.onHotkeyCreateEvent)]}},{key:"getState",value:function(){var e=this.props.item;return{flags:e.flags,maxWidth:this.props.pane?Math.min(this.props.pane.getWidth()-20,400):400,isStarred:e.isStarred(),priority:e.getPriority()}}},{key:"onMount",value:function(){this.props.item.itemChanged.listen(this.onItemChanged),x.a.listen("windowResize",this.onResize),x.a.listen("panesChanged",this.onResize)}},{key:"onResize",value:function(){var e=this;this.updateState(),setTimeout(function(){e.refs.menu&&e.refs.menu.updateState()},300)}},{key:"onUnmount",value:function(){this.props.item.itemChanged.unlisten(this.onItemChanged);var e=this.props;if(e.addOnSave&&this.needsSave){b.d.beginAction();var t=this.addItem(),a=t.item,n=t.parent,i=t.insertIndex;e.beginSave&&e.beginSave();try{var r=e.options;if(r)for(var l=0,o=0;o<r.length;o++){if(l++>5e3&&__infLoop&&__infLoop(l))throw new RangeError;var s=r[o],c=this.refs[s.text];if(c&&c.getValue())try{s.cb(a)}catch(k){f.default.reportError(k)}}if(e.children)for(var u=0,d=0;d<e.children.length;d++){if(u++>5e3&&__infLoop&&__infLoop(u))throw new RangeError;var m=e.children[d].clone(a,g.a.ChangeType.Local);a.insertItem(m)}var h=v.default.pluginManager.getPluginGCalendar(),p=this.refs.checkAddCalendar;if(h&&h.isAvailable()&&p&&p.getValue()&&this.refs.selectCalendar){var y=this.refs.selectCalendar.getValue();h.createEventForItem(a,y)}isNaN(i)||n.insertItem(a,i)}catch(E){f.default.reportError(E)}b.d.endAction(),e.endSave&&e.endSave()}x.a.unlisten("windowResize",this.onResize),x.a.unlisten("panesChanged",this.onResize)}},{key:"onItemChanged",value:function(){var e=this.props.item;this.canSyncDate.set(!!e.getMooDate())}},{key:"onHotkeyDate",value:function(){v.default.menus.openContextMenu({componentName:"ReactContextMenuDate",element:this.refs.item.getElement(),item:this.props.item,pane:this.props.pane})}},{key:"onHotkeyCreateEvent",value:function(){var e=v.default.pluginManager.getPluginGCalendar(),t=this.props.item;e&&(this.props.addOnSave?this.state.canSyncDate&&this.refs.checkAddCalendar&&this.refs.checkAddCalendar.setValue(!0):(e.createEventForItem(t),t.itemChanged.notify()))}},{key:"onKeyDownItem",value:function(e){S.a.getKeyCode(e)===g.a.KeyCode.Enter?(this.save(),e.preventDefault()):this.wasAKeyPressed=!0}},{key:"save",value:function(){this.props.item.hasText()?(this.needsSave=!0,v.default.menus.closeContextMenu()):v.default.toasts.pushMessage({text:"Please enter text for the item before adding it.",timeout:2e3})}},{key:"addItem",value:function(){var e=this.props.item,t=!0,a=v.default.pluginManager.getPluginGCalendar();if(a&&a.isAvailable()&&this.refs.checkAddLocal&&(t=this.refs.checkAddLocal.getValue()),e.getRawText().length>0){if(t){var n=this.props.parent,i=this.refs.addTo.getItem();if(i&&(n=i.item),this.props.selectDocument&&!i)n=y.a.getDocumentById(this.refs.selectDocument.getValue()).getRootItem();var r=e.clone(n,g.a.ChangeType.AllLocal),l=this.refs.noteText.getValue();if(l){var o=r.createNote();o&&o.setText(l,g.a.ChangeType.Local)}return{item:r,parent:n,insertIndex:0}}return{item:e}}return{}}},{key:"onEscape",value:function(){this.wasEscapeKeyPressed=!0,v.default.menus.closeContextMenu()}},{key:"onNoteValueSet",value:function(){this.refs.menu.updateState()}},{key:"onKeyDownNote",value:function(e){S.a.getKeyCode(e)===g.a.KeyCode.Enter&&(S.a.mac&&e.metaKey||!S.a.mac&&e.ctrlKey)&&this.save()}},{key:"onClickStar",value:function(){var e=this.props.item;e.setStarred(!e.isStarred(),g.a.ChangeType.Local)}},{key:"setPriority",value:function(e){var t=this.props.item;t.getPriority()===e&&(e=g.a.VMLIFlag.None),t.setPriority(e,g.a.ChangeType.Local)}},{key:"onChangeAddToCalendar",value:function(e){!e&&this.refs.checkAddLocal&&this.refs.checkAddLocal.setValue(!0),this.addingRemote.set(e)}},{key:"onChangeAddLocal",value:function(e){!e&&this.refs.checkAddCalendar&&this.refs.checkAddCalendar.setValue(!0),this.addingLocal.set(e)}},{key:"onChangeCalendar",value:function(e){var t=this.props.item;v.default.pluginManager.getPluginGCalendar().setCalendarForItem(t,e)}},{key:"onChangeDocument",value:function(e){this.selectedDocument.set(y.a.getDocumentById(e))}},{key:"renderCalendarSelector",value:function(){var e=this.props,t=e.item,a=e.addOnSave,n=this.state.addingRemote,i=v.default.pluginManager.getPluginGCalendar().getWriteableCalendarsForItem(t),r=i.calendars,l=i.selected;!l&&a&&(l=v.default.pluginManager.getSetting(g.a.PluginID.GCalendar,g.a.PluginSettingsID.GCalendar.ExportCalendar));var o=f.default.classNames("c-foreground-faded",{disabled:!n});return r?E.a.createElement("div",{className:"detailsSection flexbox"},E.a.createElement("span",{className:o},"Calendar:"),E.a.createElement(L.a,{defaultValue:l,style:{marginLeft:16,height:32},ref:"selectCalendar",onChange:this.onChangeCalendar,disabled:!n},E.a.createElement("option",{value:""},"None"),r.map(function(e){return E.a.createElement("option",{key:e.id,value:e.id},e.summary)}))):void 0}},{key:"render",value:function(){var e,t=this.props,a=this.state,n=a.addingLocal,r=a.addingRemote,l=a.canSyncDate,o=a.priority,s=a.isStarred,c=a.selectedDocument,u=t.pane,d=t.item,m=this.state.maxWidth,h=f.default.parentTextForItem(d),p=t.children||(u?u.getSubItems(d,!0):[]),k=d.allowTextEditing(),C=k&&(d.canHaveNote()||d.hasNote()),b=(l=l,v.default.pluginManager.getPlugin(g.a.PluginID.GCalendar)),S=b&&b.isAvailable()&&b.isEnabled(),x=S&&(l||t.showCalendarButtons),w=d.hasPluginAttachment(g.a.PluginID.GCalendar);if(p.length>0){var F=0;e=[];p[0].getPadding(u);for(var R=0;R<p.length;R++){if(F++>5e3&&__infLoop&&__infLoop(F))throw new RangeError;var _=p[R];e.push(E.a.createElement(N.a,{key:_.id,item:_,pane:t.pane,padded:!0,allowDrag:!1}))}}var O,G=10,B=f.default.classNames("c-foreground-faded",{disabled:!n});return t.selectDocument&&(O=y.a.getDocumentsArray()),E.a.createElement(A.a,i()({},t,{key:d.id+"_Edit",id:"contextMenuItemDetails",className:"flexbox flexvert",width:400,maxWidth:m,onEscape:this.onEscape,ref:"menu"}),E.a.createElement(D,{component:this,target:"buttonSave",tabIndex:G++}),h&&E.a.createElement("div",{className:"detailsSection flexbox itemContext c-foreground-faded"},E.a.createElement("div",{className:"c-foreground-faded"},"Parents"),E.a.createElement("div",null,h)),E.a.createElement("div",{className:"detailsSection flexbox noShrink"},E.a.createElement("div",{className:"c-foreground-faded"},"Item text"),E.a.createElement(N.a,{ref:"item",className:"detailsItem c-background c-border",item:d,onKeyDown:this.onKeyDownItem,selectIndex:t.selectIndex,showPriority:!0,shouldSave:!t.addOnSave,autocompleteMode:"all",tabIndex:G,inItemDetails:!0,allowDrag:!t.addOnSave,pane:u,editable:k})),t.selectDocument&&E.a.createElement("div",{className:"detailsSection flexbox"},E.a.createElement("div",{className:B},"Document"),E.a.createElement(L.a,{className:"f1",ref:"selectDocument",style:{height:32},defaultValue:c.id,onChange:this.onChangeDocument},O.map(function(e){return E.a.createElement("option",{key:e.id,value:e.id},e.text.get())}))),t.addOnSave&&E.a.createElement("div",{className:"detailsSection flexbox"},E.a.createElement("div",{className:B},"Add to"),E.a.createElement(I.a,{autocompleteMode:"item",autocompleteItem:c.getRootItem(),height:33,placeholder:"Select item to add to",tabIndex:G++,ref:"addTo",pane:this.props.pane,disabled:!n,onKeyDown:this.onKeyDownItem})),C&&E.a.createElement("div",{className:"detailsSection flexbox"},E.a.createElement("div",{className:"c-foreground-faded"},"Note"),E.a.createElement(M.a,{className:"c-border",ref:"noteText",item:d,heightEmpty:34,heightValue:150,onValueSet:this.onNoteValueSet,onKeyDown:this.onKeyDownNote,tabIndex:G++})),E.a.createElement("div",{className:"detailsSection flexbox"},E.a.createElement("div",{className:"c-foreground-faded"},"Options"),E.a.createElement("span",{className:"itemDetailOption c-border pointer",onClick:this.onClickStar},E.a.createElement("span",{className:"c-foreground-super-faded"},"Star:"),E.a.createElement("i",{className:f.default.classNames("starButton icon-star c-foreground-super-faded",{selected:s})})),E.a.createElement("span",{className:"itemDetailOption c-border"},E.a.createElement("span",{className:"c-foreground-super-faded"},"Priority:"),E.a.createElement("span",{className:f.default.classNames("searchPriority searchP0",{selected:o===g.a.VMLIFlag.P0}),onClick:this.setPriority.bind(this,g.a.VMLIFlag.P0)}),E.a.createElement("span",{className:f.default.classNames("searchPriority searchP1",{selected:o===g.a.VMLIFlag.P1}),onClick:this.setPriority.bind(this,g.a.VMLIFlag.P1)}),E.a.createElement("span",{className:f.default.classNames("searchPriority searchP2",{selected:o===g.a.VMLIFlag.P2}),onClick:this.setPriority.bind(this,g.a.VMLIFlag.P2)}))),t.addOnSave&&(S||t.options)&&E.a.createElement("div",{className:"detailsSection"},x&&E.a.createElement(P.a,{key:"addLocal",initialChecked:n,ref:"checkAddLocal",onChange:this.onChangeAddLocal,disabled:!x,tabIndex:x?G++:void 0},"Add to document"),x&&E.a.createElement(P.a,{key:"addToCalendar",initialChecked:r,ref:"checkAddCalendar",onChange:this.onChangeAddToCalendar,disabled:!x,tabIndex:x?G++:void 0},"Add to Google Calendar"),t.options&&t.options.map(function(e){return E.a.createElement(P.a,{key:e.text,initialChecked:e.value,ref:e.text,tabIndex:G++},e.text)})),(x||w)&&this.renderCalendarSelector(),e&&E.a.createElement("div",{className:"detailsSection"},E.a.createElement("div",{className:"c-foreground-faded"},"Subitems"),E.a.createElement("div",{className:"children c-border"},e)),t.addOnSave&&E.a.createElement("div",{className:"bottomRow flexbox"},E.a.createElement(T.a,{onClick:this.onEscape},"CANCEL"),E.a.createElement(T.a,{primary:!0,marginLeft:8,onClick:this.save,tabIndex:G++,ref:"buttonSave"},"SAVE")),E.a.createElement(D,{component:this,target:"item",tabIndex:G++}))}}]),t}(C.a);t.default=F},838:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(1),f=a(3),g=a(2),v=a.n(g),y=a(99),k=a(21),E=Object.assign||function(e){for(var t=0,a=1;a<arguments.length;a++){if(t++>5e3&&__infLoop&&__infLoop(t))throw new RangeError;var n=arguments[a];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},C={},b=p.a.Modals;C[b.Lightbox]=a(796),C[b.Prompt]=a(797),C[b.Settings]=a(835),C[b.Alert]=a(798),C[b.Billing]=a(799),C[b.Confirm]=a(800),C[b.Options]=a(801),C[b.ExportData]=a(802),C[b.ImportData]=a(803),C[b.Backups]=a(804),C[b.ReportProblem]=a(805),C[b.DeleteAccount]=a(806),C[b.Invoices]=a(807),C[b.ShareDoc]=a(808),C[b.ReportBug]=a(809),C[b.EnterCode]=a(810),C[b.ImportMoodo]=a(811),C[b.ConfirmEncrypt]=a(812);var S=C,x=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"getState",value:function(){return{modals:f.default.menus.modalStack}}},{key:"onComponentError",value:function(e,t){f.default.menus.modalStack.clear()}},{key:"renderModal",value:function(e){var t=e.id,a=S[t].default;try{h.default.PAssert(386,a,"Could not find modal with id "+t)}catch(n){h.default.reportError(n)}return v.a.createElement(a,E({key:e.id},e))}},{key:"render",value:function(){for(var e=0,t=[],a=0;a<this.state.modals.length;a++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;t.push(this.renderModal(this.state.modals[a]))}var n=h.default.classNames("modals",{none:0===t.length});return v.a.createElement(y.CSSTransitionGroup,{className:n,transitionName:"modalTransition",transitionEnterTimeout:400,transitionLeaveTimeout:300},t)}}]),t}(k.a);t.default=x},839:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a.n(n),r=a(6),l=a.n(r),o=a(10),s=a.n(o),c=a(9),u=a.n(c),d=a(11),m=a.n(d),h=a(0),p=a(3),f=a(2),g=a.n(f),v=a(99),y=a(21),k={ReactAutocomplete:a(793),ReactContextMenuOverviewOptions:a(813),ReactContextMenuGmailSort:a(814),ReactContextMenuSearch:a(836),ReactContextMenuNameBoard:a(815),ReactContextMenuSelectGmailAccount:a(816),ReactContextMenuAddItem:a(817),ReactContextMenuCalendars:a(818),ReactContextMenuInsertLink:a(819),ReactContextMenuContactDetails:a(820),ReactNotePopup:a(821),ReactItemDetailsPopup:a(837),ReactContextMenuEmailDetails:a(822),ReactContextMenuItem:a(823),ReactContextMenuOnlineStatus:a(824),ReactContextMenuAuthorize:a(825),ReactContextMenuHelp:a(826),ReactContextMenuShare:a(827),ReactContextMenuOptions:a(828),ReactContextMenuUpsell:a(829),ReactContextMenuDropZone:a(830),ReactContextMenuDate:a(831),ReactContextMenuDocumentPassword:a(832),ReactContextMenuPaneView:a(833)},E=function(e){function t(){return i()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),l()(t,[{key:"getState",value:function(){return{contextMenus:p.default.menus.contextMenuStack,noFade:p.default.menus.contextMenuNoFade,isDragging:p.default.DragDrop.isVisible}}},{key:"onComponentError",value:function(e,t){p.default.menus.contextMenuStack.clear()}},{key:"onClickBackground",value:function(e){var t=p.default.menus.getTopContextMenu();t&&p.default.menus.closeContextMenu(t),h.default.preventDefault(e),h.default.stopPropagation(e)}},{key:"render",value:function(){for(var e=0,t=this.state,a=[],n=0;n<t.contextMenus.length;n++){if(e++>5e3&&__infLoop&&__infLoop(e))throw new RangeError;var i=t.contextMenus[n];if(i.noBackdrop||a.push(g.a.createElement("div",{key:"backdrop_"+n,className:"contextMenusBackdrop",onMouseDown:this.onClickBackground})),i.fn)a.push(i.fn(i));else if(i.componentName){i.key=i.key||i.componentName,i.id=i.id||i.key;var r=k[i.componentName].default;a.push(g.a.createElement(r,i))}}var l=h.default.classNames("contextMenusReact",{open:a.length>0},{takeClick:a.length>0&&!i.noBackdrop},{none:0===a.length},{hideBackground:t.noFade});return g.a.createElement(v.CSSTransitionGroup,{className:l,transitionName:"contextMenuAnim",transitionEnterTimeout:150,transitionLeaveTimeout:200},a)}}]),t}(y.a);t.default=E}}]);
